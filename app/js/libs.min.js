!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(c){"use strict";var r,a=window.Slick||{};r=0,(a=function(t,e){var i,n=this;n.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:c(t),appendDots:c(t),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(t,e){return c('<button type="button" />').text(e+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},n.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},c.extend(n,n.initials),n.activeBreakpoint=null,n.animType=null,n.animProp=null,n.breakpoints=[],n.breakpointSettings=[],n.cssTransitions=!1,n.focussed=!1,n.interrupted=!1,n.hidden="hidden",n.paused=!0,n.positionProp=null,n.respondTo=null,n.rowCount=1,n.shouldClick=!0,n.$slider=c(t),n.$slidesCache=null,n.transformType=null,n.transitionType=null,n.visibilityChange="visibilitychange",n.windowWidth=0,n.windowTimer=null,i=c(t).data("slick")||{},n.options=c.extend({},n.defaults,e,i),n.currentSlide=n.options.initialSlide,n.originalSettings=n.options,void 0!==document.mozHidden?(n.hidden="mozHidden",n.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(n.hidden="webkitHidden",n.visibilityChange="webkitvisibilitychange"),n.autoPlay=c.proxy(n.autoPlay,n),n.autoPlayClear=c.proxy(n.autoPlayClear,n),n.autoPlayIterator=c.proxy(n.autoPlayIterator,n),n.changeSlide=c.proxy(n.changeSlide,n),n.clickHandler=c.proxy(n.clickHandler,n),n.selectHandler=c.proxy(n.selectHandler,n),n.setPosition=c.proxy(n.setPosition,n),n.swipeHandler=c.proxy(n.swipeHandler,n),n.dragHandler=c.proxy(n.dragHandler,n),n.keyHandler=c.proxy(n.keyHandler,n),n.instanceUid=r++,n.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,n.registerBreakpoints(),n.init(!0)}).prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},a.prototype.addSlide=a.prototype.slickAdd=function(t,e,i){var n=this;if("boolean"==typeof e)i=e,e=null;else if(e<0||e>=n.slideCount)return!1;n.unload(),"number"==typeof e?0===e&&0===n.$slides.length?c(t).appendTo(n.$slideTrack):i?c(t).insertBefore(n.$slides.eq(e)):c(t).insertAfter(n.$slides.eq(e)):!0===i?c(t).prependTo(n.$slideTrack):c(t).appendTo(n.$slideTrack),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slides.each(function(t,e){c(e).attr("data-slick-index",t)}),n.$slidesCache=n.$slides,n.reinit()},a.prototype.animateHeight=function(){var t=this;if(1===t.options.slidesToShow&&!0===t.options.adaptiveHeight&&!1===t.options.vertical){var e=t.$slides.eq(t.currentSlide).outerHeight(!0);t.$list.animate({height:e},t.options.speed)}},a.prototype.animateSlide=function(t,e){var i={},n=this;n.animateHeight(),!0===n.options.rtl&&!1===n.options.vertical&&(t=-t),!1===n.transformsEnabled?!1===n.options.vertical?n.$slideTrack.animate({left:t},n.options.speed,n.options.easing,e):n.$slideTrack.animate({top:t},n.options.speed,n.options.easing,e):!1===n.cssTransitions?(!0===n.options.rtl&&(n.currentLeft=-n.currentLeft),c({animStart:n.currentLeft}).animate({animStart:t},{duration:n.options.speed,easing:n.options.easing,step:function(t){t=Math.ceil(t),!1===n.options.vertical?i[n.animType]="translate("+t+"px, 0px)":i[n.animType]="translate(0px,"+t+"px)",n.$slideTrack.css(i)},complete:function(){e&&e.call()}})):(n.applyTransition(),t=Math.ceil(t),!1===n.options.vertical?i[n.animType]="translate3d("+t+"px, 0px, 0px)":i[n.animType]="translate3d(0px,"+t+"px, 0px)",n.$slideTrack.css(i),e&&setTimeout(function(){n.disableTransition(),e.call()},n.options.speed))},a.prototype.getNavTarget=function(){var t=this.options.asNavFor;return t&&null!==t&&(t=c(t).not(this.$slider)),t},a.prototype.asNavFor=function(e){var t=this.getNavTarget();null!==t&&"object"==typeof t&&t.each(function(){var t=c(this).slick("getSlick");t.unslicked||t.slideHandler(e,!0)})},a.prototype.applyTransition=function(t){var e=this,i={};!1===e.options.fade?i[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:i[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,!1===e.options.fade?e.$slideTrack.css(i):e.$slides.eq(t).css(i)},a.prototype.autoPlay=function(){var t=this;t.autoPlayClear(),t.slideCount>t.options.slidesToShow&&(t.autoPlayTimer=setInterval(t.autoPlayIterator,t.options.autoplaySpeed))},a.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},a.prototype.autoPlayIterator=function(){var t=this,e=t.currentSlide+t.options.slidesToScroll;t.paused||t.interrupted||t.focussed||(!1===t.options.infinite&&(1===t.direction&&t.currentSlide+1===t.slideCount-1?t.direction=0:0===t.direction&&(e=t.currentSlide-t.options.slidesToScroll,t.currentSlide-1==0&&(t.direction=1))),t.slideHandler(e))},a.prototype.buildArrows=function(){var t=this;!0===t.options.arrows&&(t.$prevArrow=c(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=c(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),!0!==t.options.infinite&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},a.prototype.buildDots=function(){var t,e,i=this;if(!0===i.options.dots&&i.slideCount>i.options.slidesToShow){for(i.$slider.addClass("slick-dotted"),e=c("<ul />").addClass(i.options.dotsClass),t=0;t<=i.getDotCount();t+=1)e.append(c("<li />").append(i.options.customPaging.call(this,i,t)));i.$dots=e.appendTo(i.options.appendDots),i.$dots.find("li").first().addClass("slick-active")}},a.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,e){c(e).attr("data-slick-index",t).data("originalStyling",c(e).attr("style")||"")}),t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?c('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),!0!==t.options.centerMode&&!0!==t.options.swipeToSlide||(t.options.slidesToScroll=1),c("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),!0===t.options.draggable&&t.$list.addClass("draggable")},a.prototype.buildRows=function(){var t,e,i,n,r,s,a,o=this;if(n=document.createDocumentFragment(),s=o.$slider.children(),0<o.options.rows){for(a=o.options.slidesPerRow*o.options.rows,r=Math.ceil(s.length/a),t=0;t<r;t++){var l=document.createElement("div");for(e=0;e<o.options.rows;e++){var c=document.createElement("div");for(i=0;i<o.options.slidesPerRow;i++){var u=t*a+(e*o.options.slidesPerRow+i);s.get(u)&&c.appendChild(s.get(u))}l.appendChild(c)}n.appendChild(l)}o.$slider.empty().append(n),o.$slider.children().children().children().css({width:100/o.options.slidesPerRow+"%",display:"inline-block"})}},a.prototype.checkResponsive=function(t,e){var i,n,r,s=this,a=!1,o=s.$slider.width(),l=window.innerWidth||c(window).width();if("window"===s.respondTo?r=l:"slider"===s.respondTo?r=o:"min"===s.respondTo&&(r=Math.min(l,o)),s.options.responsive&&s.options.responsive.length&&null!==s.options.responsive){for(i in n=null,s.breakpoints)s.breakpoints.hasOwnProperty(i)&&(!1===s.originalSettings.mobileFirst?r<s.breakpoints[i]&&(n=s.breakpoints[i]):r>s.breakpoints[i]&&(n=s.breakpoints[i]));null!==n?null!==s.activeBreakpoint&&n===s.activeBreakpoint&&!e||(s.activeBreakpoint=n,"unslick"===s.breakpointSettings[n]?s.unslick(n):(s.options=c.extend({},s.originalSettings,s.breakpointSettings[n]),!0===t&&(s.currentSlide=s.options.initialSlide),s.refresh(t)),a=n):null!==s.activeBreakpoint&&(s.activeBreakpoint=null,s.options=s.originalSettings,!0===t&&(s.currentSlide=s.options.initialSlide),s.refresh(t),a=n),t||!1===a||s.$slider.trigger("breakpoint",[s,a])}},a.prototype.changeSlide=function(t,e){var i,n,r=this,s=c(t.currentTarget);switch(s.is("a")&&t.preventDefault(),s.is("li")||(s=s.closest("li")),i=r.slideCount%r.options.slidesToScroll!=0?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,t.data.message){case"previous":n=0==i?r.options.slidesToScroll:r.options.slidesToShow-i,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-n,!1,e);break;case"next":n=0==i?r.options.slidesToScroll:i,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+n,!1,e);break;case"index":var a=0===t.data.index?0:t.data.index||s.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(a),!1,e),s.children().trigger("focus");break;default:return}},a.prototype.checkNavigable=function(t){var e,i;if(i=0,t>(e=this.getNavigableIndexes())[e.length-1])t=e[e.length-1];else for(var n in e){if(t<e[n]){t=i;break}i=e[n]}return t},a.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&(c("li",t.$dots).off("click.slick",t.changeSlide).off("mouseenter.slick",c.proxy(t.interrupt,t,!0)).off("mouseleave.slick",c.proxy(t.interrupt,t,!1)),!0===t.options.accessibility&&t.$dots.off("keydown.slick",t.keyHandler)),t.$slider.off("focus.slick blur.slick"),!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide),!0===t.options.accessibility&&(t.$prevArrow&&t.$prevArrow.off("keydown.slick",t.keyHandler),t.$nextArrow&&t.$nextArrow.off("keydown.slick",t.keyHandler))),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),c(document).off(t.visibilityChange,t.visibility),t.cleanUpSlideEvents(),!0===t.options.accessibility&&t.$list.off("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&c(t.$slideTrack).children().off("click.slick",t.selectHandler),c(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),c(window).off("resize.slick.slick-"+t.instanceUid,t.resize),c("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),c(window).off("load.slick.slick-"+t.instanceUid,t.setPosition)},a.prototype.cleanUpSlideEvents=function(){var t=this;t.$list.off("mouseenter.slick",c.proxy(t.interrupt,t,!0)),t.$list.off("mouseleave.slick",c.proxy(t.interrupt,t,!1))},a.prototype.cleanUpRows=function(){var t;0<this.options.rows&&((t=this.$slides.children().children()).removeAttr("style"),this.$slider.empty().append(t))},a.prototype.clickHandler=function(t){!1===this.shouldClick&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault())},a.prototype.destroy=function(t){var e=this;e.autoPlayClear(),e.touchObject={},e.cleanUpEvents(),c(".slick-cloned",e.$slider).detach(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.$prevArrow.length&&(e.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove()),e.$nextArrow&&e.$nextArrow.length&&(e.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove()),e.$slides&&(e.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){c(this).attr("style",c(this).data("originalStyling"))}),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.detach(),e.$list.detach(),e.$slider.append(e.$slides)),e.cleanUpRows(),e.$slider.removeClass("slick-slider"),e.$slider.removeClass("slick-initialized"),e.$slider.removeClass("slick-dotted"),e.unslicked=!0,t||e.$slider.trigger("destroy",[e])},a.prototype.disableTransition=function(t){var e={};e[this.transitionType]="",!1===this.options.fade?this.$slideTrack.css(e):this.$slides.eq(t).css(e)},a.prototype.fadeSlide=function(t,e){var i=this;!1===i.cssTransitions?(i.$slides.eq(t).css({zIndex:i.options.zIndex}),i.$slides.eq(t).animate({opacity:1},i.options.speed,i.options.easing,e)):(i.applyTransition(t),i.$slides.eq(t).css({opacity:1,zIndex:i.options.zIndex}),e&&setTimeout(function(){i.disableTransition(t),e.call()},i.options.speed))},a.prototype.fadeSlideOut=function(t){var e=this;!1===e.cssTransitions?e.$slides.eq(t).animate({opacity:0,zIndex:e.options.zIndex-2},e.options.speed,e.options.easing):(e.applyTransition(t),e.$slides.eq(t).css({opacity:0,zIndex:e.options.zIndex-2}))},a.prototype.filterSlides=a.prototype.slickFilter=function(t){var e=this;null!==t&&(e.$slidesCache=e.$slides,e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(t).appendTo(e.$slideTrack),e.reinit())},a.prototype.focusHandler=function(){var i=this;i.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(t){t.stopImmediatePropagation();var e=c(this);setTimeout(function(){i.options.pauseOnFocus&&(i.focussed=e.is(":focus"),i.autoPlay())},0)})},a.prototype.getCurrent=a.prototype.slickCurrentSlide=function(){return this.currentSlide},a.prototype.getDotCount=function(){var t=this,e=0,i=0,n=0;if(!0===t.options.infinite)if(t.slideCount<=t.options.slidesToShow)++n;else for(;e<t.slideCount;)++n,e=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;else if(!0===t.options.centerMode)n=t.slideCount;else if(t.options.asNavFor)for(;e<t.slideCount;)++n,e=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;else n=1+Math.ceil((t.slideCount-t.options.slidesToShow)/t.options.slidesToScroll);return n-1},a.prototype.getLeft=function(t){var e,i,n,r,s=this,a=0;return s.slideOffset=0,i=s.$slides.first().outerHeight(!0),!0===s.options.infinite?(s.slideCount>s.options.slidesToShow&&(s.slideOffset=s.slideWidth*s.options.slidesToShow*-1,r=-1,!0===s.options.vertical&&!0===s.options.centerMode&&(2===s.options.slidesToShow?r=-1.5:1===s.options.slidesToShow&&(r=-2)),a=i*s.options.slidesToShow*r),s.slideCount%s.options.slidesToScroll!=0&&t+s.options.slidesToScroll>s.slideCount&&s.slideCount>s.options.slidesToShow&&(a=t>s.slideCount?(s.slideOffset=(s.options.slidesToShow-(t-s.slideCount))*s.slideWidth*-1,(s.options.slidesToShow-(t-s.slideCount))*i*-1):(s.slideOffset=s.slideCount%s.options.slidesToScroll*s.slideWidth*-1,s.slideCount%s.options.slidesToScroll*i*-1))):t+s.options.slidesToShow>s.slideCount&&(s.slideOffset=(t+s.options.slidesToShow-s.slideCount)*s.slideWidth,a=(t+s.options.slidesToShow-s.slideCount)*i),s.slideCount<=s.options.slidesToShow&&(a=s.slideOffset=0),!0===s.options.centerMode&&s.slideCount<=s.options.slidesToShow?s.slideOffset=s.slideWidth*Math.floor(s.options.slidesToShow)/2-s.slideWidth*s.slideCount/2:!0===s.options.centerMode&&!0===s.options.infinite?s.slideOffset+=s.slideWidth*Math.floor(s.options.slidesToShow/2)-s.slideWidth:!0===s.options.centerMode&&(s.slideOffset=0,s.slideOffset+=s.slideWidth*Math.floor(s.options.slidesToShow/2)),e=!1===s.options.vertical?t*s.slideWidth*-1+s.slideOffset:t*i*-1+a,!0===s.options.variableWidth&&(n=s.slideCount<=s.options.slidesToShow||!1===s.options.infinite?s.$slideTrack.children(".slick-slide").eq(t):s.$slideTrack.children(".slick-slide").eq(t+s.options.slidesToShow),e=!0===s.options.rtl?n[0]?-1*(s.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,!0===s.options.centerMode&&(n=s.slideCount<=s.options.slidesToShow||!1===s.options.infinite?s.$slideTrack.children(".slick-slide").eq(t):s.$slideTrack.children(".slick-slide").eq(t+s.options.slidesToShow+1),e=!0===s.options.rtl?n[0]?-1*(s.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,e+=(s.$list.width()-n.outerWidth())/2)),e},a.prototype.getOption=a.prototype.slickGetOption=function(t){return this.options[t]},a.prototype.getNavigableIndexes=function(){var t,e=this,i=0,n=0,r=[];for(t=!1===e.options.infinite?e.slideCount:(i=-1*e.options.slidesToScroll,n=-1*e.options.slidesToScroll,2*e.slideCount);i<t;)r.push(i),i=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return r},a.prototype.getSlick=function(){return this},a.prototype.getSlideCount=function(){var i,n,r=this;return n=!0===r.options.centerMode?r.slideWidth*Math.floor(r.options.slidesToShow/2):0,!0===r.options.swipeToSlide?(r.$slideTrack.find(".slick-slide").each(function(t,e){if(e.offsetLeft-n+c(e).outerWidth()/2>-1*r.swipeLeft)return i=e,!1}),Math.abs(c(i).attr("data-slick-index")-r.currentSlide)||1):r.options.slidesToScroll},a.prototype.goTo=a.prototype.slickGoTo=function(t,e){this.changeSlide({data:{message:"index",index:parseInt(t)}},e)},a.prototype.init=function(t){var e=this;c(e.$slider).hasClass("slick-initialized")||(c(e.$slider).addClass("slick-initialized"),e.buildRows(),e.buildOut(),e.setProps(),e.startLoad(),e.loadSlider(),e.initializeEvents(),e.updateArrows(),e.updateDots(),e.checkResponsive(!0),e.focusHandler()),t&&e.$slider.trigger("init",[e]),!0===e.options.accessibility&&e.initADA(),e.options.autoplay&&(e.paused=!1,e.autoPlay())},a.prototype.initADA=function(){var n=this,i=Math.ceil(n.slideCount/n.options.slidesToShow),r=n.getNavigableIndexes().filter(function(t){return 0<=t&&t<n.slideCount});n.$slides.add(n.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==n.$dots&&(n.$slides.not(n.$slideTrack.find(".slick-cloned")).each(function(t){var e=r.indexOf(t);if(c(this).attr({role:"tabpanel",id:"slick-slide"+n.instanceUid+t,tabindex:-1}),-1!==e){var i="slick-slide-control"+n.instanceUid+e;c("#"+i).length&&c(this).attr({"aria-describedby":i})}}),n.$dots.attr("role","tablist").find("li").each(function(t){var e=r[t];c(this).attr({role:"presentation"}),c(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+n.instanceUid+t,"aria-controls":"slick-slide"+n.instanceUid+e,"aria-label":t+1+" of "+i,"aria-selected":null,tabindex:"-1"})}).eq(n.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var t=n.currentSlide,e=t+n.options.slidesToShow;t<e;t++)n.options.focusOnChange?n.$slides.eq(t).attr({tabindex:"0"}):n.$slides.eq(t).removeAttr("tabindex");n.activateADA()},a.prototype.initArrowEvents=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},t.changeSlide),t.$nextArrow.off("click.slick").on("click.slick",{message:"next"},t.changeSlide),!0===t.options.accessibility&&(t.$prevArrow.on("keydown.slick",t.keyHandler),t.$nextArrow.on("keydown.slick",t.keyHandler)))},a.prototype.initDotEvents=function(){var t=this;!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&(c("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),!0===t.options.accessibility&&t.$dots.on("keydown.slick",t.keyHandler)),!0===t.options.dots&&!0===t.options.pauseOnDotsHover&&t.slideCount>t.options.slidesToShow&&c("li",t.$dots).on("mouseenter.slick",c.proxy(t.interrupt,t,!0)).on("mouseleave.slick",c.proxy(t.interrupt,t,!1))},a.prototype.initSlideEvents=function(){var t=this;t.options.pauseOnHover&&(t.$list.on("mouseenter.slick",c.proxy(t.interrupt,t,!0)),t.$list.on("mouseleave.slick",c.proxy(t.interrupt,t,!1)))},a.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.initSlideEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),c(document).on(t.visibilityChange,c.proxy(t.visibility,t)),!0===t.options.accessibility&&t.$list.on("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&c(t.$slideTrack).children().on("click.slick",t.selectHandler),c(window).on("orientationchange.slick.slick-"+t.instanceUid,c.proxy(t.orientationChange,t)),c(window).on("resize.slick.slick-"+t.instanceUid,c.proxy(t.resize,t)),c("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),c(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),c(t.setPosition)},a.prototype.initUI=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.show(),t.$nextArrow.show()),!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&t.$dots.show()},a.prototype.keyHandler=function(t){var e=this;t.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===t.keyCode&&!0===e.options.accessibility?e.changeSlide({data:{message:!0===e.options.rtl?"next":"previous"}}):39===t.keyCode&&!0===e.options.accessibility&&e.changeSlide({data:{message:!0===e.options.rtl?"previous":"next"}}))},a.prototype.lazyLoad=function(){var t,e,i,s=this;function n(t){c("img[data-lazy]",t).each(function(){var t=c(this),e=c(this).attr("data-lazy"),i=c(this).attr("data-srcset"),n=c(this).attr("data-sizes")||s.$slider.attr("data-sizes"),r=document.createElement("img");r.onload=function(){t.animate({opacity:0},100,function(){i&&(t.attr("srcset",i),n&&t.attr("sizes",n)),t.attr("src",e).animate({opacity:1},200,function(){t.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),s.$slider.trigger("lazyLoaded",[s,t,e])})},r.onerror=function(){t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),s.$slider.trigger("lazyLoadError",[s,t,e])},r.src=e})}if(!0===s.options.centerMode?i=!0===s.options.infinite?(e=s.currentSlide+(s.options.slidesToShow/2+1))+s.options.slidesToShow+2:(e=Math.max(0,s.currentSlide-(s.options.slidesToShow/2+1)),s.options.slidesToShow/2+1+2+s.currentSlide):(e=s.options.infinite?s.options.slidesToShow+s.currentSlide:s.currentSlide,i=Math.ceil(e+s.options.slidesToShow),!0===s.options.fade&&(0<e&&e--,i<=s.slideCount&&i++)),t=s.$slider.find(".slick-slide").slice(e,i),"anticipated"===s.options.lazyLoad)for(var r=e-1,a=i,o=s.$slider.find(".slick-slide"),l=0;l<s.options.slidesToScroll;l++)r<0&&(r=s.slideCount-1),t=(t=t.add(o.eq(r))).add(o.eq(a)),r--,a++;n(t),s.slideCount<=s.options.slidesToShow?n(s.$slider.find(".slick-slide")):s.currentSlide>=s.slideCount-s.options.slidesToShow?n(s.$slider.find(".slick-cloned").slice(0,s.options.slidesToShow)):0===s.currentSlide&&n(s.$slider.find(".slick-cloned").slice(-1*s.options.slidesToShow))},a.prototype.loadSlider=function(){var t=this;t.setPosition(),t.$slideTrack.css({opacity:1}),t.$slider.removeClass("slick-loading"),t.initUI(),"progressive"===t.options.lazyLoad&&t.progressiveLazyLoad()},a.prototype.next=a.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},a.prototype.orientationChange=function(){this.checkResponsive(),this.setPosition()},a.prototype.pause=a.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},a.prototype.play=a.prototype.slickPlay=function(){var t=this;t.autoPlay(),t.options.autoplay=!0,t.paused=!1,t.focussed=!1,t.interrupted=!1},a.prototype.postSlide=function(t){var e=this;e.unslicked||(e.$slider.trigger("afterChange",[e,t]),e.animating=!1,e.slideCount>e.options.slidesToShow&&e.setPosition(),e.swipeLeft=null,e.options.autoplay&&e.autoPlay(),!0===e.options.accessibility&&(e.initADA(),e.options.focusOnChange&&c(e.$slides.get(e.currentSlide)).attr("tabindex",0).focus()))},a.prototype.prev=a.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},a.prototype.preventDefault=function(t){t.preventDefault()},a.prototype.progressiveLazyLoad=function(t){t=t||1;var e,i,n,r,s,a=this,o=c("img[data-lazy]",a.$slider);o.length?(e=o.first(),i=e.attr("data-lazy"),n=e.attr("data-srcset"),r=e.attr("data-sizes")||a.$slider.attr("data-sizes"),(s=document.createElement("img")).onload=function(){n&&(e.attr("srcset",n),r&&e.attr("sizes",r)),e.attr("src",i).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),!0===a.options.adaptiveHeight&&a.setPosition(),a.$slider.trigger("lazyLoaded",[a,e,i]),a.progressiveLazyLoad()},s.onerror=function(){t<3?setTimeout(function(){a.progressiveLazyLoad(t+1)},500):(e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),a.$slider.trigger("lazyLoadError",[a,e,i]),a.progressiveLazyLoad())},s.src=i):a.$slider.trigger("allImagesLoaded",[a])},a.prototype.refresh=function(t){var e,i,n=this;i=n.slideCount-n.options.slidesToShow,!n.options.infinite&&n.currentSlide>i&&(n.currentSlide=i),n.slideCount<=n.options.slidesToShow&&(n.currentSlide=0),e=n.currentSlide,n.destroy(!0),c.extend(n,n.initials,{currentSlide:e}),n.init(),t||n.changeSlide({data:{message:"index",index:e}},!1)},a.prototype.registerBreakpoints=function(){var t,e,i,n=this,r=n.options.responsive||null;if("array"===c.type(r)&&r.length){for(t in n.respondTo=n.options.respondTo||"window",r)if(i=n.breakpoints.length-1,r.hasOwnProperty(t)){for(e=r[t].breakpoint;0<=i;)n.breakpoints[i]&&n.breakpoints[i]===e&&n.breakpoints.splice(i,1),i--;n.breakpoints.push(e),n.breakpointSettings[e]=r[t].settings}n.breakpoints.sort(function(t,e){return n.options.mobileFirst?t-e:e-t})}},a.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.cleanUpSlideEvents(),t.initSlideEvents(),t.checkResponsive(!1,!0),!0===t.options.focusOnSelect&&c(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.setPosition(),t.focusHandler(),t.paused=!t.options.autoplay,t.autoPlay(),t.$slider.trigger("reInit",[t])},a.prototype.resize=function(){var t=this;c(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=c(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},a.prototype.removeSlide=a.prototype.slickRemove=function(t,e,i){var n=this;if(t="boolean"==typeof t?!0===(e=t)?0:n.slideCount-1:!0===e?--t:t,n.slideCount<1||t<0||t>n.slideCount-1)return!1;n.unload(),!0===i?n.$slideTrack.children().remove():n.$slideTrack.children(this.options.slide).eq(t).remove(),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,n.reinit()},a.prototype.setCSS=function(t){var e,i,n=this,r={};!0===n.options.rtl&&(t=-t),e="left"==n.positionProp?Math.ceil(t)+"px":"0px",i="top"==n.positionProp?Math.ceil(t)+"px":"0px",r[n.positionProp]=t,!1===n.transformsEnabled||(!(r={})===n.cssTransitions?r[n.animType]="translate("+e+", "+i+")":r[n.animType]="translate3d("+e+", "+i+", 0px)"),n.$slideTrack.css(r)},a.prototype.setDimensions=function(){var t=this;!1===t.options.vertical?!0===t.options.centerMode&&t.$list.css({padding:"0px "+t.options.centerPadding}):(t.$list.height(t.$slides.first().outerHeight(!0)*t.options.slidesToShow),!0===t.options.centerMode&&t.$list.css({padding:t.options.centerPadding+" 0px"})),t.listWidth=t.$list.width(),t.listHeight=t.$list.height(),!1===t.options.vertical&&!1===t.options.variableWidth?(t.slideWidth=Math.ceil(t.listWidth/t.options.slidesToShow),t.$slideTrack.width(Math.ceil(t.slideWidth*t.$slideTrack.children(".slick-slide").length))):!0===t.options.variableWidth?t.$slideTrack.width(5e3*t.slideCount):(t.slideWidth=Math.ceil(t.listWidth),t.$slideTrack.height(Math.ceil(t.$slides.first().outerHeight(!0)*t.$slideTrack.children(".slick-slide").length)));var e=t.$slides.first().outerWidth(!0)-t.$slides.first().width();!1===t.options.variableWidth&&t.$slideTrack.children(".slick-slide").width(t.slideWidth-e)},a.prototype.setFade=function(){var i,n=this;n.$slides.each(function(t,e){i=n.slideWidth*t*-1,!0===n.options.rtl?c(e).css({position:"relative",right:i,top:0,zIndex:n.options.zIndex-2,opacity:0}):c(e).css({position:"relative",left:i,top:0,zIndex:n.options.zIndex-2,opacity:0})}),n.$slides.eq(n.currentSlide).css({zIndex:n.options.zIndex-1,opacity:1})},a.prototype.setHeight=function(){var t=this;if(1===t.options.slidesToShow&&!0===t.options.adaptiveHeight&&!1===t.options.vertical){var e=t.$slides.eq(t.currentSlide).outerHeight(!0);t.$list.css("height",e)}},a.prototype.setOption=a.prototype.slickSetOption=function(){var t,e,i,n,r,s=this,a=!1;if("object"===c.type(arguments[0])?(i=arguments[0],a=arguments[1],r="multiple"):"string"===c.type(arguments[0])&&(n=arguments[1],a=arguments[2],"responsive"===(i=arguments[0])&&"array"===c.type(arguments[1])?r="responsive":void 0!==arguments[1]&&(r="single")),"single"===r)s.options[i]=n;else if("multiple"===r)c.each(i,function(t,e){s.options[t]=e});else if("responsive"===r)for(e in n)if("array"!==c.type(s.options.responsive))s.options.responsive=[n[e]];else{for(t=s.options.responsive.length-1;0<=t;)s.options.responsive[t].breakpoint===n[e].breakpoint&&s.options.responsive.splice(t,1),t--;s.options.responsive.push(n[e])}a&&(s.unload(),s.reinit())},a.prototype.setPosition=function(){var t=this;t.setDimensions(),t.setHeight(),!1===t.options.fade?t.setCSS(t.getLeft(t.currentSlide)):t.setFade(),t.$slider.trigger("setPosition",[t])},a.prototype.setProps=function(){var t=this,e=document.body.style;t.positionProp=!0===t.options.vertical?"top":"left","top"===t.positionProp?t.$slider.addClass("slick-vertical"):t.$slider.removeClass("slick-vertical"),void 0===e.WebkitTransition&&void 0===e.MozTransition&&void 0===e.msTransition||!0===t.options.useCSS&&(t.cssTransitions=!0),t.options.fade&&("number"==typeof t.options.zIndex?t.options.zIndex<3&&(t.options.zIndex=3):t.options.zIndex=t.defaults.zIndex),void 0!==e.OTransform&&(t.animType="OTransform",t.transformType="-o-transform",t.transitionType="OTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.MozTransform&&(t.animType="MozTransform",t.transformType="-moz-transform",t.transitionType="MozTransition",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(t.animType=!1)),void 0!==e.webkitTransform&&(t.animType="webkitTransform",t.transformType="-webkit-transform",t.transitionType="webkitTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.msTransform&&(t.animType="msTransform",t.transformType="-ms-transform",t.transitionType="msTransition",void 0===e.msTransform&&(t.animType=!1)),void 0!==e.transform&&!1!==t.animType&&(t.animType="transform",t.transformType="transform",t.transitionType="transition"),t.transformsEnabled=t.options.useTransform&&null!==t.animType&&!1!==t.animType},a.prototype.setSlideClasses=function(t){var e,i,n,r,s=this;if(i=s.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),s.$slides.eq(t).addClass("slick-current"),!0===s.options.centerMode){var a=s.options.slidesToShow%2==0?1:0;e=Math.floor(s.options.slidesToShow/2),!0===s.options.infinite&&(e<=t&&t<=s.slideCount-1-e?s.$slides.slice(t-e+a,t+e+1).addClass("slick-active").attr("aria-hidden","false"):(n=s.options.slidesToShow+t,i.slice(n-e+1+a,n+e+2).addClass("slick-active").attr("aria-hidden","false")),0===t?i.eq(i.length-1-s.options.slidesToShow).addClass("slick-center"):t===s.slideCount-1&&i.eq(s.options.slidesToShow).addClass("slick-center")),s.$slides.eq(t).addClass("slick-center")}else 0<=t&&t<=s.slideCount-s.options.slidesToShow?s.$slides.slice(t,t+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):i.length<=s.options.slidesToShow?i.addClass("slick-active").attr("aria-hidden","false"):(r=s.slideCount%s.options.slidesToShow,n=!0===s.options.infinite?s.options.slidesToShow+t:t,s.options.slidesToShow==s.options.slidesToScroll&&s.slideCount-t<s.options.slidesToShow?i.slice(n-(s.options.slidesToShow-r),n+r).addClass("slick-active").attr("aria-hidden","false"):i.slice(n,n+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==s.options.lazyLoad&&"anticipated"!==s.options.lazyLoad||s.lazyLoad()},a.prototype.setupInfinite=function(){var t,e,i,n=this;if(!0===n.options.fade&&(n.options.centerMode=!1),!0===n.options.infinite&&!1===n.options.fade&&(e=null,n.slideCount>n.options.slidesToShow)){for(i=!0===n.options.centerMode?n.options.slidesToShow+1:n.options.slidesToShow,t=n.slideCount;t>n.slideCount-i;--t)e=t-1,c(n.$slides[e]).clone(!0).attr("id","").attr("data-slick-index",e-n.slideCount).prependTo(n.$slideTrack).addClass("slick-cloned");for(t=0;t<i+n.slideCount;t+=1)e=t,c(n.$slides[e]).clone(!0).attr("id","").attr("data-slick-index",e+n.slideCount).appendTo(n.$slideTrack).addClass("slick-cloned");n.$slideTrack.find(".slick-cloned").find("[id]").each(function(){c(this).attr("id","")})}},a.prototype.interrupt=function(t){t||this.autoPlay(),this.interrupted=t},a.prototype.selectHandler=function(t){var e=c(t.target).is(".slick-slide")?c(t.target):c(t.target).parents(".slick-slide"),i=parseInt(e.attr("data-slick-index"));i=i||0,this.slideCount<=this.options.slidesToShow?this.slideHandler(i,!1,!0):this.slideHandler(i)},a.prototype.slideHandler=function(t,e,i){var n,r,s,a,o,l,c=this;if(e=e||!1,!(!0===c.animating&&!0===c.options.waitForAnimate||!0===c.options.fade&&c.currentSlide===t))if(!1===e&&c.asNavFor(t),n=t,o=c.getLeft(n),a=c.getLeft(c.currentSlide),c.currentLeft=null===c.swipeLeft?a:c.swipeLeft,!1===c.options.infinite&&!1===c.options.centerMode&&(t<0||t>c.getDotCount()*c.options.slidesToScroll))!1===c.options.fade&&(n=c.currentSlide,!0!==i&&c.slideCount>c.options.slidesToShow?c.animateSlide(a,function(){c.postSlide(n)}):c.postSlide(n));else if(!1===c.options.infinite&&!0===c.options.centerMode&&(t<0||t>c.slideCount-c.options.slidesToScroll))!1===c.options.fade&&(n=c.currentSlide,!0!==i&&c.slideCount>c.options.slidesToShow?c.animateSlide(a,function(){c.postSlide(n)}):c.postSlide(n));else{if(c.options.autoplay&&clearInterval(c.autoPlayTimer),r=n<0?c.slideCount%c.options.slidesToScroll!=0?c.slideCount-c.slideCount%c.options.slidesToScroll:c.slideCount+n:n>=c.slideCount?c.slideCount%c.options.slidesToScroll!=0?0:n-c.slideCount:n,c.animating=!0,c.$slider.trigger("beforeChange",[c,c.currentSlide,r]),s=c.currentSlide,c.currentSlide=r,c.setSlideClasses(c.currentSlide),c.options.asNavFor&&(l=(l=c.getNavTarget()).slick("getSlick")).slideCount<=l.options.slidesToShow&&l.setSlideClasses(c.currentSlide),c.updateDots(),c.updateArrows(),!0===c.options.fade)return!0!==i?(c.fadeSlideOut(s),c.fadeSlide(r,function(){c.postSlide(r)})):c.postSlide(r),void c.animateHeight();!0!==i&&c.slideCount>c.options.slidesToShow?c.animateSlide(o,function(){c.postSlide(r)}):c.postSlide(r)}},a.prototype.startLoad=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.hide(),t.$nextArrow.hide()),!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&t.$dots.hide(),t.$slider.addClass("slick-loading")},a.prototype.swipeDirection=function(){var t,e,i,n,r=this;return t=r.touchObject.startX-r.touchObject.curX,e=r.touchObject.startY-r.touchObject.curY,i=Math.atan2(e,t),(n=Math.round(180*i/Math.PI))<0&&(n=360-Math.abs(n)),n<=45&&0<=n||n<=360&&315<=n?!1===r.options.rtl?"left":"right":135<=n&&n<=225?!1===r.options.rtl?"right":"left":!0===r.options.verticalSwiping?35<=n&&n<=135?"down":"up":"vertical"},a.prototype.swipeEnd=function(t){var e,i,n=this;if(n.dragging=!1,n.swiping=!1,n.scrolling)return n.scrolling=!1;if(n.interrupted=!1,n.shouldClick=!(10<n.touchObject.swipeLength),void 0===n.touchObject.curX)return!1;if(!0===n.touchObject.edgeHit&&n.$slider.trigger("edge",[n,n.swipeDirection()]),n.touchObject.swipeLength>=n.touchObject.minSwipe){switch(i=n.swipeDirection()){case"left":case"down":e=n.options.swipeToSlide?n.checkNavigable(n.currentSlide+n.getSlideCount()):n.currentSlide+n.getSlideCount(),n.currentDirection=0;break;case"right":case"up":e=n.options.swipeToSlide?n.checkNavigable(n.currentSlide-n.getSlideCount()):n.currentSlide-n.getSlideCount(),n.currentDirection=1}"vertical"!=i&&(n.slideHandler(e),n.touchObject={},n.$slider.trigger("swipe",[n,i]))}else n.touchObject.startX!==n.touchObject.curX&&(n.slideHandler(n.currentSlide),n.touchObject={})},a.prototype.swipeHandler=function(t){var e=this;if(!(!1===e.options.swipe||"ontouchend"in document&&!1===e.options.swipe||!1===e.options.draggable&&-1!==t.type.indexOf("mouse")))switch(e.touchObject.fingerCount=t.originalEvent&&void 0!==t.originalEvent.touches?t.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,!0===e.options.verticalSwiping&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),t.data.action){case"start":e.swipeStart(t);break;case"move":e.swipeMove(t);break;case"end":e.swipeEnd(t)}},a.prototype.swipeMove=function(t){var e,i,n,r,s,a,o=this;return s=void 0!==t.originalEvent?t.originalEvent.touches:null,!(!o.dragging||o.scrolling||s&&1!==s.length)&&(e=o.getLeft(o.currentSlide),o.touchObject.curX=void 0!==s?s[0].pageX:t.clientX,o.touchObject.curY=void 0!==s?s[0].pageY:t.clientY,o.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(o.touchObject.curX-o.touchObject.startX,2))),a=Math.round(Math.sqrt(Math.pow(o.touchObject.curY-o.touchObject.startY,2))),!o.options.verticalSwiping&&!o.swiping&&4<a?!(o.scrolling=!0):(!0===o.options.verticalSwiping&&(o.touchObject.swipeLength=a),i=o.swipeDirection(),void 0!==t.originalEvent&&4<o.touchObject.swipeLength&&(o.swiping=!0,t.preventDefault()),r=(!1===o.options.rtl?1:-1)*(o.touchObject.curX>o.touchObject.startX?1:-1),!0===o.options.verticalSwiping&&(r=o.touchObject.curY>o.touchObject.startY?1:-1),n=o.touchObject.swipeLength,(o.touchObject.edgeHit=!1)===o.options.infinite&&(0===o.currentSlide&&"right"===i||o.currentSlide>=o.getDotCount()&&"left"===i)&&(n=o.touchObject.swipeLength*o.options.edgeFriction,o.touchObject.edgeHit=!0),!1===o.options.vertical?o.swipeLeft=e+n*r:o.swipeLeft=e+n*(o.$list.height()/o.listWidth)*r,!0===o.options.verticalSwiping&&(o.swipeLeft=e+n*r),!0!==o.options.fade&&!1!==o.options.touchMove&&(!0===o.animating?(o.swipeLeft=null,!1):void o.setCSS(o.swipeLeft))))},a.prototype.swipeStart=function(t){var e,i=this;if(i.interrupted=!0,1!==i.touchObject.fingerCount||i.slideCount<=i.options.slidesToShow)return!(i.touchObject={});void 0!==t.originalEvent&&void 0!==t.originalEvent.touches&&(e=t.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=void 0!==e?e.pageX:t.clientX,i.touchObject.startY=i.touchObject.curY=void 0!==e?e.pageY:t.clientY,i.dragging=!0},a.prototype.unfilterSlides=a.prototype.slickUnfilter=function(){var t=this;null!==t.$slidesCache&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.appendTo(t.$slideTrack),t.reinit())},a.prototype.unload=function(){var t=this;c(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},a.prototype.unslick=function(t){this.$slider.trigger("unslick",[this,t]),this.destroy()},a.prototype.updateArrows=function(){var t=this;Math.floor(t.options.slidesToShow/2),!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&!t.options.infinite&&(t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):(t.currentSlide>=t.slideCount-t.options.slidesToShow&&!1===t.options.centerMode||t.currentSlide>=t.slideCount-1&&!0===t.options.centerMode)&&(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},a.prototype.updateDots=function(){var t=this;null!==t.$dots&&(t.$dots.find("li").removeClass("slick-active").end(),t.$dots.find("li").eq(Math.floor(t.currentSlide/t.options.slidesToScroll)).addClass("slick-active"))},a.prototype.visibility=function(){this.options.autoplay&&(document[this.hidden]?this.interrupted=!0:this.interrupted=!1)},c.fn.slick=function(){var t,e,i=this,n=arguments[0],r=Array.prototype.slice.call(arguments,1),s=i.length;for(t=0;t<s;t++)if("object"==typeof n||void 0===n?i[t].slick=new a(i[t],n):e=i[t].slick[n].apply(i[t].slick,r),void 0!==e)return e;return i}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(window.jQuery||window.Zepto)}(function(u){function t(){}function d(t,e){m.ev.on("mfp"+t+_,e)}function h(t,e,i,n){var r=document.createElement("div");return r.className="mfp-"+t,i&&(r.innerHTML=i),n?e&&e.appendChild(r):(r=u(r),e&&r.appendTo(e)),r}function p(t,e){m.ev.triggerHandler("mfp"+t,e),m.st.callbacks&&(t=t.charAt(0).toLowerCase()+t.slice(1),m.st.callbacks[t]&&m.st.callbacks[t].apply(m,u.isArray(e)?e:[e]))}function f(t){return t===e&&m.currTemplate.closeBtn||(m.currTemplate.closeBtn=u(m.st.closeMarkup.replace("%title%",m.st.tClose)),e=t),m.currTemplate.closeBtn}function s(){u.magnificPopup.instance||((m=new t).init(),u.magnificPopup.instance=m)}var m,n,g,r,v,e,l="Close",c="BeforeClose",y="MarkupParse",b="Open",_=".mfp",T="mfp-ready",i="mfp-removing",a="mfp-prevent-close",o=!!window.jQuery,w=u(window);t.prototype={constructor:t,init:function(){var t=navigator.appVersion;m.isLowIE=m.isIE8=document.all&&!document.addEventListener,m.isAndroid=/android/gi.test(t),m.isIOS=/iphone|ipad|ipod/gi.test(t),m.supportsTransition=function(){var t=document.createElement("p").style,e=["ms","O","Moz","Webkit"];if(void 0!==t.transition)return!0;for(;e.length;)if(e.pop()+"Transition"in t)return!0;return!1}(),m.probablyMobile=m.isAndroid||m.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),g=u(document),m.popupsCache={}},open:function(t){var e;if(!1===t.isObj){m.items=t.items.toArray(),m.index=0;var i,n=t.items;for(e=0;e<n.length;e++)if((i=n[e]).parsed&&(i=i.el[0]),i===t.el[0]){m.index=e;break}}else m.items=u.isArray(t.items)?t.items:[t.items],m.index=t.index||0;if(!m.isOpen){m.types=[],v="",t.mainEl&&t.mainEl.length?m.ev=t.mainEl.eq(0):m.ev=g,t.key?(m.popupsCache[t.key]||(m.popupsCache[t.key]={}),m.currTemplate=m.popupsCache[t.key]):m.currTemplate={},m.st=u.extend(!0,{},u.magnificPopup.defaults,t),m.fixedContentPos="auto"===m.st.fixedContentPos?!m.probablyMobile:m.st.fixedContentPos,m.st.modal&&(m.st.closeOnContentClick=!1,m.st.closeOnBgClick=!1,m.st.showCloseBtn=!1,m.st.enableEscapeKey=!1),m.bgOverlay||(m.bgOverlay=h("bg").on("click"+_,function(){m.close()}),m.wrap=h("wrap").attr("tabindex",-1).on("click"+_,function(t){m._checkIfClose(t.target)&&m.close()}),m.container=h("container",m.wrap)),m.contentContainer=h("content"),m.st.preloader&&(m.preloader=h("preloader",m.container,m.st.tLoading));var r=u.magnificPopup.modules;for(e=0;e<r.length;e++){var s=r[e];s=s.charAt(0).toUpperCase()+s.slice(1),m["init"+s].call(m)}p("BeforeOpen"),m.st.showCloseBtn&&(m.st.closeBtnInside?(d(y,function(t,e,i,n){i.close_replaceWith=f(n.type)}),v+=" mfp-close-btn-in"):m.wrap.append(f())),m.st.alignTop&&(v+=" mfp-align-top"),m.fixedContentPos?m.wrap.css({overflow:m.st.overflowY,overflowX:"hidden",overflowY:m.st.overflowY}):m.wrap.css({top:w.scrollTop(),position:"absolute"}),!1!==m.st.fixedBgPos&&("auto"!==m.st.fixedBgPos||m.fixedContentPos)||m.bgOverlay.css({height:g.height(),position:"absolute"}),m.st.enableEscapeKey&&g.on("keyup"+_,function(t){27===t.keyCode&&m.close()}),w.on("resize"+_,function(){m.updateSize()}),m.st.closeOnContentClick||(v+=" mfp-auto-cursor"),v&&m.wrap.addClass(v);var a=m.wH=w.height(),o={};if(m.fixedContentPos&&m._hasScrollBar(a)){var l=m._getScrollbarSize();l&&(o.marginRight=l)}m.fixedContentPos&&(m.isIE7?u("body, html").css("overflow","hidden"):o.overflow="hidden");var c=m.st.mainClass;return m.isIE7&&(c+=" mfp-ie7"),c&&m._addClassToMFP(c),m.updateItemHTML(),p("BuildControls"),u("html").css(o),m.bgOverlay.add(m.wrap).prependTo(m.st.prependTo||u(document.body)),m._lastFocusedEl=document.activeElement,setTimeout(function(){m.content?(m._addClassToMFP(T),m._setFocus()):m.bgOverlay.addClass(T),g.on("focusin"+_,m._onFocusIn)},16),m.isOpen=!0,m.updateSize(a),p(b),t}m.updateItemHTML()},close:function(){m.isOpen&&(p(c),m.isOpen=!1,m.st.removalDelay&&!m.isLowIE&&m.supportsTransition?(m._addClassToMFP(i),setTimeout(function(){m._close()},m.st.removalDelay)):m._close())},_close:function(){p(l);var t=i+" "+T+" ";if(m.bgOverlay.detach(),m.wrap.detach(),m.container.empty(),m.st.mainClass&&(t+=m.st.mainClass+" "),m._removeClassFromMFP(t),m.fixedContentPos){var e={marginRight:""};m.isIE7?u("body, html").css("overflow",""):e.overflow="",u("html").css(e)}g.off("keyup.mfp focusin"+_),m.ev.off(_),m.wrap.attr("class","mfp-wrap").removeAttr("style"),m.bgOverlay.attr("class","mfp-bg"),m.container.attr("class","mfp-container"),!m.st.showCloseBtn||m.st.closeBtnInside&&!0!==m.currTemplate[m.currItem.type]||m.currTemplate.closeBtn&&m.currTemplate.closeBtn.detach(),m.st.autoFocusLast&&m._lastFocusedEl&&u(m._lastFocusedEl).focus(),m.currItem=null,m.content=null,m.currTemplate=null,m.prevHeight=0,p("AfterClose")},updateSize:function(t){if(m.isIOS){var e=document.documentElement.clientWidth/window.innerWidth,i=window.innerHeight*e;m.wrap.css("height",i),m.wH=i}else m.wH=t||w.height();m.fixedContentPos||m.wrap.css("height",m.wH),p("Resize")},updateItemHTML:function(){var t=m.items[m.index];m.contentContainer.detach(),m.content&&m.content.detach(),t.parsed||(t=m.parseEl(m.index));var e=t.type;if(p("BeforeChange",[m.currItem?m.currItem.type:"",e]),m.currItem=t,!m.currTemplate[e]){var i=!!m.st[e]&&m.st[e].markup;p("FirstMarkupParse",i),m.currTemplate[e]=!i||u(i)}r&&r!==t.type&&m.container.removeClass("mfp-"+r+"-holder");var n=m["get"+e.charAt(0).toUpperCase()+e.slice(1)](t,m.currTemplate[e]);m.appendContent(n,e),t.preloaded=!0,p("Change",t),r=t.type,m.container.prepend(m.contentContainer),p("AfterChange")},appendContent:function(t,e){(m.content=t)?m.st.showCloseBtn&&m.st.closeBtnInside&&!0===m.currTemplate[e]?m.content.find(".mfp-close").length||m.content.append(f()):m.content=t:m.content="",p("BeforeAppend"),m.container.addClass("mfp-"+e+"-holder"),m.contentContainer.append(m.content)},parseEl:function(t){var e,i=m.items[t];if((i=i.tagName?{el:u(i)}:(e=i.type,{data:i,src:i.src})).el){for(var n=m.types,r=0;r<n.length;r++)if(i.el.hasClass("mfp-"+n[r])){e=n[r];break}i.src=i.el.attr("data-mfp-src"),i.src||(i.src=i.el.attr("href"))}return i.type=e||m.st.type||"inline",i.index=t,i.parsed=!0,m.items[t]=i,p("ElementParse",i),m.items[t]},addGroup:function(e,i){function t(t){t.mfpEl=this,m._openClick(t,e,i)}var n="click.magnificPopup";(i=i||{}).mainEl=e,i.items?(i.isObj=!0,e.off(n).on(n,t)):(i.isObj=!1,i.delegate?e.off(n).on(n,i.delegate,t):(i.items=e).off(n).on(n,t))},_openClick:function(t,e,i){if((void 0!==i.midClick?i.midClick:u.magnificPopup.defaults.midClick)||!(2===t.which||t.ctrlKey||t.metaKey||t.altKey||t.shiftKey)){var n=void 0!==i.disableOn?i.disableOn:u.magnificPopup.defaults.disableOn;if(n)if(u.isFunction(n)){if(!n.call(m))return!0}else if(w.width()<n)return!0;t.type&&(t.preventDefault(),m.isOpen&&t.stopPropagation()),i.el=u(t.mfpEl),i.delegate&&(i.items=e.find(i.delegate)),m.open(i)}},updateStatus:function(t,e){if(m.preloader){n!==t&&m.container.removeClass("mfp-s-"+n),e||"loading"!==t||(e=m.st.tLoading);var i={status:t,text:e};p("UpdateStatus",i),t=i.status,e=i.text,m.preloader.html(e),m.preloader.find("a").on("click",function(t){t.stopImmediatePropagation()}),m.container.addClass("mfp-s-"+t),n=t}},_checkIfClose:function(t){if(!u(t).hasClass(a)){var e=m.st.closeOnContentClick,i=m.st.closeOnBgClick;if(e&&i)return!0;if(!m.content||u(t).hasClass("mfp-close")||m.preloader&&t===m.preloader[0])return!0;if(t===m.content[0]||u.contains(m.content[0],t)){if(e)return!0}else if(i&&u.contains(document,t))return!0;return!1}},_addClassToMFP:function(t){m.bgOverlay.addClass(t),m.wrap.addClass(t)},_removeClassFromMFP:function(t){this.bgOverlay.removeClass(t),m.wrap.removeClass(t)},_hasScrollBar:function(t){return(m.isIE7?g.height():document.body.scrollHeight)>(t||w.height())},_setFocus:function(){(m.st.focus?m.content.find(m.st.focus).eq(0):m.wrap).focus()},_onFocusIn:function(t){if(t.target!==m.wrap[0]&&!u.contains(m.wrap[0],t.target))return m._setFocus(),!1},_parseMarkup:function(r,t,e){var s;e.data&&(t=u.extend(e.data,t)),p(y,[r,t,e]),u.each(t,function(t,e){if(void 0===e||!1===e)return!0;if(1<(s=t.split("_")).length){var i=r.find(_+"-"+s[0]);if(0<i.length){var n=s[1];"replaceWith"===n?i[0]!==e[0]&&i.replaceWith(e):"img"===n?i.is("img")?i.attr("src",e):i.replaceWith(u("<img>").attr("src",e).attr("class",i.attr("class"))):i.attr(s[1],e)}}else r.find(_+"-"+t).html(e)})},_getScrollbarSize:function(){if(void 0===m.scrollbarSize){var t=document.createElement("div");t.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(t),m.scrollbarSize=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return m.scrollbarSize}},u.magnificPopup={instance:null,proto:t.prototype,modules:[],open:function(t,e){return s(),(t=t?u.extend(!0,{},t):{}).isObj=!0,t.index=e||0,this.instance.open(t)},close:function(){return u.magnificPopup.instance&&u.magnificPopup.instance.close()},registerModule:function(t,e){e.options&&(u.magnificPopup.defaults[t]=e.options),u.extend(this.proto,e.proto),this.modules.push(t)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},u.fn.magnificPopup=function(t){s();var e=u(this);if("string"==typeof t)if("open"===t){var i,n=o?e.data("magnificPopup"):e[0].magnificPopup,r=parseInt(arguments[1],10)||0;i=n.items?n.items[r]:(i=e,n.delegate&&(i=i.find(n.delegate)),i.eq(r)),m._openClick({mfpEl:i},e,n)}else m.isOpen&&m[t].apply(m,Array.prototype.slice.call(arguments,1));else t=u.extend(!0,{},t),o?e.data("magnificPopup",t):e[0].magnificPopup=t,m.addGroup(e,t);return e};function S(){x&&(k.after(x.addClass(C)).detach(),x=null)}var C,k,x,E="inline";u.magnificPopup.registerModule(E,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){m.types.push(E),d(l+"."+E,function(){S()})},getInline:function(t,e){if(S(),t.src){var i=m.st.inline,n=u(t.src);if(n.length){var r=n[0].parentNode;r&&r.tagName&&(k||(C=i.hiddenClass,k=h(C),C="mfp-"+C),x=n.after(k).detach().removeClass(C)),m.updateStatus("ready")}else m.updateStatus("error",i.tNotFound),n=u("<div>");return t.inlineElement=n}return m.updateStatus("ready"),m._parseMarkup(e,{},t),e}}});function A(){I&&u(document.body).removeClass(I)}function P(){A(),m.req&&m.req.abort()}var I,O="ajax";u.magnificPopup.registerModule(O,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){m.types.push(O),I=m.st.ajax.cursor,d(l+"."+O,P),d("BeforeChange."+O,P)},getAjax:function(r){I&&u(document.body).addClass(I),m.updateStatus("loading");var t=u.extend({url:r.src,success:function(t,e,i){var n={data:t,xhr:i};p("ParseAjax",n),m.appendContent(u(n.data),O),r.finished=!0,A(),m._setFocus(),setTimeout(function(){m.wrap.addClass(T)},16),m.updateStatus("ready"),p("AjaxContentAdded")},error:function(){A(),r.finished=r.loadError=!0,m.updateStatus("error",m.st.ajax.tError.replace("%url%",r.src))}},m.st.ajax.settings);return m.req=u.ajax(t),""}}});var L;u.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var t=m.st.image,e=".image";m.types.push("image"),d(b+e,function(){"image"===m.currItem.type&&t.cursor&&u(document.body).addClass(t.cursor)}),d(l+e,function(){t.cursor&&u(document.body).removeClass(t.cursor),w.off("resize"+_)}),d("Resize"+e,m.resizeImage),m.isLowIE&&d("AfterChange",m.resizeImage)},resizeImage:function(){var t=m.currItem;if(t&&t.img&&m.st.image.verticalFit){var e=0;m.isLowIE&&(e=parseInt(t.img.css("padding-top"),10)+parseInt(t.img.css("padding-bottom"),10)),t.img.css("max-height",m.wH-e)}},_onImageHasSize:function(t){t.img&&(t.hasSize=!0,L&&clearInterval(L),t.isCheckingImgSize=!1,p("ImageHasSize",t),t.imgHidden&&(m.content&&m.content.removeClass("mfp-loading"),t.imgHidden=!1))},findImageSize:function(e){var i=0,n=e.img[0],r=function(t){L&&clearInterval(L),L=setInterval(function(){0<n.naturalWidth?m._onImageHasSize(e):(200<i&&clearInterval(L),3===++i?r(10):40===i?r(50):100===i&&r(500))},t)};r(1)},getImage:function(t,e){var i=0,n=function(){t&&(t.img[0].complete?(t.img.off(".mfploader"),t===m.currItem&&(m._onImageHasSize(t),m.updateStatus("ready")),t.hasSize=!0,t.loaded=!0,p("ImageLoadComplete")):++i<200?setTimeout(n,100):r())},r=function(){t&&(t.img.off(".mfploader"),t===m.currItem&&(m._onImageHasSize(t),m.updateStatus("error",s.tError.replace("%url%",t.src))),t.hasSize=!0,t.loaded=!0,t.loadError=!0)},s=m.st.image,a=e.find(".mfp-img");if(a.length){var o=document.createElement("img");o.className="mfp-img",t.el&&t.el.find("img").length&&(o.alt=t.el.find("img").attr("alt")),t.img=u(o).on("load.mfploader",n).on("error.mfploader",r),o.src=t.src,a.is("img")&&(t.img=t.img.clone()),0<(o=t.img[0]).naturalWidth?t.hasSize=!0:o.width||(t.hasSize=!1)}return m._parseMarkup(e,{title:function(t){if(t.data&&void 0!==t.data.title)return t.data.title;var e=m.st.image.titleSrc;if(e){if(u.isFunction(e))return e.call(m,t);if(t.el)return t.el.attr(e)||""}return""}(t),img_replaceWith:t.img},t),m.resizeImage(),t.hasSize?(L&&clearInterval(L),t.loadError?(e.addClass("mfp-loading"),m.updateStatus("error",s.tError.replace("%url%",t.src))):(e.removeClass("mfp-loading"),m.updateStatus("ready"))):(m.updateStatus("loading"),t.loading=!0,t.hasSize||(t.imgHidden=!0,e.addClass("mfp-loading"),m.findImageSize(t))),e}}});var D;u.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(t){return t.is("img")?t:t.find("img")}},proto:{initZoom:function(){var t,s=m.st.zoom,e=".zoom";if(s.enabled&&m.supportsTransition){function i(t){var e=t.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),i="all "+s.duration/1e3+"s "+s.easing,n={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},r="transition";return n["-webkit-"+r]=n["-moz-"+r]=n["-o-"+r]=n[r]=i,e.css(n),e}function n(){m.content.css("visibility","visible")}var r,a,o=s.duration;d("BuildControls"+e,function(){if(m._allowZoom()){if(clearTimeout(r),m.content.css("visibility","hidden"),!(t=m._getItemToZoom()))return void n();(a=i(t)).css(m._getOffset()),m.wrap.append(a),r=setTimeout(function(){a.css(m._getOffset(!0)),r=setTimeout(function(){n(),setTimeout(function(){a.remove(),t=a=null,p("ZoomAnimationEnded")},16)},o)},16)}}),d(c+e,function(){if(m._allowZoom()){if(clearTimeout(r),m.st.removalDelay=o,!t){if(!(t=m._getItemToZoom()))return;a=i(t)}a.css(m._getOffset(!0)),m.wrap.append(a),m.content.css("visibility","hidden"),setTimeout(function(){a.css(m._getOffset())},16)}}),d(l+e,function(){m._allowZoom()&&(n(),a&&a.remove(),t=null)})}},_allowZoom:function(){return"image"===m.currItem.type},_getItemToZoom:function(){return!!m.currItem.hasSize&&m.currItem.img},_getOffset:function(t){var e,i=(e=t?m.currItem.img:m.st.zoom.opener(m.currItem.el||m.currItem)).offset(),n=parseInt(e.css("padding-top"),10),r=parseInt(e.css("padding-bottom"),10);i.top-=u(window).scrollTop()-n;var s={width:e.width(),height:(o?e.innerHeight():e[0].offsetHeight)-r-n};return void 0===D&&(D=void 0!==document.createElement("p").style.MozTransform),D?s["-moz-transform"]=s.transform="translate("+i.left+"px,"+i.top+"px)":(s.left=i.left,s.top=i.top),s}}});function R(t){if(m.currTemplate[M]){var e=m.currTemplate[M].find("iframe");e.length&&(t||(e[0].src="//about:blank"),m.isIE8&&e.css("display",t?"block":"none"))}}var M="iframe";u.magnificPopup.registerModule(M,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){m.types.push(M),d("BeforeChange",function(t,e,i){e!==i&&(e===M?R():i===M&&R(!0))}),d(l+"."+M,function(){R()})},getIframe:function(t,e){var i=t.src,n=m.st.iframe;u.each(n.patterns,function(){if(-1<i.indexOf(this.index))return this.id&&(i="string"==typeof this.id?i.substr(i.lastIndexOf(this.id)+this.id.length,i.length):this.id.call(this,i)),i=this.src.replace("%id%",i),!1});var r={};return n.srcAction&&(r[n.srcAction]=i),m._parseMarkup(e,r,t),m.updateStatus("ready"),e}}});function B(t){var e=m.items.length;return e-1<t?t-e:t<0?e+t:t}function N(t,e,i){return t.replace(/%curr%/gi,e+1).replace(/%total%/gi,i)}u.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var s=m.st.gallery,t=".mfp-gallery";if(m.direction=!0,!s||!s.enabled)return!1;v+=" mfp-gallery",d(b+t,function(){s.navigateByImgClick&&m.wrap.on("click"+t,".mfp-img",function(){if(1<m.items.length)return m.next(),!1}),g.on("keydown"+t,function(t){37===t.keyCode?m.prev():39===t.keyCode&&m.next()})}),d("UpdateStatus"+t,function(t,e){e.text&&(e.text=N(e.text,m.currItem.index,m.items.length))}),d(y+t,function(t,e,i,n){var r=m.items.length;i.counter=1<r?N(s.tCounter,n.index,r):""}),d("BuildControls"+t,function(){if(1<m.items.length&&s.arrows&&!m.arrowLeft){var t=s.arrowMarkup,e=m.arrowLeft=u(t.replace(/%title%/gi,s.tPrev).replace(/%dir%/gi,"left")).addClass(a),i=m.arrowRight=u(t.replace(/%title%/gi,s.tNext).replace(/%dir%/gi,"right")).addClass(a);e.click(function(){m.prev()}),i.click(function(){m.next()}),m.container.append(e.add(i))}}),d("Change"+t,function(){m._preloadTimeout&&clearTimeout(m._preloadTimeout),m._preloadTimeout=setTimeout(function(){m.preloadNearbyImages(),m._preloadTimeout=null},16)}),d(l+t,function(){g.off(t),m.wrap.off("click"+t),m.arrowRight=m.arrowLeft=null})},next:function(){m.direction=!0,m.index=B(m.index+1),m.updateItemHTML()},prev:function(){m.direction=!1,m.index=B(m.index-1),m.updateItemHTML()},goTo:function(t){m.direction=t>=m.index,m.index=t,m.updateItemHTML()},preloadNearbyImages:function(){var t,e=m.st.gallery.preload,i=Math.min(e[0],m.items.length),n=Math.min(e[1],m.items.length);for(t=1;t<=(m.direction?n:i);t++)m._preloadItem(m.index+t);for(t=1;t<=(m.direction?i:n);t++)m._preloadItem(m.index-t)},_preloadItem:function(t){if(t=B(t),!m.items[t].preloaded){var e=m.items[t];e.parsed||(e=m.parseEl(t)),p("LazyLoad",e),"image"===e.type&&(e.img=u('<img class="mfp-img" />').on("load.mfploader",function(){e.hasSize=!0}).on("error.mfploader",function(){e.hasSize=!0,e.loadError=!0,p("LazyLoadError",e)}).attr("src",e.src)),e.preloaded=!0}}}});var U="retina";u.magnificPopup.registerModule(U,{options:{replaceSrc:function(t){return t.src.replace(/\.\w+$/,function(t){return"@2x"+t})},ratio:1},proto:{initRetina:function(){if(1<window.devicePixelRatio){var i=m.st.retina,n=i.ratio;1<(n=isNaN(n)?n():n)&&(d("ImageHasSize."+U,function(t,e){e.img.css({"max-width":e.img[0].naturalWidth/n,width:"100%"})}),d("ElementParse."+U,function(t,e){e.src=i.replaceSrc(e,n)}))}}}}),s()}),function(h){"use strict";var p=null,f=null;!function(){var t,r,s,a,o,e=["webkit","moz","o","ms"],i=h.document.createElement("div"),n=-1;for(n=0;n<e.length&&!h.requestAnimationFrame;n++)h.requestAnimationFrame=h[e[n]+"RequestAnimationFrame"];function l(){}void 0===i.nextElementSibling&&Object.defineProperty(h.Element.prototype,"nextElementSibling",{get:function(){for(var t=this.nextSibling;t;){if(1===t.nodeType)return t;t=t.nextSibling}return null}}),(t=h.Element.prototype).matches=t.matches||t.machesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(t){return-1<Array.prototype.indexOf.call(this.parentElement.querySelectorAll(t),this)},Object.keys||(Object.keys=(o=Object.prototype.hasOwnProperty,r=!{toString:null}.propertyIsEnumerable("toString"),a=(s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(t){var e=[],i="",n=-1;if("object"!=typeof t&&("function"!=typeof t||null===t))throw new TypeError("Object.keys called on non-object");for(i in t)o.call(t,i)&&e.push(i);if(r)for(n=0;n<a;n++)o.call(t,s[n])&&e.push(s[n]);return e})),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),"function"!=typeof Object.create&&(Object.create=function(t,e){if(t!==Object(t)&&null!==t)throw TypeError("Argument must be an object, or null");l.prototype=t||{};var i=new l;return l.prototype=null,void 0!==e&&Object.defineProperties(i,e),null===t&&(i.__proto__=null),i}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e,i,n,r;if(null===this)throw new TypeError;if(0==(r=(n=Object(this)).length>>>0))return-1;if(e=0,1<arguments.length&&((e=Number(arguments[1]))!=e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(0<e||-1)*Math.floor(Math.abs(e)))),r<=e)return-1;for(i=0<=e?e:Math.max(r-Math.abs(e),0);i<r;i++)if(i in n&&n[i]===t)return i;return-1}),Function.prototype.bind||(Function.prototype.bind=function(t){var e,i,n,r;if("function"!=typeof this)throw new TypeError;return e=Array.prototype.slice.call(arguments,1),n=function(){},r=function(){return i.apply(this instanceof n?this:t,e.concat(Array.prototype.slice.call(arguments)))},(i=this).prototype&&(n.prototype=this.prototype),r.prototype=new n,r}),h.Element.prototype.dispatchEvent||(h.Element.prototype.dispatchEvent=function(t){try{return this.fireEvent("on"+t.type,t)}catch(t){}})}(),(p=function(t,e,i){var n=null,r=!1,s=null,a=null,o=null,l=[],c="",u=[],d=-1;if(o=i||h.document,(r=arguments[3])&&(r="boolean"==typeof r),"string"==typeof t)u=o.querySelectorAll(t);else if(t&&"object"==typeof t&&f.isElement(t,o))u=[t];else{if(!t||"object"!=typeof t||!t.length)throw new Error(p.messages.errorFactoryInvalidContainer());u=t}if(u.length<1)throw new Error(p.messages.errorFactoryContainerNotFound());for(d=0;(n=u[d])&&(!(0<d)||r);d++)n.id?c=n.id:(c="MixItUp"+f.randomHex(),n.id=c),p.instances[c]instanceof p.Mixer?(s=p.instances[c],(!e||e&&e.debug&&!1!==e.debug.showWarnings)&&console.warn(p.messages.warningFactoryPreexistingInstance())):((s=new p.Mixer).attach(n,o,c,e),p.instances[c]=s),a=new p.Facade(s),e&&e.debug&&e.debug.enable?l.push(s):l.push(a);return r?new p.Collection(l):l[0]}).use=function(t){p.Base.prototype.callActions.call(p,"beforeUse",arguments),"function"==typeof t&&"mixitup-extension"===t.TYPE?void 0===p.extensions[t.NAME]&&(t(p),p.extensions[t.NAME]=t):t.fn&&t.fn.jquery&&(p.libraries.$=t),p.Base.prototype.callActions.call(p,"afterUse",arguments)},p.instances={},p.extensions={},p.libraries={},f={hasClass:function(t,e){return!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},addClass:function(t,e){this.hasClass(t,e)||(t.className+=t.className?" "+e:e)},removeClass:function(t,e){if(this.hasClass(t,e)){var i=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(i," ").trim()}},extend:function(e,t,i,n){var r=[],s="",a=-1;i=i||!1,n=n||!1;try{if(Array.isArray(t))for(a=0;a<t.length;a++)r.push(a);else t&&(r=Object.keys(t));for(a=0;a<r.length;a++)s=r[a],!i||"object"!=typeof t[s]||this.isElement(t[s])?e[s]=t[s]:(Array.isArray(t[s])?e[s]||(e[s]=[]):e[s]||(e[s]={}),this.extend(e[s],t[s],i,n))}catch(t){if(!n)throw t;this.handleExtendError(t,e)}return e},handleExtendError:function(t,e){var i=null,n="",r="",s="",a="",o="",l=-1,c=-1;if(t instanceof TypeError&&(i=/property "?(\w*)"?[,:] object/i.exec(t.message))){for(o in n=i[1],e){for(c=0;c<n.length&&n.charAt(c)===o.charAt(c);)c++;l<c&&(l=c,a=o)}throw 1<l&&(s=p.messages.errorConfigInvalidPropertySuggestion({probableMatch:a})),r=p.messages.errorConfigInvalidProperty({erroneous:n,suggestion:s}),new TypeError(r)}throw t},template:function(n){for(var t=/\${([\w]*)}/g,r={},e=null;e=t.exec(n);)r[e[1]]=new RegExp("\\${"+e[1]+"}","g");return function(t){var e="",i=n;for(e in t=t||{},r)i=i.replace(r[e],void 0!==t[e]?t[e]:"");return i}},on:function(t,e,i,n){t&&(t.addEventListener?t.addEventListener(e,i,n):t.attachEvent&&(t["e"+e+i]=i,t[e+i]=function(){t["e"+e+i](h.event)},t.attachEvent("on"+e,t[e+i])))},off:function(t,e,i){t&&(t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&(t.detachEvent("on"+e,t[e+i]),t[e+i]=null))},getCustomEvent:function(t,e,i){var n=null;return i=i||h.document,"function"==typeof h.CustomEvent?n=new h.CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0}):"function"==typeof i.createEvent?(n=i.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,e):((n=i.createEventObject()).type=t,n.returnValue=!1,n.cancelBubble=!1,n.detail=e),n},getOriginalEvent:function(t){return t.touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t},index:function(t,e){for(var i=0;null!==(t=t.previousElementSibling);)e&&!t.matches(e)||++i;return i},camelCase:function(t){return t.toLowerCase().replace(/([_-][a-z])/g,function(t){return t.toUpperCase().replace(/[_-]/,"")})},pascalCase:function(t){return(t=this.camelCase(t)).charAt(0).toUpperCase()+t.slice(1)},dashCase:function(t){return t.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()},isElement:function(t,e){return e=e||h.document,!!(h.HTMLElement&&t instanceof h.HTMLElement)||(!!(e.defaultView&&e.defaultView.HTMLElement&&t instanceof e.defaultView.HTMLElement)||null!==t&&1===t.nodeType&&"string"==typeof t.nodeName)},createElement:function(t,e){var i=null,n=null;for(i=(e=e||h.document).createDocumentFragment(),(n=e.createElement("div")).innerHTML=t.trim();n.firstChild;)i.appendChild(n.firstChild);return i},removeWhitespace:function(t){for(var e;t&&"#text"===t.nodeName;)t=(e=t).previousSibling,e.parentElement&&e.parentElement.removeChild(e)},isEqualArray:function(t,e){var i=t.length;if(i!==e.length)return!1;for(;i--;)if(t[i]!==e[i])return!1;return!0},deepEquals:function(t,e){var i;if("object"==typeof t&&t&&"object"==typeof e&&e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(i in t)if(!e.hasOwnProperty(i)||!this.deepEquals(t[i],e[i]))return!1}else if(t!==e)return!1;return!0},arrayShuffle:function(t){for(var e=t.slice(),i=e.length,n=i,r=-1,s=[];n--;)r=~~(Math.random()*i),s=e[n],e[n]=e[r],e[r]=s;return e},arrayFromList:function(e){var i,n;try{return Array.prototype.slice.call(e)}catch(t){for(i=[],n=0;n<e.length;n++)i.push(e[n]);return i}},debounce:function(r,s,a){var o;return function(){var t,e=this,i=arguments,n=a&&!o;t=function(){o=null,a||r.apply(e,i)},clearTimeout(o),o=setTimeout(t,s),n&&r.apply(e,i)}},position:function(t){for(var e=0,i=0,n=t;t;)e-=t.scrollLeft,i-=t.scrollTop,t===n&&(e+=t.offsetLeft,i+=t.offsetTop,n=t.offsetParent),t=t.parentElement;return{x:e,y:i}},getHypotenuse:function(t,e){var i=t.x-e.x,n=t.y-e.y;return i=i<0?-1*i:i,n=n<0?-1*n:n,Math.sqrt(Math.pow(i,2)+Math.pow(n,2))},getIntersectionRatio:function(t,e){var i,n=t.width*t.height;return i=Math.max(0,Math.min(t.left+t.width,e.left+e.width)-Math.max(t.left,e.left)),Math.max(0,Math.min(t.top+t.height,e.top+e.height)-Math.max(t.top,e.top))*i/n},closestParent:function(t,e,i,n){var r=t.parentNode;if(n=n||h.document,i&&t.matches(e))return t;for(;r&&r!=n.body;){if(r.matches&&r.matches(e))return r;if(!r.parentNode)return null;r=r.parentNode}return null},children:function(t,e,i){var n=[],r="";return i=i||h.doc,t&&(t.id||(r="Temp"+this.randomHexKey(),t.id=r),n=i.querySelectorAll("#"+t.id+" > "+e),r&&t.removeAttribute("id")),n},clean:function(t){var e=[],i=-1;for(i=0;i<t.length;i++)""!==t[i]&&e.push(t[i]);return e},defer:function(t){var e=null,i=null,n=null;return i=new this.Deferred,p.features.has.promises?i.promise=new Promise(function(t,e){i.resolve=t,i.reject=e}):(n=h.jQuery||t.$)&&"function"==typeof n.Deferred?(e=n.Deferred(),i.promise=e.promise(),i.resolve=e.resolve,i.reject=e.reject):h.console&&console.warn(p.messages.warningNoPromiseImplementation()),i},all:function(t,e){var i=null;return p.features.has.promises?Promise.all(t):(i=h.jQuery||e.$)&&"function"==typeof i.when?i.when.apply(i,t).done(function(){return arguments}):(h.console&&console.warn(p.messages.warningNoPromiseImplementation()),[])},getPrefix:function(t,e,i){var n=-1,r="";if(f.dashCase(e)in t.style)return"";for(n=0;r=i[n];n++)if(r+e in t.style)return r.toLowerCase();return"unsupported"},randomHex:function(){return("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6).toUpperCase()},getDocumentState:function(t){return t="object"==typeof t.body?t:h.document,{scrollTop:h.pageYOffset,scrollLeft:h.pageXOffset,docHeight:t.documentElement.scrollHeight,docWidth:t.documentElement.scrollWidth,viewportHeight:t.documentElement.clientHeight,viewportWidth:t.documentElement.clientWidth}},bind:function(t,e){return function(){return e.apply(t,arguments)}},isVisible:function(t){var e;return!!t.offsetParent||"fixed"===(e=h.getComputedStyle(t)).position&&"hidden"!==e.visibility&&"0"!==e.opacity},seal:function(t){"function"==typeof Object.seal&&Object.seal(t)},freeze:function(t){"function"==typeof Object.freeze&&Object.freeze(t)},compareVersions:function(t,e){var i=t.split("."),n=e.split("."),r=-1,s=-1,a=-1;for(a=0;a<i.length;a++){if(r=parseInt(i[a].replace(/[^\d.]/g,"")),(s=parseInt(n[a].replace(/[^\d.]/g,"")||0))<r)return!1;if(r<s)return!0}return!0},Deferred:function(){this.promise=null,this.resolve=null,this.reject=null,this.id=f.randomHex()},isEmptyObject:function(t){var e="";if("function"==typeof Object.keys)return 0===Object.keys(t).length;for(e in t)if(t.hasOwnProperty(e))return!1;return!0},getClassname:function(t,e,i){var n="";return(n+=t.block).length&&(n+=t.delineatorElement),n+=t["element"+this.pascalCase(e)],i?(n.length&&(n+=t.delineatorModifier),n+=i):n},getProperty:function(t,e){var i,n=e.split("."),r="",s=0;if(!e)return t;for(i=function(t){return t?t[r]:null};s<n.length;)r=n[s],t=i(t),s++;return void 0!==t?t:null}},p.h=f,p.Base=function(){},p.Base.prototype={constructor:p.Base,callActions:function(t,e){var i=this.constructor.actions[t],n="";if(i&&!f.isEmptyObject(i))for(n in i)i[n].apply(this,e)},callFilters:function(t,e,i){var n=this.constructor.filters[t],r=e,s="";if(!n||f.isEmptyObject(n))return r;for(s in i=i||[],n)(i=f.arrayFromList(i)).unshift(r),r=n[s].apply(this,i);return r}},p.BaseStatic=function(){this.actions={},this.filters={},this.extend=function(t){f.extend(this.prototype,t)},this.registerAction=function(t,e,i){(this.actions[t]=this.actions[t]||{})[e]=i},this.registerFilter=function(t,e,i){(this.filters[t]=this.filters[t]||{})[e]=i}},p.Features=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.boxSizingPrefix="",this.transformPrefix="",this.transitionPrefix="",this.boxSizingPrefix="",this.transformProp="",this.transformRule="",this.transitionProp="",this.perspectiveProp="",this.perspectiveOriginProp="",this.has=new p.Has,this.canary=null,this.BOX_SIZING_PROP="boxSizing",this.TRANSITION_PROP="transition",this.TRANSFORM_PROP="transform",this.PERSPECTIVE_PROP="perspective",this.PERSPECTIVE_ORIGIN_PROP="perspectiveOrigin",this.VENDORS=["Webkit","moz","O","ms"],this.TWEENABLE=["opacity","width","height","marginRight","marginBottom","x","y","scale","translateX","translateY","translateZ","rotateX","rotateY","rotateZ"],this.callActions("afterConstruct")},p.BaseStatic.call(p.Features),p.Features.prototype=Object.create(p.Base.prototype),f.extend(p.Features.prototype,{constructor:p.Features,init:function(){var t=this;t.callActions("beforeInit",arguments),t.canary=document.createElement("div"),t.setPrefixes(),t.runTests(),t.callActions("beforeInit",arguments)},runTests:function(){var t=this;t.callActions("beforeRunTests",arguments),t.has.promises="function"==typeof h.Promise,t.has.transitions="unsupported"!==t.transitionPrefix,t.callActions("afterRunTests",arguments),f.freeze(t.has)},setPrefixes:function(){var t=this;t.callActions("beforeSetPrefixes",arguments),t.transitionPrefix=f.getPrefix(t.canary,"Transition",t.VENDORS),t.transformPrefix=f.getPrefix(t.canary,"Transform",t.VENDORS),t.boxSizingPrefix=f.getPrefix(t.canary,"BoxSizing",t.VENDORS),t.boxSizingProp=t.boxSizingPrefix?t.boxSizingPrefix+f.pascalCase(t.BOX_SIZING_PROP):t.BOX_SIZING_PROP,t.transitionProp=t.transitionPrefix?t.transitionPrefix+f.pascalCase(t.TRANSITION_PROP):t.TRANSITION_PROP,t.transformProp=t.transformPrefix?t.transformPrefix+f.pascalCase(t.TRANSFORM_PROP):t.TRANSFORM_PROP,t.transformRule=t.transformPrefix?"-"+t.transformPrefix+"-"+t.TRANSFORM_PROP:t.TRANSFORM_PROP,t.perspectiveProp=t.transformPrefix?t.transformPrefix+f.pascalCase(t.PERSPECTIVE_PROP):t.PERSPECTIVE_PROP,t.perspectiveOriginProp=t.transformPrefix?t.transformPrefix+f.pascalCase(t.PERSPECTIVE_ORIGIN_PROP):t.PERSPECTIVE_ORIGIN_PROP,t.callActions("afterSetPrefixes",arguments)}}),p.Has=function(){this.transitions=!1,this.promises=!1,f.seal(this)},p.features=new p.Features,p.features.init(),p.ConfigAnimation=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.enable=!0,this.effects="fade scale",this.effectsIn="",this.effectsOut="",this.duration=600,this.easing="ease",this.applyPerspective=!0,this.perspectiveDistance="3000px",this.perspectiveOrigin="50% 50%",this.queue=!0,this.queueLimit=3,this.animateResizeContainer=!0,this.animateResizeTargets=!1,this.staggerSequence=null,this.reverseOut=!1,this.nudge=!0,this.clampHeight=!0,this.clampWidth=!0,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigAnimation),p.ConfigAnimation.prototype=Object.create(p.Base.prototype),p.ConfigAnimation.prototype.constructor=p.ConfigAnimation,p.ConfigBehavior=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.liveSort=!1,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigBehavior),p.ConfigBehavior.prototype=Object.create(p.Base.prototype),p.ConfigBehavior.prototype.constructor=p.ConfigBehavior,p.ConfigCallbacks=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.onMixStart=null,this.onMixBusy=null,this.onMixEnd=null,this.onMixFail=null,this.onMixClick=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigCallbacks),p.ConfigCallbacks.prototype=Object.create(p.Base.prototype),p.ConfigCallbacks.prototype.constructor=p.ConfigCallbacks,p.ConfigControls=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.enable=!0,this.live=!1,this.scope="global",this.toggleLogic="or",this.toggleDefault="all",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigControls),p.ConfigControls.prototype=Object.create(p.Base.prototype),p.ConfigControls.prototype.constructor=p.ConfigControls,p.ConfigClassNames=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.block="mixitup",this.elementContainer="container",this.elementFilter="control",this.elementSort="control",this.elementMultimix="control",this.elementToggle="control",this.modifierActive="active",this.modifierDisabled="disabled",this.modifierFailed="failed",this.delineatorElement="-",this.delineatorModifier="-",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigClassNames),p.ConfigClassNames.prototype=Object.create(p.Base.prototype),p.ConfigClassNames.prototype.constructor=p.ConfigClassNames,p.ConfigData=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.uidKey="",this.dirtyCheck=!1,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigData),p.ConfigData.prototype=Object.create(p.Base.prototype),p.ConfigData.prototype.constructor=p.ConfigData,p.ConfigDebug=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.enable=!1,this.showWarnings=!0,this.fauxAsync=!1,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigDebug),p.ConfigDebug.prototype=Object.create(p.Base.prototype),p.ConfigDebug.prototype.constructor=p.ConfigDebug,p.ConfigLayout=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.allowNestedTargets=!0,this.containerClassName="",this.siblingBefore=null,this.siblingAfter=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigLayout),p.ConfigLayout.prototype=Object.create(p.Base.prototype),p.ConfigLayout.prototype.constructor=p.ConfigLayout,p.ConfigLoad=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.filter="all",this.sort="default:asc",this.dataset=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigLoad),p.ConfigLoad.prototype=Object.create(p.Base.prototype),p.ConfigLoad.prototype.constructor=p.ConfigLoad,p.ConfigSelectors=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.target=".mix",this.control="",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigSelectors),p.ConfigSelectors.prototype=Object.create(p.Base.prototype),p.ConfigSelectors.prototype.constructor=p.ConfigSelectors,p.ConfigRender=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.target=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigRender),p.ConfigRender.prototype=Object.create(p.Base.prototype),p.ConfigRender.prototype.constructor=p.ConfigRender,p.ConfigTemplates=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.ConfigTemplates),p.ConfigTemplates.prototype=Object.create(p.Base.prototype),p.ConfigTemplates.prototype.constructor=p.ConfigTemplates,p.Config=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.animation=new p.ConfigAnimation,this.behavior=new p.ConfigBehavior,this.callbacks=new p.ConfigCallbacks,this.controls=new p.ConfigControls,this.classNames=new p.ConfigClassNames,this.data=new p.ConfigData,this.debug=new p.ConfigDebug,this.layout=new p.ConfigLayout,this.load=new p.ConfigLoad,this.selectors=new p.ConfigSelectors,this.render=new p.ConfigRender,this.templates=new p.ConfigTemplates,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.Config),p.Config.prototype=Object.create(p.Base.prototype),p.Config.prototype.constructor=p.Config,p.MixerDom=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.document=null,this.body=null,this.container=null,this.parent=null,this.targets=[],this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.MixerDom),p.MixerDom.prototype=Object.create(p.Base.prototype),p.MixerDom.prototype.constructor=p.MixerDom,p.UiClassNames=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.base="",this.active="",this.disabled="",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.UiClassNames),p.UiClassNames.prototype=Object.create(p.Base.prototype),p.UiClassNames.prototype.constructor=p.UiClassNames,p.CommandDataset=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.dataset=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.CommandDataset),p.CommandDataset.prototype=Object.create(p.Base.prototype),p.CommandDataset.prototype.constructor=p.CommandDataset,p.CommandMultimix=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.filter=null,this.sort=null,this.insert=null,this.remove=null,this.changeLayout=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.CommandMultimix),p.CommandMultimix.prototype=Object.create(p.Base.prototype),p.CommandMultimix.prototype.constructor=p.CommandMultimix,p.CommandFilter=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.selector="",this.collection=null,this.action="show",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.CommandFilter),p.CommandFilter.prototype=Object.create(p.Base.prototype),p.CommandFilter.prototype.constructor=p.CommandFilter,p.CommandSort=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.sortString="",this.attribute="",this.order="asc",this.collection=null,this.next=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.CommandSort),p.CommandSort.prototype=Object.create(p.Base.prototype),p.CommandSort.prototype.constructor=p.CommandSort,p.CommandInsert=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.index=0,this.collection=[],this.position="before",this.sibling=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.CommandInsert),p.CommandInsert.prototype=Object.create(p.Base.prototype),p.CommandInsert.prototype.constructor=p.CommandInsert,p.CommandRemove=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.targets=[],this.collection=[],this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.CommandRemove),p.CommandRemove.prototype=Object.create(p.Base.prototype),p.CommandRemove.prototype.constructor=p.CommandRemove,p.CommandChangeLayout=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.containerClassName="",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.CommandChangeLayout),p.CommandChangeLayout.prototype=Object.create(p.Base.prototype),p.CommandChangeLayout.prototype.constructor=p.CommandChangeLayout,p.ControlDefinition=function(t,e,i,n){p.Base.call(this),this.callActions("beforeConstruct"),this.type=t,this.selector=e,this.live=i||!1,this.parent=n||"",this.callActions("afterConstruct"),f.freeze(this),f.seal(this)},p.BaseStatic.call(p.ControlDefinition),p.ControlDefinition.prototype=Object.create(p.Base.prototype),p.ControlDefinition.prototype.constructor=p.ControlDefinition,p.controlDefinitions=[],p.controlDefinitions.push(new p.ControlDefinition("multimix","[data-filter][data-sort]")),p.controlDefinitions.push(new p.ControlDefinition("filter","[data-filter]")),p.controlDefinitions.push(new p.ControlDefinition("sort","[data-sort]")),p.controlDefinitions.push(new p.ControlDefinition("toggle","[data-toggle]")),p.Control=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.el=null,this.selector="",this.bound=[],this.pending=-1,this.type="",this.status="inactive",this.filter="",this.sort="",this.canDisable=!1,this.handler=null,this.classNames=new p.UiClassNames,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.Control),p.Control.prototype=Object.create(p.Base.prototype),f.extend(p.Control.prototype,{constructor:p.Control,init:function(t,e,i){var n=this;if(this.callActions("beforeInit",arguments),n.el=t,n.type=e,n.selector=i,n.selector)n.status="live";else switch(n.canDisable="boolean"==typeof n.el.disable,n.type){case"filter":n.filter=n.el.getAttribute("data-filter");break;case"toggle":n.filter=n.el.getAttribute("data-toggle");break;case"sort":n.sort=n.el.getAttribute("data-sort");break;case"multimix":n.filter=n.el.getAttribute("data-filter"),n.sort=n.el.getAttribute("data-sort")}n.bindClick(),p.controls.push(n),this.callActions("afterInit",arguments)},isBound:function(t){var e;return this.callActions("beforeIsBound",arguments),e=-1<this.bound.indexOf(t),this.callFilters("afterIsBound",e,arguments)},addBinding:function(t){this.callActions("beforeAddBinding",arguments),this.isBound()||this.bound.push(t),this.callActions("afterAddBinding",arguments)},removeBinding:function(t){var e=this,i=-1;this.callActions("beforeRemoveBinding",arguments),-1<(i=e.bound.indexOf(t))&&e.bound.splice(i,1),e.bound.length<1&&(e.unbindClick(),i=p.controls.indexOf(e),p.controls.splice(i,1),"active"===e.status&&e.renderStatus(e.el,"inactive")),this.callActions("afterRemoveBinding",arguments)},bindClick:function(){var e=this;this.callActions("beforeBindClick",arguments),e.handler=function(t){e.handleClick(t)},f.on(e.el,"click",e.handler),this.callActions("afterBindClick",arguments)},unbindClick:function(){this.callActions("beforeUnbindClick",arguments),f.off(this.el,"click",this.handler),this.handler=null,this.callActions("afterUnbindClick",arguments)},handleClick:function(t){var e=this,i=null,n=null,r=!1,s={},a=null,o=[],l=-1;if(this.callActions("beforeHandleClick",arguments),this.pending=0,n=e.bound[0],i=e.selector?f.closestParent(t.target,n.config.selectors.control+e.selector,!0,n.dom.document):e.el){switch(e.type){case"filter":s.filter=e.filter||i.getAttribute("data-filter");break;case"sort":s.sort=e.sort||i.getAttribute("data-sort");break;case"multimix":s.filter=e.filter||i.getAttribute("data-filter"),s.sort=e.sort||i.getAttribute("data-sort");break;case"toggle":s.filter=e.filter||i.getAttribute("data-toggle"),r="live"===e.status?f.hasClass(i,e.classNames.active):"active"===e.status}for(l=0;l<e.bound.length;l++)a=new p.CommandMultimix,f.extend(a,s),o.push(a);for(o=e.callFilters("commandsHandleClick",o,arguments),e.pending=e.bound.length,l=0;n=e.bound[l];l++)(s=o[l])&&(n.lastClicked||(n.lastClicked=i),p.events.fire("mixClick",n.dom.container,{state:n.state,instance:n,originalEvent:t,control:n.lastClicked},n.dom.document),"function"==typeof n.config.callbacks.onMixClick&&!1===n.config.callbacks.onMixClick.call(n.lastClicked,n.state,t,n)||("toggle"===e.type?r?n.toggleOff(s.filter):n.toggleOn(s.filter):n.multimix(s)));this.callActions("afterHandleClick",arguments)}else e.callActions("afterHandleClick",arguments)},update:function(t,e){var i=this,n=new p.CommandMultimix;i.callActions("beforeUpdate",arguments),i.pending--,i.pending=Math.max(0,i.pending),0<i.pending||("live"===i.status?i.updateLive(t,e):(n.sort=i.sort,n.filter=i.filter,i.callFilters("actionsUpdate",n,arguments),i.parseStatusChange(i.el,t,n,e)),i.callActions("afterUpdate",arguments))},updateLive:function(t,e){var i,n=this,r=null,s=null,a=-1;if(n.callActions("beforeUpdateLive",arguments),n.el){for(i=n.el.querySelectorAll(n.selector),a=0;s=i[a];a++){switch(r=new p.CommandMultimix,n.type){case"filter":r.filter=s.getAttribute("data-filter");break;case"sort":r.sort=s.getAttribute("data-sort");break;case"multimix":r.filter=s.getAttribute("data-filter"),r.sort=s.getAttribute("data-sort");break;case"toggle":r.filter=s.getAttribute("data-toggle")}r=n.callFilters("actionsUpdateLive",r,arguments),n.parseStatusChange(s,t,r,e)}n.callActions("afterUpdateLive",arguments)}},parseStatusChange:function(t,e,i,n){var r=this,s="",a=-1;switch(r.callActions("beforeParseStatusChange",arguments),r.type){case"filter":e.filter===i.filter?r.renderStatus(t,"active"):r.renderStatus(t,"inactive");break;case"multimix":e.sort===i.sort&&e.filter===i.filter?r.renderStatus(t,"active"):r.renderStatus(t,"inactive");break;case"sort":e.sort.match(/:asc/g)&&(s=e.sort.replace(/:asc/g,"")),e.sort===i.sort||s===i.sort?r.renderStatus(t,"active"):r.renderStatus(t,"inactive");break;case"toggle":for(n.length<1&&r.renderStatus(t,"inactive"),e.filter===i.filter&&r.renderStatus(t,"active"),a=0;a<n.length;a++){if(n[a]===i.filter){r.renderStatus(t,"active");break}r.renderStatus(t,"inactive")}}r.callActions("afterParseStatusChange",arguments)},renderStatus:function(t,e){var i=this;switch(i.callActions("beforeRenderStatus",arguments),e){case"active":f.addClass(t,i.classNames.active),f.removeClass(t,i.classNames.disabled),i.canDisable&&(i.el.disabled=!1);break;case"inactive":f.removeClass(t,i.classNames.active),f.removeClass(t,i.classNames.disabled),i.canDisable&&(i.el.disabled=!1);break;case"disabled":i.canDisable&&(i.el.disabled=!0),f.addClass(t,i.classNames.disabled),f.removeClass(t,i.classNames.active)}"live"!==i.status&&(i.status=e),i.callActions("afterRenderStatus",arguments)}}),p.controls=[],p.StyleData=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.x=0,this.y=0,this.top=0,this.right=0,this.bottom=0,this.left=0,this.width=0,this.height=0,this.marginRight=0,this.marginBottom=0,this.opacity=0,this.scale=new p.TransformData,this.translateX=new p.TransformData,this.translateY=new p.TransformData,this.translateZ=new p.TransformData,this.rotateX=new p.TransformData,this.rotateY=new p.TransformData,this.rotateZ=new p.TransformData,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.StyleData),p.StyleData.prototype=Object.create(p.Base.prototype),p.StyleData.prototype.constructor=p.StyleData,p.TransformData=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.value=0,this.unit="",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.TransformData),p.TransformData.prototype=Object.create(p.Base.prototype),p.TransformData.prototype.constructor=p.TransformData,p.TransformDefaults=function(){p.StyleData.apply(this),this.callActions("beforeConstruct"),this.scale.value=.01,this.scale.unit="",this.translateX.value=20,this.translateX.unit="px",this.translateY.value=20,this.translateY.unit="px",this.translateZ.value=20,this.translateZ.unit="px",this.rotateX.value=90,this.rotateX.unit="deg",this.rotateY.value=90,this.rotateY.unit="deg",this.rotateX.value=90,this.rotateX.unit="deg",this.rotateZ.value=180,this.rotateZ.unit="deg",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.TransformDefaults),p.TransformDefaults.prototype=Object.create(p.StyleData.prototype),p.TransformDefaults.prototype.constructor=p.TransformDefaults,p.transformDefaults=new p.TransformDefaults,p.EventDetail=function(){this.state=null,this.futureState=null,this.instance=null,this.originalEvent=null},p.Events=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.mixStart=null,this.mixBusy=null,this.mixEnd=null,this.mixFail=null,this.mixClick=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.Events),p.Events.prototype=Object.create(p.Base.prototype),p.Events.prototype.constructor=p.Events,p.Events.prototype.fire=function(t,e,i,n){var r,s=new p.EventDetail;if(this.callActions("beforeFire",arguments),void 0===this[t])throw new Error('Event type "'+t+'" not found.');s.state=new p.State,f.extend(s.state,i.state),i.futureState&&(s.futureState=new p.State,f.extend(s.futureState,i.futureState)),s.instance=i.instance,i.originalEvent&&(s.originalEvent=i.originalEvent),r=f.getCustomEvent(t,s,n),this.callFilters("eventFire",r,arguments),e.dispatchEvent(r)},p.events=new p.Events,p.QueueItem=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.args=[],this.instruction=null,this.triggerElement=null,this.deferred=null,this.isToggling=!1,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.QueueItem),p.QueueItem.prototype=Object.create(p.Base.prototype),p.QueueItem.prototype.constructor=p.QueueItem,p.Mixer=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.config=new p.Config,this.id="",this.isBusy=!1,this.isToggling=!1,this.incPadding=!0,this.controls=[],this.targets=[],this.origOrder=[],this.cache={},this.toggleArray=[],this.targetsMoved=0,this.targetsImmovable=0,this.targetsBound=0,this.targetsDone=0,this.staggerDuration=0,this.effectsIn=null,this.effectsOut=null,this.transformIn=[],this.transformOut=[],this.queue=[],this.state=null,this.lastOperation=null,this.lastClicked=null,this.userCallback=null,this.userDeferred=null,this.dom=new p.MixerDom,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.Mixer),p.Mixer.prototype=Object.create(p.Base.prototype),f.extend(p.Mixer.prototype,{constructor:p.Mixer,attach:function(t,e,i,n){var r=this,s=null,a=-1;for(r.callActions("beforeAttach",arguments),r.id=i,n&&f.extend(r.config,n,!0,!0),r.sanitizeConfig(),r.cacheDom(t,e),r.config.layout.containerClassName&&f.addClass(r.dom.container,r.config.layout.containerClassName),p.features.has.transitions||(r.config.animation.enable=!1),void 0===h.console&&(r.config.debug.showWarnings=!1),r.config.data.uidKey&&(r.config.controls.enable=!1),r.indexTargets(),r.state=r.getInitialState(),a=0;s=r.lastOperation.toHide[a];a++)s.hide();r.config.controls.enable&&(r.initControls(),r.buildToggleArray(null,r.state),r.updateControls({filter:r.state.activeFilter,sort:r.state.activeSort})),r.parseEffects(),r.callActions("afterAttach",arguments)},sanitizeConfig:function(){var t=this;t.callActions("beforeSanitizeConfig",arguments),t.config.controls.scope=t.config.controls.scope.toLowerCase().trim(),t.config.controls.toggleLogic=t.config.controls.toggleLogic.toLowerCase().trim(),t.config.controls.toggleDefault=t.config.controls.toggleDefault.toLowerCase().trim(),t.config.animation.effects=t.config.animation.effects.trim(),t.callActions("afterSanitizeConfig",arguments)},getInitialState:function(){var t=this,e=new p.State,i=new p.Operation;if(t.callActions("beforeGetInitialState",arguments),e.activeContainerClassName=t.config.layout.containerClassName,t.config.load.dataset){if(!t.config.data.uidKey||"string"!=typeof t.config.data.uidKey)throw new TypeError(p.messages.errorConfigDataUidKeyNotSet());i.startDataset=i.newDataset=e.activeDataset=t.config.load.dataset.slice(),i.startContainerClassName=i.newContainerClassName=e.activeContainerClassName,i.show=t.targets.slice(),e=t.callFilters("stateGetInitialState",e,arguments)}else e.activeFilter=t.parseFilterArgs([t.config.load.filter]).command,e.activeSort=t.parseSortArgs([t.config.load.sort]).command,e.totalTargets=t.targets.length,(e=t.callFilters("stateGetInitialState",e,arguments)).activeSort.collection||e.activeSort.attribute||"random"===e.activeSort.order||"desc"===e.activeSort.order?(i.newSort=e.activeSort,t.sortOperation(i),t.printSort(!1,i),t.targets=i.newOrder):i.startOrder=i.newOrder=t.targets,i.startFilter=i.newFilter=e.activeFilter,i.startSort=i.newSort=e.activeSort,i.startContainerClassName=i.newContainerClassName=e.activeContainerClassName,"all"===i.newFilter.selector?i.newFilter.selector=t.config.selectors.target:"none"===i.newFilter.selector&&(i.newFilter.selector="");return i=t.callFilters("operationGetInitialState",i,[e]),(t.lastOperation=i).newFilter&&t.filterOperation(i),e=t.buildState(i)},cacheDom:function(t,e){var i=this;i.callActions("beforeCacheDom",arguments),i.dom.document=e,i.dom.body=i.dom.document.querySelector("body"),i.dom.container=t,i.dom.parent=t,i.callActions("afterCacheDom",arguments)},indexTargets:function(){var t,e=this,i=null,n=null,r=-1;if(e.callActions("beforeIndexTargets",arguments),e.dom.targets=e.config.layout.allowNestedTargets?e.dom.container.querySelectorAll(e.config.selectors.target):f.children(e.dom.container,e.config.selectors.target,e.dom.document),e.dom.targets=f.arrayFromList(e.dom.targets),e.targets=[],(t=e.config.load.dataset)&&t.length!==e.dom.targets.length)throw new Error(p.messages.errorDatasetPrerenderedMismatch());if(e.dom.targets.length){for(r=0;n=e.dom.targets[r];r++)(i=new p.Target).init(n,e,t?t[r]:void 0),i.isInDom=!0,e.targets.push(i);e.dom.parent=e.dom.targets[0].parentElement===e.dom.container?e.dom.container:e.dom.targets[0].parentElement}e.origOrder=e.targets,e.callActions("afterIndexTargets",arguments)},initControls:function(){var t=this,e="",i=null,n=null,r=null,s=null,a=null,o=-1,l=-1;switch(t.callActions("beforeInitControls",arguments),t.config.controls.scope){case"local":r=t.dom.container;break;case"global":r=t.dom.document;break;default:throw new Error(p.messages.errorConfigInvalidControlsScope())}for(o=0;e=p.controlDefinitions[o];o++)if(t.config.controls.live||e.live){if(e.parent){if(!(s=t.dom[e.parent])||s.length<0)continue;"number"!=typeof s.length&&(s=[s])}else s=[r];for(l=0;n=s[l];l++)a=t.getControl(n,e.type,e.selector),t.controls.push(a)}else for(i=r.querySelectorAll(t.config.selectors.control+e.selector),l=0;n=i[l];l++)(a=t.getControl(n,e.type,""))&&t.controls.push(a);t.callActions("afterInitControls",arguments)},getControl:function(t,e,i){var n=this,r=null,s=-1;if(n.callActions("beforeGetControl",arguments),!i)for(s=0;r=p.controls[s];s++){if(r.el===t&&r.isBound(n))return n.callFilters("controlGetControl",null,arguments);if(r.el===t&&r.type===e&&r.selector===i)return r.addBinding(n),n.callFilters("controlGetControl",r,arguments)}return(r=new p.Control).init(t,e,i),r.classNames.base=f.getClassname(n.config.classNames,e),r.classNames.active=f.getClassname(n.config.classNames,e,n.config.classNames.modifierActive),r.classNames.disabled=f.getClassname(n.config.classNames,e,n.config.classNames.modifierDisabled),r.addBinding(n),n.callFilters("controlGetControl",r,arguments)},getToggleSelector:function(){var t=this,e="or"===t.config.controls.toggleLogic?", ":"",i="";return t.callActions("beforeGetToggleSelector",arguments),t.toggleArray=f.clean(t.toggleArray),""===(i=t.toggleArray.join(e))&&(i=t.config.controls.toggleDefault),t.callFilters("selectorGetToggleSelector",i,arguments)},buildToggleArray:function(t,e){var i=this,n="";if(i.callActions("beforeBuildToggleArray",arguments),t&&t.filter)n=t.filter.selector.replace(/\s/g,"");else{if(!e)return;n=e.activeFilter.selector.replace(/\s/g,"")}n!==i.config.selectors.target&&"all"!==n||(n=""),"or"===i.config.controls.toggleLogic?i.toggleArray=n.split(","):i.toggleArray=i.splitCompoundSelector(n),i.toggleArray=f.clean(i.toggleArray),i.callActions("afterBuildToggleArray",arguments)},splitCompoundSelector:function(t){var e=t.split(/([\.\[])/g),i=[],n="",r=-1;for(""===e[0]&&e.shift(),r=0;r<e.length;r++)r%2==0&&(n=""),n+=e[r],r%2!=0&&i.push(n);return i},updateControls:function(t){var e=this,i=null,n=new p.CommandMultimix,r=-1;for(e.callActions("beforeUpdateControls",arguments),t.filter?n.filter=t.filter.selector:n.filter=e.state.activeFilter.selector,t.sort?n.sort=e.buildSortString(t.sort):n.sort=e.buildSortString(e.state.activeSort),n.filter===e.config.selectors.target&&(n.filter="all"),""===n.filter&&(n.filter="none"),f.freeze(n),r=0;i=e.controls[r];r++)i.update(n,e.toggleArray);e.callActions("afterUpdateControls",arguments)},buildSortString:function(t){var e="";return e+=t.sortString,t.next&&(e+=" "+this.buildSortString(t.next)),e},insertTargets:function(t,e){var i,n=this,r=-1,s=null,a=null,o=null,l=-1;if(n.callActions("beforeInsertTargets",arguments),void 0===t.index&&(t.index=0),i=n.getNextSibling(t.index,t.sibling,t.position),s=n.dom.document.createDocumentFragment(),r=i?f.index(i,n.config.selectors.target):n.targets.length,t.collection){for(l=0;o=t.collection[l];l++){if(-1<n.dom.targets.indexOf(o))throw new Error(p.messages.errorInsertPreexistingElement());o.style.display="none",s.appendChild(o),s.appendChild(n.dom.document.createTextNode(" ")),f.isElement(o,n.dom.document)&&o.matches(n.config.selectors.target)&&((a=new p.Target).init(o,n),a.isInDom=!0,n.targets.splice(r,0,a),r++)}n.dom.parent.insertBefore(s,i)}e.startOrder=n.origOrder=n.targets,n.callActions("afterInsertTargets",arguments)},getNextSibling:function(t,e,i){var n=this,r=null;return t=Math.max(t,0),e&&"before"===i?r=e:e&&"after"===i?r=e.nextElementSibling||null:0<n.targets.length&&void 0!==t?r=t<n.targets.length||!n.targets.length?n.targets[t].dom.el:n.targets[n.targets.length-1].dom.el.nextElementSibling:0===n.targets.length&&0<n.dom.parent.children.length&&(n.config.layout.siblingAfter?r=n.config.layout.siblingAfter:n.config.layout.siblingBefore?r=n.config.layout.siblingBefore.nextElementSibling:n.dom.parent.children[0]),n.callFilters("elementGetNextSibling",r,arguments)},filterOperation:function(t){var e,i=!1,n=-1,r=null,s=-1;for(this.callActions("beforeFilterOperation",arguments),e=t.newFilter.action,s=0;r=t.newOrder[s];s++)i=t.newFilter.collection?-1<t.newFilter.collection.indexOf(r.dom.el):""!==t.newFilter.selector&&r.dom.el.matches(t.newFilter.selector),this.evaluateHideShow(i,r,e,t);if(t.toRemove.length)for(s=0;r=t.show[s];s++)-1<t.toRemove.indexOf(r)&&(t.show.splice(s,1),-1<(n=t.toShow.indexOf(r))&&t.toShow.splice(n,1),t.toHide.push(r),t.hide.push(r),s--);t.matching=t.show.slice(),0===t.show.length&&""!==t.newFilter.selector&&0!==this.targets.length&&(t.hasFailed=!0),this.callActions("afterFilterOperation",arguments)},evaluateHideShow:function(t,e,i,n){var r,s=Array.prototype.slice.call(arguments,1);r=this.callFilters("testResultEvaluateHideShow",t,s),this.callActions("beforeEvaluateHideShow",arguments),!0===r&&"show"===i||!1===r&&"hide"===i?(n.show.push(e),e.isShown||n.toShow.push(e)):(n.hide.push(e),e.isShown&&n.toHide.push(e)),this.callActions("afterEvaluateHideShow",arguments)},sortOperation:function(i){var n=this,t=[],e=null,r=null,s=-1;if(n.callActions("beforeSortOperation",arguments),i.startOrder=n.targets,i.newSort.collection){for(t=[],s=0;r=i.newSort.collection[s];s++){if(n.dom.targets.indexOf(r)<0)throw new Error(p.messages.errorSortNonExistentElement());(e=new p.Target).init(r,n),e.isInDom=!0,t.push(e)}i.newOrder=t}else"random"===i.newSort.order?i.newOrder=f.arrayShuffle(i.startOrder):""===i.newSort.attribute?(i.newOrder=n.origOrder.slice(),"desc"===i.newSort.order&&i.newOrder.reverse()):(i.newOrder=i.startOrder.slice(),i.newOrder.sort(function(t,e){return n.compare(t,e,i.newSort)}));f.isEqualArray(i.newOrder,i.startOrder)&&(i.willSort=!1),n.callActions("afterSortOperation",arguments)},compare:function(t,e,i){var n=i.order,r=this.getAttributeValue(t,i.attribute),s=this.getAttributeValue(e,i.attribute);return s=isNaN(+r)||isNaN(+s)?(r=r.toLowerCase(),s.toLowerCase()):(r=+r,+s),r<s?"asc"===n?-1:1:s<r?"asc"===n?1:-1:r===s&&i.next?this.compare(t,e,i.next):0},getAttributeValue:function(t,e){var i;return null===(i=t.dom.el.getAttribute("data-"+e))&&this.config.debug.showWarnings&&console.warn(p.messages.warningInconsistentSortingAttributes({attribute:"data-"+e})),this.callFilters("valueGetAttributeValue",i||0,arguments)},printSort:function(t,e){var i,n=this,r=t?e.newOrder:e.startOrder,s=t?e.startOrder:e.newOrder,a=r.length?r[r.length-1].dom.el.nextElementSibling:null,o=h.document.createDocumentFragment(),l=null,c=null,u=-1;for(n.callActions("beforePrintSort",arguments),u=0;l=r[u];u++)"absolute"!==(c=l.dom.el).style.position&&(f.removeWhitespace(c.previousSibling),c.parentElement.removeChild(c));for((i=a?a.previousSibling:n.dom.parent.lastChild)&&"#text"===i.nodeName&&f.removeWhitespace(i),u=0;l=s[u];u++)c=l.dom.el,f.isElement(o.lastChild)&&o.appendChild(h.document.createTextNode(" ")),o.appendChild(c);n.dom.parent.firstChild&&n.dom.parent.firstChild!==a&&o.insertBefore(h.document.createTextNode(" "),o.childNodes[0]),a?(o.appendChild(h.document.createTextNode(" ")),n.dom.parent.insertBefore(o,a)):n.dom.parent.appendChild(o),n.callActions("afterPrintSort",arguments)},parseSortString:function(t,e){var i=t.split(" "),n=e,r=[],s=-1;for(s=0;s<i.length;s++){switch(r=i[s].split(":"),n.sortString=i[s],n.attribute=f.dashCase(r[0]),n.order=r[1]||"asc",n.attribute){case"default":n.attribute="";break;case"random":n.attribute="",n.order="random"}if(!n.attribute||"random"===n.order)break;s<i.length-1&&(n.next=new p.CommandSort,f.freeze(n),n=n.next)}return this.callFilters("commandsParseSort",e,arguments)},parseEffects:function(){var t=this,e="",i=t.config.animation.effectsIn||t.config.animation.effects,n=t.config.animation.effectsOut||t.config.animation.effects;for(e in t.callActions("beforeParseEffects",arguments),t.effectsIn=new p.StyleData,t.effectsOut=new p.StyleData,t.transformIn=[],t.transformOut=[],t.effectsIn.opacity=t.effectsOut.opacity=1,t.parseEffect("fade",i,t.effectsIn,t.transformIn),t.parseEffect("fade",n,t.effectsOut,t.transformOut,!0),p.transformDefaults)p.transformDefaults[e]instanceof p.TransformData&&(t.parseEffect(e,i,t.effectsIn,t.transformIn),t.parseEffect(e,n,t.effectsOut,t.transformOut,!0));t.parseEffect("stagger",i,t.effectsIn,t.transformIn),t.parseEffect("stagger",n,t.effectsOut,t.transformOut,!0),t.callActions("afterParseEffects",arguments)},parseEffect:function(t,e,i,n,r){var s,a=this,o="",l="",c=["%","px","em","rem","vh","vw","deg"],u="",d=-1;if(a.callActions("beforeParseEffect",arguments),"string"!=typeof e)throw new TypeError(p.messages.errorConfigInvalidAnimationEffects());if(e.indexOf(t)<0)"stagger"===t&&(a.staggerDuration=0);else{switch(-1<(s=e.indexOf(t+"("))&&(o=e.substring(s),l=/\(([^)]+)\)/.exec(o)[1]),t){case"fade":i.opacity=l?parseFloat(l):0;break;case"stagger":a.staggerDuration=l?parseFloat(l):100;break;default:if(r&&a.config.animation.reverseOut&&"scale"!==t?i[t].value=-1*(l?parseFloat(l):p.transformDefaults[t].value):i[t].value=l?parseFloat(l):p.transformDefaults[t].value,l){for(d=0;u=c[d];d++)if(-1<l.indexOf(u)){i[t].unit=u;break}}else i[t].unit=p.transformDefaults[t].unit;n.push(t+"("+i[t].value+i[t].unit+")")}a.callActions("afterParseEffect",arguments)}},buildState:function(t){var e=this,i=new p.State,n=null,r=-1;for(e.callActions("beforeBuildState",arguments),r=0;n=e.targets[r];r++)(!t.toRemove.length||t.toRemove.indexOf(n)<0)&&i.targets.push(n.dom.el);for(r=0;n=t.matching[r];r++)i.matching.push(n.dom.el);for(r=0;n=t.show[r];r++)i.show.push(n.dom.el);for(r=0;n=t.hide[r];r++)(!t.toRemove.length||t.toRemove.indexOf(n)<0)&&i.hide.push(n.dom.el);return i.id=e.id,i.container=e.dom.container,i.activeFilter=t.newFilter,i.activeSort=t.newSort,i.activeDataset=t.newDataset,i.activeContainerClassName=t.newContainerClassName,i.hasFailed=t.hasFailed,i.totalTargets=e.targets.length,i.totalShow=t.show.length,i.totalHide=t.hide.length,i.totalMatching=t.matching.length,i.triggerElement=t.triggerElement,e.callFilters("stateBuildState",i,arguments)},goMix:function(t,e){var i=this,n=null;return i.callActions("beforeGoMix",arguments),i.config.animation.duration&&i.config.animation.effects&&f.isVisible(i.dom.container)||(t=!1),e.toShow.length||e.toHide.length||e.willSort||e.willChangeLayout||(t=!1),e.startState.show.length||e.show.length||(t=!1),p.events.fire("mixStart",i.dom.container,{state:e.startState,futureState:e.newState,instance:i},i.dom.document),"function"==typeof i.config.callbacks.onMixStart&&i.config.callbacks.onMixStart.call(i.dom.container,e.startState,e.newState,i),f.removeClass(i.dom.container,f.getClassname(i.config.classNames,"container",i.config.classNames.modifierFailed)),n=i.userDeferred?i.userDeferred:i.userDeferred=f.defer(p.libraries),i.isBusy=!0,t&&p.features.has.transitions?(h.pageYOffset!==e.docState.scrollTop&&h.scrollTo(e.docState.scrollLeft,e.docState.scrollTop),i.config.animation.applyPerspective&&(i.dom.parent.style[p.features.perspectiveProp]=i.config.animation.perspectiveDistance,i.dom.parent.style[p.features.perspectiveOriginProp]=i.config.animation.perspectiveOrigin),i.config.animation.animateResizeContainer&&e.startHeight!==e.newHeight&&e.viewportDeltaY!==e.startHeight-e.newHeight&&(i.dom.parent.style.height=e.startHeight+"px"),i.config.animation.animateResizeContainer&&e.startWidth!==e.newWidth&&e.viewportDeltaX!==e.startWidth-e.newWidth&&(i.dom.parent.style.width=e.startWidth+"px"),e.startHeight===e.newHeight&&(i.dom.parent.style.height=e.startHeight+"px"),e.startWidth===e.newWidth&&(i.dom.parent.style.width=e.startWidth+"px"),e.startHeight===e.newHeight&&e.startWidth===e.newWidth&&(i.dom.parent.style.overflow="hidden"),requestAnimationFrame(function(){i.moveTargets(e)})):i.config.debug.fauxAsync?setTimeout(function(){i.cleanUp(e)},i.config.animation.duration):i.cleanUp(e),i.callFilters("promiseGoMix",n.promise,arguments)},getStartMixData:function(t){var e=this,i=h.getComputedStyle(e.dom.parent),n=e.dom.parent.getBoundingClientRect(),r=null,s={},a=-1,o=i[p.features.boxSizingProp];for(e.incPadding="border-box"===o,e.callActions("beforeGetStartMixData",arguments),a=0;r=t.show[a];a++)s=r.getPosData(),t.showPosData[a]={startPosData:s};for(a=0;r=t.toHide[a];a++)s=r.getPosData(),t.toHidePosData[a]={startPosData:s};t.startX=n.left,t.startY=n.top,t.startHeight=e.incPadding?n.height:n.height-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderTop)-parseFloat(i.borderBottom),t.startWidth=e.incPadding?n.width:n.width-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderLeft)-parseFloat(i.borderRight),e.callActions("afterGetStartMixData",arguments)},setInter:function(t){var e=this,i=null,n=-1;for(e.callActions("beforeSetInter",arguments),e.config.animation.clampHeight&&(e.dom.parent.style.height=t.startHeight+"px",e.dom.parent.style.overflow="hidden"),e.config.animation.clampWidth&&(e.dom.parent.style.width=t.startWidth+"px",e.dom.parent.style.overflow="hidden"),n=0;i=t.toShow[n];n++)i.show();t.willChangeLayout&&(f.removeClass(e.dom.container,t.startContainerClassName),f.addClass(e.dom.container,t.newContainerClassName)),e.callActions("afterSetInter",arguments)},getInterMixData:function(t){var e=null,i=-1;for(this.callActions("beforeGetInterMixData",arguments),i=0;e=t.show[i];i++)t.showPosData[i].interPosData=e.getPosData();for(i=0;e=t.toHide[i];i++)t.toHidePosData[i].interPosData=e.getPosData();this.callActions("afterGetInterMixData",arguments)},setFinal:function(t){var e=null,i=-1;for(this.callActions("beforeSetFinal",arguments),t.willSort&&this.printSort(!1,t),i=0;e=t.toHide[i];i++)e.hide();this.callActions("afterSetFinal",arguments)},getFinalMixData:function(t){var e,i=this,n=null,r=null,s=-1;for(i.callActions("beforeGetFinalMixData",arguments),s=0;r=t.show[s];s++)t.showPosData[s].finalPosData=r.getPosData();for(s=0;r=t.toHide[s];s++)t.toHidePosData[s].finalPosData=r.getPosData();for((i.config.animation.clampHeight||i.config.animation.clampWidth)&&(i.dom.parent.style.height=i.dom.parent.style.width=i.dom.parent.style.overflow=""),i.incPadding||(n=h.getComputedStyle(i.dom.parent)),e=i.dom.parent.getBoundingClientRect(),t.newX=e.left,t.newY=e.top,t.newHeight=i.incPadding?e.height:e.height-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderTop)-parseFloat(n.borderBottom),t.newWidth=i.incPadding?e.width:e.width-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderLeft)-parseFloat(n.borderRight),t.viewportDeltaX=t.docState.viewportWidth-this.dom.document.documentElement.clientWidth,t.viewportDeltaY=t.docState.viewportHeight-this.dom.document.documentElement.clientHeight,t.willSort&&i.printSort(!0,t),s=0;r=t.toShow[s];s++)r.hide();for(s=0;r=t.toHide[s];s++)r.show();t.willChangeLayout&&(f.removeClass(i.dom.container,t.newContainerClassName),f.addClass(i.dom.container,i.config.layout.containerClassName)),i.callActions("afterGetFinalMixData",arguments)},getTweenData:function(t){var e=this,i=null,n=null,r=Object.getOwnPropertyNames(e.effectsIn),s="",a=null,o=-1,l=-1,c=-1,u=-1;for(e.callActions("beforeGetTweenData",arguments),c=0;i=t.show[c];c++)for((n=t.showPosData[c]).posIn=new p.StyleData,n.posOut=new p.StyleData,n.tweenData=new p.StyleData,i.isShown?(n.posIn.x=n.startPosData.x-n.interPosData.x,n.posIn.y=n.startPosData.y-n.interPosData.y):n.posIn.x=n.posIn.y=0,n.posOut.x=n.finalPosData.x-n.interPosData.x,n.posOut.y=n.finalPosData.y-n.interPosData.y,n.posIn.opacity=i.isShown?1:e.effectsIn.opacity,n.posOut.opacity=1,n.tweenData.opacity=n.posOut.opacity-n.posIn.opacity,i.isShown||e.config.animation.nudge||(n.posIn.x=n.posOut.x,n.posIn.y=n.posOut.y),n.tweenData.x=n.posOut.x-n.posIn.x,n.tweenData.y=n.posOut.y-n.posIn.y,e.config.animation.animateResizeTargets&&(n.posIn.width=n.startPosData.width,n.posIn.height=n.startPosData.height,o=(n.startPosData.width||n.finalPosData.width)-n.interPosData.width,n.posIn.marginRight=n.startPosData.marginRight-o,l=(n.startPosData.height||n.finalPosData.height)-n.interPosData.height,n.posIn.marginBottom=n.startPosData.marginBottom-l,n.posOut.width=n.finalPosData.width,n.posOut.height=n.finalPosData.height,o=(n.finalPosData.width||n.startPosData.width)-n.interPosData.width,n.posOut.marginRight=n.finalPosData.marginRight-o,l=(n.finalPosData.height||n.startPosData.height)-n.interPosData.height,n.posOut.marginBottom=n.finalPosData.marginBottom-l,n.tweenData.width=n.posOut.width-n.posIn.width,n.tweenData.height=n.posOut.height-n.posIn.height,n.tweenData.marginRight=n.posOut.marginRight-n.posIn.marginRight,n.tweenData.marginBottom=n.posOut.marginBottom-n.posIn.marginBottom),u=0;s=r[u];u++)(a=e.effectsIn[s])instanceof p.TransformData&&a.value&&(n.posIn[s].value=a.value,n.posOut[s].value=0,n.tweenData[s].value=n.posOut[s].value-n.posIn[s].value,n.posIn[s].unit=n.posOut[s].unit=n.tweenData[s].unit=a.unit);for(c=0;i=t.toHide[c];c++)for((n=t.toHidePosData[c]).posIn=new p.StyleData,n.posOut=new p.StyleData,n.tweenData=new p.StyleData,n.posIn.x=i.isShown?n.startPosData.x-n.interPosData.x:0,n.posIn.y=i.isShown?n.startPosData.y-n.interPosData.y:0,n.posOut.x=e.config.animation.nudge?0:n.posIn.x,n.posOut.y=e.config.animation.nudge?0:n.posIn.y,n.tweenData.x=n.posOut.x-n.posIn.x,n.tweenData.y=n.posOut.y-n.posIn.y,e.config.animation.animateResizeTargets&&(n.posIn.width=n.startPosData.width,n.posIn.height=n.startPosData.height,o=n.startPosData.width-n.interPosData.width,n.posIn.marginRight=n.startPosData.marginRight-o,l=n.startPosData.height-n.interPosData.height,n.posIn.marginBottom=n.startPosData.marginBottom-l),n.posIn.opacity=1,n.posOut.opacity=e.effectsOut.opacity,n.tweenData.opacity=n.posOut.opacity-n.posIn.opacity,u=0;s=r[u];u++)(a=e.effectsOut[s])instanceof p.TransformData&&a.value&&(n.posIn[s].value=0,n.posOut[s].value=a.value,n.tweenData[s].value=n.posOut[s].value-n.posIn[s].value,n.posIn[s].unit=n.posOut[s].unit=n.tweenData[s].unit=a.unit);e.callActions("afterGetTweenData",arguments)},moveTargets:function(t){var e=this,i=null,n=null,r=null,s="",a=!1,o=-1,l=-1,c=e.checkProgress.bind(e);for(e.callActions("beforeMoveTargets",arguments),l=0;i=t.show[l];l++)n=new p.IMoveData,r=t.showPosData[l],s=i.isShown?"none":"show",(a=e.willTransition(s,t.hasEffect,r.posIn,r.posOut))&&o++,i.show(),n.posIn=r.posIn,n.posOut=r.posOut,n.statusChange=s,n.staggerIndex=o,n.operation=t,n.callback=a?c:null,i.move(n);for(l=0;i=t.toHide[l];l++)r=t.toHidePosData[l],n=new p.IMoveData,s="hide",a=e.willTransition(s,r.posIn,r.posOut),n.posIn=r.posIn,n.posOut=r.posOut,n.statusChange=s,n.staggerIndex=l,n.operation=t,n.callback=a?c:null,i.move(n);e.config.animation.animateResizeContainer&&(e.dom.parent.style[p.features.transitionProp]="height "+e.config.animation.duration+"ms ease, width "+e.config.animation.duration+"ms ease ",requestAnimationFrame(function(){t.startHeight!==t.newHeight&&t.viewportDeltaY!==t.startHeight-t.newHeight&&(e.dom.parent.style.height=t.newHeight+"px"),t.startWidth!==t.newWidth&&t.viewportDeltaX!==t.startWidth-t.newWidth&&(e.dom.parent.style.width=t.newWidth+"px")})),t.willChangeLayout&&(f.removeClass(e.dom.container,e.config.layout.ContainerClassName),f.addClass(e.dom.container,t.newContainerClassName)),e.callActions("afterMoveTargets",arguments)},hasEffect:function(){var t=["scale","translateX","translateY","translateZ","rotateX","rotateY","rotateZ"],e="",i=null,n=!1,r=-1;if(1!==this.effectsIn.opacity)return this.callFilters("resultHasEffect",!0,arguments);for(r=0;e=t[r];r++)if(0!==("undefined"!==(i=this.effectsIn[e]).value?i.value:i)){n=!0;break}return this.callFilters("resultHasEffect",n,arguments)},willTransition:function(t,e,i,n){var r=!1;return r=!!f.isVisible(this.dom.container)&&(!!("none"!==t&&e||i.x!==n.x||i.y!==n.y)||!!this.config.animation.animateResizeTargets&&(i.width!==n.width||i.height!==n.height||i.marginRight!==n.marginRight||i.marginTop!==n.marginTop)),this.callFilters("resultWillTransition",r,arguments)},checkProgress:function(t){this.targetsDone++,this.targetsBound===this.targetsDone&&this.cleanUp(t)},cleanUp:function(t){var e=this,i=null,n=null,r=null,s=null,a=-1;for(e.callActions("beforeCleanUp",arguments),e.targetsMoved=e.targetsImmovable=e.targetsBound=e.targetsDone=0,a=0;i=t.show[a];a++)i.cleanUp(),i.show();for(a=0;i=t.toHide[a];a++)i.cleanUp(),i.hide();if(t.willSort&&e.printSort(!1,t),e.dom.parent.style[p.features.transitionProp]=e.dom.parent.style.height=e.dom.parent.style.width=e.dom.parent.style.overflow=e.dom.parent.style[p.features.perspectiveProp]=e.dom.parent.style[p.features.perspectiveOriginProp]="",t.willChangeLayout&&(f.removeClass(e.dom.container,t.startContainerClassName),f.addClass(e.dom.container,t.newContainerClassName)),t.toRemove.length){for(a=0;i=e.targets[a];a++)-1<t.toRemove.indexOf(i)&&((n=i.dom.el.previousSibling)&&"#text"===n.nodeName&&(r=i.dom.el.nextSibling)&&"#text"===r.nodeName&&f.removeWhitespace(n),t.willSort||e.dom.parent.removeChild(i.dom.el),e.targets.splice(a,1),i.isInDom=!1,a--);e.origOrder=e.targets}t.willSort&&(e.targets=t.newOrder),e.state=t.newState,e.lastOperation=t,e.dom.targets=e.state.targets,p.events.fire("mixEnd",e.dom.container,{state:e.state,instance:e},e.dom.document),"function"==typeof e.config.callbacks.onMixEnd&&e.config.callbacks.onMixEnd.call(e.dom.container,e.state,e),t.hasFailed&&(p.events.fire("mixFail",e.dom.container,{state:e.state,instance:e},e.dom.document),"function"==typeof e.config.callbacks.onMixFail&&e.config.callbacks.onMixFail.call(e.dom.container,e.state,e),f.addClass(e.dom.container,f.getClassname(e.config.classNames,"container",e.config.classNames.modifierFailed))),"function"==typeof e.userCallback&&e.userCallback.call(e.dom.container,e.state,e),"function"==typeof e.userDeferred.resolve&&e.userDeferred.resolve(e.state),e.userCallback=null,e.userDeferred=null,e.lastClicked=null,e.isToggling=!1,e.isBusy=!1,e.queue.length&&(e.callActions("beforeReadQueueCleanUp",arguments),s=e.queue.shift(),e.userDeferred=s.deferred,e.isToggling=s.isToggling,e.lastClicked=s.triggerElement,s.instruction.command instanceof p.CommandMultimix?e.multimix.apply(e,s.args):e.dataset.apply(e,s.args)),e.callActions("afterCleanUp",arguments)},parseMultimixArgs:function(t){var e=this,i=new p.UserInstruction,n=null,r=-1;for(i.animate=e.config.animation.enable,i.command=new p.CommandMultimix,r=0;r<t.length;r++)null!==(n=t[r])&&("object"==typeof n?f.extend(i.command,n):"boolean"==typeof n?i.animate=n:"function"==typeof n&&(i.callback=n));return!i.command.insert||i.command.insert instanceof p.CommandInsert||(i.command.insert=e.parseInsertArgs([i.command.insert]).command),!i.command.remove||i.command.remove instanceof p.CommandRemove||(i.command.remove=e.parseRemoveArgs([i.command.remove]).command),!i.command.filter||i.command.filter instanceof p.CommandFilter||(i.command.filter=e.parseFilterArgs([i.command.filter]).command),!i.command.sort||i.command.sort instanceof p.CommandSort||(i.command.sort=e.parseSortArgs([i.command.sort]).command),!i.command.changeLayout||i.command.changeLayout instanceof p.CommandChangeLayout||(i.command.changeLayout=e.parseChangeLayoutArgs([i.command.changeLayout]).command),i=e.callFilters("instructionParseMultimixArgs",i,arguments),f.freeze(i),i},parseFilterArgs:function(t){var e=new p.UserInstruction,i=null,n=-1;for(e.animate=this.config.animation.enable,e.command=new p.CommandFilter,n=0;n<t.length;n++)"string"==typeof(i=t[n])?e.command.selector=i:null===i?e.command.collection=[]:"object"==typeof i&&f.isElement(i,this.dom.document)?e.command.collection=[i]:"object"==typeof i&&void 0!==i.length?e.command.collection=f.arrayFromList(i):"object"==typeof i?f.extend(e.command,i):"boolean"==typeof i?e.animate=i:"function"==typeof i&&(e.callback=i);if(e.command.selector&&e.command.collection)throw new Error(p.messages.errorFilterInvalidArguments());return e=this.callFilters("instructionParseFilterArgs",e,arguments),f.freeze(e),e},parseSortArgs:function(t){var e=new p.UserInstruction,i=null,n="",r=-1;for(e.animate=this.config.animation.enable,e.command=new p.CommandSort,r=0;r<t.length;r++)if(null!==(i=t[r]))switch(typeof i){case"string":n=i;break;case"object":i.length&&(e.command.collection=f.arrayFromList(i));break;case"boolean":e.animate=i;break;case"function":e.callback=i}return n&&(e.command=this.parseSortString(n,e.command)),e=this.callFilters("instructionParseSortArgs",e,arguments),f.freeze(e),e},parseInsertArgs:function(t){var e=new p.UserInstruction,i=null,n=-1;for(e.animate=this.config.animation.enable,e.command=new p.CommandInsert,n=0;n<t.length;n++)null!==(i=t[n])&&("number"==typeof i?e.command.index=i:"string"==typeof i&&-1<["before","after"].indexOf(i)?e.command.position=i:"string"==typeof i?e.command.collection=f.arrayFromList(f.createElement(i).childNodes):"object"==typeof i&&f.isElement(i,this.dom.document)?e.command.collection.length?e.command.sibling=i:e.command.collection=[i]:"object"==typeof i&&i.length?e.command.collection.length?e.command.sibling=i[0]:e.command.collection=i:"object"==typeof i&&i.childNodes&&i.childNodes.length?e.command.collection.length?e.command.sibling=i.childNodes[0]:e.command.collection=f.arrayFromList(i.childNodes):"object"==typeof i?f.extend(e.command,i):"boolean"==typeof i?e.animate=i:"function"==typeof i&&(e.callback=i));if(e.command.index&&e.command.sibling)throw new Error(p.messages.errorInsertInvalidArguments());return!e.command.collection.length&&this.config.debug.showWarnings&&console.warn(p.messages.warningInsertNoElements()),e=this.callFilters("instructionParseInsertArgs",e,arguments),f.freeze(e),e},parseRemoveArgs:function(t){var e=this,i=new p.UserInstruction,n=null,r=null,s=-1;for(i.animate=e.config.animation.enable,i.command=new p.CommandRemove,s=0;s<t.length;s++)if(null!==(r=t[s]))switch(typeof r){case"number":e.targets[r]&&(i.command.targets[0]=e.targets[r]);break;case"string":i.command.collection=f.arrayFromList(e.dom.parent.querySelectorAll(r));break;case"object":r&&r.length?i.command.collection=r:f.isElement(r,e.dom.document)?i.command.collection=[r]:f.extend(i.command,r);break;case"boolean":i.animate=r;break;case"function":i.callback=r}if(i.command.collection.length)for(s=0;n=e.targets[s];s++)-1<i.command.collection.indexOf(n.dom.el)&&i.command.targets.push(n);return!i.command.targets.length&&e.config.debug.showWarnings&&console.warn(p.messages.warningRemoveNoElements()),f.freeze(i),i},parseDatasetArgs:function(t){var e=new p.UserInstruction,i=null,n=-1;for(e.animate=this.config.animation.enable,e.command=new p.CommandDataset,n=0;n<t.length;n++)if(null!==(i=t[n]))switch(typeof i){case"object":Array.isArray(i)||"number"==typeof i.length?e.command.dataset=i:f.extend(e.command,i);break;case"boolean":e.animate=i;break;case"function":e.callback=i}return f.freeze(e),e},parseChangeLayoutArgs:function(t){var e=new p.UserInstruction,i=null,n=-1;for(e.animate=this.config.animation.enable,e.command=new p.CommandChangeLayout,n=0;n<t.length;n++)if(null!==(i=t[n]))switch(typeof i){case"string":e.command.containerClassName=i;break;case"object":f.extend(e.command,i);break;case"boolean":e.animate=i;break;case"function":e.callback=i}return f.freeze(e),e},queueMix:function(t){var e=this,i=null,n="";return e.callActions("beforeQueueMix",arguments),i=f.defer(p.libraries),e.config.animation.queue&&e.queue.length<e.config.animation.queueLimit?(t.deferred=i,e.queue.push(t),e.config.controls.enable&&(e.isToggling?(e.buildToggleArray(t.instruction.command),n=e.getToggleSelector(),e.updateControls({filter:{selector:n}})):e.updateControls(t.instruction.command))):(e.config.debug.showWarnings&&console.warn(p.messages.warningMultimixInstanceQueueFull()),i.resolve(e.state),p.events.fire("mixBusy",e.dom.container,{state:e.state,instance:e},e.dom.document),"function"==typeof e.config.callbacks.onMixBusy&&e.config.callbacks.onMixBusy.call(e.dom.container,e.state,e)),e.callFilters("promiseQueueMix",i.promise,arguments)},getDataOperation:function(t){var e=this,i=new p.Operation,n=[];if(i=e.callFilters("operationUnmappedGetDataOperation",i,arguments),e.dom.targets.length&&!(n=e.state.activeDataset||[]).length)throw new Error(p.messages.errorDatasetNotSet());return i.id=f.randomHex(),i.startState=e.state,i.startDataset=n,i.newDataset=t.slice(),e.diffDatasets(i),i.startOrder=e.targets,i.newOrder=i.show,e.config.animation.enable&&(e.getStartMixData(i),e.setInter(i),i.docState=f.getDocumentState(e.dom.document),e.getInterMixData(i),e.setFinal(i),e.getFinalMixData(i),e.parseEffects(),i.hasEffect=e.hasEffect(),e.getTweenData(i)),e.targets=i.show.slice(),i.newState=e.buildState(i),Array.prototype.push.apply(e.targets,i.toRemove),i=e.callFilters("operationMappedGetDataOperation",i,arguments)},diffDatasets:function(t){var e=this,i=[],n=[],r=[],s=null,a=null,o=null,l=null,c=null,u={},d="",h=-1;for(e.callActions("beforeDiffDatasets",arguments),h=0;s=t.newDataset[h];h++){if(void 0===(d=s[e.config.data.uidKey])||d.toString().length<1)throw new TypeError(p.messages.errorDatasetInvalidUidKey({uidKey:e.config.data.uidKey}));if(u[d])throw new Error(p.messages.errorDatasetDuplicateUid({uid:d}));u[d]=!0,(a=e.cache[d])instanceof p.Target?(e.config.data.dirtyCheck&&!f.deepEquals(s,a.data)&&(o=a.render(s),a.data=s,o!==a.dom.el&&(a.isInDom&&(a.unbindEvents(),e.dom.parent.replaceChild(o,a.dom.el)),a.isShown||(o.style.display="none"),a.dom.el=o,a.isInDom&&a.bindEvents())),o=a.dom.el):((a=new p.Target).init(null,e,s),a.hide()),a.isInDom?(c=a.dom.el.nextElementSibling,n.push(d),l&&(l.lastElementChild&&l.appendChild(e.dom.document.createTextNode(" ")),e.insertDatasetFrag(l,a.dom.el,r),l=null)):((l=l||e.dom.document.createDocumentFragment()).lastElementChild&&l.appendChild(e.dom.document.createTextNode(" ")),l.appendChild(a.dom.el),a.isInDom=!0,a.unbindEvents(),a.bindEvents(),a.hide(),t.toShow.push(a),r.push(a)),t.show.push(a)}for(l&&((c=c||e.config.layout.siblingAfter)&&l.appendChild(e.dom.document.createTextNode(" ")),e.insertDatasetFrag(l,c,r)),h=0;s=t.startDataset[h];h++)d=s[e.config.data.uidKey],a=e.cache[d],t.show.indexOf(a)<0?(t.hide.push(a),t.toHide.push(a),t.toRemove.push(a)):i.push(d);f.isEqualArray(i,n)||(t.willSort=!0),e.callActions("afterDiffDatasets",arguments)},insertDatasetFrag:function(t,e,i){var n=e?f.arrayFromList(this.dom.parent.children).indexOf(e):this.targets.length;for(this.dom.parent.insertBefore(t,e);i.length;)this.targets.splice(n,0,i.shift()),n++},willSort:function(t,e){var i=!1;return i=!!(this.config.behavior.liveSort||"random"===t.order||t.attribute!==e.attribute||t.order!==e.order||t.collection!==e.collection||null===t.next&&e.next||t.next&&null===e.next)||!(!t.next||!e.next)&&this.willSort(t.next,e.next),this.callFilters("resultWillSort",i,arguments)},show:function(){return this.filter("all")},hide:function(){return this.filter("none")},isMixing:function(){return this.isBusy},filter:function(){var t=this.parseFilterArgs(arguments);return this.multimix({filter:t.command},t.animate,t.callback)},toggleOn:function(){var t,e=this,i=e.parseFilterArgs(arguments),n=i.command.selector;return e.isToggling=!0,e.toggleArray.indexOf(n)<0&&e.toggleArray.push(n),t=e.getToggleSelector(),e.multimix({filter:t},i.animate,i.callback)},toggleOff:function(){var t,e=this,i=e.parseFilterArgs(arguments),n=i.command.selector,r=e.toggleArray.indexOf(n);return e.isToggling=!0,-1<r&&e.toggleArray.splice(r,1),t=e.getToggleSelector(),e.multimix({filter:t},i.animate,i.callback)},sort:function(){var t=this.parseSortArgs(arguments);return this.multimix({sort:t.command},t.animate,t.callback)},changeLayout:function(){var t=this.parseChangeLayoutArgs(arguments);return this.multimix({changeLayout:t.command},t.animate,t.callback)},dataset:function(){var t=this,e=t.parseDatasetArgs(arguments),i=null,n=null,r=!1;return t.callActions("beforeDataset",arguments),t.isBusy?((n=new p.QueueItem).args=arguments,n.instruction=e,t.queueMix(n)):(e.callback&&(t.userCallback=e.callback),r=e.animate^t.config.animation.enable?e.animate:t.config.animation.enable,i=t.getDataOperation(e.command.dataset),t.goMix(r,i))},multimix:function(){var t=this,e=null,i=!1,n=null,r=t.parseMultimixArgs(arguments);return t.callActions("beforeMultimix",arguments),t.isBusy?((n=new p.QueueItem).args=arguments,n.instruction=r,n.triggerElement=t.lastClicked,n.isToggling=t.isToggling,t.queueMix(n)):(e=t.getOperation(r.command),t.config.controls.enable&&(r.command.filter&&!t.isToggling&&(t.toggleArray.length=0,t.buildToggleArray(e.command)),t.queue.length<1&&t.updateControls(e.command)),r.callback&&(t.userCallback=r.callback),i=r.animate^t.config.animation.enable?r.animate:t.config.animation.enable,t.callFilters("operationMultimix",e,arguments),t.goMix(i,e))},getOperation:function(t){var e=this,i=t.sort,n=t.filter,r=t.changeLayout,s=t.remove,a=t.insert,o=new p.Operation;return(o=e.callFilters("operationUnmappedGetOperation",o,arguments)).id=f.randomHex(),o.command=t,o.startState=e.state,o.triggerElement=e.lastClicked,e.isBusy?(e.config.debug.showWarnings&&console.warn(p.messages.warningGetOperationInstanceBusy()),null):(a&&e.insertTargets(a,o),s&&(o.toRemove=s.targets),o.startSort=o.newSort=o.startState.activeSort,o.startOrder=o.newOrder=e.targets,i&&(o.startSort=o.startState.activeSort,o.newSort=i,o.willSort=e.willSort(i,o.startState.activeSort),o.willSort&&e.sortOperation(o)),o.startFilter=o.startState.activeFilter,o.newFilter=n||f.extend(new p.CommandFilter,o.startFilter),"all"===o.newFilter.selector?o.newFilter.selector=e.config.selectors.target:"none"===o.newFilter.selector&&(o.newFilter.selector=""),e.filterOperation(o),o.startContainerClassName=o.startState.activeContainerClassName,r?(o.newContainerClassName=r.containerClassName,o.newContainerClassName!==o.startContainerClassName&&(o.willChangeLayout=!0)):o.newContainerClassName=o.startContainerClassName,e.config.animation.enable&&(e.getStartMixData(o),e.setInter(o),o.docState=f.getDocumentState(e.dom.document),e.getInterMixData(o),e.setFinal(o),e.getFinalMixData(o),e.parseEffects(),o.hasEffect=e.hasEffect(),e.getTweenData(o)),o.willSort&&(e.targets=o.newOrder),o.newState=e.buildState(o),e.callFilters("operationMappedGetOperation",o,arguments))},tween:function(t,e){var i=null,n=null,r=-1,s=-1;for(e=Math.min(e,1),e=Math.max(e,0),s=0;i=t.show[s];s++)n=t.showPosData[s],i.applyTween(n,e);for(s=0;i=t.hide[s];s++)i.isShown&&i.hide(),-1<(r=t.toHide.indexOf(i))&&(n=t.toHidePosData[r],i.isShown||i.show(),i.applyTween(n,e))},insert:function(){var t=this.parseInsertArgs(arguments);return this.multimix({insert:t.command},t.animate,t.callback)},insertBefore:function(){var t=this.parseInsertArgs(arguments);return this.insert(t.command.collection,"before",t.command.sibling,t.animate,t.callback)},insertAfter:function(){var t=this.parseInsertArgs(arguments);return this.insert(t.command.collection,"after",t.command.sibling,t.animate,t.callback)},prepend:function(){var t=this.parseInsertArgs(arguments);return this.insert(0,t.command.collection,t.animate,t.callback)},append:function(){var t=this.parseInsertArgs(arguments);return this.insert(this.state.totalTargets,t.command.collection,t.animate,t.callback)},remove:function(){var t=this.parseRemoveArgs(arguments);return this.multimix({remove:t.command},t.animate,t.callback)},getConfig:function(t){var e=null;return e=t?f.getProperty(this.config,t):this.config,this.callFilters("valueGetConfig",e,arguments)},configure:function(t){this.callActions("beforeConfigure",arguments),f.extend(this.config,t,!0,!0),this.callActions("afterConfigure",arguments)},getState:function(){var t;return t=new p.State,f.extend(t,this.state),f.freeze(t),this.callFilters("stateGetState",t,arguments)},forceRefresh:function(){this.indexTargets()},forceRender:function(){var t=this,e=null,i=null,n="";for(n in t.cache)(i=(e=t.cache[n]).render(e.data))!==e.dom.el&&(e.isInDom&&(e.unbindEvents(),t.dom.parent.replaceChild(i,e.dom.el)),e.isShown||(i.style.display="none"),e.dom.el=i,e.isInDom&&e.bindEvents());t.state=t.buildState(t.lastOperation)},destroy:function(t){var e=this,i=null,n=null,r=0;for(e.callActions("beforeDestroy",arguments),r=0;i=e.controls[r];r++)i.removeBinding(e);for(r=0;n=e.targets[r];r++)t&&n.show(),n.unbindEvents();e.dom.container.id.match(/^MixItUp/)&&e.dom.container.removeAttribute("id"),delete p.instances[e.id],e.callActions("afterDestroy",arguments)}}),p.IMoveData=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.posIn=null,this.posOut=null,this.operation=null,this.callback=null,this.statusChange="",this.duration=-1,this.staggerIndex=-1,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.IMoveData),p.IMoveData.prototype=Object.create(p.Base.prototype),p.IMoveData.prototype.constructor=p.IMoveData,p.TargetDom=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.el=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.TargetDom),p.TargetDom.prototype=Object.create(p.Base.prototype),p.TargetDom.prototype.constructor=p.TargetDom,p.Target=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.id="",this.sortString="",this.mixer=null,this.callback=null,this.isShown=!1,this.isBound=!1,this.isExcluded=!1,this.isInDom=!1,this.handler=null,this.operation=null,this.data=null,this.dom=new p.TargetDom,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.Target),p.Target.prototype=Object.create(p.Base.prototype),f.extend(p.Target.prototype,{constructor:p.Target,init:function(t,e,i){var n=this,r="";if(n.callActions("beforeInit",arguments),n.mixer=e,t=t||n.render(i),n.cacheDom(t),n.bindEvents(),"none"!==n.dom.el.style.display&&(n.isShown=!0),i&&e.config.data.uidKey){if(void 0===(r=i[e.config.data.uidKey])||r.toString().length<1)throw new TypeError(p.messages.errorDatasetInvalidUidKey({uidKey:e.config.data.uidKey}));n.id=r,n.data=i,e.cache[r]=n}n.callActions("afterInit",arguments)},render:function(t){var e,i=null,n=null,r=null;if(this.callActions("beforeRender",arguments),"function"!=typeof(i=this.callFilters("renderRender",this.mixer.config.render.target,arguments)))throw new TypeError(p.messages.errorDatasetRendererNotSet());return(e=i(t))&&"object"==typeof e&&f.isElement(e)?n=e:"string"==typeof e&&((r=document.createElement("div")).innerHTML=e,n=r.firstElementChild),this.callFilters("elRender",n,arguments)},cacheDom:function(t){this.callActions("beforeCacheDom",arguments),this.dom.el=t,this.callActions("afterCacheDom",arguments)},getSortString:function(t){var e=this.dom.el.getAttribute("data-"+t)||"";this.callActions("beforeGetSortString",arguments),e=isNaN(+e)?e.toLowerCase():+e,this.sortString=e,this.callActions("afterGetSortString",arguments)},show:function(){var t=this;t.callActions("beforeShow",arguments),t.isShown||(t.dom.el.style.display="",t.isShown=!0),t.callActions("afterShow",arguments)},hide:function(){var t=this;t.callActions("beforeHide",arguments),t.isShown&&(t.dom.el.style.display="none",t.isShown=!1),t.callActions("afterHide",arguments)},move:function(t){var e=this;e.callActions("beforeMove",arguments),e.isExcluded||e.mixer.targetsMoved++,e.applyStylesIn(t),requestAnimationFrame(function(){e.applyStylesOut(t)}),e.callActions("afterMove",arguments)},applyTween:function(t,e){var i=this,n="",r=null,s=t.posIn,a=[],o=new p.StyleData,l=-1;for(i.callActions("beforeApplyTween",arguments),o.x=s.x,o.y=s.y,0===e?i.hide():i.isShown||i.show(),l=0;n=p.features.TWEENABLE[l];l++)if(r=t.tweenData[n],"x"===n){if(!r)continue;o.x=s.x+r*e}else if("y"===n){if(!r)continue;o.y=s.y+r*e}else if(r instanceof p.TransformData){if(!r.value)continue;o[n].value=s[n].value+r.value*e,o[n].unit=r.unit,a.push(n+"("+o[n].value+r.unit+")")}else{if(!r)continue;o[n]=s[n]+r*e,i.dom.el.style[n]=o[n]}(o.x||o.y)&&a.unshift("translate("+o.x+"px, "+o.y+"px)"),a.length&&(i.dom.el.style[p.features.transformProp]=a.join(" ")),i.callActions("afterApplyTween",arguments)},applyStylesIn:function(t){var e=this,i=t.posIn,n=1!==e.mixer.effectsIn.opacity,r=[];e.callActions("beforeApplyStylesIn",arguments),r.push("translate("+i.x+"px, "+i.y+"px)"),e.mixer.config.animation.animateResizeTargets&&("show"!==t.statusChange&&(e.dom.el.style.width=i.width+"px",e.dom.el.style.height=i.height+"px"),e.dom.el.style.marginRight=i.marginRight+"px",e.dom.el.style.marginBottom=i.marginBottom+"px"),n&&(e.dom.el.style.opacity=i.opacity),"show"===t.statusChange&&(r=r.concat(e.mixer.transformIn)),e.dom.el.style[p.features.transformProp]=r.join(" "),e.callActions("afterApplyStylesIn",arguments)},applyStylesOut:function(t){var e=this,i=[],n=[],r=e.mixer.config.animation.animateResizeTargets,s=void 0!==e.mixer.effectsIn.opacity;if(e.callActions("beforeApplyStylesOut",arguments),i.push(e.writeTransitionRule(p.features.transformRule,t.staggerIndex)),"none"!==t.statusChange&&i.push(e.writeTransitionRule("opacity",t.staggerIndex,t.duration)),r&&(i.push(e.writeTransitionRule("width",t.staggerIndex,t.duration)),i.push(e.writeTransitionRule("height",t.staggerIndex,t.duration)),i.push(e.writeTransitionRule("margin",t.staggerIndex,t.duration))),!t.callback)return e.mixer.targetsImmovable++,void(e.mixer.targetsMoved===e.mixer.targetsImmovable&&e.mixer.cleanUp(t.operation));switch(e.operation=t.operation,e.callback=t.callback,e.isExcluded||e.mixer.targetsBound++,e.isBound=!0,e.applyTransition(i),r&&0<t.posOut.width&&0<t.posOut.height&&(e.dom.el.style.width=t.posOut.width+"px",e.dom.el.style.height=t.posOut.height+"px",e.dom.el.style.marginRight=t.posOut.marginRight+"px",e.dom.el.style.marginBottom=t.posOut.marginBottom+"px"),e.mixer.config.animation.nudge||"hide"!==t.statusChange||n.push("translate("+t.posOut.x+"px, "+t.posOut.y+"px)"),t.statusChange){case"hide":s&&(e.dom.el.style.opacity=e.mixer.effectsOut.opacity),n=n.concat(e.mixer.transformOut);break;case"show":s&&(e.dom.el.style.opacity=1)}(e.mixer.config.animation.nudge||!e.mixer.config.animation.nudge&&"hide"!==t.statusChange)&&n.push("translate("+t.posOut.x+"px, "+t.posOut.y+"px)"),e.dom.el.style[p.features.transformProp]=n.join(" "),e.callActions("afterApplyStylesOut",arguments)},writeTransitionRule:function(t,e,i){var n,r=this.getDelay(e);return n=t+" "+(0<i?i:this.mixer.config.animation.duration)+"ms "+r+"ms "+("opacity"===t?"linear":this.mixer.config.animation.easing),this.callFilters("ruleWriteTransitionRule",n,arguments)},getDelay:function(t){var e,i=this;return"function"==typeof i.mixer.config.animation.staggerSequence&&(t=i.mixer.config.animation.staggerSequence.call(i,t,i.state)),e=i.mixer.staggerDuration?t*i.mixer.staggerDuration:0,i.callFilters("delayGetDelay",e,arguments)},applyTransition:function(t){var e=t.join(", ");this.callActions("beforeApplyTransition",arguments),this.dom.el.style[p.features.transitionProp]=e,this.callActions("afterApplyTransition",arguments)},handleTransitionEnd:function(t){var e=this,i=t.propertyName,n=e.mixer.config.animation.animateResizeTargets;e.callActions("beforeHandleTransitionEnd",arguments),e.isBound&&t.target.matches(e.mixer.config.selectors.target)&&(-1<i.indexOf("transform")||-1<i.indexOf("opacity")||n&&-1<i.indexOf("height")||n&&-1<i.indexOf("width")||n&&-1<i.indexOf("margin"))&&(e.callback.call(e,e.operation),e.isBound=!1,e.callback=null,e.operation=null),e.callActions("afterHandleTransitionEnd",arguments)},eventBus:function(t){switch(this.callActions("beforeEventBus",arguments),t.type){case"webkitTransitionEnd":case"transitionend":this.handleTransitionEnd(t)}this.callActions("afterEventBus",arguments)},unbindEvents:function(){var t=this;t.callActions("beforeUnbindEvents",arguments),f.off(t.dom.el,"webkitTransitionEnd",t.handler),f.off(t.dom.el,"transitionend",t.handler),t.callActions("afterUnbindEvents",arguments)},bindEvents:function(){var t,e=this;e.callActions("beforeBindEvents",arguments),t="webkit"===p.features.transitionPrefix?"webkitTransitionEnd":"transitionend",e.handler=function(t){return e.eventBus(t)},f.on(e.dom.el,t,e.handler),e.callActions("afterBindEvents",arguments)},getPosData:function(t){var e=this,i={},n=null,r=new p.StyleData;return e.callActions("beforeGetPosData",arguments),r.x=e.dom.el.offsetLeft,r.y=e.dom.el.offsetTop,(e.mixer.config.animation.animateResizeTargets||t)&&(n=e.dom.el.getBoundingClientRect(),r.top=n.top,r.right=n.right,r.bottom=n.bottom,r.left=n.left,r.width=n.width,r.height=n.height),e.mixer.config.animation.animateResizeTargets&&(i=h.getComputedStyle(e.dom.el),r.marginBottom=parseFloat(i.marginBottom),r.marginRight=parseFloat(i.marginRight)),e.callFilters("posDataGetPosData",r,arguments)},cleanUp:function(){var t=this;t.callActions("beforeCleanUp",arguments),t.dom.el.style[p.features.transformProp]="",t.dom.el.style[p.features.transitionProp]="",t.dom.el.style.opacity="",t.mixer.config.animation.animateResizeTargets&&(t.dom.el.style.width="",t.dom.el.style.height="",t.dom.el.style.marginRight="",t.dom.el.style.marginBottom=""),t.callActions("afterCleanUp",arguments)}}),p.Collection=function(t){var e=null,i=-1;for(this.callActions("beforeConstruct"),i=0;e=t[i];i++)this[i]=e;this.length=t.length,this.callActions("afterConstruct"),f.freeze(this)},p.BaseStatic.call(p.Collection),p.Collection.prototype=Object.create(p.Base.prototype),f.extend(p.Collection.prototype,{constructor:p.Collection,mixitup:function(t){var e=null,i=Array.prototype.slice.call(arguments),n=[],r=-1;for(this.callActions("beforeMixitup"),i.shift(),r=0;e=this[r];r++)n.push(e[t].apply(e,i));return this.callFilters("promiseMixitup",f.all(n,p.libraries),arguments)}}),p.Operation=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.id="",this.args=[],this.command=null,this.showPosData=[],this.toHidePosData=[],this.startState=null,this.newState=null,this.docState=null,this.willSort=!1,this.willChangeLayout=!1,this.hasEffect=!1,this.hasFailed=!1,this.triggerElement=null,this.show=[],this.hide=[],this.matching=[],this.toShow=[],this.toHide=[],this.toMove=[],this.toRemove=[],this.startOrder=[],this.newOrder=[],this.startSort=null,this.newSort=null,this.startFilter=null,this.newFilter=null,this.startDataset=null,this.newDataset=null,this.viewportDeltaX=0,this.viewportDeltaY=0,this.startX=0,this.startY=0,this.startHeight=0,this.startWidth=0,this.newX=0,this.newY=0,this.newHeight=0,this.newWidth=0,this.startContainerClassName="",this.startDisplay="",this.newContainerClassName="",this.newDisplay="",this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.Operation),p.Operation.prototype=Object.create(p.Base.prototype),p.Operation.prototype.constructor=p.Operation,p.State=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.id="",this.activeFilter=null,this.activeSort=null,this.activeContainerClassName="",this.container=null,this.targets=[],this.hide=[],this.show=[],this.matching=[],this.totalTargets=-1,this.totalShow=-1,this.totalHide=-1,this.totalMatching=-1,this.hasFailed=!1,this.triggerElement=null,this.activeDataset=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.State),p.State.prototype=Object.create(p.Base.prototype),p.State.prototype.constructor=p.State,p.UserInstruction=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.command={},this.animate=!1,this.callback=null,this.callActions("afterConstruct"),f.seal(this)},p.BaseStatic.call(p.UserInstruction),p.UserInstruction.prototype=Object.create(p.Base.prototype),p.UserInstruction.prototype.constructor=p.UserInstruction,p.Messages=function(){p.Base.call(this),this.callActions("beforeConstruct"),this.ERROR_FACTORY_INVALID_CONTAINER="[MixItUp] An invalid selector or element reference was passed to the mixitup factory function",this.ERROR_FACTORY_CONTAINER_NOT_FOUND="[MixItUp] The provided selector yielded no container element",this.ERROR_CONFIG_INVALID_ANIMATION_EFFECTS="[MixItUp] Invalid value for `animation.effects`",this.ERROR_CONFIG_INVALID_CONTROLS_SCOPE="[MixItUp] Invalid value for `controls.scope`",this.ERROR_CONFIG_INVALID_PROPERTY='[MixitUp] Invalid configuration object property "${erroneous}"${suggestion}',this.ERROR_CONFIG_INVALID_PROPERTY_SUGGESTION='. Did you mean "${probableMatch}"?',this.ERROR_CONFIG_DATA_UID_KEY_NOT_SET="[MixItUp] To use the dataset API, a UID key must be specified using `data.uidKey`",this.ERROR_DATASET_INVALID_UID_KEY='[MixItUp] The specified UID key "${uidKey}" is not present on one or more dataset items',this.ERROR_DATASET_DUPLICATE_UID='[MixItUp] The UID "${uid}" was found on two or more dataset items. UIDs must be unique.',this.ERROR_INSERT_INVALID_ARGUMENTS="[MixItUp] Please provider either an index or a sibling and position to insert, not both",this.ERROR_INSERT_PREEXISTING_ELEMENT="[MixItUp] An element to be inserted already exists in the container",this.ERROR_FILTER_INVALID_ARGUMENTS="[MixItUp] Please provide either a selector or collection `.filter()`, not both",this.ERROR_DATASET_NOT_SET="[MixItUp] To use the dataset API with pre-rendered targets, a starting dataset must be set using `load.dataset`",this.ERROR_DATASET_PRERENDERED_MISMATCH="[MixItUp] `load.dataset` does not match pre-rendered targets",this.ERROR_DATASET_RENDERER_NOT_SET="[MixItUp] To insert an element via the dataset API, a target renderer function must be provided to `render.target`",this.ERROR_SORT_NON_EXISTENT_ELEMENT="[MixItUp] An element to be sorted does not already exist in the container",this.WARNING_FACTORY_PREEXISTING_INSTANCE="[MixItUp] WARNING: This element already has an active MixItUp instance. The provided configuration object will be ignored. If you wish to perform additional methods on this instance, please create a reference.",this.WARNING_INSERT_NO_ELEMENTS="[MixItUp] WARNING: No valid elements were passed to `.insert()`",this.WARNING_REMOVE_NO_ELEMENTS="[MixItUp] WARNING: No valid elements were passed to `.remove()`",this.WARNING_MULTIMIX_INSTANCE_QUEUE_FULL="[MixItUp] WARNING: An operation was requested but the MixItUp instance was busy. The operation was rejected because the queue is full or queuing is disabled.",this.WARNING_GET_OPERATION_INSTANCE_BUSY="[MixItUp] WARNING: Operations can be be created while the MixItUp instance is busy.",this.WARNING_NO_PROMISE_IMPLEMENTATION="[MixItUp] WARNING: No Promise implementations could be found. If you wish to use promises with MixItUp please install an ES6 Promise polyfill.",this.WARNING_INCONSISTENT_SORTING_ATTRIBUTES='[MixItUp] WARNING: The requested sorting data attribute "${attribute}" was not present on one or more target elements which may product unexpected sort output',this.callActions("afterConstruct"),this.compileTemplates(),f.seal(this)},p.BaseStatic.call(p.Messages),p.Messages.prototype=Object.create(p.Base.prototype),p.Messages.prototype.constructor=p.Messages,p.Messages.prototype.compileTemplates=function(){var t="",e="";for(t in this)"string"==typeof(e=this[t])&&(this[f.camelCase(t)]=f.template(e))},p.messages=new p.Messages,p.Facade=function(t){p.Base.call(this),this.callActions("beforeConstruct",arguments),this.configure=t.configure.bind(t),this.show=t.show.bind(t),this.hide=t.hide.bind(t),this.filter=t.filter.bind(t),this.toggleOn=t.toggleOn.bind(t),this.toggleOff=t.toggleOff.bind(t),this.sort=t.sort.bind(t),this.changeLayout=t.changeLayout.bind(t),this.multimix=t.multimix.bind(t),this.dataset=t.dataset.bind(t),this.tween=t.tween.bind(t),this.insert=t.insert.bind(t),this.insertBefore=t.insertBefore.bind(t),this.insertAfter=t.insertAfter.bind(t),this.prepend=t.prepend.bind(t),this.append=t.append.bind(t),this.remove=t.remove.bind(t),this.destroy=t.destroy.bind(t),this.forceRefresh=t.forceRefresh.bind(t),this.forceRender=t.forceRender.bind(t),this.isMixing=t.isMixing.bind(t),this.getOperation=t.getOperation.bind(t),this.getConfig=t.getConfig.bind(t),this.getState=t.getState.bind(t),this.callActions("afterConstruct",arguments),f.freeze(this),f.seal(this)},p.BaseStatic.call(p.Facade),p.Facade.prototype=Object.create(p.Base.prototype),p.Facade.prototype.constructor=p.Facade,"object"==typeof exports&&"object"==typeof module?module.exports=p:"function"==typeof define&&define.amd?define(function(){return p}):void 0!==h.mixitup&&"function"==typeof h.mixitup||(h.mixitup=p),p.BaseStatic.call(p.constructor),p.NAME="mixitup",p.CORE_VERSION="3.3.1"}(window),function(l,d,m,g){"use strict";if(l.console=l.console||{info:function(t){}},m)if(m.fn.fancybox)console.info("fancyBox already initialized");else{var t,e,i,n,r={closeExisting:!1,loop:!1,gutter:50,keyboard:!0,preventCaptionOverlap:!0,arrows:!0,infobar:!0,smallBtn:"auto",toolbar:"auto",buttons:["zoom","slideShow","thumbs","close"],idleTime:3,protect:!1,modal:!1,image:{preload:!1},ajax:{settings:{data:{fancybox:!0}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" allowfullscreen="allowfullscreen" allow="autoplay; fullscreen" src=""></iframe>',preload:!0,css:{},attr:{scrolling:"auto"}},video:{tpl:'<video class="fancybox-video" controls controlsList="nodownload" poster="{{poster}}"><source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!</video>',format:"",autoStart:!0},defaultType:"image",animationEffect:"zoom",animationDuration:366,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption"><div class="fancybox-caption__body"></div></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}</p></div>',btnTpl:{download:'<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}" href="javascript:;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.62 17.09V19H5.38v-1.91zm-2.97-6.96L17 11.45l-5 4.87-5-4.87 1.36-1.32 2.68 2.64V5h1.92v7.77z"/></svg></a>',zoom:'<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.7 17.3l-3-3a5.9 5.9 0 0 0-.6-7.6 5.9 5.9 0 0 0-8.4 0 5.9 5.9 0 0 0 0 8.4 5.9 5.9 0 0 0 7.7.7l3 3a1 1 0 0 0 1.3 0c.4-.5.4-1 0-1.5zM8.1 13.8a4 4 0 0 1 0-5.7 4 4 0 0 1 5.7 0 4 4 0 0 1 0 5.7 4 4 0 0 1-5.7 0z"/></svg></button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 10.6L6.6 5.2 5.2 6.6l5.4 5.4-5.4 5.4 1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4-1.4-1.4-5.4 5.4z"/></svg></button>',arrowLeft:'<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.28 15.7l-1.34 1.37L5 12l4.94-5.07 1.34 1.38-2.68 2.72H19v1.94H8.6z"/></svg></div></button>',arrowRight:'<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.4 12.97l-2.68 2.72 1.34 1.38L19 12l-4.94-5.07-1.34 1.38 2.68 2.72H5v1.94z"/></svg></div></button>',smallBtn:'<button type="button" data-fancybox-close class="fancybox-button fancybox-close-small" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 24 24"><path d="M13 12l5-5-1-1-5 5-5-5-1 1 5 5-5 5 1 1 5-5 5 5 1-1z"/></svg></button>'},parentEl:"body",hideScrollbar:!0,autoFocus:!0,backFocus:!0,trapFocus:!0,fullScreen:{autoStart:!1},touch:{vertical:!0,momentum:!0},hash:null,media:{},slideShow:{autoStart:!1,speed:3e3},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"},wheel:"auto",onInit:m.noop,beforeLoad:m.noop,afterLoad:m.noop,beforeShow:m.noop,afterShow:m.noop,beforeClose:m.noop,afterClose:m.noop,onActivate:m.noop,onDeactivate:m.noop,clickContent:function(t,e){return"image"===t.type&&"zoom"},clickSlide:"close",clickOutside:"close",dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1,mobile:{preventCaptionOverlap:!1,idleTime:!1,clickContent:function(t,e){return"image"===t.type&&"toggleControls"},clickSlide:function(t,e){return"image"===t.type?"toggleControls":"close"},dblclickContent:function(t,e){return"image"===t.type&&"zoom"},dblclickSlide:function(t,e){return"image"===t.type&&"zoom"}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails",DOWNLOAD:"Download",SHARE:"Share",ZOOM:"Zoom"},de:{CLOSE:"Schlie&szlig;en",NEXT:"Weiter",PREV:"Zur&uuml;ck",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es sp&auml;ter nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder",DOWNLOAD:"Herunterladen",SHARE:"Teilen",ZOOM:"Vergr&ouml;&szlig;ern"}}},s=m(l),a=m(d),o=0,h=l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.oRequestAnimationFrame||function(t){return l.setTimeout(t,1e3/60)},c=l.cancelAnimationFrame||l.webkitCancelAnimationFrame||l.mozCancelAnimationFrame||l.oCancelAnimationFrame||function(t){l.clearTimeout(t)},u=function(){var t,e=d.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(e.style[t]!==g)return i[t];return"transitionend"}(),p=function(t){return t&&t.length&&t[0].offsetHeight},f=function(t,e){var i=m.extend(!0,{},t,e);return m.each(e,function(t,e){m.isArray(e)&&(i[t]=e)}),i},v=function(t,e,i){var n=this;n.opts=f({index:i},m.fancybox.defaults),m.isPlainObject(e)&&(n.opts=f(n.opts,e)),m.fancybox.isMobile&&(n.opts=f(n.opts,n.opts.mobile)),n.id=n.opts.id||++o,n.currIndex=parseInt(n.opts.index,10)||0,n.prevIndex=null,n.prevPos=null,n.currPos=0,n.firstRun=!0,n.group=[],n.slides={},n.addContent(t),n.group.length&&n.init()};m.extend(v.prototype,{init:function(){var e,i,n=this,r=n.group[n.currIndex].opts;r.closeExisting&&m.fancybox.close(!0),m("body").addClass("fancybox-active"),!m.fancybox.getInstance()&&!1!==r.hideScrollbar&&!m.fancybox.isMobile&&d.body.scrollHeight>l.innerHeight&&(m("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar{margin-right:'+(l.innerWidth-d.documentElement.clientWidth)+"px;}</style>"),m("body").addClass("compensate-for-scrollbar")),i="",m.each(r.buttons,function(t,e){i+=r.btnTpl[e]||""}),e=m(n.translate(n,r.baseTpl.replace("{{buttons}}",i).replace("{{arrows}}",r.btnTpl.arrowLeft+r.btnTpl.arrowRight))).attr("id","fancybox-container-"+n.id).addClass(r.baseClass).data("FancyBox",n).appendTo(r.parentEl),n.$refs={container:e},["bg","inner","infobar","toolbar","stage","caption","navigation"].forEach(function(t){n.$refs[t]=e.find(".fancybox-"+t)}),n.trigger("onInit"),n.activate(),n.jumpTo(n.currIndex)},translate:function(t,e){var i=t.opts.i18n[t.opts.lang]||t.opts.i18n.en;return e.replace(/\{\{(\w+)\}\}/g,function(t,e){return i[e]===g?t:i[e]})},addContent:function(t){var e,c=this,i=m.makeArray(t);m.each(i,function(t,e){var i,n,r,s,a,o={},l={};m.isPlainObject(e)?l=(o=e).opts||e:"object"===m.type(e)&&m(e).length?(l=(i=m(e)).data()||{},(l=m.extend(!0,{},l,l.options)).$orig=i,o.src=c.opts.src||l.src||i.attr("href"),o.type||o.src||(o.type="inline",o.src=e)):o={type:"html",src:e+""},o.opts=m.extend(!0,{},c.opts,l),m.isArray(l.buttons)&&(o.opts.buttons=l.buttons),m.fancybox.isMobile&&o.opts.mobile&&(o.opts=f(o.opts,o.opts.mobile)),n=o.type||o.opts.type,s=o.src||"",!n&&s&&((r=s.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(n="video",o.opts.video.format||(o.opts.video.format="video/"+("ogv"===r[1]?"ogg":r[1]))):s.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?n="image":s.match(/\.(pdf)((\?|#).*)?$/i)?(n="iframe",o=m.extend(!0,o,{contentType:"pdf",opts:{iframe:{preload:!1}}})):"#"===s.charAt(0)&&(n="inline")),n?o.type=n:c.trigger("objectNeedsType",o),o.contentType||(o.contentType=-1<m.inArray(o.type,["html","inline","ajax"])?"html":o.type),o.index=c.group.length,"auto"==o.opts.smallBtn&&(o.opts.smallBtn=-1<m.inArray(o.type,["html","inline","ajax"])),"auto"===o.opts.toolbar&&(o.opts.toolbar=!o.opts.smallBtn),o.$thumb=o.opts.$thumb||null,o.opts.$trigger&&o.index===c.opts.index&&(o.$thumb=o.opts.$trigger.find("img:first"),o.$thumb.length&&(o.opts.$orig=o.opts.$trigger)),o.$thumb&&o.$thumb.length||!o.opts.$orig||(o.$thumb=o.opts.$orig.find("img:first")),o.$thumb&&!o.$thumb.length&&(o.$thumb=null),o.thumb=o.opts.thumb||(o.$thumb?o.$thumb[0].src:null),"function"===m.type(o.opts.caption)&&(o.opts.caption=o.opts.caption.apply(e,[c,o])),"function"===m.type(c.opts.caption)&&(o.opts.caption=c.opts.caption.apply(e,[c,o])),o.opts.caption instanceof m||(o.opts.caption=o.opts.caption===g?"":o.opts.caption+""),"ajax"===o.type&&1<(a=s.split(/\s+/,2)).length&&(o.src=a.shift(),o.opts.filter=a.shift()),o.opts.modal&&(o.opts=m.extend(!0,o.opts,{trapFocus:!0,infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:!1,clickSlide:!1,clickOutside:!1,dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1})),c.group.push(o)}),Object.keys(c.slides).length&&(c.updateControls(),(e=c.Thumbs)&&e.isActive&&(e.create(),e.focus()))},addEvents:function(){var n=this;n.removeEvents(),n.$refs.container.on("click.fb-close","[data-fancybox-close]",function(t){t.stopPropagation(),t.preventDefault(),n.close(t)}).on("touchstart.fb-prev click.fb-prev","[data-fancybox-prev]",function(t){t.stopPropagation(),t.preventDefault(),n.previous()}).on("touchstart.fb-next click.fb-next","[data-fancybox-next]",function(t){t.stopPropagation(),t.preventDefault(),n.next()}).on("click.fb","[data-fancybox-zoom]",function(t){n[n.isScaledDown()?"scaleToActual":"scaleToFit"]()}),s.on("orientationchange.fb resize.fb",function(t){t&&t.originalEvent&&"resize"===t.originalEvent.type?(n.requestId&&c(n.requestId),n.requestId=h(function(){n.update(t)})):(n.current&&"iframe"===n.current.type&&n.$refs.stage.hide(),setTimeout(function(){n.$refs.stage.show(),n.update(t)},m.fancybox.isMobile?600:250))}),a.on("keydown.fb",function(t){var e=(m.fancybox?m.fancybox.getInstance():null).current,i=t.keyCode||t.which;if(9!=i){if(!(!e.opts.keyboard||t.ctrlKey||t.altKey||t.shiftKey||m(t.target).is("input,textarea,video,audio,select")))return 8===i||27===i?(t.preventDefault(),void n.close(t)):37===i||38===i?(t.preventDefault(),void n.previous()):39===i||40===i?(t.preventDefault(),void n.next()):void n.trigger("afterKeydown",t,i)}else e.opts.trapFocus&&n.focus(t)}),n.group[n.currIndex].opts.idleTime&&(n.idleSecondsCounter=0,a.on("mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",function(t){n.idleSecondsCounter=0,n.isIdle&&n.showControls(),n.isIdle=!1}),n.idleInterval=l.setInterval(function(){n.idleSecondsCounter++,n.idleSecondsCounter>=n.group[n.currIndex].opts.idleTime&&!n.isDragging&&(n.isIdle=!0,n.idleSecondsCounter=0,n.hideControls())},1e3))},removeEvents:function(){s.off("orientationchange.fb resize.fb"),a.off("keydown.fb .fb-idle"),this.$refs.container.off(".fb-close .fb-prev .fb-next"),this.idleInterval&&(l.clearInterval(this.idleInterval),this.idleInterval=null)},previous:function(t){return this.jumpTo(this.currPos-1,t)},next:function(t){return this.jumpTo(this.currPos+1,t)},jumpTo:function(t,n){var e,i,r,s,a,o,l,c,u,d=this,h=d.group.length;if(!(d.isDragging||d.isClosing||d.isAnimating&&d.firstRun)){if(t=parseInt(t,10),!(r=d.current?d.current.opts.loop:d.opts.loop)&&(t<0||h<=t))return!1;if(e=d.firstRun=!Object.keys(d.slides).length,a=d.current,d.prevIndex=d.currIndex,d.prevPos=d.currPos,s=d.createSlide(t),1<h&&((r||s.index<h-1)&&d.createSlide(t+1),(r||0<s.index)&&d.createSlide(t-1)),d.current=s,d.currIndex=s.index,d.currPos=s.pos,d.trigger("beforeShow",e),d.updateControls(),s.forcedDuration=g,m.isNumeric(n)?s.forcedDuration=n:n=s.opts[e?"animationDuration":"transitionDuration"],n=parseInt(n,10),i=d.isMoved(s),s.$slide.addClass("fancybox-slide--current"),e)return s.opts.animationEffect&&n&&d.$refs.container.css("transition-duration",n+"ms"),d.$refs.container.addClass("fancybox-is-open").trigger("focus"),d.loadSlide(s),void d.preload("image");o=m.fancybox.getTranslate(a.$slide),l=m.fancybox.getTranslate(d.$refs.stage),m.each(d.slides,function(t,e){m.fancybox.stop(e.$slide,!0)}),a.pos!==s.pos&&(a.isComplete=!1),a.$slide.removeClass("fancybox-slide--complete fancybox-slide--current"),i?(u=o.left-(a.pos*o.width+a.pos*a.opts.gutter),m.each(d.slides,function(t,e){e.$slide.removeClass("fancybox-animated").removeClass(function(t,e){return(e.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")});var i=e.pos*o.width+e.pos*e.opts.gutter;m.fancybox.setTranslate(e.$slide,{top:0,left:i-l.left+u}),e.pos!==s.pos&&e.$slide.addClass("fancybox-slide--"+(e.pos>s.pos?"next":"previous")),p(e.$slide),m.fancybox.animate(e.$slide,{top:0,left:(e.pos-s.pos)*o.width+(e.pos-s.pos)*e.opts.gutter},n,function(){e.$slide.css({transform:"",opacity:""}).removeClass("fancybox-slide--next fancybox-slide--previous"),e.pos===d.currPos&&d.complete()})})):n&&s.opts.transitionEffect&&(c="fancybox-animated fancybox-fx-"+s.opts.transitionEffect,a.$slide.addClass("fancybox-slide--"+(a.pos>s.pos?"next":"previous")),m.fancybox.animate(a.$slide,c,n,function(){a.$slide.removeClass(c).removeClass("fancybox-slide--next fancybox-slide--previous")},!1)),s.isLoaded?d.revealContent(s):d.loadSlide(s),d.preload("image")}},createSlide:function(t){var e,i,n=this;return i=(i=t%n.group.length)<0?n.group.length+i:i,!n.slides[t]&&n.group[i]&&(e=m('<div class="fancybox-slide"></div>').appendTo(n.$refs.stage),n.slides[t]=m.extend(!0,{},n.group[i],{pos:t,$slide:e,isLoaded:!1}),n.updateSlide(n.slides[t])),n.slides[t]},scaleToActual:function(t,e,i){var n,r,s,a,o,l=this,c=l.current,u=c.$content,d=m.fancybox.getTranslate(c.$slide).width,h=m.fancybox.getTranslate(c.$slide).height,p=c.width,f=c.height;l.isAnimating||l.isMoved()||!u||"image"!=c.type||!c.isLoaded||c.hasError||(l.isAnimating=!0,m.fancybox.stop(u),t=t===g?.5*d:t,e=e===g?.5*h:e,(n=m.fancybox.getTranslate(u)).top-=m.fancybox.getTranslate(c.$slide).top,n.left-=m.fancybox.getTranslate(c.$slide).left,a=p/n.width,o=f/n.height,r=.5*d-.5*p,s=.5*h-.5*f,d<p&&(0<(r=n.left*a-(t*a-t))&&(r=0),r<d-p&&(r=d-p)),h<f&&(0<(s=n.top*o-(e*o-e))&&(s=0),s<h-f&&(s=h-f)),l.updateCursor(p,f),m.fancybox.animate(u,{top:s,left:r,scaleX:a,scaleY:o},i||366,function(){l.isAnimating=!1}),l.SlideShow&&l.SlideShow.isActive&&l.SlideShow.stop())},scaleToFit:function(t){var e,i=this,n=i.current,r=n.$content;i.isAnimating||i.isMoved()||!r||"image"!=n.type||!n.isLoaded||n.hasError||(i.isAnimating=!0,m.fancybox.stop(r),e=i.getFitPos(n),i.updateCursor(e.width,e.height),m.fancybox.animate(r,{top:e.top,left:e.left,scaleX:e.width/r.width(),scaleY:e.height/r.height()},t||366,function(){i.isAnimating=!1}))},getFitPos:function(t){var e,i,n,r,s=t.$content,a=t.$slide,o=t.width||t.opts.width,l=t.height||t.opts.height,c={};return!!(t.isLoaded&&s&&s.length)&&(e=m.fancybox.getTranslate(this.$refs.stage).width,i=m.fancybox.getTranslate(this.$refs.stage).height,e-=parseFloat(a.css("paddingLeft"))+parseFloat(a.css("paddingRight"))+parseFloat(s.css("marginLeft"))+parseFloat(s.css("marginRight")),i-=parseFloat(a.css("paddingTop"))+parseFloat(a.css("paddingBottom"))+parseFloat(s.css("marginTop"))+parseFloat(s.css("marginBottom")),o&&l||(o=e,l=i),e-.5<(o*=n=Math.min(1,e/o,i/l))&&(o=e),i-.5<(l*=n)&&(l=i),"image"===t.type?(c.top=Math.floor(.5*(i-l))+parseFloat(a.css("paddingTop")),c.left=Math.floor(.5*(e-o))+parseFloat(a.css("paddingLeft"))):"video"===t.contentType&&(o/(r=t.opts.width&&t.opts.height?o/l:t.opts.ratio||16/9)<l?l=o/r:l*r<o&&(o=l*r)),c.width=o,c.height=l,c)},update:function(i){var n=this;m.each(n.slides,function(t,e){n.updateSlide(e,i)})},updateSlide:function(t,e){var i=this,n=t&&t.$content,r=t.width||t.opts.width,s=t.height||t.opts.height,a=t.$slide;i.adjustCaption(t),n&&(r||s||"video"===t.contentType)&&!t.hasError&&(m.fancybox.stop(n),m.fancybox.setTranslate(n,i.getFitPos(t)),t.pos===i.currPos&&(i.isAnimating=!1,i.updateCursor())),i.adjustLayout(t),a.length&&(a.trigger("refresh"),t.pos===i.currPos&&i.$refs.toolbar.add(i.$refs.navigation.find(".fancybox-button--arrow_right")).toggleClass("compensate-for-scrollbar",a.get(0).scrollHeight>a.get(0).clientHeight)),i.trigger("onUpdate",t,e)},centerSlide:function(t){var e=this,i=e.current,n=i.$slide;!e.isClosing&&i&&(n.siblings().css({transform:"",opacity:""}),n.parent().children().removeClass("fancybox-slide--previous fancybox-slide--next"),m.fancybox.animate(n,{top:0,left:0,opacity:1},t===g?0:t,function(){n.css({transform:"",opacity:""}),i.isComplete||e.complete()},!1))},isMoved:function(t){var e,i,n=t||this.current;return!!n&&(i=m.fancybox.getTranslate(this.$refs.stage),e=m.fancybox.getTranslate(n.$slide),!n.$slide.hasClass("fancybox-animated")&&(.5<Math.abs(e.top-i.top)||.5<Math.abs(e.left-i.left)))},updateCursor:function(t,e){var i,n,r=this,s=r.current,a=r.$refs.container;s&&!r.isClosing&&r.Guestures&&(a.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-zoomOut fancybox-can-swipe fancybox-can-pan"),n=!!(i=r.canPan(t,e))||r.isZoomable(),a.toggleClass("fancybox-is-zoomable",n),m("[data-fancybox-zoom]").prop("disabled",!n),i?a.addClass("fancybox-can-pan"):n&&("zoom"===s.opts.clickContent||m.isFunction(s.opts.clickContent)&&"zoom"==s.opts.clickContent(s))?a.addClass("fancybox-can-zoomIn"):s.opts.touch&&(s.opts.touch.vertical||1<r.group.length)&&"video"!==s.contentType&&a.addClass("fancybox-can-swipe"))},isZoomable:function(){var t,e=this.current;if(e&&!this.isClosing&&"image"===e.type&&!e.hasError){if(!e.isLoaded)return!0;if((t=this.getFitPos(e))&&(e.width>t.width||e.height>t.height))return!0}return!1},isScaledDown:function(t,e){var i=!1,n=this.current,r=n.$content;return t!==g&&e!==g?i=t<n.width&&e<n.height:r&&(i=(i=m.fancybox.getTranslate(r)).width<n.width&&i.height<n.height),i},canPan:function(t,e){var i=this.current,n=null,r=!1;return"image"===i.type&&(i.isComplete||t&&e)&&!i.hasError&&(r=this.getFitPos(i),t!==g&&e!==g?n={width:t,height:e}:i.isComplete&&(n=m.fancybox.getTranslate(i.$content)),n&&r&&(r=1.5<Math.abs(n.width-r.width)||1.5<Math.abs(n.height-r.height))),r},loadSlide:function(i){var t,e,n,r=this;if(!i.isLoading&&!i.isLoaded){if(!(i.isLoading=!0)===r.trigger("beforeLoad",i))return i.isLoading=!1;switch(t=i.type,(e=i.$slide).off("refresh").trigger("onReset").addClass(i.opts.slideClass),t){case"image":r.setImage(i);break;case"iframe":r.setIframe(i);break;case"html":r.setContent(i,i.src||i.content);break;case"video":r.setContent(i,i.opts.video.tpl.replace(/\{\{src\}\}/gi,i.src).replace("{{format}}",i.opts.videoFormat||i.opts.video.format||"").replace("{{poster}}",i.thumb||""));break;case"inline":m(i.src).length?r.setContent(i,m(i.src)):r.setError(i);break;case"ajax":r.showLoading(i),n=m.ajax(m.extend({},i.opts.ajax.settings,{url:i.src,success:function(t,e){"success"===e&&r.setContent(i,t)},error:function(t,e){t&&"abort"!==e&&r.setError(i)}})),e.one("onReset",function(){n.abort()});break;default:r.setError(i)}return!0}},setImage:function(e){var t,i=this;setTimeout(function(){var t=e.$image;i.isClosing||!e.isLoading||t&&t.length&&t[0].complete||e.hasError||i.showLoading(e)},50),i.checkSrcset(e),e.$content=m('<div class="fancybox-content"></div>').addClass("fancybox-is-hidden").appendTo(e.$slide.addClass("fancybox-slide--image")),!1!==e.opts.preload&&e.opts.width&&e.opts.height&&e.thumb&&(e.width=e.opts.width,e.height=e.opts.height,(t=d.createElement("img")).onerror=function(){m(this).remove(),e.$ghost=null},t.onload=function(){i.afterLoad(e)},e.$ghost=m(t).addClass("fancybox-image").appendTo(e.$content).attr("src",e.thumb)),i.setBigImage(e)},checkSrcset:function(t){var e,i,n,r,s=t.opts.srcset||t.opts.image.srcset;if(s){n=l.devicePixelRatio||1,r=l.innerWidth*n,(i=s.split(",").map(function(t){var n={};return t.trim().split(/\s+/).forEach(function(t,e){var i=parseInt(t.substring(0,t.length-1),10);if(0===e)return n.url=t;i&&(n.value=i,n.postfix=t[t.length-1])}),n})).sort(function(t,e){return t.value-e.value});for(var a=0;a<i.length;a++){var o=i[a];if("w"===o.postfix&&o.value>=r||"x"===o.postfix&&o.value>=n){e=o;break}}!e&&i.length&&(e=i[i.length-1]),e&&(t.src=e.url,t.width&&t.height&&"w"==e.postfix&&(t.height=t.width/t.height*e.value,t.width=e.value),t.opts.srcset=s)}},setBigImage:function(e){var i=this,t=d.createElement("img"),n=m(t);e.$image=n.one("error",function(){i.setError(e)}).one("load",function(){var t;e.$ghost||(i.resolveImageSlideSize(e,this.naturalWidth,this.naturalHeight),i.afterLoad(e)),i.isClosing||(e.opts.srcset&&((t=e.opts.sizes)&&"auto"!==t||(t=(1<e.width/e.height&&1<s.width()/s.height()?"100":Math.round(e.width/e.height*100))+"vw"),n.attr("sizes",t).attr("srcset",e.opts.srcset)),e.$ghost&&setTimeout(function(){e.$ghost&&!i.isClosing&&e.$ghost.hide()},Math.min(300,Math.max(1e3,e.height/1600))),i.hideLoading(e))}).addClass("fancybox-image").attr("src",e.src).appendTo(e.$content),(t.complete||"complete"==t.readyState)&&n.naturalWidth&&n.naturalHeight?n.trigger("load"):t.error&&n.trigger("error")},resolveImageSlideSize:function(t,e,i){var n=parseInt(t.opts.width,10),r=parseInt(t.opts.height,10);t.width=e,t.height=i,0<n&&(t.width=n,t.height=Math.floor(n*i/e)),0<r&&(t.width=Math.floor(r*e/i),t.height=r)},setIframe:function(r){var s,e=this,a=r.opts.iframe,o=r.$slide;r.$content=m('<div class="fancybox-content'+(a.preload?" fancybox-is-hidden":"")+'"></div>').css(a.css).appendTo(o),o.addClass("fancybox-slide--"+r.contentType),r.$iframe=s=m(a.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr(a.attr).appendTo(r.$content),a.preload?(e.showLoading(r),s.on("load.fb error.fb",function(t){this.isReady=1,r.$slide.trigger("refresh"),e.afterLoad(r)}),o.on("refresh.fb",function(){var t,e=r.$content,i=a.css.width,n=a.css.height;if(1===s[0].isReady){try{t=s.contents().find("body")}catch(t){}t&&t.length&&t.children().length&&(o.css("overflow","visible"),e.css({width:"100%","max-width":"100%",height:"9999px"}),i===g&&(i=Math.ceil(Math.max(t[0].clientWidth,t.outerWidth(!0)))),e.css("width",i||"").css("max-width",""),n===g&&(n=Math.ceil(Math.max(t[0].clientHeight,t.outerHeight(!0)))),e.css("height",n||""),o.css("overflow","auto")),e.removeClass("fancybox-is-hidden")}})):e.afterLoad(r),s.attr("src",r.src),o.one("onReset",function(){try{m(this).find("iframe").hide().unbind().attr("src","//about:blank")}catch(t){}m(this).off("refresh.fb").empty(),r.isLoaded=!1,r.isRevealed=!1})},setContent:function(t,e){var i;this.isClosing||(this.hideLoading(t),t.$content&&m.fancybox.stop(t.$content),t.$slide.empty(),(i=e)&&i.hasOwnProperty&&i instanceof m&&e.parent().length?((e.hasClass("fancybox-content")||e.parent().hasClass("fancybox-content"))&&e.parents(".fancybox-slide").trigger("onReset"),t.$placeholder=m("<div>").hide().insertAfter(e),e.css("display","inline-block")):t.hasError||("string"===m.type(e)&&(e=m("<div>").append(m.trim(e)).contents()),t.opts.filter&&(e=m("<div>").html(e).find(t.opts.filter))),t.$slide.one("onReset",function(){m(this).find("video,audio").trigger("pause"),t.$placeholder&&(t.$placeholder.after(e.removeClass("fancybox-content").hide()).remove(),t.$placeholder=null),t.$smallBtn&&(t.$smallBtn.remove(),t.$smallBtn=null),t.hasError||(m(this).empty(),t.isLoaded=!1,t.isRevealed=!1)}),m(e).appendTo(t.$slide),m(e).is("video,audio")&&(m(e).addClass("fancybox-video"),m(e).wrap("<div></div>"),t.contentType="video",t.opts.width=t.opts.width||m(e).attr("width"),t.opts.height=t.opts.height||m(e).attr("height")),t.$content=t.$slide.children().filter("div,form,main,video,audio,article,.fancybox-content").first(),t.$content.siblings().hide(),t.$content.length||(t.$content=t.$slide.wrapInner("<div></div>").children().first()),t.$content.addClass("fancybox-content"),t.$slide.addClass("fancybox-slide--"+t.contentType),this.afterLoad(t))},setError:function(t){t.hasError=!0,t.$slide.trigger("onReset").removeClass("fancybox-slide--"+t.contentType).addClass("fancybox-slide--error"),t.contentType="html",this.setContent(t,this.translate(t,t.opts.errorTpl)),t.pos===this.currPos&&(this.isAnimating=!1)},showLoading:function(t){(t=t||this.current)&&!t.$spinner&&(t.$spinner=m(this.translate(this,this.opts.spinnerTpl)).appendTo(t.$slide).hide().fadeIn("fast"))},hideLoading:function(t){(t=t||this.current)&&t.$spinner&&(t.$spinner.stop().remove(),delete t.$spinner)},afterLoad:function(t){var e=this;e.isClosing||(t.isLoading=!1,t.isLoaded=!0,e.trigger("afterLoad",t),e.hideLoading(t),!t.opts.smallBtn||t.$smallBtn&&t.$smallBtn.length||(t.$smallBtn=m(e.translate(t,t.opts.btnTpl.smallBtn)).appendTo(t.$content)),t.opts.protect&&t.$content&&!t.hasError&&(t.$content.on("contextmenu.fb",function(t){return 2==t.button&&t.preventDefault(),!0}),"image"===t.type&&m('<div class="fancybox-spaceball"></div>').appendTo(t.$content)),e.adjustCaption(t),e.adjustLayout(t),t.pos===e.currPos&&e.updateCursor(),e.revealContent(t))},adjustCaption:function(t){var e,i=this,n=t||i.current,r=n.opts.caption,s=n.opts.preventCaptionOverlap,a=i.$refs.caption,o=!1;a.toggleClass("fancybox-caption--separate",s),s&&r&&r.length&&(n.pos!==i.currPos?((e=a.clone().appendTo(a.parent())).children().eq(0).empty().html(r),o=e.outerHeight(!0),e.empty().remove()):i.$caption&&(o=i.$caption.outerHeight(!0)),n.$slide.css("padding-bottom",o||""))},adjustLayout:function(t){var e,i,n,r,s=t||this.current;s.isLoaded&&!0!==s.opts.disableLayoutFix&&(s.$content.css("margin-bottom",""),s.$content.outerHeight()>s.$slide.height()+.5&&(n=s.$slide[0].style["padding-bottom"],r=s.$slide.css("padding-bottom"),0<parseFloat(r)&&(e=s.$slide[0].scrollHeight,s.$slide.css("padding-bottom",0),Math.abs(e-s.$slide[0].scrollHeight)<1&&(i=r),s.$slide.css("padding-bottom",n))),s.$content.css("margin-bottom",i))},revealContent:function(t){var e,i,n,r,s=this,a=t.$slide,o=!1,l=!1,c=s.isMoved(t),u=t.isRevealed;return t.isRevealed=!0,e=t.opts[s.firstRun?"animationEffect":"transitionEffect"],n=t.opts[s.firstRun?"animationDuration":"transitionDuration"],n=parseInt(t.forcedDuration===g?n:t.forcedDuration,10),!c&&t.pos===s.currPos&&n||(e=!1),"zoom"===e&&(t.pos===s.currPos&&n&&"image"===t.type&&!t.hasError&&(l=s.getThumbPos(t))?o=s.getFitPos(t):e="fade"),"zoom"===e?(s.isAnimating=!0,o.scaleX=o.width/l.width,o.scaleY=o.height/l.height,"auto"==(r=t.opts.zoomOpacity)&&(r=.1<Math.abs(t.width/t.height-l.width/l.height)),r&&(l.opacity=.1,o.opacity=1),m.fancybox.setTranslate(t.$content.removeClass("fancybox-is-hidden"),l),p(t.$content),void m.fancybox.animate(t.$content,o,n,function(){s.isAnimating=!1,s.complete()})):(s.updateSlide(t),e?(m.fancybox.stop(a),i="fancybox-slide--"+(t.pos>=s.prevPos?"next":"previous")+" fancybox-animated fancybox-fx-"+e,a.addClass(i).removeClass("fancybox-slide--current"),t.$content.removeClass("fancybox-is-hidden"),p(a),"image"!==t.type&&t.$content.hide().show(0),void m.fancybox.animate(a,"fancybox-slide--current",n,function(){a.removeClass(i).css({transform:"",opacity:""}),t.pos===s.currPos&&s.complete()},!0)):(t.$content.removeClass("fancybox-is-hidden"),u||!c||"image"!==t.type||t.hasError||t.$content.hide().fadeIn("fast"),void(t.pos===s.currPos&&s.complete())))},getThumbPos:function(t){var e,i,n,r,s,a,o,l,c,u=t.$thumb;return!!(u&&(o=u[0])&&o.ownerDocument===d&&(m(".fancybox-container").css("pointer-events","none"),l={x:o.getBoundingClientRect().left+o.offsetWidth/2,y:o.getBoundingClientRect().top+o.offsetHeight/2},c=d.elementFromPoint(l.x,l.y)===o,m(".fancybox-container").css("pointer-events",""),c))&&(i=m.fancybox.getTranslate(u),n=parseFloat(u.css("border-top-width")||0),r=parseFloat(u.css("border-right-width")||0),s=parseFloat(u.css("border-bottom-width")||0),a=parseFloat(u.css("border-left-width")||0),e={top:i.top+n,left:i.left+a,width:i.width-r-a,height:i.height-n-s,scaleX:1,scaleY:1},0<i.width&&0<i.height&&e)},complete:function(){var t,i=this,e=i.current,n={};!i.isMoved()&&e.isLoaded&&(e.isComplete||(e.isComplete=!0,e.$slide.siblings().trigger("onReset"),i.preload("inline"),p(e.$slide),e.$slide.addClass("fancybox-slide--complete"),m.each(i.slides,function(t,e){e.pos>=i.currPos-1&&e.pos<=i.currPos+1?n[e.pos]=e:e&&(m.fancybox.stop(e.$slide),e.$slide.off().remove())}),i.slides=n),i.isAnimating=!1,i.updateCursor(),i.trigger("afterShow"),e.opts.video.autoStart&&e.$slide.find("video,audio").filter(":visible:first").trigger("play").one("ended",function(){Document.exitFullscreen?Document.exitFullscreen():this.webkitExitFullscreen&&this.webkitExitFullscreen(),i.next()}),e.opts.autoFocus&&"html"===e.contentType&&((t=e.$content.find("input[autofocus]:enabled:visible:first")).length?t.trigger("focus"):i.focus(null,!0)),e.$slide.scrollTop(0).scrollLeft(0))},preload:function(t){var e,i,n=this;n.group.length<2||(i=n.slides[n.currPos+1],(e=n.slides[n.currPos-1])&&e.type===t&&n.loadSlide(e),i&&i.type===t&&n.loadSlide(i))},focus:function(t,e){var i,n,r=this,s=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(",");r.isClosing||((i=(i=!t&&r.current&&r.current.isComplete?r.current.$slide.find("*:visible"+(e?":not(.fancybox-close-small)":"")):r.$refs.container.find("*:visible")).filter(s).filter(function(){return"hidden"!==m(this).css("visibility")&&!m(this).hasClass("disabled")})).length?(n=i.index(d.activeElement),t&&t.shiftKey?(n<0||0==n)&&(t.preventDefault(),i.eq(i.length-1).trigger("focus")):(n<0||n==i.length-1)&&(t&&t.preventDefault(),i.eq(0).trigger("focus"))):r.$refs.container.trigger("focus"))},activate:function(){var e=this;m(".fancybox-container").each(function(){var t=m(this).data("FancyBox");t&&t.id!==e.id&&!t.isClosing&&(t.trigger("onDeactivate"),t.removeEvents(),t.isVisible=!1)}),e.isVisible=!0,(e.current||e.isIdle)&&(e.update(),e.updateControls()),e.trigger("onActivate"),e.addEvents()},close:function(t,e){function i(){u.cleanUp(t)}var n,r,s,a,o,l,c,u=this,d=u.current;return!u.isClosing&&(!(u.isClosing=!0)===u.trigger("beforeClose",t)?(u.isClosing=!1,h(function(){u.update()}),!1):(u.removeEvents(),s=d.$content,n=d.opts.animationEffect,r=m.isNumeric(e)?e:n?d.opts.animationDuration:0,d.$slide.removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"),!0!==t?m.fancybox.stop(d.$slide):n=!1,d.$slide.siblings().trigger("onReset").remove(),r&&u.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing").css("transition-duration",r+"ms"),u.hideLoading(d),u.hideControls(!0),u.updateCursor(),"zoom"!==n||s&&r&&"image"===d.type&&!u.isMoved()&&!d.hasError&&(c=u.getThumbPos(d))||(n="fade"),"zoom"===n?(m.fancybox.stop(s),l={top:(a=m.fancybox.getTranslate(s)).top,left:a.left,scaleX:a.width/c.width,scaleY:a.height/c.height,width:c.width,height:c.height},"auto"==(o=d.opts.zoomOpacity)&&(o=.1<Math.abs(d.width/d.height-c.width/c.height)),o&&(c.opacity=0),m.fancybox.setTranslate(s,l),p(s),m.fancybox.animate(s,c,r,i)):n&&r?m.fancybox.animate(d.$slide.addClass("fancybox-slide--previous").removeClass("fancybox-slide--current"),"fancybox-animated fancybox-fx-"+n,r,i):!0===t?setTimeout(i,r):i(),!0))},cleanUp:function(t){var e,i,n,r=this,s=r.current.opts.$orig;r.current.$slide.trigger("onReset"),r.$refs.container.empty().remove(),r.trigger("afterClose",t),r.current.opts.backFocus&&(s&&s.length&&s.is(":visible")||(s=r.$trigger),s&&s.length&&(i=l.scrollX,n=l.scrollY,s.trigger("focus"),m("html, body").scrollTop(n).scrollLeft(i))),r.current=null,(e=m.fancybox.getInstance())?e.activate():(m("body").removeClass("fancybox-active compensate-for-scrollbar"),m("#fancybox-style-noscroll").remove())},trigger:function(t,e){var i,n=Array.prototype.slice.call(arguments,1),r=this,s=e&&e.opts?e:r.current;if(s?n.unshift(s):s=r,n.unshift(r),m.isFunction(s.opts[t])&&(i=s.opts[t].apply(s,n)),!1===i)return i;"afterClose"!==t&&r.$refs?r.$refs.container.trigger(t+".fb",n):a.trigger(t+".fb",n)},updateControls:function(){var t=this,e=t.current,i=e.index,n=t.$refs.container,r=t.$refs.caption,s=e.opts.caption;e.$slide.trigger("refresh"),s&&s.length?(t.$caption=r).children().eq(0).html(s):t.$caption=null,t.hasHiddenControls||t.isIdle||t.showControls(),n.find("[data-fancybox-count]").html(t.group.length),n.find("[data-fancybox-index]").html(i+1),n.find("[data-fancybox-prev]").prop("disabled",!e.opts.loop&&i<=0),n.find("[data-fancybox-next]").prop("disabled",!e.opts.loop&&i>=t.group.length-1),"image"===e.type?n.find("[data-fancybox-zoom]").show().end().find("[data-fancybox-download]").attr("href",e.opts.image.src||e.src).show():e.opts.toolbar&&n.find("[data-fancybox-download],[data-fancybox-zoom]").hide(),m(d.activeElement).is(":hidden,[disabled]")&&t.$refs.container.trigger("focus")},hideControls:function(t){var e=["infobar","toolbar","nav"];!t&&this.current.opts.preventCaptionOverlap||e.push("caption"),this.$refs.container.removeClass(e.map(function(t){return"fancybox-show-"+t}).join(" ")),this.hasHiddenControls=!0},showControls:function(){var t=this,e=t.current?t.current.opts:t.opts,i=t.$refs.container;t.hasHiddenControls=!1,t.idleSecondsCounter=0,i.toggleClass("fancybox-show-toolbar",!(!e.toolbar||!e.buttons)).toggleClass("fancybox-show-infobar",!!(e.infobar&&1<t.group.length)).toggleClass("fancybox-show-caption",!!t.$caption).toggleClass("fancybox-show-nav",!!(e.arrows&&1<t.group.length)).toggleClass("fancybox-is-modal",!!e.modal)},toggleControls:function(){this.hasHiddenControls?this.showControls():this.hideControls()}}),m.fancybox={version:"3.5.7",defaults:r,getInstance:function(t){var e=m('.fancybox-container:not(".fancybox-is-closing"):last').data("FancyBox"),i=Array.prototype.slice.call(arguments,1);return e instanceof v&&("string"===m.type(t)?e[t].apply(e,i):"function"===m.type(t)&&t.apply(e,i),e)},open:function(t,e,i){return new v(t,e,i)},close:function(t){var e=this.getInstance();e&&(e.close(),!0===t&&this.close(t))},destroy:function(){this.close(!0),a.add("body").off("click.fb-start","**")},isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),use3d:(t=d.createElement("div"),l.getComputedStyle&&l.getComputedStyle(t)&&l.getComputedStyle(t).getPropertyValue("transform")&&!(d.documentMode&&d.documentMode<11)),getTranslate:function(t){var e;return!(!t||!t.length)&&{top:(e=t[0].getBoundingClientRect()).top||0,left:e.left||0,width:e.width,height:e.height,opacity:parseFloat(t.css("opacity"))}},setTranslate:function(t,e){var i="",n={};if(t&&e)return e.left===g&&e.top===g||(i=(e.left===g?t.position().left:e.left)+"px, "+(e.top===g?t.position().top:e.top)+"px",i=this.use3d?"translate3d("+i+", 0px)":"translate("+i+")"),e.scaleX!==g&&e.scaleY!==g?i+=" scale("+e.scaleX+", "+e.scaleY+")":e.scaleX!==g&&(i+=" scaleX("+e.scaleX+")"),i.length&&(n.transform=i),e.opacity!==g&&(n.opacity=e.opacity),e.width!==g&&(n.width=e.width),e.height!==g&&(n.height=e.height),t.css(n)},animate:function(e,i,n,r,s){var a,o=this;m.isFunction(n)&&(r=n,n=null),o.stop(e),a=o.getTranslate(e),e.on(u,function(t){t&&t.originalEvent&&(!e.is(t.originalEvent.target)||"z-index"==t.originalEvent.propertyName)||(o.stop(e),m.isNumeric(n)&&e.css("transition-duration",""),m.isPlainObject(i)?i.scaleX!==g&&i.scaleY!==g&&o.setTranslate(e,{top:i.top,left:i.left,width:a.width*i.scaleX,height:a.height*i.scaleY,scaleX:1,scaleY:1}):!0!==s&&e.removeClass(i),m.isFunction(r)&&r(t))}),m.isNumeric(n)&&e.css("transition-duration",n+"ms"),m.isPlainObject(i)?(i.scaleX!==g&&i.scaleY!==g&&(delete i.width,delete i.height,e.parent().hasClass("fancybox-slide--image")&&e.parent().addClass("fancybox-is-scaling")),m.fancybox.setTranslate(e,i)):e.addClass(i),e.data("timer",setTimeout(function(){e.trigger(u)},n+33))},stop:function(t,e){t&&t.length&&(clearTimeout(t.data("timer")),e&&t.trigger(u),t.off(u).css("transition-duration",""),t.parent().removeClass("fancybox-is-scaling"))}},m.fn.fancybox=function(t){var e;return(e=(t=t||{}).selector||!1)?m("body").off("click.fb-start",e).on("click.fb-start",e,{options:t},y):this.off("click.fb-start").on("click.fb-start",{items:this,options:t},y),this},a.on("click.fb-start","[data-fancybox]",y),a.on("click.fb-start","[data-fancybox-trigger]",function(t){m('[data-fancybox="'+m(this).attr("data-fancybox-trigger")+'"]').eq(m(this).attr("data-fancybox-index")||0).trigger("click.fb-start",{$trigger:m(this)})}),e=".fancybox-button",i="fancybox-focus",n=null,a.on("mousedown mouseup focus blur",e,function(t){switch(t.type){case"mousedown":n=m(this);break;case"mouseup":n=null;break;case"focusin":m(e).removeClass(i),m(this).is(n)||m(this).is("[disabled]")||m(this).addClass(i);break;case"focusout":m(e).removeClass(i)}})}function y(t,e){var i,n,r,s=[],a=0;t&&t.isDefaultPrevented()||(t.preventDefault(),e=e||{},t&&t.data&&(e=f(t.data.options,e)),i=e.$target||m(t.currentTarget).trigger("blur"),(r=m.fancybox.getInstance())&&r.$trigger&&r.$trigger.is(i)||(s=e.selector?m(e.selector):(n=i.attr("data-fancybox")||"")?(s=t.data?t.data.items:[]).length?s.filter('[data-fancybox="'+n+'"]'):m('[data-fancybox="'+n+'"]'):[i],(a=m(s).index(i))<0&&(a=0),(r=m.fancybox.open(s,e,a)).$trigger=i))}}(window,document,jQuery),function(p){"use strict";function f(i,t,e){if(i)return e=e||"","object"===p.type(e)&&(e=p.param(e,!0)),p.each(t,function(t,e){i=i.replace("$"+t,e||"")}),e.length&&(i+=(0<i.indexOf("?")?"&":"?")+e),i}var n={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"https://www.youtube-nocookie.com/embed/$4",thumb:"https://img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/?ll="+(t[9]?t[9]+"&z="+Math.floor(t[10])+(t[12]?t[12].replace(/^\//,"&"):""):t[12]+"").replace(/\?/,"&")+"&output="+(t[12]&&0<t[12].indexOf("layer=c")?"svembed":"embed")}},gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/maps?q="+t[5].replace("query=","q=").replace("api=1","")+"&output=embed"}}};p(document).on("objectNeedsType.fb",function(t,e,r){var i,s,a,o,l,c,u,d=r.src||"",h=!1;i=p.extend(!0,{},n,r.opts.media),p.each(i,function(t,e){if(a=d.match(e.matcher)){if(h=e.type,u=t,c={},e.paramPlace&&a[e.paramPlace]){"?"==(l=a[e.paramPlace])[0]&&(l=l.substring(1)),l=l.split("&");for(var i=0;i<l.length;++i){var n=l[i].split("=",2);2==n.length&&(c[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}}return o=p.extend(!0,{},e.params,r.opts[t],c),d="function"===p.type(e.url)?e.url.call(this,a,o,r):f(e.url,a,o),s="function"===p.type(e.thumb)?e.thumb.call(this,a,o,r):f(e.thumb,a),"youtube"===t?d=d.replace(/&t=((\d+)m)?(\d+)s/,function(t,e,i,n){return"&start="+((i?60*parseInt(i,10):0)+parseInt(n,10))}):"vimeo"===t&&(d=d.replace("&%23","#")),!1}}),h?(r.opts.thumb||r.opts.$thumb&&r.opts.$thumb.length||(r.opts.thumb=s),"iframe"===h&&(r.opts=p.extend(!0,r.opts,{iframe:{preload:!1,attr:{scrolling:"no"}}})),p.extend(r,{type:h,src:d,origSrc:r.src,contentSource:u,contentType:"image"===h?"image":"gmap_place"==u||"gmap_search"==u?"map":"video"})):d&&(r.type=r.opts.defaultType)});var r={youtube:{src:"https://www.youtube.com/iframe_api",class:"YT",loading:!1,loaded:!1},vimeo:{src:"https://player.vimeo.com/api/player.js",class:"Vimeo",loading:!1,loaded:!1},load:function(t){var e,i=this;this[t].loaded?setTimeout(function(){i.done(t)}):this[t].loading||(this[t].loading=!0,(e=document.createElement("script")).type="text/javascript",e.src=this[t].src,"youtube"===t?window.onYouTubeIframeAPIReady=function(){i[t].loaded=!0,i.done(t)}:e.onload=function(){i[t].loaded=!0,i.done(t)},document.body.appendChild(e))},done:function(t){var e,i;"youtube"===t&&delete window.onYouTubeIframeAPIReady,(e=p.fancybox.getInstance())&&(i=e.current.$content.find("iframe"),"youtube"===t&&void 0!==YT&&YT?new YT.Player(i.attr("id"),{events:{onStateChange:function(t){0==t.data&&e.next()}}}):"vimeo"===t&&void 0!==Vimeo&&Vimeo&&new Vimeo.Player(i).on("ended",function(){e.next()}))}};p(document).on({"afterShow.fb":function(t,e,i){1<e.group.length&&("youtube"===i.contentSource||"vimeo"===i.contentSource)&&r.load(i.contentSource)}})}(jQuery),function(m,l,g){"use strict";function u(t){var e=[];for(var i in t=(t=t.originalEvent||t||m.e).touches&&t.touches.length?t.touches:t.changedTouches&&t.changedTouches.length?t.changedTouches:[t])t[i].pageX?e.push({x:t[i].pageX,y:t[i].pageY}):t[i].clientX&&e.push({x:t[i].clientX,y:t[i].clientY});return e}function v(t,e,i){return e&&t?"x"===i?t.x-e.x:"y"===i?t.y-e.y:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0}function c(t){if(t.is('a,area,button,[role="button"],input,label,select,summary,textarea,video,audio,iframe')||g.isFunction(t.get(0).onclick)||t.data("selectable"))return 1;for(var e=0,i=t[0].attributes,n=i.length;e<n;e++)if("data-fancybox-"===i[e].nodeName.substr(0,14))return 1}function d(t){for(var e,i,n,r,s,a=!1;e=t.get(0),0,i=m.getComputedStyle(e)["overflow-y"],n=m.getComputedStyle(e)["overflow-x"],r=("scroll"===i||"auto"===i)&&e.scrollHeight>e.clientHeight,s=("scroll"===n||"auto"===n)&&e.scrollWidth>e.clientWidth,!(a=r||s)&&(t=t.parent()).length&&!t.hasClass("fancybox-stage")&&!t.is("body"););return a}function i(t){var e=this;e.instance=t,e.$bg=t.$refs.bg,e.$stage=t.$refs.stage,e.$container=t.$refs.container,e.destroy(),e.$container.on("touchstart.fb.touch mousedown.fb.touch",g.proxy(e,"ontouchstart"))}var y=m.requestAnimationFrame||m.webkitRequestAnimationFrame||m.mozRequestAnimationFrame||m.oRequestAnimationFrame||function(t){return m.setTimeout(t,1e3/60)},b=m.cancelAnimationFrame||m.webkitCancelAnimationFrame||m.mozCancelAnimationFrame||m.oCancelAnimationFrame||function(t){m.clearTimeout(t)};i.prototype.destroy=function(){var t=this;t.$container.off(".fb.touch"),g(l).off(".fb.touch"),t.requestId&&(b(t.requestId),t.requestId=null),t.tapped&&(clearTimeout(t.tapped),t.tapped=null)},i.prototype.ontouchstart=function(t){var e=this,i=g(t.target),n=e.instance,r=n.current,s=r.$slide,a=r.$content,o="touchstart"==t.type;if(o&&e.$container.off("mousedown.fb.touch"),(!t.originalEvent||2!=t.originalEvent.button)&&s.length&&i.length&&!c(i)&&!c(i.parent())&&(i.is("img")||!(t.originalEvent.clientX>i[0].clientWidth+i.offset().left))){if(!r||n.isAnimating||r.$slide.hasClass("fancybox-animated"))return t.stopPropagation(),void t.preventDefault();e.realPoints=e.startPoints=u(t),e.startPoints.length&&(r.touch&&t.stopPropagation(),e.startEvent=t,e.canTap=!0,e.$target=i,e.$content=a,e.opts=r.opts.touch,e.isPanning=!1,e.isSwiping=!1,e.isZooming=!1,e.isScrolling=!1,e.canPan=n.canPan(),e.startTime=(new Date).getTime(),e.distanceX=e.distanceY=e.distance=0,e.canvasWidth=Math.round(s[0].clientWidth),e.canvasHeight=Math.round(s[0].clientHeight),e.contentLastPos=null,e.contentStartPos=g.fancybox.getTranslate(e.$content)||{top:0,left:0},e.sliderStartPos=g.fancybox.getTranslate(s),e.stagePos=g.fancybox.getTranslate(n.$refs.stage),e.sliderStartPos.top-=e.stagePos.top,e.sliderStartPos.left-=e.stagePos.left,e.contentStartPos.top-=e.stagePos.top,e.contentStartPos.left-=e.stagePos.left,g(l).off(".fb.touch").on(o?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",g.proxy(e,"ontouchend")).on(o?"touchmove.fb.touch":"mousemove.fb.touch",g.proxy(e,"ontouchmove")),g.fancybox.isMobile&&l.addEventListener("scroll",e.onscroll,!0),((e.opts||e.canPan)&&(i.is(e.$stage)||e.$stage.find(i).length)||(i.is(".fancybox-image")&&t.preventDefault(),g.fancybox.isMobile&&i.parents(".fancybox-caption").length))&&(e.isScrollable=d(i)||d(i.parent()),g.fancybox.isMobile&&e.isScrollable||t.preventDefault(),1!==e.startPoints.length&&!r.hasError||(e.canPan?(g.fancybox.stop(e.$content),e.isPanning=!0):e.isSwiping=!0,e.$container.addClass("fancybox-is-grabbing")),2===e.startPoints.length&&"image"===r.type&&(r.isLoaded||r.$ghost)&&(e.canTap=!1,e.isSwiping=!1,e.isPanning=!1,e.isZooming=!0,g.fancybox.stop(e.$content),e.centerPointStartX=.5*(e.startPoints[0].x+e.startPoints[1].x)-g(m).scrollLeft(),e.centerPointStartY=.5*(e.startPoints[0].y+e.startPoints[1].y)-g(m).scrollTop(),e.percentageOfImageAtPinchPointX=(e.centerPointStartX-e.contentStartPos.left)/e.contentStartPos.width,e.percentageOfImageAtPinchPointY=(e.centerPointStartY-e.contentStartPos.top)/e.contentStartPos.height,e.startDistanceBetweenFingers=v(e.startPoints[0],e.startPoints[1]))))}},i.prototype.onscroll=function(t){this.isScrolling=!0,l.removeEventListener("scroll",this.onscroll,!0)},i.prototype.ontouchmove=function(t){var e=this;void 0===t.originalEvent.buttons||0!==t.originalEvent.buttons?e.isScrolling?e.canTap=!1:(e.newPoints=u(t),(e.opts||e.canPan)&&e.newPoints.length&&e.newPoints.length&&(e.isSwiping&&!0===e.isSwiping||t.preventDefault(),e.distanceX=v(e.newPoints[0],e.startPoints[0],"x"),e.distanceY=v(e.newPoints[0],e.startPoints[0],"y"),e.distance=v(e.newPoints[0],e.startPoints[0]),0<e.distance&&(e.isSwiping?e.onSwipe(t):e.isPanning?e.onPan():e.isZooming&&e.onZoom()))):e.ontouchend(t)},i.prototype.onSwipe=function(t){var e,r=this,s=r.instance,i=r.isSwiping,n=r.sliderStartPos.left||0;if(!0!==i)"x"==i&&(0<r.distanceX&&(r.instance.group.length<2||0===r.instance.current.index&&!r.instance.current.opts.loop)?n+=Math.pow(r.distanceX,.8):r.distanceX<0&&(r.instance.group.length<2||r.instance.current.index===r.instance.group.length-1&&!r.instance.current.opts.loop)?n-=Math.pow(-r.distanceX,.8):n+=r.distanceX),r.sliderLastPos={top:"x"==i?0:r.sliderStartPos.top+r.distanceY,left:n},r.requestId&&(b(r.requestId),r.requestId=null),r.requestId=y(function(){r.sliderLastPos&&(g.each(r.instance.slides,function(t,e){var i=e.pos-r.instance.currPos;g.fancybox.setTranslate(e.$slide,{top:r.sliderLastPos.top,left:r.sliderLastPos.left+i*r.canvasWidth+i*e.opts.gutter})}),r.$container.addClass("fancybox-is-sliding"))});else if(10<Math.abs(r.distance)){if(r.canTap=!1,s.group.length<2&&r.opts.vertical?r.isSwiping="y":s.isDragging||!1===r.opts.vertical||"auto"===r.opts.vertical&&800<g(m).width()?r.isSwiping="x":(e=Math.abs(180*Math.atan2(r.distanceY,r.distanceX)/Math.PI),r.isSwiping=45<e&&e<135?"y":"x"),"y"===r.isSwiping&&g.fancybox.isMobile&&r.isScrollable)return void(r.isScrolling=!0);s.isDragging=r.isSwiping,r.startPoints=r.newPoints,g.each(s.slides,function(t,e){var i,n;g.fancybox.stop(e.$slide),i=g.fancybox.getTranslate(e.$slide),n=g.fancybox.getTranslate(s.$refs.stage),e.$slide.css({transform:"",opacity:"","transition-duration":""}).removeClass("fancybox-animated").removeClass(function(t,e){return(e.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")}),e.pos===s.current.pos&&(r.sliderStartPos.top=i.top-n.top,r.sliderStartPos.left=i.left-n.left),g.fancybox.setTranslate(e.$slide,{top:i.top-n.top,left:i.left-n.left})}),s.SlideShow&&s.SlideShow.isActive&&s.SlideShow.stop()}},i.prototype.onPan=function(){var t=this;v(t.newPoints[0],t.realPoints[0])<(g.fancybox.isMobile?10:5)?t.startPoints=t.newPoints:(t.canTap=!1,t.contentLastPos=t.limitMovement(),t.requestId&&b(t.requestId),t.requestId=y(function(){g.fancybox.setTranslate(t.$content,t.contentLastPos)}))},i.prototype.limitMovement=function(){var t,e,i,n,r,s,a=this,o=a.canvasWidth,l=a.canvasHeight,c=a.distanceX,u=a.distanceY,d=a.contentStartPos,h=d.left,p=d.top,f=d.width,m=d.height;return r=o<f?h+c:h,s=p+u,t=Math.max(0,.5*o-.5*f),e=Math.max(0,.5*l-.5*m),i=Math.min(o-f,.5*o-.5*f),n=Math.min(l-m,.5*l-.5*m),0<c&&t<r&&(r=t-1+Math.pow(-t+h+c,.8)||0),c<0&&r<i&&(r=i+1-Math.pow(i-h-c,.8)||0),0<u&&e<s&&(s=e-1+Math.pow(-e+p+u,.8)||0),u<0&&s<n&&(s=n+1-Math.pow(n-p-u,.8)||0),{top:s,left:r}},i.prototype.limitPosition=function(t,e,i,n){var r=this.canvasWidth,s=this.canvasHeight;return t=r<i?(t=0<t?0:t)<r-i?r-i:t:Math.max(0,r/2-i/2),{top:e=s<n?(e=0<e?0:e)<s-n?s-n:e:Math.max(0,s/2-n/2),left:t}},i.prototype.onZoom=function(){var t=this,e=t.contentStartPos,i=e.width,n=e.height,r=e.left,s=e.top,a=v(t.newPoints[0],t.newPoints[1])/t.startDistanceBetweenFingers,o=Math.floor(i*a),l=Math.floor(n*a),c=(i-o)*t.percentageOfImageAtPinchPointX,u=(n-l)*t.percentageOfImageAtPinchPointY,d=(t.newPoints[0].x+t.newPoints[1].x)/2-g(m).scrollLeft(),h=(t.newPoints[0].y+t.newPoints[1].y)/2-g(m).scrollTop(),p=d-t.centerPointStartX,f={top:s+(u+(h-t.centerPointStartY)),left:r+(c+p),scaleX:a,scaleY:a};t.canTap=!1,t.newWidth=o,t.newHeight=l,t.contentLastPos=f,t.requestId&&b(t.requestId),t.requestId=y(function(){g.fancybox.setTranslate(t.$content,t.contentLastPos)})},i.prototype.ontouchend=function(t){var e=this,i=e.isSwiping,n=e.isPanning,r=e.isZooming,s=e.isScrolling;if(e.endPoints=u(t),e.dMs=Math.max((new Date).getTime()-e.startTime,1),e.$container.removeClass("fancybox-is-grabbing"),g(l).off(".fb.touch"),l.removeEventListener("scroll",e.onscroll,!0),e.requestId&&(b(e.requestId),e.requestId=null),e.isSwiping=!1,e.isPanning=!1,e.isZooming=!1,e.isScrolling=!1,e.instance.isDragging=!1,e.canTap)return e.onTap(t);e.speed=100,e.velocityX=e.distanceX/e.dMs*.5,e.velocityY=e.distanceY/e.dMs*.5,n?e.endPanning():r?e.endZooming():e.endSwiping(i,s)},i.prototype.endSwiping=function(t,e){var i=this,n=!1,r=i.instance.group.length,s=Math.abs(i.distanceX),a="x"==t&&1<r&&(130<i.dMs&&10<s||50<s);i.sliderLastPos=null,"y"==t&&!e&&50<Math.abs(i.distanceY)?(g.fancybox.animate(i.instance.current.$slide,{top:i.sliderStartPos.top+i.distanceY+150*i.velocityY,opacity:0},200),n=i.instance.close(!0,250)):a&&0<i.distanceX?n=i.instance.previous(300):a&&i.distanceX<0&&(n=i.instance.next(300)),!1!==n||"x"!=t&&"y"!=t||i.instance.centerSlide(200),i.$container.removeClass("fancybox-is-sliding")},i.prototype.endPanning=function(){var t,e,i,n=this;n.contentLastPos&&(e=!1===n.opts.momentum||350<n.dMs?(t=n.contentLastPos.left,n.contentLastPos.top):(t=n.contentLastPos.left+500*n.velocityX,n.contentLastPos.top+500*n.velocityY),(i=n.limitPosition(t,e,n.contentStartPos.width,n.contentStartPos.height)).width=n.contentStartPos.width,i.height=n.contentStartPos.height,g.fancybox.animate(n.$content,i,366))},i.prototype.endZooming=function(){var t,e,i,n,r=this,s=r.instance.current,a=r.newWidth,o=r.newHeight;r.contentLastPos&&(t=r.contentLastPos.left,n={top:e=r.contentLastPos.top,left:t,width:a,height:o,scaleX:1,scaleY:1},g.fancybox.setTranslate(r.$content,n),a<r.canvasWidth&&o<r.canvasHeight?r.instance.scaleToFit(150):a>s.width||o>s.height?r.instance.scaleToActual(r.centerPointStartX,r.centerPointStartY,150):(i=r.limitPosition(t,e,a,o),g.fancybox.animate(r.$content,i,150)))},i.prototype.onTap=function(i){function t(t){var e=a.opts[t];if(g.isFunction(e)&&(e=e.apply(s,[a,i])),e)switch(e){case"close":s.close(n.startEvent);break;case"toggleControls":s.toggleControls();break;case"next":s.next();break;case"nextOrClose":1<s.group.length?s.next():s.close(n.startEvent);break;case"zoom":"image"==a.type&&(a.isLoaded||a.$ghost)&&(s.canPan()?s.scaleToFit():s.isScaledDown()?s.scaleToActual(l,c):s.group.length<2&&s.close(n.startEvent))}}var e,n=this,r=g(i.target),s=n.instance,a=s.current,o=i&&u(i)||n.startPoints,l=o[0]?o[0].x-g(m).scrollLeft()-n.stagePos.left:0,c=o[0]?o[0].y-g(m).scrollTop()-n.stagePos.top:0;if((!i.originalEvent||2!=i.originalEvent.button)&&(r.is("img")||!(l>r[0].clientWidth+r.offset().left))){if(r.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"))e="Outside";else if(r.is(".fancybox-slide"))e="Slide";else{if(!s.current.$content||!s.current.$content.find(r).addBack().filter(r).length)return;e="Content"}if(n.tapped){if(clearTimeout(n.tapped),n.tapped=null,50<Math.abs(l-n.tapX)||50<Math.abs(c-n.tapY))return this;t("dblclick"+e)}else n.tapX=l,n.tapY=c,a.opts["dblclick"+e]&&a.opts["dblclick"+e]!==a.opts["click"+e]?n.tapped=setTimeout(function(){n.tapped=null,s.isAnimating||t("click"+e)},500):t("click"+e);return this}},g(l).on("onActivate.fb",function(t,e){e&&!e.Guestures&&(e.Guestures=new i(e))}).on("beforeClose.fb",function(t,e){e&&e.Guestures&&e.Guestures.destroy()})}(window,document,jQuery),function(a,o){"use strict";o.extend(!0,o.fancybox.defaults,{btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 5.4v13.2l11-6.6z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.33 5.75h2.2v12.5h-2.2V5.75zm5.15 0h2.2v12.5h-2.2V5.75z"/></svg></button>'},slideShow:{autoStart:!1,speed:3e3,progress:!0}});function i(t){this.instance=t,this.init()}o.extend(i.prototype,{timer:null,isActive:!1,$button:null,init:function(){var t=this,e=t.instance,i=e.group[e.currIndex].opts.slideShow;t.$button=e.$refs.toolbar.find("[data-fancybox-play]").on("click",function(){t.toggle()}),e.group.length<2||!i?t.$button.hide():i.progress&&(t.$progress=o('<div class="fancybox-progress"></div>').appendTo(e.$refs.inner))},set:function(t){var e=this,i=e.instance,n=i.current;n&&(!0===t||n.opts.loop||i.currIndex<i.group.length-1)?e.isActive&&"video"!==n.contentType&&(e.$progress&&o.fancybox.animate(e.$progress.show(),{scaleX:1},n.opts.slideShow.speed),e.timer=setTimeout(function(){i.current.opts.loop||i.current.index!=i.group.length-1?i.next():i.jumpTo(0)},n.opts.slideShow.speed)):(e.stop(),i.idleSecondsCounter=0,i.showControls())},clear:function(){clearTimeout(this.timer),this.timer=null,this.$progress&&this.$progress.removeAttr("style").hide()},start:function(){var t=this,e=t.instance.current;e&&(t.$button.attr("title",(e.opts.i18n[e.opts.lang]||e.opts.i18n.en).PLAY_STOP).removeClass("fancybox-button--play").addClass("fancybox-button--pause"),t.isActive=!0,e.isComplete&&t.set(!0),t.instance.trigger("onSlideShowChange",!0))},stop:function(){var t=this,e=t.instance.current;t.clear(),t.$button.attr("title",(e.opts.i18n[e.opts.lang]||e.opts.i18n.en).PLAY_START).removeClass("fancybox-button--pause").addClass("fancybox-button--play"),t.isActive=!1,t.instance.trigger("onSlideShowChange",!1),t.$progress&&t.$progress.removeAttr("style").hide()},toggle:function(){this.isActive?this.stop():this.start()}}),o(a).on({"onInit.fb":function(t,e){e&&!e.SlideShow&&(e.SlideShow=new i(e))},"beforeShow.fb":function(t,e,i,n){var r=e&&e.SlideShow;n?r&&i.opts.slideShow.autoStart&&r.start():r&&r.isActive&&r.clear()},"afterShow.fb":function(t,e,i){var n=e&&e.SlideShow;n&&n.isActive&&n.set()},"afterKeydown.fb":function(t,e,i,n,r){var s=e&&e.SlideShow;!s||!i.opts.slideShow||80!==r&&32!==r||o(a.activeElement).is("button,a,input")||(n.preventDefault(),s.toggle())},"beforeClose.fb onDeactivate.fb":function(t,e){var i=e&&e.SlideShow;i&&i.stop()}}),o(a).on("visibilitychange",function(){var t=o.fancybox.getInstance(),e=t&&t.SlideShow;e&&e.isActive&&(a.hidden?e.clear():e.set())})}(document,jQuery),function(s,i){"use strict";var n=function(){for(var t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],e={},i=0;i<t.length;i++){var n=t[i];if(n&&n[1]in s){for(var r=0;r<n.length;r++)e[t[0][r]]=n[r];return e}}return!1}();if(n){var r={request:function(t){(t=t||s.documentElement)[n.requestFullscreen](t.ALLOW_KEYBOARD_INPUT)},exit:function(){s[n.exitFullscreen]()},toggle:function(t){t=t||s.documentElement,this.isFullscreen()?this.exit():this.request(t)},isFullscreen:function(){return Boolean(s[n.fullscreenElement])},enabled:function(){return Boolean(s[n.fullscreenEnabled])}};i.extend(!0,i.fancybox.defaults,{btnTpl:{fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fsenter" title="{{FULL_SCREEN}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"/></svg></button>'},fullScreen:{autoStart:!1}}),i(s).on(n.fullscreenchange,function(){var t=r.isFullscreen(),e=i.fancybox.getInstance();e&&(e.current&&"image"===e.current.type&&e.isAnimating&&(e.isAnimating=!1,e.update(!0,!0,0),e.isComplete||e.complete()),e.trigger("onFullscreenChange",t),e.$refs.container.toggleClass("fancybox-is-fullscreen",t),e.$refs.toolbar.find("[data-fancybox-fullscreen]").toggleClass("fancybox-button--fsenter",!t).toggleClass("fancybox-button--fsexit",t))})}i(s).on({"onInit.fb":function(t,e){n?e&&e.group[e.currIndex].opts.fullScreen?(e.$refs.container.on("click.fb-fullscreen","[data-fancybox-fullscreen]",function(t){t.stopPropagation(),t.preventDefault(),r.toggle()}),e.opts.fullScreen&&!0===e.opts.fullScreen.autoStart&&r.request(),e.FullScreen=r):e&&e.$refs.toolbar.find("[data-fancybox-fullscreen]").hide():e.$refs.toolbar.find("[data-fancybox-fullscreen]").remove()},"afterKeydown.fb":function(t,e,i,n,r){e&&e.FullScreen&&70===r&&(n.preventDefault(),e.FullScreen.toggle())},"beforeClose.fb":function(t,e){e&&e.FullScreen&&e.$refs.container.hasClass("fancybox-is-fullscreen")&&r.exit()}})}(document,jQuery),function(t,s){"use strict";var a="fancybox-thumbs",o=a+"-active";s.fancybox.defaults=s.extend(!0,{btnTpl:{thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.59 14.59h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76H5.65V5.65z"/></svg></button>'},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"}},s.fancybox.defaults);function n(t){this.init(t)}s.extend(n.prototype,{$button:null,$grid:null,$list:null,isVisible:!1,isActive:!1,init:function(t){var e=this,i=t.group,n=0;e.instance=t,e.opts=i[t.currIndex].opts.thumbs,(t.Thumbs=e).$button=t.$refs.toolbar.find("[data-fancybox-thumbs]");for(var r=0,s=i.length;r<s&&(i[r].thumb&&n++,!(1<n));r++);1<n&&e.opts?(e.$button.removeAttr("style").on("click",function(){e.toggle()}),e.isActive=!0):e.$button.hide()},create:function(){var i,t=this,e=t.instance,n=t.opts.parentEl,r=[];t.$grid||(t.$grid=s('<div class="'+a+" "+a+"-"+t.opts.axis+'"></div>').appendTo(e.$refs.container.find(n).addBack().filter(n)),t.$grid.on("click","a",function(){e.jumpTo(s(this).attr("data-index"))})),t.$list||(t.$list=s('<div class="'+a+'__list">').appendTo(t.$grid)),s.each(e.group,function(t,e){(i=e.thumb)||"image"!==e.type||(i=e.src),r.push('<a href="javascript:;" tabindex="0" data-index="'+t+'"'+(i&&i.length?' style="background-image:url('+i+')"':'class="fancybox-thumbs-missing"')+"></a>")}),t.$list[0].innerHTML=r.join(""),"x"===t.opts.axis&&t.$list.width(parseInt(t.$grid.css("padding-right"),10)+e.group.length*t.$list.children().eq(0).outerWidth(!0))},focus:function(t){var e,i,n=this,r=n.$list,s=n.$grid;n.instance.current&&(i=(e=r.children().removeClass(o).filter('[data-index="'+n.instance.current.index+'"]').addClass(o)).position(),"y"===n.opts.axis&&(i.top<0||i.top>r.height()-e.outerHeight())?r.stop().animate({scrollTop:r.scrollTop()+i.top},t):"x"===n.opts.axis&&(i.left<s.scrollLeft()||i.left>s.scrollLeft()+(s.width()-e.outerWidth()))&&r.parent().stop().animate({scrollLeft:i.left},t))},update:function(){var t=this;t.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible),t.isVisible?(t.$grid||t.create(),t.instance.trigger("onThumbsShow"),t.focus(0)):t.$grid&&t.instance.trigger("onThumbsHide"),t.instance.update()},hide:function(){this.isVisible=!1,this.update()},show:function(){this.isVisible=!0,this.update()},toggle:function(){this.isVisible=!this.isVisible,this.update()}}),s(t).on({"onInit.fb":function(t,e){var i;e&&!e.Thumbs&&(i=new n(e)).isActive&&!0===i.opts.autoStart&&i.show()},"beforeShow.fb":function(t,e,i,n){var r=e&&e.Thumbs;r&&r.isVisible&&r.focus(n?0:250)},"afterKeydown.fb":function(t,e,i,n,r){var s=e&&e.Thumbs;s&&s.isActive&&71===r&&(n.preventDefault(),s.toggle())},"beforeClose.fb":function(t,e){var i=e&&e.Thumbs;i&&i.isVisible&&!1!==i.opts.hideOnClose&&i.$grid.hide()}})}(document,jQuery),function(t,s){"use strict";s.extend(!0,s.fancybox.defaults,{btnTpl:{share:'<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.55 19c1.4-8.4 9.1-9.8 11.9-9.8V5l7 7-7 6.3v-3.5c-2.8 0-10.5 2.1-11.9 4.2z"/></svg></button>'},share:{url:function(t,e){return!t.currentHash&&"inline"!==e.type&&"html"!==e.type&&(e.origSrc||e.src)||window.location},tpl:'<div class="fancybox-share"><h1>{{SHARE}}</h1><p><a class="fancybox-share__button fancybox-share__button--fb" href="https://www.facebook.com/sharer/sharer.php?u={{url}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196" /></svg><span>Facebook</span></a><a class="fancybox-share__button fancybox-share__button--tw" href="https://twitter.com/intent/tweet?url={{url}}&text={{descr}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z" /></svg><span>Twitter</span></a><a class="fancybox-share__button fancybox-share__button--pt" href="https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z" fill="#fff"/></svg><span>Pinterest</span></a></p><p><input class="fancybox-share__input" type="text" value="{{url_raw}}" onclick="select()" /></p></div>'}}),s(t).on("click","[data-fancybox-share]",function(){var t,e,i,n=s.fancybox.getInstance(),r=n.current||null;r&&("function"===s.type(r.opts.share.url)&&(t=r.opts.share.url.apply(r,[n,r])),e=r.opts.share.tpl.replace(/\{\{media\}\}/g,"image"===r.type?encodeURIComponent(r.src):"").replace(/\{\{url\}\}/g,encodeURIComponent(t)).replace(/\{\{url_raw\}\}/g,(i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},String(t).replace(/[&<>"'`=\/]/g,function(t){return i[t]}))).replace(/\{\{descr\}\}/g,n.$caption?encodeURIComponent(n.$caption.text()):""),s.fancybox.open({src:n.translate(n,e),type:"html",opts:{touch:!1,animationEffect:!1,afterLoad:function(t,e){n.$refs.container.one("beforeClose.fb",function(){t.close(null,0)}),e.$content.find(".fancybox-share__button").click(function(){return window.open(this.href,"Share","width=550, height=450"),!1})},mobile:{autoFocus:!1}}}))})}(document,jQuery),function(s,a,r){"use strict";function o(){var t=s.location.hash.substr(1),e=t.split("-"),i=1<e.length&&/^\+?\d+$/.test(e[e.length-1])&&parseInt(e.pop(-1),10)||1;return{hash:t,index:i<1?1:i,gallery:e.join("-")}}function e(t){""!==t.gallery&&r("[data-fancybox='"+r.escapeSelector(t.gallery)+"']").eq(t.index-1).focus().trigger("click.fb-start")}function l(t){var e,i;return!!t&&(""!==(i=(e=t.current?t.current.opts:t.opts).hash||(e.$orig?e.$orig.data("fancybox")||e.$orig.data("fancybox-trigger"):""))&&i)}r.escapeSelector||(r.escapeSelector=function(t){return(t+"").replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t})}),r(function(){!1!==r.fancybox.defaults.hash&&(r(a).on({"onInit.fb":function(t,e){var i,n;!1!==e.group[e.currIndex].opts.hash&&(i=o(),(n=l(e))&&i.gallery&&n==i.gallery&&(e.currIndex=i.index-1))},"beforeShow.fb":function(t,e,i,n){var r;i&&!1!==i.opts.hash&&(r=l(e))&&(e.currentHash=r+(1<e.group.length?"-"+(i.index+1):""),s.location.hash!=="#"+e.currentHash&&(n&&!e.origHash&&(e.origHash=s.location.hash),e.hashTimer&&clearTimeout(e.hashTimer),e.hashTimer=setTimeout(function(){"replaceState"in s.history?(s.history[n?"pushState":"replaceState"]({},a.title,s.location.pathname+s.location.search+"#"+e.currentHash),n&&(e.hasCreatedHistory=!0)):s.location.hash=e.currentHash,e.hashTimer=null},300)))},"beforeClose.fb":function(t,e,i){i&&!1!==i.opts.hash&&(clearTimeout(e.hashTimer),e.currentHash&&e.hasCreatedHistory?s.history.back():e.currentHash&&("replaceState"in s.history?s.history.replaceState({},a.title,s.location.pathname+s.location.search+(e.origHash||"")):s.location.hash=e.origHash),e.currentHash=null)}}),r(s).on("hashchange.fb",function(){var t=o(),n=null;r.each(r(".fancybox-container").get().reverse(),function(t,e){var i=r(e).data("FancyBox");if(i&&i.currentHash)return n=i,!1}),n?n.currentHash===t.gallery+"-"+t.index||1===t.index&&n.currentHash==t.gallery||(n.currentHash=null,n.close()):""!==t.gallery&&e(t)}),setTimeout(function(){r.fancybox.getInstance()||e(o())},50))})}(window,document,jQuery),function(t,e){"use strict";var r=(new Date).getTime();e(t).on({"onInit.fb":function(t,n,e){n.$refs.stage.on("mousewheel DOMMouseScroll wheel MozMousePixelScroll",function(t){var e=n.current,i=(new Date).getTime();n.group.length<2||!1===e.opts.wheel||"auto"===e.opts.wheel&&"image"!==e.type||(t.preventDefault(),t.stopPropagation(),e.$slide.hasClass("fancybox-animated")||(t=t.originalEvent||t,i-r<250||(r=i,n[(-t.deltaY||-t.deltaX||t.wheelDelta||-t.detail)<0?"next":"previous"]())))})}})}(document,jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t($||require("jquery")):t(jQuery)}(function(B){"use strict";var r="styler",n={idSuffix:"-styler",filePlaceholder:"Файл не выбран",fileBrowse:"Обзор...",fileNumber:"Выбрано файлов: %s",selectPlaceholder:"Выберите...",selectSearch:!1,selectSearchLimit:10,selectSearchNotFound:"Совпадений не найдено",selectSearchPlaceholder:"Поиск...",selectVisibleOptions:0,selectSmartPositioning:!0,locale:"ru",locales:{en:{filePlaceholder:"No file selected",fileBrowse:"Browse...",fileNumber:"Selected files: %s",selectPlaceholder:"Select...",selectSearchNotFound:"No matches found",selectSearchPlaceholder:"Search..."}},onSelectOpened:function(){},onSelectClosed:function(){},onFormStyled:function(){}};function s(t,e){this.element=t,this.options=B.extend({},n,e);var i=this.options.locale;void 0!==this.options.locales[i]&&B.extend(this.options,this.options.locales[i]),this.init()}function N(t){if(!B(t.target).parents().hasClass("jq-selectbox")&&"OPTION"!=t.target.nodeName&&B("div.jq-selectbox.opened").length){var e=B("div.jq-selectbox.opened"),i=B("div.jq-selectbox__search input",e),n=B("div.jq-selectbox__dropdown",e);e.find("select").data("_"+r).options.onSelectClosed.call(e),i.length&&i.val("").keyup(),n.hide().find("li.sel").addClass("selected"),e.removeClass("focused opened dropup dropdown")}}s.prototype={init:function(){var L=B(this.element),D=this.options,R=!(!navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||navigator.userAgent.match(/(Windows\sPhone)/i)),t=!(!navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/(Windows\sPhone)/i));function M(){void 0!==L.attr("id")&&""!==L.attr("id")&&(this.id=L.attr("id")+D.idSuffix),this.title=L.attr("title"),this.classes=L.attr("class"),this.data=L.data()}if(L.is(":checkbox")){var e=function(){var t=new M,e=B('<div class="jq-checkbox"><div class="jq-checkbox__div"></div></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);L.after(e).prependTo(e),L.is(":checked")&&e.addClass("checked"),L.is(":disabled")&&e.addClass("disabled"),e.click(function(t){t.preventDefault(),L.triggerHandler("click"),e.is(".disabled")||(L.is(":checked")?(L.prop("checked",!1),e.removeClass("checked")):(L.prop("checked",!0),e.addClass("checked")),L.focus().change())}),L.closest("label").add('label[for="'+L.attr("id")+'"]').on("click.styler",function(t){B(t.target).is("a")||B(t.target).closest(e).length||(e.triggerHandler("click"),t.preventDefault())}),L.on("change.styler",function(){L.is(":checked")?e.addClass("checked"):e.removeClass("checked")}).on("keydown.styler",function(t){32==t.which&&e.click()}).on("focus.styler",function(){e.is(".disabled")||e.addClass("focused")}).on("blur.styler",function(){e.removeClass("focused")})};e(),L.on("refresh",function(){L.closest("label").add('label[for="'+L.attr("id")+'"]').off(".styler"),L.off(".styler").parent().before(L).remove(),e()})}else if(L.is(":radio")){var i=function(){var t=new M,i=B('<div class="jq-radio"><div class="jq-radio__div"></div></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);L.after(i).prependTo(i),L.is(":checked")&&i.addClass("checked"),L.is(":disabled")&&i.addClass("disabled"),B.fn.commonParents=function(){var t=this;return t.first().parents().filter(function(){return B(this).find(t).length===t.length})},B.fn.commonParent=function(){return B(this).commonParents().first()},i.click(function(t){if(t.preventDefault(),L.triggerHandler("click"),!i.is(".disabled")){var e=B('input[name="'+L.attr("name")+'"]');e.commonParent().find(e).prop("checked",!1).parent().removeClass("checked"),L.prop("checked",!0).parent().addClass("checked"),L.focus().change()}}),L.closest("label").add('label[for="'+L.attr("id")+'"]').on("click.styler",function(t){B(t.target).is("a")||B(t.target).closest(i).length||(i.triggerHandler("click"),t.preventDefault())}),L.on("change.styler",function(){L.parent().addClass("checked")}).on("focus.styler",function(){i.is(".disabled")||i.addClass("focused")}).on("blur.styler",function(){i.removeClass("focused")})};i(),L.on("refresh",function(){L.closest("label").add('label[for="'+L.attr("id")+'"]').off(".styler"),L.off(".styler").parent().before(L).remove(),i()})}else if(L.is(":file")){var n=function(){var t=new M,n=L.data("placeholder");void 0===n&&(n=D.filePlaceholder);var e=L.data("browse");void 0!==e&&""!==e||(e=D.fileBrowse);var r=B('<div class="jq-file"><div class="jq-file__name">'+n+'</div><div class="jq-file__browse">'+e+"</div></div>").attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);L.after(r).appendTo(r),L.is(":disabled")&&r.addClass("disabled");var i=L.val(),s=B("div.jq-file__name",r);i&&s.text(i.replace(/.+[\\\/]/,"")),L.on("change.styler",function(){var t=L.val();if(L.is("[multiple]")){t="";var e=L[0].files.length;if(0<e){var i=L.data("number");void 0===i&&(i=D.fileNumber),t=i=i.replace("%s",e)}}s.text(t.replace(/.+[\\\/]/,"")),""===t?(s.text(n),r.removeClass("changed")):r.addClass("changed")}).on("focus.styler",function(){r.addClass("focused")}).on("blur.styler",function(){r.removeClass("focused")}).on("click.styler",function(){r.removeClass("focused")})};n(),L.on("refresh",function(){L.off(".styler").parent().before(L).remove(),n()})}else if(L.is('input[type="number"]')){var r=function(){var t=new M,e=B('<div class="jq-number"><div class="jq-number__spin minus"></div><div class="jq-number__spin plus"></div></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);L.after(e).prependTo(e).wrap('<div class="jq-number__field"></div>'),L.is(":disabled")&&e.addClass("disabled");var s,a,o,i=null,n=null;void 0!==L.attr("min")&&(s=L.attr("min")),void 0!==L.attr("max")&&(a=L.attr("max")),o=void 0!==L.attr("step")&&B.isNumeric(L.attr("step"))?Number(L.attr("step")):Number(1);function r(t){var e,i=L.val();B.isNumeric(i)||(i=0,L.val("0")),t.is(".minus")?e=Number(i)-o:t.is(".plus")&&(e=Number(i)+o);var n=(o.toString().split(".")[1]||[]).length;if(0<n){for(var r="1";r.length<=n;)r+="0";e=Math.round(e*r)/r}B.isNumeric(s)&&B.isNumeric(a)?s<=e&&e<=a&&L.val(e):B.isNumeric(s)&&!B.isNumeric(a)?s<=e&&L.val(e):(B.isNumeric(s)||!B.isNumeric(a)||e<=a)&&L.val(e)}e.is(".disabled")||(e.on("mousedown","div.jq-number__spin",function(){var t=B(this);r(t),i=setTimeout(function(){n=setInterval(function(){r(t)},40)},350)}).on("mouseup mouseout","div.jq-number__spin",function(){clearTimeout(i),clearInterval(n)}).on("mouseup","div.jq-number__spin",function(){L.change().trigger("input")}),L.on("focus.styler",function(){e.addClass("focused")}).on("blur.styler",function(){e.removeClass("focused")}))};r(),L.on("refresh",function(){L.off(".styler").closest(".jq-number").before(L).remove(),r()})}else if(L.is("select")){var s=function(){function A(e){var i=e.prop("scrollHeight")-e.outerHeight(),n=null,r=null;e.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(t){n=t.originalEvent.detail<0||0<t.originalEvent.wheelDelta?1:-1,r=e.scrollTop(),(i<=r&&n<0||r<=0&&0<n)&&(t.stopPropagation(),t.preventDefault())})}var P=B("option",L),I="";function O(){for(var t=0;t<P.length;t++){var e=P.eq(t),i="",n="",r="",s="",a="",o="",l="",c="",u="";e.prop("selected")&&(n="selected sel"),e.is(":disabled")&&(n="disabled"),e.is(":selected:disabled")&&(n="selected sel disabled"),void 0!==e.attr("id")&&""!==e.attr("id")&&(s=' id="'+e.attr("id")+D.idSuffix+'"'),void 0!==e.attr("title")&&""!==P.attr("title")&&(a=' title="'+e.attr("title")+'"'),void 0!==e.attr("class")&&(l=" "+e.attr("class"),u=' data-jqfs-class="'+e.attr("class")+'"');var d=e.data();for(var h in d)""!==d[h]&&(o+=" data-"+h+'="'+d[h]+'"');n+l!==""&&(r=' class="'+n+l+'"'),i="<li"+u+o+r+a+s+">"+e.html()+"</li>",e.parent().is("optgroup")&&(void 0!==e.parent().attr("class")&&(c=" "+e.parent().attr("class")),i="<li"+u+o+' class="'+n+l+" option"+c+'"'+a+s+">"+e.html()+"</li>",e.is(":first-child")&&(i='<li class="optgroup'+c+'">'+e.parent().attr("label")+"</li>"+i)),I+=i}}if(L.is("[multiple]")){if(t||R)return;!function(){var t=new M,e=B('<div class="jq-select-multiple jqselect"></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);L.after(e),O(),e.append("<ul>"+I+"</ul>");var i=B("ul",e),r=B("li",e),n=L.attr("size"),s=i.outerHeight(),a=r.outerHeight();void 0!==n&&0<n?i.css({height:a*n}):i.css({height:4*a}),s>e.height()&&(i.css("overflowY","scroll"),A(i),r.filter(".selected").length&&i.scrollTop(i.scrollTop()+r.filter(".selected").position().top)),L.prependTo(e),L.is(":disabled")?(e.addClass("disabled"),P.each(function(){B(this).is(":selected")&&r.eq(B(this).index()).addClass("selected")})):(r.filter(":not(.disabled):not(.optgroup)").click(function(t){L.focus();var e=B(this);if(t.ctrlKey||t.metaKey||e.addClass("selected"),t.shiftKey||e.addClass("first"),t.ctrlKey||t.metaKey||t.shiftKey||e.siblings().removeClass("selected first"),(t.ctrlKey||t.metaKey)&&(e.is(".selected")?e.removeClass("selected first"):e.addClass("selected first"),e.siblings().removeClass("first")),t.shiftKey){var i=!1,n=!1;e.siblings().removeClass("selected").siblings(".first").addClass("selected"),e.prevAll().each(function(){B(this).is(".first")&&(i=!0)}),e.nextAll().each(function(){B(this).is(".first")&&(n=!0)}),i&&e.prevAll().each(function(){if(B(this).is(".selected"))return!1;B(this).not(".disabled, .optgroup").addClass("selected")}),n&&e.nextAll().each(function(){if(B(this).is(".selected"))return!1;B(this).not(".disabled, .optgroup").addClass("selected")}),1==r.filter(".selected").length&&e.addClass("first")}P.prop("selected",!1),r.filter(".selected").each(function(){var t=B(this),e=t.index();t.is(".option")&&(e-=t.prevAll(".optgroup").length),P.eq(e).prop("selected",!0)}),L.change()}),P.each(function(t){B(this).data("optionIndex",t)}),L.on("change.styler",function(){r.removeClass("selected");var e=[];P.filter(":selected").each(function(){e.push(B(this).data("optionIndex"))}),r.not(".optgroup").filter(function(t){return-1<B.inArray(t,e)}).addClass("selected")}).on("focus.styler",function(){e.addClass("focused")}).on("blur.styler",function(){e.removeClass("focused")}),s>e.height()&&L.on("keydown.styler",function(t){38!=t.which&&37!=t.which&&33!=t.which||i.scrollTop(i.scrollTop()+r.filter(".selected").position().top-a),40!=t.which&&39!=t.which&&34!=t.which||i.scrollTop(i.scrollTop()+r.filter(".selected:last").position().top-i.innerHeight()+2*a)}))}()}else!function(){var t=new M,e="",i=L.data("placeholder"),n=L.data("search"),r=L.data("search-limit"),s=L.data("search-not-found"),a=L.data("search-placeholder"),l=L.data("smart-positioning");void 0===i&&(i=D.selectPlaceholder),void 0!==n&&""!==n||(n=D.selectSearch),void 0!==r&&""!==r||(r=D.selectSearchLimit),void 0!==s&&""!==s||(s=D.selectSearchNotFound),void 0===a&&(a=D.selectSearchPlaceholder),void 0!==l&&""!==l||(l=D.selectSmartPositioning);var c=B('<div class="jq-selectbox jqselect"><div class="jq-selectbox__select"><div class="jq-selectbox__select-text"></div><div class="jq-selectbox__trigger"><div class="jq-selectbox__trigger-arrow"></div></div></div></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);L.after(c).prependTo(c);var u=c.css("z-index");u=0<u?u:1;var o=B("div.jq-selectbox__select",c),d=B("div.jq-selectbox__select-text",c),h=P.filter(":selected");O(),n&&(e='<div class="jq-selectbox__search"><input type="search" autocomplete="off" placeholder="'+a+'"></div><div class="jq-selectbox__not-found">'+s+"</div>");var p=B('<div class="jq-selectbox__dropdown">'+e+"<ul>"+I+"</ul></div>");c.append(p);var f=B("ul",p),m=B("li",p),g=B("input",p),v=B("div.jq-selectbox__not-found",p).hide();m.length<r&&g.parent().hide(),""===P.first().text()&&P.first().is(":selected")&&!1!==i?d.text(i).addClass("placeholder"):d.text(h.text());var y=0,b=0;if(m.css({display:"inline-block"}),m.each(function(){var t=B(this);t.innerWidth()>y&&(y=t.innerWidth(),b=t.width())}),m.css({display:""}),d.is(".placeholder")&&d.width()>y)d.width(d.width());else{var _=c.clone().appendTo("body").width("auto"),T=_.outerWidth();_.remove(),T==c.outerWidth()&&d.width(b)}y>c.width()&&p.width(y),""===P.first().text()&&""!==L.data("placeholder")&&m.first().hide();var w=c.outerHeight(!0),S=g.parent().outerHeight(!0)||0,C=f.css("max-height"),k=m.filter(".selected");if(k.length<1&&m.first().addClass("selected sel"),void 0===m.data("li-height")){var x=m.outerHeight();!1!==i&&(x=m.eq(1).outerHeight()),m.data("li-height",x)}var E=p.css("top");if("auto"==p.css("left")&&p.css({left:0}),"auto"==p.css("top")&&(p.css({top:w}),E=w),p.hide(),k.length&&(P.first().text()!=h.text()&&c.addClass("changed"),c.data("jqfs-class",k.data("jqfs-class")),c.addClass(k.data("jqfs-class"))),L.is(":disabled"))c.addClass("disabled");else{o.click(function(){if(B("div.jq-selectbox").filter(".opened").length&&D.onSelectClosed.call(B("div.jq-selectbox").filter(".opened")),L.focus(),!R){var e=B(window),i=m.data("li-height"),n=c.offset().top,r=e.height()-w-(n-e.scrollTop()),t=L.data("visible-options");void 0!==t&&""!==t||(t=D.selectVisibleOptions);var s=5*i,a=i*t;0<t&&t<6&&(s=a),0===t&&(a="auto");var o=function(){p.height("auto").css({bottom:"auto",top:E});function t(){f.css("max-height",Math.floor((r-20-S)/i)*i)}t(),f.css("max-height",a),"none"!=C&&f.css("max-height",C),r<p.outerHeight()+20&&t()};!0===l||1===l?s+S+20<r?(o(),c.removeClass("dropup").addClass("dropdown")):(function(){p.height("auto").css({top:"auto",bottom:E});function t(){f.css("max-height",Math.floor((n-e.scrollTop()-20-S)/i)*i)}t(),f.css("max-height",a),"none"!=C&&f.css("max-height",C),n-e.scrollTop()-20<p.outerHeight()+20&&t()}(),c.removeClass("dropdown").addClass("dropup")):!1===l||0===l?s+S+20<r&&(o(),c.removeClass("dropup").addClass("dropdown")):(p.height("auto").css({bottom:"auto",top:E}),f.css("max-height",a),"none"!=C&&f.css("max-height",C)),c.offset().left+p.outerWidth()>e.width()&&p.css({left:"auto",right:0}),B("div.jqselect").css({zIndex:u-1}).removeClass("opened"),c.css({zIndex:u}),p.is(":hidden")?(B("div.jq-selectbox__dropdown:visible").hide(),p.show(),c.addClass("opened focused"),D.onSelectOpened.call(c)):(p.hide(),c.removeClass("opened dropup dropdown"),B("div.jq-selectbox").filter(".opened").length&&D.onSelectClosed.call(c)),g.length&&(g.val("").keyup(),v.hide(),g.keyup(function(){var t=B(this).val();m.each(function(){B(this).html().match(new RegExp(".*?"+t+".*?","i"))?B(this).show():B(this).hide()}),""===P.first().text()&&""!==L.data("placeholder")&&m.first().hide(),m.filter(":visible").length<1?v.show():v.hide()})),m.filter(".selected").length&&(""===L.val()?f.scrollTop(0):(f.innerHeight()/i%2!=0&&(i/=2),f.scrollTop(f.scrollTop()+m.filter(".selected").position().top-f.innerHeight()/2+i))),A(f)}}),m.hover(function(){B(this).siblings().removeClass("selected")});m.filter(".selected").text();m.filter(":not(.disabled):not(.optgroup)").click(function(){L.focus();var t=B(this),e=t.text();if(!t.is(".selected")){var i=t.index();i-=t.prevAll(".optgroup").length,t.addClass("selected sel").siblings().removeClass("selected sel"),P.prop("selected",!1).eq(i).prop("selected",!0),d.text(e),c.data("jqfs-class")&&c.removeClass(c.data("jqfs-class")),c.data("jqfs-class",t.data("jqfs-class")),c.addClass(t.data("jqfs-class")),L.change()}p.hide(),c.removeClass("opened dropup dropdown"),D.onSelectClosed.call(c)}),p.mouseout(function(){B("li.sel",p).addClass("selected")}),L.on("change.styler",function(){d.text(P.filter(":selected").text()).removeClass("placeholder"),m.removeClass("selected sel").not(".optgroup").eq(L[0].selectedIndex).addClass("selected sel"),P.first().text()!=m.filter(".selected").text()?c.addClass("changed"):c.removeClass("changed")}).on("focus.styler",function(){c.addClass("focused"),B("div.jqselect").not(".focused").removeClass("opened dropup dropdown").find("div.jq-selectbox__dropdown").hide()}).on("blur.styler",function(){c.removeClass("focused")}).on("keydown.styler keyup.styler",function(t){var e=m.data("li-height");""===L.val()?d.text(i).addClass("placeholder"):d.text(P.filter(":selected").text()),m.removeClass("selected sel").not(".optgroup").eq(L[0].selectedIndex).addClass("selected sel"),38!=t.which&&37!=t.which&&33!=t.which&&36!=t.which||(""===L.val()?f.scrollTop(0):f.scrollTop(f.scrollTop()+m.filter(".selected").position().top)),40!=t.which&&39!=t.which&&34!=t.which&&35!=t.which||f.scrollTop(f.scrollTop()+m.filter(".selected").position().top-f.innerHeight()+e),13==t.which&&(t.preventDefault(),p.hide(),c.removeClass("opened dropup dropdown"),D.onSelectClosed.call(c))}).on("keydown.styler",function(t){32==t.which&&(t.preventDefault(),o.click())}),N.registered||(B(document).on("click",N),N.registered=!0)}}()};s(),L.on("refresh",function(){L.off(".styler").parent().before(L).remove(),s()})}else L.is(":reset")&&L.on("click",function(){setTimeout(function(){L.closest("form").find("input, select").trigger("refresh")},1)})},destroy:function(){var t=B(this.element);t.is(":checkbox")||t.is(":radio")?(t.removeData("_"+r).off(".styler refresh").removeAttr("style").parent().before(t).remove(),t.closest("label").add('label[for="'+t.attr("id")+'"]').off(".styler")):t.is('input[type="number"]')?t.removeData("_"+r).off(".styler refresh").closest(".jq-number").before(t).remove():(t.is(":file")||t.is("select"))&&t.removeData("_"+r).off(".styler refresh").removeAttr("style").parent().before(t).remove()}},B.fn[r]=function(e){var i,n=arguments;return void 0===e||"object"==typeof e?(this.each(function(){B.data(this,"_"+r)||B.data(this,"_"+r,new s(this,e))}).promise().done(function(){var t=B(this[0]).data("_"+r);t&&t.options.onFormStyled.call()}),this):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(this.each(function(){var t=B.data(this,"_"+r);t instanceof s&&"function"==typeof t[e]&&(i=t[e].apply(t,Array.prototype.slice.call(n,1)))}),void 0!==i?i:this):void 0},N.registered=!1}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["global/window","global/document"],e):(t=t||self).videojs=e(t.window,t.document)}(this,function(y,d){"use strict";y=y&&y.hasOwnProperty("default")?y.default:y,d=d&&d.hasOwnProperty("default")?d.default:d;var c=[],t=function(o,l){return function(t,e,i){var n=l.levels[e],r=new RegExp("^("+n+")$");if("log"!==t&&i.unshift(t.toUpperCase()+":"),i.unshift(o+":"),c){c.push([].concat(i));var s=c.length-1e3;c.splice(0,0<s?s:0)}if(y.console){var a=y.console[t];a||"debug"!==t||(a=y.console.info||y.console.log),a&&n&&r.test(t)&&a[Array.isArray(i)?"apply":"call"](y.console,i)}}};var h=function e(i){function n(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];r("log",s,e)}var r,s="info";return r=t(i,n),n.createLogger=function(t){return e(i+": "+t)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:s},n.level=function(t){if("string"==typeof t){if(!n.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');s=t}return s},(n.history=function(){return c?[].concat(c):[]}).filter=function(e){return(c||[]).filter(function(t){return new RegExp(".*"+e+".*").test(t[0])})},n.history.clear=function(){c&&(c.length=0)},n.history.disable=function(){null!==c&&(c.length=0,c=null)},n.history.enable=function(){null===c&&(c=[])},n.error=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return r("error",s,e)},n.warn=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return r("warn",s,e)},n.debug=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return r("debug",s,e)},n}("VIDEOJS"),p=h.createLogger;function e(t,e){return t(e={exports:{}},e.exports),e.exports}var r=e(function(t){function e(){return t.exports=e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},e.apply(this,arguments)}t.exports=e}),i=Object.prototype.toString,s=function(t){return o(t)?Object.keys(t):[]};function a(e,i){s(e).forEach(function(t){return i(e[t],t)})}function f(i){for(var t=arguments.length,e=new Array(1<t?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return Object.assign?r.apply(void 0,[i].concat(e)):(e.forEach(function(t){t&&a(t,function(t,e){i[e]=t})}),i)}function o(t){return!!t&&"object"==typeof t}function l(t){return o(t)&&"[object Object]"===i.call(t)&&t.constructor===Object}function n(t,e){if(!t||!e)return"";if("function"!=typeof y.getComputedStyle)return"";var i=y.getComputedStyle(t);return i?i.getPropertyValue(e)||i[e]:""}function u(t){return"string"==typeof t&&Boolean(t.trim())}function m(t){if(0<=t.indexOf(" "))throw new Error("class has illegal whitespace characters")}function g(){return d===y.document}function v(t){return o(t)&&1===t.nodeType}function b(){try{return y.parent!==y.self}catch(t){return!0}}function _(n){return function(t,e){if(!u(t))return d[n](null);u(e)&&(e=d.querySelector(e));var i=v(e)?e:d;return i[n]&&i[n](t)}}function T(t,i,e,n){void 0===t&&(t="div"),void 0===i&&(i={}),void 0===e&&(e={});var r=d.createElement(t);return Object.getOwnPropertyNames(i).forEach(function(t){var e=i[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(h.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+t+" to "+e+"."),r.setAttribute(t,e)):"textContent"===t?w(r,e):r[t]!==e&&(r[t]=e)}),Object.getOwnPropertyNames(e).forEach(function(t){r.setAttribute(t,e[t])}),n&&$(r,n),r}function w(t,e){return void 0===t.textContent?t.innerText=e:t.textContent=e,t}function S(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function C(t,e){return m(e),t.classList?t.classList.contains(e):new RegExp("(^|\\s)"+e+"($|\\s)").test(t.className)}function k(t,e){return t.classList?t.classList.add(e):C(t,e)||(t.className=(t.className+" "+e).trim()),t}function x(t,e){return t.classList?t.classList.remove(e):(m(e),t.className=t.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),t}function E(t,e,i){var n=C(t,e);if("function"==typeof i&&(i=i(t,e)),"boolean"!=typeof i&&(i=!n),i!==n)return(i?k:x)(t,e),t}function A(i,n){Object.getOwnPropertyNames(n).forEach(function(t){var e=n[t];null==e||!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})}function P(t){var e={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&0<t.attributes.length)for(var n=t.attributes,r=n.length-1;0<=r;r--){var s=n[r].name,a=n[r].value;"boolean"!=typeof t[s]&&-1===i.indexOf(","+s+",")||(a=null!==a),e[s]=a}return e}function I(t,e){return t.getAttribute(e)}function O(t,e,i){t.setAttribute(e,i)}function L(t,e){t.removeAttribute(e)}function D(){d.body.focus(),d.onselectstart=function(){return!1}}function R(){d.onselectstart=function(){return!0}}function M(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(t){void 0!==e[t]&&(i[t]=e[t])}),i.height||(i.height=parseFloat(n(t,"height"))),i.width||(i.width=parseFloat(n(t,"width"))),i}}function B(t){var e;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};var i=d.documentElement,n=d.body,r=i.clientLeft||n.clientLeft||0,s=y.pageXOffset||n.scrollLeft,a=e.left+s-r,o=i.clientTop||n.clientTop||0,l=y.pageYOffset||n.scrollTop,c=e.top+l-o;return{left:Math.round(a),top:Math.round(c)}}function N(t,e){var i={},n=B(t),r=t.offsetWidth,s=t.offsetHeight,a=n.top,o=n.left,l=e.pageY,c=e.pageX;return e.changedTouches&&(c=e.changedTouches[0].pageX,l=e.changedTouches[0].pageY),i.y=Math.max(0,Math.min(1,(a-l+s)/s)),i.x=Math.max(0,Math.min(1,(c-o)/r)),i}function U(t){return o(t)&&3===t.nodeType}function j(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function F(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map(function(t){return"function"==typeof t&&(t=t()),v(t)||U(t)?t:"string"==typeof t&&/\S/.test(t)?d.createTextNode(t):void 0}).filter(function(t){return t})}function $(e,t){return F(t).forEach(function(t){return e.appendChild(t)}),e}function H(t,e){return $(j(t),e)}function z(t){return void 0===t.button&&void 0===t.buttons||(0===t.button&&void 0===t.buttons||("mouseup"===t.type&&0===t.button&&0===t.buttons||0===t.button&&1===t.buttons))}var q,W=_("querySelector"),V=_("querySelectorAll"),G=Object.freeze({isReal:g,isEl:v,isInFrame:b,createEl:T,textContent:w,prependTo:S,hasClass:C,addClass:k,removeClass:x,toggleClass:E,setAttributes:A,getAttributes:P,getAttribute:I,setAttribute:O,removeAttribute:L,blockTextSelection:D,unblockTextSelection:R,getBoundingClientRect:M,findPosition:B,getPointerPosition:N,isTextNode:U,emptyEl:j,normalizeContent:F,appendContent:$,insertContent:H,isSingleLeftClick:z,$:W,$$:V}),X=!1,Y=function(){if(g()&&!1!==q.options.autoSetup){var t=Array.prototype.slice.call(d.getElementsByTagName("video")),e=Array.prototype.slice.call(d.getElementsByTagName("audio")),i=Array.prototype.slice.call(d.getElementsByTagName("video-js")),n=t.concat(e,i);if(n&&0<n.length)for(var r=0,s=n.length;r<s;r++){var a=n[r];if(!a||!a.getAttribute){K(1);break}void 0===a.player&&null!==a.getAttribute("data-setup")&&q(a)}else X||K(1)}};function K(t,e){e&&(q=e),y.setTimeout(Y,t)}function Q(){X=!0,y.removeEventListener("load",Q)}g()&&("complete"===d.readyState?Q():y.addEventListener("load",Q));function Z(t){var e=d.createElement("style");return e.className=t,e}function J(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e}var tt,et=3;function it(){return et++}y.WeakMap||(tt=function(){function t(){this.vdata="vdata"+Math.floor(y.performance&&y.performance.now()||Date.now()),this.data={}}var e=t.prototype;return e.set=function(t,e){var i=t[this.vdata]||it();return t[this.vdata]||(t[this.vdata]=i),this.data[i]=e,this},e.get=function(t){var e=t[this.vdata];if(e)return this.data[e];h("We have no data for this element",t)},e.has=function(t){return t[this.vdata]in this.data},e.delete=function(t){var e=t[this.vdata];e&&(delete this.data[e],delete t[this.vdata])},t}());var nt,rt=new(y.WeakMap?WeakMap:tt);function st(t,e){if(rt.has(t)){var i=rt.get(t);0===i.handlers[e].length&&(delete i.handlers[e],t.removeEventListener?t.removeEventListener(e,i.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&rt.delete(t)}}function at(e,i,t,n){t.forEach(function(t){e(i,t,n)})}function ot(t){if(t.fixed_)return t;function e(){return!0}function i(){return!1}if(!t||!t.isPropagationStopped){var n=t||y.event;for(var r in t={},n)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&n.preventDefault||(t[r]=n[r]));if(t.target||(t.target=t.srcElement||d),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){n.preventDefault&&n.preventDefault(),t.returnValue=!1,n.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),t.cancelBubble=!0,n.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=i,t.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=i,null!==t.clientX&&void 0!==t.clientX){var s=d.documentElement,a=d.body;t.pageX=t.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),t.pageY=t.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}t.which=t.charCode||t.keyCode,null!==t.button&&void 0!==t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t.fixed_=!0,t}var lt=function(){if("boolean"!=typeof nt){nt=!1;try{var t=Object.defineProperty({},"passive",{get:function(){nt=!0}});y.addEventListener("test",null,t),y.removeEventListener("test",null,t)}catch(t){}}return nt},ct=["touchstart","touchmove"];function ut(a,t,e){if(Array.isArray(t))return at(ut,a,t,e);rt.has(a)||rt.set(a,{});var o=rt.get(a);if(o.handlers||(o.handlers={}),o.handlers[t]||(o.handlers[t]=[]),e.guid||(e.guid=it()),o.handlers[t].push(e),o.dispatcher||(o.disabled=!1,o.dispatcher=function(t,e){if(!o.disabled){t=ot(t);var i=o.handlers[t.type];if(i)for(var n=i.slice(0),r=0,s=n.length;r<s&&!t.isImmediatePropagationStopped();r++)try{n[r].call(a,t,e)}catch(t){h.error(t)}}}),1===o.handlers[t].length)if(a.addEventListener){var i=!1;lt()&&-1<ct.indexOf(t)&&(i={passive:!0}),a.addEventListener(t,o.dispatcher,i)}else a.attachEvent&&a.attachEvent("on"+t,o.dispatcher)}function dt(t,e,i){if(rt.has(t)){var n=rt.get(t);if(n.handlers){if(Array.isArray(e))return at(dt,t,e,i);var r=function(t,e){n.handlers[e]=[],st(t,e)};if(void 0!==e){var s=n.handlers[e];if(s)if(i){if(i.guid)for(var a=0;a<s.length;a++)s[a].guid===i.guid&&s.splice(a--,1);st(t,e)}else r(t,e)}else for(var o in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},o)&&r(t,o)}}}function ht(t,e,i){var n=rt.has(t)?rt.get(t):{},r=t.parentNode||t.ownerDocument;if("string"==typeof e?e={type:e,target:t}:e.target||(e.target=t),e=ot(e),n.dispatcher&&n.dispatcher.call(t,e,i),r&&!e.isPropagationStopped()&&!0===e.bubbles)ht.call(null,r,e,i);else if(!r&&!e.defaultPrevented&&e.target&&e.target[e.type]){rt.has(e.target)||rt.set(e.target,{});var s=rt.get(e.target);e.target[e.type]&&(s.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function pt(t,e,i){if(Array.isArray(e))return at(pt,t,e,i);function n(){dt(t,e,n),i.apply(this,arguments)}n.guid=i.guid=i.guid||it(),ut(t,e,n)}function ft(t,e,i){function n(){dt(t,e,n),i.apply(this,arguments)}n.guid=i.guid=i.guid||it(),ut(t,e,n)}function mt(t,e,i){e.guid||(e.guid=it());var n=e.bind(t);return n.guid=i?i+"_"+e.guid:e.guid,n}function gt(e,i){var n=y.performance.now();return function(){var t=y.performance.now();i<=t-n&&(e.apply(void 0,arguments),n=t)}}function vt(n,r,s,a){var o;function t(){var t=this,e=arguments,i=function(){i=o=null,s||n.apply(t,e)};!o&&s&&n.apply(t,e),a.clearTimeout(o),o=a.setTimeout(i,r)}return void 0===a&&(a=y),t.cancel=function(){a.clearTimeout(o),o=null},t}function yt(){}var bt,_t=Object.freeze({fixEvent:ot,on:ut,off:dt,trigger:ht,one:pt,any:ft});yt.prototype.allowedEvents_={},yt.prototype.addEventListener=yt.prototype.on=function(t,e){var i=this.addEventListener;this.addEventListener=function(){},ut(this,t,e),this.addEventListener=i},yt.prototype.removeEventListener=yt.prototype.off=function(t,e){dt(this,t,e)},yt.prototype.one=function(t,e){var i=this.addEventListener;this.addEventListener=function(){},pt(this,t,e),this.addEventListener=i},yt.prototype.any=function(t,e){var i=this.addEventListener;this.addEventListener=function(){},ft(this,t,e),this.addEventListener=i},yt.prototype.dispatchEvent=yt.prototype.trigger=function(t){var e=t.type||t;"string"==typeof t&&(t={type:e}),t=ot(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),ht(this,t)},yt.prototype.queueTrigger=function(t){var e=this;bt=bt||new Map;var i=t.type||t,n=bt.get(this);n||(n=new Map,bt.set(this,n));var r=n.get(i);n.delete(i),y.clearTimeout(r);var s=y.setTimeout(function(){0===n.size&&(n=null,bt.delete(e)),e.trigger(t)},0);n.set(i,s)};function Tt(t){return"string"==typeof t&&/\S/.test(t)||Array.isArray(t)&&!!t.length}function wt(t){if(!t.nodeName&&!Et(t))throw new Error("Invalid target; must be a DOM node or evented object.")}function St(t){if(!Tt(t))throw new Error("Invalid event type; must be a non-empty string or array.")}function Ct(t){if("function"!=typeof t)throw new Error("Invalid listener; must be a function.")}function kt(t,e){var i,n,r,s=e.length<3||e[0]===t||e[0]===t.eventBusEl_;return r=s?(i=t.eventBusEl_,3<=e.length&&e.shift(),n=e[0],e[1]):(i=e[0],n=e[1],e[2]),wt(i),St(n),Ct(r),{isTargetingSelf:s,target:i,type:n,listener:r=mt(t,r)}}function xt(t,e,i,n){wt(t),t.nodeName?_t[e](t,i,n):t[e](i,n)}var Et=function(e){return e instanceof yt||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},At={on:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=kt(this,i),s=r.isTargetingSelf,a=r.target,o=r.type,l=r.listener;if(xt(a,"on",o,l),!s){var c=function(){return t.off(a,o,l)};c.guid=l.guid;var u=function(){return t.off("dispose",c)};u.guid=l.guid,xt(this,"on","dispose",c),xt(a,"on","dispose",u)}},one:function(){for(var r=this,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=kt(this,e),s=n.isTargetingSelf,a=n.target,o=n.type,l=n.listener;if(s)xt(a,"one",o,l);else{var c=function t(){r.off(a,o,t);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];l.apply(null,i)};c.guid=l.guid,xt(a,"one",o,c)}},any:function(){for(var r=this,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=kt(this,e),s=n.isTargetingSelf,a=n.target,o=n.type,l=n.listener;if(s)xt(a,"any",o,l);else{var c=function t(){r.off(a,o,t);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];l.apply(null,i)};c.guid=l.guid,xt(a,"any",o,c)}},off:function(t,e,i){if(!t||Tt(t))dt(this.eventBusEl_,t,e);else{var n=t,r=e;wt(n),St(r),Ct(i),i=mt(this,i),this.off("dispose",i),n.nodeName?(dt(n,r,i),dt(n,"dispose",i)):Et(n)&&(n.off(r,i),n.off("dispose",i))}},trigger:function(t,e){return ht(this.eventBusEl_,t,e)}};function Pt(t,e){void 0===e&&(e={});var i=e.eventBusKey;if(i){if(!t[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');t.eventBusEl_=t[i]}else t.eventBusEl_=T("span",{className:"vjs-event-bus"});return f(t,At),t.eventedCallbacks&&t.eventedCallbacks.forEach(function(t){t()}),t.on("dispose",function(){t.off(),y.setTimeout(function(){t.eventBusEl_=null},0)}),t}var It={state:{},setState:function(t){var i,n=this;return"function"==typeof t&&(t=t()),a(t,function(t,e){n.state[e]!==t&&((i=i||{})[e]={from:n.state[e],to:t}),n.state[e]=t}),i&&Et(this)&&this.trigger({changes:i,type:"statechanged"}),i}};function Ot(t,e){return f(t,It),t.state=f({},t.state,e),"function"==typeof t.handleStateChanged&&Et(t)&&t.on("statechanged",t.handleStateChanged),t}function Lt(t){return"string"!=typeof t?t:t.replace(/./,function(t){return t.toLowerCase()})}function Dt(t){return"string"!=typeof t?t:t.replace(/./,function(t){return t.toUpperCase()})}function Rt(){for(var i={},t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.forEach(function(t){t&&a(t,function(t,e){l(t)?(l(i[e])||(i[e]={}),i[e]=Rt(i[e],t)):i[e]=t})}),i}var Mt=function(){function c(t,e,i){if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Rt({},this.options_),e=this.options_=Rt(this.options_,e),this.id_=e.id||e.el&&e.el.id,!this.id_){var n=t&&t.id&&t.id()||"no_player";this.id_=n+"_component_"+it()}var r;this.name_=e.name||null,e.el?this.el_=e.el:!1!==e.createEl&&(this.el_=this.createEl()),!1!==e.evented&&Pt(this,{eventBusKey:this.el_?"el_":null}),Ot(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},y.Set||(r=function(){function t(){this.set_={}}var e=t.prototype;return e.has=function(t){return t in this.set_},e.delete=function(t){var e=this.has(t);return delete this.set_[t],e},e.add=function(t){return this.set_[t]=1,this},e.forEach=function(t,e){for(var i in this.set_)t.call(e,i,i,this)},t}()),this.setTimeoutIds_=new(y.Set?Set:r),this.setIntervalIds_=new(y.Set?Set:r),this.rafIds_=new(y.Set?Set:r),(this.clearingTimersOnDispose_=!1)!==e.initChildren&&this.initChildren(),this.ready(i),!1!==e.reportTouchActivity&&this.enableTouchActivity()}var t=c.prototype;return t.dispose=function(){if(!this.isDisposed_){if(this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;0<=t;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),rt.has(this.el_)&&rt.delete(this.el_),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(t){return t&&(this.options_=Rt(this.options_,t)),this.options_},t.el=function(){return this.el_},t.createEl=function(t,e,i){return T(t,e,i)},t.localize=function(t,r,e){void 0===e&&(e=t);var i=this.player_.language&&this.player_.language(),n=this.player_.languages&&this.player_.languages(),s=n&&n[i],a=i&&i.split("-")[0],o=n&&n[a],l=e;return s&&s[t]?l=s[t]:o&&o[t]&&(l=o[t]),r&&(l=l.replace(/\{(\d+)\}/g,function(t,e){var i=r[e-1],n=i;return void 0===i&&(n=t),n})),l},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(t){return this.childIndex_[t]},t.getChild=function(t){if(t)return this.childNameIndex_[t]},t.addChild=function(t,e,i){var n,r;if(void 0===e&&(e={}),void 0===i&&(i=this.children_.length),"string"==typeof t){r=Dt(t);var s=e.componentClass||r;e.name=r;var a=c.getComponent(s);if(!a)throw new Error("Component "+s+" does not exist");if("function"!=typeof a)return null;n=new a(this.player_||this,e)}else n=t;if(n.parentComponent_&&n.parentComponent_.removeChild(n),this.children_.splice(i,0,n),n.parentComponent_=this,"function"==typeof n.id&&(this.childIndex_[n.id()]=n),(r=r||n.name&&Dt(n.name()))&&(this.childNameIndex_[r]=n,this.childNameIndex_[Lt(r)]=n),"function"==typeof n.el&&n.el()){var o=null;this.children_[i+1]&&this.children_[i+1].el_&&(o=this.children_[i+1].el_),this.contentEl().insertBefore(n.el(),o)}return n},t.removeChild=function(t){if("string"==typeof t&&(t=this.getChild(t)),t&&this.children_){for(var e=!1,i=this.children_.length-1;0<=i;i--)if(this.children_[i]===t){e=!0,this.children_.splice(i,1);break}if(e){t.parentComponent_=null,this.childIndex_[t.id()]=null,this.childNameIndex_[Dt(t.name())]=null,this.childNameIndex_[Lt(t.name())]=null;var n=t.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},t.initChildren=function(){var r=this,n=this.options_.children;if(n){var t,s=this.options_,i=c.getComponent("Tech");(t=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter(function(e){return!t.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(t){var e,i;return i="string"==typeof t?n[e=t]||r.options_[e]||{}:(e=t.name,t),{name:e,opts:i}}).filter(function(t){var e=c.getComponent(t.opts.componentClass||Dt(t.name));return e&&!i.isTech(e)}).forEach(function(t){var e=t.name,i=t.opts;if(void 0!==s[e]&&(i=s[e]),!1!==i){!0===i&&(i={}),i.playerOptions=r.options_.playerOptions;var n=r.addChild(e,i);n&&(r[e]=n)}})}},t.buildCSSClass=function(){return""},t.ready=function(t,e){if(void 0===e&&(e=!1),t)return this.isReady_?void(e?t.call(this):this.setTimeout(t,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var t=this.readyQueue_;this.readyQueue_=[],t&&0<t.length&&t.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},t.$=function(t,e){return W(t,e||this.contentEl())},t.$$=function(t,e){return V(t,e||this.contentEl())},t.hasClass=function(t){return C(this.el_,t)},t.addClass=function(t){k(this.el_,t)},t.removeClass=function(t){x(this.el_,t)},t.toggleClass=function(t,e){E(this.el_,t,e)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(t){return I(this.el_,t)},t.setAttribute=function(t,e){O(this.el_,t,e)},t.removeAttribute=function(t){L(this.el_,t)},t.width=function(t,e){return this.dimension("width",t,e)},t.height=function(t,e){return this.dimension("height",t,e)},t.dimensions=function(t,e){this.width(t,!0),this.height(e)},t.dimension=function(t,e,i){if(void 0!==e)return null!==e&&e==e||(e=0),-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[t]=e:this.el_.style[t]="auto"===e?"":e+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;var n=this.el_.style[t],r=n.indexOf("px");return-1!==r?parseInt(n.slice(0,r),10):parseInt(this.el_["offset"+Dt(t)],10)},t.currentDimension=function(t){var e=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");if(e=n(this.el_,t),0===(e=parseFloat(e))||isNaN(e)){var i="offset"+Dt(t);e=this.el_[i]}return e},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(t){this.player_&&(t.stopPropagation(),this.player_.handleKeyDown(t))},t.handleKeyPress=function(t){this.handleKeyDown(t)},t.emitTapEvents=function(){var n,e=0,r=null;this.on("touchstart",function(t){1===t.touches.length&&(r={pageX:t.touches[0].pageX,pageY:t.touches[0].pageY},e=y.performance.now(),n=!0)}),this.on("touchmove",function(t){if(1<t.touches.length)n=!1;else if(r){var e=t.touches[0].pageX-r.pageX,i=t.touches[0].pageY-r.pageY;10<Math.sqrt(e*e+i*i)&&(n=!1)}});function t(){n=!1}this.on("touchleave",t),this.on("touchcancel",t),this.on("touchend",function(t){!(r=null)===n&&y.performance.now()-e<200&&(t.preventDefault(),this.trigger("tap"))})},t.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t,e=mt(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});var i=function(){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",i),this.on("touchcancel",i)}},t.setTimeout=function(t,e){var i,n=this;return t=mt(this,t),this.clearTimersOnDispose_(),i=y.setTimeout(function(){n.setTimeoutIds_.has(i)&&n.setTimeoutIds_.delete(i),t()},e),this.setTimeoutIds_.add(i),i},t.clearTimeout=function(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),y.clearTimeout(t)),t},t.setInterval=function(t,e){t=mt(this,t),this.clearTimersOnDispose_();var i=y.setInterval(t,e);return this.setIntervalIds_.add(i),i},t.clearInterval=function(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),y.clearInterval(t)),t},t.requestAnimationFrame=function(t){var e,i=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),t=mt(this,t),e=y.requestAnimationFrame(function(){i.rafIds_.has(e)&&i.rafIds_.delete(e),t()}),this.rafIds_.add(e),e):this.setTimeout(t,1e3/60)},t.cancelAnimationFrame=function(t){return this.supportsRaf_?(this.rafIds_.has(t)&&(this.rafIds_.delete(t),y.cancelAnimationFrame(t)),t):this.clearTimeout(t)},t.clearTimersOnDispose_=function(){var n=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var e=t[0],i=t[1];n[e].forEach(n[i],n)}),n.clearingTimersOnDispose_=!1}))},c.registerComponent=function(t,e){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var i,n=c.getComponent("Tech"),r=n&&n.isTech(e),s=c===e||c.prototype.isPrototypeOf(e.prototype);if(r||!s)throw i=r?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+t+'"; '+i+".");t=Dt(t),c.components_||(c.components_={});var a=c.getComponent("Player");if("Player"===t&&a&&a.players){var o=a.players,l=Object.keys(o);if(o&&0<l.length&&l.map(function(t){return o[t]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return c.components_[t]=e,c.components_[Lt(t)]=e},c.getComponent=function(t){if(t&&c.components_)return c.components_[t]},c}();Mt.prototype.supportsRaf_="function"==typeof y.requestAnimationFrame&&"function"==typeof y.cancelAnimationFrame,Mt.registerComponent("Component",Mt);var Bt=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var Nt,Ut,jt,Ft,$t=function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e},Ht=y.navigator&&y.navigator.userAgent||"",zt=/AppleWebKit\/([\d.]+)/i.exec(Ht),qt=zt?parseFloat(zt.pop()):null,Wt=/iPod/i.test(Ht),Vt=(Nt=Ht.match(/OS (\d+)_/i))&&Nt[1]?Nt[1]:null,Gt=/Android/i.test(Ht),Xt=function(){var t=Ht.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),i=t[2]&&parseFloat(t[2]);return e&&i?parseFloat(t[1]+"."+t[2]):e||null}(),Yt=Gt&&Xt<5&&qt<537,Kt=/Firefox/i.test(Ht),Qt=/Edge/i.test(Ht),Zt=!Qt&&(/Chrome/i.test(Ht)||/CriOS/i.test(Ht)),Jt=(Ut=Ht.match(/(Chrome|CriOS)\/(\d+)/))&&Ut[2]?parseFloat(Ut[2]):null,te=(jt=/MSIE\s(\d+)\.\d/.exec(Ht),!(Ft=jt&&parseFloat(jt[1]))&&/Trident\/7.0/i.test(Ht)&&/rv:11.0/.test(Ht)&&(Ft=11),Ft),ee=/Safari/i.test(Ht)&&!Zt&&!Gt&&!Qt,ie=/Windows/i.test(Ht),ne=g()&&("ontouchstart"in y||y.navigator.maxTouchPoints||y.DocumentTouch&&y.document instanceof y.DocumentTouch),re=/iPad/i.test(Ht)||ee&&ne&&!/iPhone/i.test(Ht),se=/iPhone/i.test(Ht)&&!re,ae=se||re||Wt,oe=(ee||ae)&&!Zt,le=Object.freeze({IS_IPOD:Wt,IOS_VERSION:Vt,IS_ANDROID:Gt,ANDROID_VERSION:Xt,IS_NATIVE_ANDROID:Yt,IS_FIREFOX:Kt,IS_EDGE:Qt,IS_CHROME:Zt,CHROME_VERSION:Jt,IE_VERSION:te,IS_SAFARI:ee,IS_WINDOWS:ie,TOUCH_ENABLED:ne,IS_IPAD:re,IS_IPHONE:se,IS_IOS:ae,IS_ANY_SAFARI:oe});function ce(t,e,i,n){return function(t,e,i){if("number"!=typeof e||e<0||i<e)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+i+").")}(t,n,i.length-1),i[n][e]}function ue(t){return void 0===t||0===t.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:ce.bind(null,"start",0,t),end:ce.bind(null,"end",1,t)}}function de(t,e){return Array.isArray(t)?ue(t):void 0===t||void 0===e?ue():ue([[t,e]])}function he(t,e){var i,n,r=0;if(!e)return 0;t&&t.length||(t=de(0,0));for(var s=0;s<t.length;s++)i=t.start(s),e<(n=t.end(s))&&(n=e),r+=n-i;return r/e}for(var pe,fe={prefixed:!0},me=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],ge=me[0],ve=0;ve<me.length;ve++)if(me[ve][1]in d){pe=me[ve];break}if(pe){for(var ye=0;ye<pe.length;ye++)fe[ge[ye]]=pe[ye];fe.prefixed=pe[0]!==ge[0]}function be(t){if(t instanceof be)return t;"number"==typeof t?this.code=t:"string"==typeof t?this.message=t:o(t)&&("number"==typeof t.code&&(this.code=t.code),f(this,t)),this.message||(this.message=be.defaultMessages[this.code]||"")}be.prototype.code=0,be.prototype.message="",be.prototype.status=null,be.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],be.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var _e=0;_e<be.errorTypes.length;_e++)be[be.errorTypes[_e]]=_e,be.prototype[be.errorTypes[_e]]=_e;var Te=function(t,e){var i,n=null;try{i=JSON.parse(t,e)}catch(t){n=t}return[n,i]};function we(t){return null!=t&&"function"==typeof t.then}function Se(t){we(t)&&t.then(null,function(t){})}function Ce(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,e,i){return n[e]&&(t[e]=n[e]),t},{cues:n.cues&&Array.prototype.map.call(n.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})}var ke=function(t){var e=t.$$("track"),i=Array.prototype.map.call(e,function(t){return t.track});return Array.prototype.map.call(e,function(t){var e=Ce(t.track);return t.src&&(e.src=t.src),e}).concat(Array.prototype.filter.call(t.textTracks(),function(t){return-1===i.indexOf(t)}).map(Ce))},xe=function(t,i){return t.forEach(function(t){var e=i.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(function(t){return e.addCue(t)})}),i.textTracks()},Ee=e(function(t,e){function i(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return a[t];var i,n=String(t);return(i=r[n.toLowerCase()])||(i=s[n.toLowerCase()])?i:1===n.length?n.charCodeAt(0):void 0}i.isEventKey=function(t,e){if(t&&"object"==typeof t){var i=t.which||t.keyCode||t.charCode;if(null==i)return!1;if("string"==typeof e){var n;if(n=r[e.toLowerCase()])return n===i;if(n=s[e.toLowerCase()])return n===i}else if("number"==typeof e)return e===i;return!1}};var r=(e=t.exports=i).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},s=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(n=97;n<123;n++)r[String.fromCharCode(n)]=n-32;for(var n=48;n<58;n++)r[n-48]=n;for(n=1;n<13;n++)r["f"+n]=n+111;for(n=0;n<10;n++)r["numpad "+n]=n+96;var a=e.names=e.title={};for(n in r)a[r[n]]=n;for(var o in s)r[o]=s[o]}),Ae=(Ee.code,Ee.codes,Ee.aliases,Ee.names,Ee.title,"vjs-modal-dialog"),Pe=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=T("div",{className:Ae+"-content"},{role:"document"}),i.descEl_=T("p",{className:Ae+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),w(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}$t(t,n);var e=t.prototype;return e.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},e.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,n.prototype.dispose.call(this)},e.buildCSSClass=function(){return Ae+" vjs-hidden "+n.prototype.buildCSSClass.call(this)},e.label=function(){return this.localize(this.options_.label||"Modal Window")},e.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},e.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},e.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},e.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},e.closeable=function(t){if("boolean"==typeof t){var e=this.closeable_=!!t,i=this.getChild("closeButton");if(e&&!i){var n=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(i,"close",this.close)}!e&&i&&(this.off(i,"close",this.close),this.removeChild(i),i.dispose())}return this.closeable_},e.fill=function(){this.fillWith(this.content())},e.fillWith=function(t){var e=this.contentEl(),i=e.parentNode,n=e.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(e),this.empty(),H(e,t),this.trigger("modalfill"),n?i.insertBefore(e,n):i.appendChild(e);var r=this.getChild("closeButton");r&&i.appendChild(r.el_)},e.empty=function(){this.trigger("beforemodalempty"),j(this.contentEl()),this.trigger("modalempty")},e.content=function(t){return void 0!==t&&(this.content_=t),this.content_},e.conditionalFocus_=function(){var t=d.activeElement,e=this.player_.el_;this.previouslyActiveEl_=null,!e.contains(t)&&e!==t||(this.previouslyActiveEl_=t,this.focus())},e.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},e.handleKeyDown=function(t){if(t.stopPropagation(),Ee.isEventKey(t,"Escape")&&this.closeable())return t.preventDefault(),void this.close();if(Ee.isEventKey(t,"Tab")){for(var e,i=this.focusableEls_(),n=this.el_.querySelector(":focus"),r=0;r<i.length;r++)if(n===i[r]){e=r;break}d.activeElement===this.el_&&(e=0),t.shiftKey&&0===e?(i[i.length-1].focus(),t.preventDefault()):t.shiftKey||e!==i.length-1||(i[0].focus(),t.preventDefault())}},e.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(t){return(t instanceof y.HTMLAnchorElement||t instanceof y.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof y.HTMLInputElement||t instanceof y.HTMLSelectElement||t instanceof y.HTMLTextAreaElement||t instanceof y.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof y.HTMLIFrameElement||t instanceof y.HTMLObjectElement||t instanceof y.HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")})},t}(Mt);Pe.prototype.options_={pauseOnOpen:!0,temporary:!0},Mt.registerComponent("ModalDialog",Pe);var Ie=function(n){function t(t){var e;void 0===t&&(t=[]),(e=n.call(this)||this).tracks_=[],Object.defineProperty(Bt(e),"length",{get:function(){return this.tracks_.length}});for(var i=0;i<t.length;i++)e.addTrack(t[i]);return e}$t(t,n);var e=t.prototype;return e.addTrack=function(t){var e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.tracks_[e]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this}))},e.removeTrack=function(t){for(var e,i=0,n=this.length;i<n;i++)if(this[i]===t){(e=this[i]).off&&e.off(),this.tracks_.splice(i,1);break}e&&this.trigger({track:e,type:"removetrack",target:this})},e.getTrackById=function(t){for(var e=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===t){e=r;break}}return e},t}(yt);for(var Oe in Ie.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Ie.prototype.allowedEvents_)Ie.prototype["on"+Oe]=null;function Le(t,e){for(var i=0;i<t.length;i++)Object.keys(t[i]).length&&e.id!==t[i].id&&(t[i].enabled=!1)}function De(t,e){for(var i=0;i<t.length;i++)Object.keys(t[i]).length&&e.id!==t[i].id&&(t[i].selected=!1)}function Re(t){var e=["protocol","hostname","port","pathname","search","hash","host"],i=d.createElement("a");i.href=t;var n,r=""===i.host&&"file:"!==i.protocol;r&&((n=d.createElement("div")).innerHTML='<a href="'+t+'"></a>',i=n.firstChild,n.setAttribute("style","display:none; position:absolute;"),d.body.appendChild(n));for(var s={},a=0;a<e.length;a++)s[e[a]]=i[e[a]];return"http:"===s.protocol&&(s.host=s.host.replace(/:80$/,"")),"https:"===s.protocol&&(s.host=s.host.replace(/:443$/,"")),s.protocol||(s.protocol=y.location.protocol),r&&d.body.removeChild(n),s}function Me(t){if(!t.match(/^https?:\/\//)){var e=d.createElement("div");e.innerHTML='<a href="'+t+'">x</a>',t=e.firstChild.href}return t}function Be(t){if("string"==typeof t){var e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(e)return e.pop().toLowerCase()}return""}function Ne(t,e){void 0===e&&(e=y.location);var i=Re(t);return(":"===i.protocol?e.protocol:i.protocol)+i.host!==e.protocol+e.host}var Ue=function(n){function t(t){var e;void 0===t&&(t=[]);for(var i=t.length-1;0<=i;i--)if(t[i].enabled){Le(t,t[i]);break}return(e=n.call(this,t)||this).changing_=!1,e}$t(t,n);var e=t.prototype;return e.addTrack=function(t){var e=this;t.enabled&&Le(this,t),n.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){e.changing_||(e.changing_=!0,Le(e,t),e.changing_=!1,e.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},e.removeTrack=function(t){n.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(Ie),je=function(n){function t(t){var e;void 0===t&&(t=[]);for(var i=t.length-1;0<=i;i--)if(t[i].selected){De(t,t[i]);break}return(e=n.call(this,t)||this).changing_=!1,Object.defineProperty(Bt(e),"selectedIndex",{get:function(){for(var t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set:function(){}}),e}$t(t,n);var e=t.prototype;return e.addTrack=function(t){var e=this;t.selected&&De(this,t),n.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){e.changing_||(e.changing_=!0,De(e,t),e.changing_=!1,e.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},e.removeTrack=function(t){n.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(Ie),Fe=function(i){function t(){return i.apply(this,arguments)||this}$t(t,i);var e=t.prototype;return e.addTrack=function(t){var e=this;i.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return e.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return e.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},e.removeTrack=function(t){i.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(Ie),$e=function(){function t(t){void 0===t&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var e=0,i=t.length;e<i;e++)this.addTrackElement_(t[e])}var e=t.prototype;return e.addTrackElement_=function(t){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),-1===this.trackElements_.indexOf(t)&&this.trackElements_.push(t)},e.getTrackElementByTrack_=function(t){for(var e,i=0,n=this.trackElements_.length;i<n;i++)if(t===this.trackElements_[i].track){e=this.trackElements_[i];break}return e},e.removeTrackElement_=function(t){for(var e=0,i=this.trackElements_.length;e<i;e++)if(t===this.trackElements_[e]){this.trackElements_[e].track&&"function"==typeof this.trackElements_[e].track.off&&this.trackElements_[e].track.off(),"function"==typeof this.trackElements_[e].off&&this.trackElements_[e].off(),this.trackElements_.splice(e,1);break}},t}(),He=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(t){var e=this.length||0,i=0,n=t.length;this.cues_=t,this.length_=t.length;function r(t){""+t in this||Object.defineProperty(this,""+t,{get:function(){return this.cues_[t]}})}if(e<n)for(i=e;i<n;i++)r.call(this,i)},t.getCueById=function(t){for(var e=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===t){e=r;break}}return e},e}(),ze={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},qe={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},We={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Ve={disabled:"disabled",hidden:"hidden",showing:"showing"},Ge=function(s){function t(t){var e;void 0===t&&(t={}),e=s.call(this)||this;function i(t){Object.defineProperty(Bt(e),t,{get:function(){return n[t]},set:function(){}})}var n={id:t.id||"vjs_track_"+it(),kind:t.kind||"",label:t.label||"",language:t.language||""};for(var r in n)i(r);return e}return $t(t,s),t}(yt),Xe=Object.freeze({parseUrl:Re,getAbsoluteURL:Me,getFileExtension:Be,isCrossOrigin:Ne}),Ye=function(t){var e=Ke.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)},Ke=Object.prototype.toString;var Qe=function(t){var r={};return t&&t.trim().split("\n").forEach(function(t){var e=t.indexOf(":"),i=t.slice(0,e).trim().toLowerCase(),n=t.slice(e+1).trim();void 0===r[i]?r[i]=n:Array.isArray(r[i])?r[i].push(n):r[i]=[r[i],n]}),r},Ze=ei,Je=ei;function ti(t,e,i){var n=t;return Ye(e)?(i=e,"string"==typeof t&&(n={uri:t})):n=r({},e,{uri:t}),n.callback=i,n}function ei(t,e,i){return ii(e=ti(t,e,i))}function ii(n){if(void 0===n.callback)throw new Error("callback argument missing");var r=!1,s=function(t,e,i){r||(r=!0,n.callback(t,e,i))};function a(){var t=void 0;if(t=c.response?c.response:c.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!e)return t.responseXML}catch(t){}return null}(c),m)try{t=JSON.parse(t)}catch(t){}return t}function e(t){return clearTimeout(l),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,s(t,g)}function t(){if(!o){var t;clearTimeout(l),t=n.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var e=g,i=null;return 0!==t?(e={body:a(),statusCode:t,method:d,headers:{},url:u,rawRequest:c},c.getAllResponseHeaders&&(e.headers=Qe(c.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),s(i,e,e.body)}}var i,o,l,c=n.xhr||null,u=(c=c||(n.cors||n.useXDR?new ei.XDomainRequest:new ei.XMLHttpRequest)).url=n.uri||n.url,d=c.method=n.method||"GET",h=n.body||n.data,p=c.headers=n.headers||{},f=!!n.sync,m=!1,g={body:void 0,headers:{},statusCode:0,method:d,url:u,rawRequest:c};if("json"in n&&!1!==n.json&&(m=!0,p.accept||p.Accept||(p.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),h=JSON.stringify(!0===n.json?h:n.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(t,0)},c.onload=t,c.onerror=e,c.onprogress=function(){},c.onabort=function(){o=!0},c.ontimeout=e,c.open(d,u,!f,n.username,n.password),f||(c.withCredentials=!!n.withCredentials),!f&&0<n.timeout&&(l=setTimeout(function(){if(!o){o=!0,c.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",e(t)}},n.timeout)),c.setRequestHeader)for(i in p)p.hasOwnProperty(i)&&c.setRequestHeader(i,p[i]);else if(n.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return;return 1}(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(c.responseType=n.responseType),"beforeSend"in n&&"function"==typeof n.beforeSend&&n.beforeSend(c),c.send(h||null),c}ei.XMLHttpRequest=y.XMLHttpRequest||function(){},ei.XDomainRequest="withCredentials"in new ei.XMLHttpRequest?ei.XMLHttpRequest:y.XDomainRequest,function(t,e){for(var i=0;i<t.length;i++)e(t[i])}(["get","put","post","patch","head","delete"],function(n){ei["delete"===n?"del":n]=function(t,e,i){return(e=ti(t,e,i)).method=n.toUpperCase(),ii(e)}}),Ze.default=Je;function ni(t,e){var i=new y.WebVTT.Parser(y,y.vttjs,y.WebVTT.StringDecoder()),n=[];i.oncue=function(t){e.addCue(t)},i.onparsingerror=function(t){n.push(t)},i.onflush=function(){e.trigger({type:"loadeddata",target:e})},i.parse(t),0<n.length&&(y.console&&y.console.groupCollapsed&&y.console.groupCollapsed("Text Track parsing errors for "+e.src),n.forEach(function(t){return h.error(t)}),y.console&&y.console.groupEnd&&y.console.groupEnd()),i.flush()}function ri(t,n){var e={uri:t},i=Ne(t);i&&(e.cors=i),Ze(e,mt(this,function(t,e,i){if(t)return h.error(t,e);n.loaded_=!0,"function"!=typeof y.WebVTT?n.tech_&&n.tech_.any(["vttjsloaded","vttjserror"],function(t){if("vttjserror"!==t.type)return ni(i,n);h.error("vttjs failed to load, stopping trying to process "+n.src)}):ni(i,n)}))}var si=function(c){function t(t){var e;if(void 0===t&&(t={}),!t.tech)throw new Error("A tech was not provided.");var i=Rt(t,{kind:We[t.kind]||"subtitles",language:t.language||t.srclang||""}),n=Ve[i.mode]||"disabled",r=i.default;"metadata"!==i.kind&&"chapters"!==i.kind||(n="hidden"),(e=c.call(this,i)||this).tech_=i.tech,e.cues_=[],e.activeCues_=[],e.preload_=!1!==e.tech_.preloadTextTracks;var s=new He(e.cues_),a=new He(e.activeCues_),o=!1,l=mt(Bt(e),function(){this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1)});return"disabled"!==n&&e.tech_.ready(function(){e.tech_.on("timeupdate",l)},!0),Object.defineProperties(Bt(e),{default:{get:function(){return r},set:function(){}},mode:{get:function(){return n},set:function(t){var e=this;Ve[t]&&(n=t,this.preload_||"disabled"===n||0!==this.cues.length||ri(this.src,this),"disabled"!==n?this.tech_.ready(function(){e.tech_.on("timeupdate",l)},!0):this.tech_.off("timeupdate",l),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?s:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return a;for(var t=this.tech_.currentTime(),e=[],i=0,n=this.cues.length;i<n;i++){var r=this.cues[i];(r.startTime<=t&&r.endTime>=t||r.startTime===r.endTime&&r.startTime<=t&&r.startTime+.5>=t)&&e.push(r)}if(o=!1,e.length!==this.activeCues_.length)o=!0;else for(var s=0;s<e.length;s++)-1===this.activeCues_.indexOf(e[s])&&(o=!0);return this.activeCues_=e,a.setCues_(this.activeCues_),a},set:function(){}}}),i.src?(e.src=i.src,e.preload_||(e.loaded_=!0),(e.preload_||r||"subtitles"!==i.kind&&"captions"!==i.kind)&&ri(e.src,Bt(e))):e.loaded_=!0,e}$t(t,c);var e=t.prototype;return e.addCue=function(t){var e=t;if(y.vttjs&&!(t instanceof y.vttjs.VTTCue)){for(var i in e=new y.vttjs.VTTCue(t.startTime,t.endTime,t.text),t)i in e||(e[i]=t[i]);e.id=t.id,e.originalCue_=t}for(var n=this.tech_.textTracks(),r=0;r<n.length;r++)n[r]!==this&&n[r].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},e.removeCue=function(t){for(var e=this.cues_.length;e--;){var i=this.cues_[e];if(i===t||i.originalCue_&&i.originalCue_===t){this.cues_.splice(e,1),this.cues.setCues_(this.cues_);break}}},t}(Ge);si.prototype.allowedEvents_={cuechange:"cuechange"};var ai=function(r){function t(t){var e;void 0===t&&(t={});var i=Rt(t,{kind:qe[t.kind]||""});e=r.call(this,i)||this;var n=!1;return Object.defineProperty(Bt(e),"enabled",{get:function(){return n},set:function(t){"boolean"==typeof t&&t!==n&&(n=t,this.trigger("enabledchange"))}}),i.enabled&&(e.enabled=i.enabled),e.loaded_=!0,e}return $t(t,r),t}(Ge),oi=function(r){function t(t){var e;void 0===t&&(t={});var i=Rt(t,{kind:ze[t.kind]||""});e=r.call(this,i)||this;var n=!1;return Object.defineProperty(Bt(e),"selected",{get:function(){return n},set:function(t){"boolean"==typeof t&&t!==n&&(n=t,this.trigger("selectedchange"))}}),i.selected&&(e.selected=i.selected),e}return $t(t,r),t}(Ge),li=function(r){function t(t){var e,i;void 0===t&&(t={}),e=r.call(this)||this;var n=new si(t);return e.kind=n.kind,e.src=n.src,e.srclang=n.language,e.label=n.label,e.default=n.default,Object.defineProperties(Bt(e),{readyState:{get:function(){return i}},track:{get:function(){return n}}}),i=0,n.addEventListener("loadeddata",function(){i=2,e.trigger({type:"load",target:Bt(e)})}),e}return $t(t,r),t}(yt);li.prototype.allowedEvents_={load:"load"},li.NONE=0,li.LOADING=1,li.LOADED=2,li.ERROR=3;var ci={audio:{ListClass:Ue,TrackClass:ai,capitalName:"Audio"},video:{ListClass:je,TrackClass:oi,capitalName:"Video"},text:{ListClass:Fe,TrackClass:si,capitalName:"Text"}};Object.keys(ci).forEach(function(t){ci[t].getterName=t+"Tracks",ci[t].privateName=t+"Tracks_"});var ui={remoteText:{ListClass:Fe,TrackClass:si,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:$e,TrackClass:li,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},di=r({},ci,ui);ui.names=Object.keys(ui),ci.names=Object.keys(ci),di.names=[].concat(ui.names).concat(ci.names);var hi=Object.create||function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return pi.prototype=t,new pi};function pi(){}function fi(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}function mi(t){function e(t,e,i,n){return 3600*(0|t)+60*(0|e)+(0|i)+(0|n)/1e3}var i=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return i?i[3]?e(i[1],i[2],i[3].replace(":",""),i[4]):59<i[1]?e(i[1],i[2],0,i[4]):e(0,i[1],i[2],i[4]):null}function gi(){this.values=hi(null)}function vi(t,e,i,n){var r=n?t.split(n):[t];for(var s in r)if("string"==typeof r[s]){var a=r[s].split(i);if(2===a.length)e(a[0],a[1])}}function yi(e,t,a){var i=e;function n(){var t=mi(e);if(null===t)throw new fi(fi.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function r(){e=e.replace(/^\s+/,"")}if(r(),t.startTime=n(),r(),"--\x3e"!==e.substr(0,3))throw new fi(fi.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),r(),t.endTime=n(),r(),function(t,e){var s=new gi;vi(t,function(t,e){switch(t){case"region":for(var i=a.length-1;0<=i;i--)if(a[i].id===e){s.set(t,a[i].region);break}break;case"vertical":s.alt(t,e,["rl","lr"]);break;case"line":var n=e.split(","),r=n[0];s.integer(t,r),s.percent(t,r)&&s.set("snapToLines",!1),s.alt(t,r,["auto"]),2===n.length&&s.alt("lineAlign",n[1],["start","center","end"]);break;case"position":n=e.split(","),s.percent(t,n[0]),2===n.length&&s.alt("positionAlign",n[1],["start","center","end"]);break;case"size":s.percent(t,e);break;case"align":s.alt(t,e,["start","center","end","left","right"])}},/:/,/\s/),e.region=s.get("region",null),e.vertical=s.get("vertical","");try{e.line=s.get("line","auto")}catch(t){}e.lineAlign=s.get("lineAlign","start"),e.snapToLines=s.get("snapToLines",!0),e.size=s.get("size",100);try{e.align=s.get("align","center")}catch(t){e.align=s.get("align","middle")}try{e.position=s.get("position","auto")}catch(t){e.position=s.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},e.align)}e.positionAlign=s.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},e.align)}(e,t)}((fi.prototype=hi(Error.prototype)).constructor=fi).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},gi.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,i){return i?this.has(t)?this.values[t]:e[i]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,i){for(var n=0;n<i.length;++n)if(e===i[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(e=parseFloat(e))&&e<=100)&&(this.set(t,e),!0)}};var bi=d.createElement("textarea"),_i={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Ti={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},wi={v:"title",lang:"lang"},Si={rt:"ruby"};function Ci(s,i){function t(){if(!i)return null;var t,e=i.match(/^([^<]*)(<[^>]*>?)?/);return t=e[1]?e[1]:e[2],i=i.substr(t.length),t}function e(t,e){var i=_i[t];if(!i)return null;var n=s.document.createElement(i),r=wi[t];return r&&e&&(n[r]=e.trim()),n}for(var n,r,a,o,l=s.document.createElement("div"),c=l,u=[];null!==(n=t());)if("<"!==n[0])c.appendChild(s.document.createTextNode((r=n,bi.innerHTML=r,r=bi.textContent,bi.textContent="",r)));else{if("/"===n[1]){u.length&&u[u.length-1]===n.substr(2).replace(">","")&&(u.pop(),c=c.parentNode);continue}var d,h=mi(n.substr(1,n.length-2));if(h){d=s.document.createProcessingInstruction("timestamp",h),c.appendChild(d);continue}var p=n.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(d=e(p[1],p[3])))continue;if(a=c,Si[(o=d).localName]&&Si[o.localName]!==a.localName)continue;if(p[2]){var f=p[2].split(".");f.forEach(function(t){var e=/^bg_/.test(t),i=e?t.slice(3):t;if(Ti.hasOwnProperty(i)){var n=e?"background-color":"color",r=Ti[i];d.style[n]=r}}),d.className=f.join(" ")}u.push(p[1]),c.appendChild(d),c=d}return l}var ki=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function xi(t){for(var e=0;e<ki.length;e++){var i=ki[e];if(t>=i[0]&&t<=i[1])return 1}}function Ei(){}function Ai(t,e,i){Ei.call(this),this.cue=e,this.cueDiv=Ci(t,e.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=t.document.createElement("div"),n={direction:function(t){var e=[],i="";if(!t||!t.childNodes)return"ltr";function r(t,e){for(var i=e.childNodes.length-1;0<=i;i--)t.push(e.childNodes[i])}function s(t){if(!t||!t.length)return null;var e=t.pop(),i=e.textContent||e.innerText;if(i){var n=i.match(/^.*(\n|\r)/);return n?n[t.length=0]:i}return"ruby"===e.tagName?s(t):e.childNodes?(r(t,e),s(t)):void 0}for(r(e,t);i=s(e);)for(var n=0;n<i.length;n++)if(xi(i.charCodeAt(n)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===e.align?"center":e.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var r=0;switch(e.positionAlign){case"start":r=e.position;break;case"center":r=e.position-e.size/2;break;case"end":r=e.position-e.size}""===e.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function Pi(t){var e,i,n,r;if(t.div){i=t.div.offsetHeight,n=t.div.offsetWidth,r=t.div.offsetTop;var s=(s=t.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();t=t.div.getBoundingClientRect(),e=s?Math.max(s[0]&&s[0].height||0,t.height/s.length):0}this.left=t.left,this.right=t.right,this.top=t.top||r,this.height=t.height||i,this.bottom=t.bottom||r+(t.height||i),this.width=t.width||n,this.lineHeight=void 0!==e?e:t.lineHeight}function Ii(t,e,o,l){var i=new Pi(e),n=e.cue,r=function(t){if("number"==typeof t.line&&(t.snapToLines||0<=t.line&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,i=e.textTrackList,n=0,r=0;r<i.length&&i[r]!==e;r++)"showing"===i[r].mode&&n++;return-1*++n}(n),s=[];if(n.snapToLines){var a;switch(n.vertical){case"":s=["+y","-y"],a="height";break;case"rl":s=["+x","-x"],a="width";break;case"lr":s=["-x","+x"],a="width"}var c=i.lineHeight,u=c*Math.round(r),d=o[a]+c,h=s[0];Math.abs(u)>d&&(u=u<0?-1:1,u*=Math.ceil(d/c)*c),r<0&&(u+=""===n.vertical?o.height:o.width,s=s.reverse()),i.move(h,u)}else{var p=i.lineHeight/o.height*100;switch(n.lineAlign){case"center":r-=p/2;break;case"end":r-=p}switch(n.vertical){case"":e.applyStyles({top:e.formatStyle(r,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(r,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(r,"%")})}s=["+y","-x","+x","-y"],i=new Pi(e)}var f=function(t,e){for(var i,n=new Pi(t),r=1,s=0;s<e.length;s++){for(;t.overlapsOppositeAxis(o,e[s])||t.within(o)&&t.overlapsAny(l);)t.move(e[s]);if(t.within(o))return t;var a=t.intersectPercentage(o);a<r&&(i=new Pi(t),r=a),t=new Pi(n)}return i||n}(i,s);e.move(f.toCSSCompatValues(o))}function Oi(){}Ei.prototype.applyStyles=function(t,e){for(var i in e=e||this.div,t)t.hasOwnProperty(i)&&(e.style[i]=t[i])},Ei.prototype.formatStyle=function(t,e){return 0===t?0:t+e},(Ai.prototype=hi(Ei.prototype)).constructor=Ai,Pi.prototype.move=function(t,e){switch(e=void 0!==e?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e}},Pi.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},Pi.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},Pi.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},Pi.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},Pi.prototype.intersectPercentage=function(t){return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},Pi.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},Pi.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,i=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,n=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;return{left:(t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t).left,right:t.right,top:t.top||n,height:t.height||e,bottom:t.bottom||n+(t.height||e),width:t.width||i}},Oi.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},Oi.convertCueToDOMTree=function(t,e){return t&&e?Ci(t,e):null};Oi.processCues=function(n,r,t){if(!n||!r||!t)return null;for(;t.firstChild;)t.removeChild(t.firstChild);var s=n.document.createElement("div");if(s.style.position="absolute",s.style.left="0",s.style.right="0",s.style.top="0",s.style.bottom="0",s.style.margin="1.5%",t.appendChild(s),function(t){for(var e=0;e<t.length;e++)if(t[e].hasBeenReset||!t[e].displayState)return 1}(r)){var a=[],o=Pi.getSimpleBoxPosition(s),l={font:Math.round(.05*o.height*100)/100+"px sans-serif"};!function(){for(var t,e,i=0;i<r.length;i++)e=r[i],t=new Ai(n,e,l),s.appendChild(t.div),Ii(0,t,o,a),e.displayState=t.div,a.push(Pi.getSimpleBoxPosition(t))}()}else for(var e=0;e<r.length;e++)s.appendChild(r[e].displayState)},(Oi.Parser=function(t,e,i){i||(i=e,e={}),e=e||{},this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(t){if(!(t instanceof fi))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){var s=this;function e(){for(var t=s.buffer,e=0;e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var i=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,s.buffer=t.substr(e),i}function i(t){t.match(/X-TIMESTAMP-MAP/)?vi(t,function(t,e){switch(t){case"X-TIMESTAMP-MAP":i=e,n=new gi,vi(i,function(t,e){switch(t){case"MPEGT":n.integer(t+"S",e);break;case"LOCA":n.set(t+"L",mi(e))}},/[^\d]:/,/,/),s.ontimestampmap&&s.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}var i,n},/=/):vi(t,function(t,e){switch(t){case"Region":!function(t){var r=new gi;if(vi(t,function(t,e){switch(t){case"id":r.set(t,e);break;case"width":r.percent(t,e);break;case"lines":r.integer(t,e);break;case"regionanchor":case"viewportanchor":var i=e.split(",");if(2!==i.length)break;var n=new gi;if(n.percent("x",i[0]),n.percent("y",i[1]),!n.has("x")||!n.has("y"))break;r.set(t+"X",n.get("x")),r.set(t+"Y",n.get("y"));break;case"scroll":r.alt(t,e,["up"])}},/=/,/\s/),r.has("id")){var e=new(s.vttjs.VTTRegion||s.window.VTTRegion);e.width=r.get("width",100),e.lines=r.get("lines",3),e.regionAnchorX=r.get("regionanchorX",0),e.regionAnchorY=r.get("regionanchorY",100),e.viewportAnchorX=r.get("viewportanchorX",0),e.viewportAnchorY=r.get("viewportanchorY",100),e.scroll=r.get("scroll",""),s.onregion&&s.onregion(e),s.regionList.push({id:r.get("id"),region:e})}}(e)}},/:/)}t&&(s.buffer+=s.decoder.decode(t,{stream:!0}));try{var n;if("INITIAL"===s.state){if(!/\r\n|\n/.test(s.buffer))return this;var r=(n=e()).match(/^WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new fi(fi.Errors.BadSignature);s.state="HEADER"}for(var a=!1;s.buffer;){if(!/\r\n|\n/.test(s.buffer))return this;switch(a?a=!1:n=e(),s.state){case"HEADER":/:/.test(n)?i(n):n||(s.state="ID");continue;case"NOTE":n||(s.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){s.state="NOTE";break}if(!n)continue;s.cue=new(s.vttjs.VTTCue||s.window.VTTCue)(0,0,"");try{s.cue.align="center"}catch(t){s.cue.align="middle"}if(s.state="CUE",-1===n.indexOf("--\x3e")){s.cue.id=n;continue}case"CUE":try{yi(n,s.cue,s.regionList)}catch(t){s.reportOrThrowError(t),s.cue=null,s.state="BADCUE";continue}s.state="CUETEXT";continue;case"CUETEXT":var o=-1!==n.indexOf("--\x3e");if(!n||o&&(a=!0)){s.oncue&&s.oncue(s.cue),s.cue=null,s.state="ID";continue}s.cue.text&&(s.cue.text+="\n"),s.cue.text+=n.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":n||(s.state="ID");continue}}}catch(t){s.reportOrThrowError(t),"CUETEXT"===s.state&&s.cue&&s.oncue&&s.oncue(s.cue),s.cue=null,s.state="INITIAL"===s.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),!e.cue&&"HEADER"!==e.state||(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new fi(fi.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var Li=Oi,Di={"":1,lr:1,rl:1},Ri={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function Mi(t){return"string"==typeof t&&(!!Ri[t.toLowerCase()]&&t.toLowerCase())}function Bi(t,e,i){this.hasBeenReset=!1;var n="",r=!1,s=t,a=e,o=i,l=null,c="",u=!0,d="auto",h="start",p="auto",f="auto",m=100,g="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(t){n=""+t}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(t){r=!!t}},startTime:{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");s=t,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");a=t,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(t){o=""+t,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(t){l=t,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(t){var e,i="string"==typeof(e=t)&&!!Di[e.toLowerCase()]&&e.toLowerCase();if(!1===i)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");c=i,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return u},set:function(t){u=!!t,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=t,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(t){var e=Mi(t);e?(h=e,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return p},set:function(t){if(t<0||100<t)throw new Error("Position must be between 0 and 100.");p=t,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(t){var e=Mi(t);e?(f=e,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return m},set:function(t){if(t<0||100<t)throw new Error("Size must be between 0 and 100.");m=t,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(t){var e=Mi(t);if(!e)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");g=e,this.hasBeenReset=!0}}}),this.displayState=void 0}Bi.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Ni=Bi,Ui={"":!0,up:!0};function ji(t){return"number"==typeof t&&0<=t&&t<=100}function Fi(){var e=100,i=3,n=0,r=100,s=0,a=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!ji(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return i},set:function(t){if("number"!=typeof t)throw new TypeError("Lines must be set to a number.");i=t}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(t){if(!ji(t))throw new Error("RegionAnchorX must be between 0 and 100.");r=t}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(t){if(!ji(t))throw new Error("RegionAnchorY must be between 0 and 100.");n=t}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(t){if(!ji(t))throw new Error("ViewportAnchorY must be between 0 and 100.");a=t}},viewportAnchorX:{enumerable:!0,get:function(){return s},set:function(t){if(!ji(t))throw new Error("ViewportAnchorX must be between 0 and 100.");s=t}},scroll:{enumerable:!0,get:function(){return o},set:function(t){var e,i="string"==typeof(e=t)&&!!Ui[e.toLowerCase()]&&e.toLowerCase();!1===i?console.warn("Scroll: an invalid or illegal string was specified."):o=i}}})}var $i=e(function(t){var e=t.exports={WebVTT:Li,VTTCue:Ni,VTTRegion:Fi};y.vttjs=e,y.WebVTT=e.WebVTT;var i=e.VTTCue,n=e.VTTRegion,r=y.VTTCue,s=y.VTTRegion;e.shim=function(){y.VTTCue=i,y.VTTRegion=n},e.restore=function(){y.VTTCue=r,y.VTTRegion=s},y.VTTCue||e.shim()});$i.WebVTT,$i.VTTCue,$i.VTTRegion;var Hi=function(e){function i(i,t){var n;return void 0===i&&(i={}),void 0===t&&(t=function(){}),i.reportTouchActivity=!1,(n=e.call(this,null,i,t)||this).hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),di.names.forEach(function(t){var e=di[t];i&&i[e.getterName]&&(n[e.privateName]=i[e.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(t){!1===i["native"+t+"Tracks"]&&(n["featuresNative"+t+"Tracks"]=!1)}),!1===i.nativeCaptions||!1===i.nativeTextTracks?n.featuresNativeTextTracks=!1:!0!==i.nativeCaptions&&!0!==i.nativeTextTracks||(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.preloadTextTracks=!1!==i.preloadTextTracks,n.autoRemoteTextTracks_=new di.text.ListClass,n.initTrackListeners(),i.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}$t(i,e);var t=i.prototype;return t.triggerSourceset=function(t){var e=this;this.isReady_||this.one("ready",function(){return e.setTimeout(function(){return e.triggerSourceset(t)},1)}),this.trigger({src:t,type:"sourceset"})},t.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},t.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},t.trackProgress=function(){this.stopTrackingProgress(),this.progressInterval=this.setInterval(mt(this,function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),1===(this.bufferedPercent_=t)&&this.stopTrackingProgress()}),500)},t.onDurationChange=function(){this.duration_=this.duration()},t.buffered=function(){return de(0,0)},t.bufferedPercent=function(){return he(this.buffered(),this.duration_)},t.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},t.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},t.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.dispose=function(){this.clearTracks(ci.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},t.clearTracks=function(t){var r=this;(t=[].concat(t)).forEach(function(t){for(var e=r[t+"Tracks"]()||[],i=e.length;i--;){var n=e[i];"text"===t&&r.removeRemoteTextTrack(n),e.removeTrack(n)}})},t.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],e=t.length;e--;){var i=t[e];this.removeRemoteTextTrack(i)}},t.reset=function(){},t.error=function(t){return void 0!==t&&(this.error_=new be(t),this.trigger("error")),this.error_},t.played=function(){return this.hasStarted_?de(0,0):de()},t.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.initTrackListeners=function(){var r=this;ci.names.forEach(function(t){function e(){r.trigger(t+"trackchange")}var i=ci[t],n=r[i.getterName]();n.addEventListener("removetrack",e),n.addEventListener("addtrack",e),r.on("dispose",function(){n.removeEventListener("removetrack",e),n.removeEventListener("addtrack",e)})})},t.addWebVttScript_=function(){var t=this;if(!y.WebVTT)if(d.body.contains(this.el())){if(!this.options_["vtt.js"]&&l($i)&&0<Object.keys($i).length)return void this.trigger("vttjsloaded");var e=d.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){e.onload=null,e.onerror=null}),y.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)},t.emulateTextTracks=function(){function e(t){return n.addTrack(t.track)}function i(t){return n.removeTrack(t.track)}var t=this,n=this.textTracks(),r=this.remoteTextTracks();r.on("addtrack",e),r.on("removetrack",i),this.addWebVttScript_();function s(){return t.trigger("texttrackchange")}function a(){s();for(var t=0;t<n.length;t++){var e=n[t];e.removeEventListener("cuechange",s),"showing"===e.mode&&e.addEventListener("cuechange",s)}}a(),n.addEventListener("change",a),n.addEventListener("addtrack",a),n.addEventListener("removetrack",a),this.on("dispose",function(){r.off("addtrack",e),r.off("removetrack",i),n.removeEventListener("change",a),n.removeEventListener("addtrack",a),n.removeEventListener("removetrack",a);for(var t=0;t<n.length;t++){n[t].removeEventListener("cuechange",s)}})},t.addTextTrack=function(t,e,i){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(t,e,i,n,r){void 0===r&&(r={});var s=t.textTracks();r.kind=e,i&&(r.label=i),n&&(r.language=n),r.tech=t;var a=new di.text.TrackClass(r);return s.addTrack(a),a}(this,t,e,i)},t.createRemoteTextTrack=function(t){var e=Rt(t,{tech:this});return new ui.remoteTextEl.TrackClass(e)},t.addRemoteTextTrack=function(t,e){var i=this;void 0===t&&(t={});var n=this.createRemoteTextTrack(t);return!0!==e&&!1!==e&&(h.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),e=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==e&&this.ready(function(){return i.autoRemoteTextTracks_.addTrack(n.track)}),n},t.removeRemoteTextTrack=function(t){var e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},t.getVideoPlaybackQuality=function(){return{}},t.requestPictureInPicture=function(){var t=this.options_.Promise||y.Promise;if(t)return t.reject()},t.setPoster=function(){},t.playsinline=function(){},t.setPlaysinline=function(){},t.overrideNativeAudioTracks=function(){},t.overrideNativeVideoTracks=function(){},t.canPlayType=function(){return""},i.canPlayType=function(){return""},i.canPlaySource=function(t){return i.canPlayType(t.type)},i.isTech=function(t){return t.prototype instanceof i||t instanceof i||t===i},i.registerTech=function(t,e){if(i.techs_||(i.techs_={}),!i.isTech(e))throw new Error("Tech "+t+" must be a Tech");if(!i.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!i.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=Dt(t),i.techs_[t]=e,i.techs_[Lt(t)]=e,"Tech"!==t&&i.defaultTechOrder_.push(t),e},i.getTech=function(t){if(t)return i.techs_&&i.techs_[t]?i.techs_[t]:(t=Dt(t),y&&y.videojs&&y.videojs[t]?(h.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),y.videojs[t]):void 0)},i}(Mt);di.names.forEach(function(t){var e=di[t];Hi.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),Hi.prototype.featuresVolumeControl=!0,Hi.prototype.featuresMuteControl=!0,Hi.prototype.featuresFullscreenResize=!1,Hi.prototype.featuresPlaybackRate=!1,Hi.prototype.featuresProgressEvents=!1,Hi.prototype.featuresSourceset=!1,Hi.prototype.featuresTimeupdateEvents=!1,Hi.prototype.featuresNativeTextTracks=!1,Hi.withSourceHandlers=function(r){r.registerSourceHandler=function(t,e){var i=r.sourceHandlers;i=i||(r.sourceHandlers=[]),void 0===e&&(e=i.length),i.splice(e,0,t)},r.canPlayType=function(t){for(var e,i=r.sourceHandlers||[],n=0;n<i.length;n++)if(e=i[n].canPlayType(t))return e;return""},r.selectSourceHandler=function(t,e){for(var i=r.sourceHandlers||[],n=0;n<i.length;n++)if(i[n].canHandleSource(t,e))return i[n];return null},r.canPlaySource=function(t,e){var i=r.selectSourceHandler(t,e);return i?i.canHandleSource(t,e):""};["seekable","seeking","duration"].forEach(function(t){var e=this[t];"function"==typeof e&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(t){var e=r.selectSourceHandler(t,this.options_);e||(r.nativeSourceHandler?e=r.nativeSourceHandler:h.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),e!==r.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=e.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Mt.registerComponent("Tech",Hi),Hi.registerTech("Tech",Hi),Hi.defaultTechOrder_=[];var zi={},qi={},Wi={};function Vi(t,e,i){t.setTimeout(function(){return function i(n,t,r,s,a,o){void 0===n&&(n={});void 0===t&&(t=[]);void 0===a&&(a=[]);void 0===o&&(o=!1);var e=t,l=e[0],c=e.slice(1);if("string"==typeof l)i(n,zi[l],r,s,a,o);else if(l){var u=Zi(s,l);if(!u.setSource)return a.push(u),i(n,c,r,s,a,o);u.setSource(f({},n),function(t,e){if(t)return i(n,c,r,s,a,o);a.push(u),i(e,n.type===e.type?c:zi[e.type],r,s,a,o)})}else c.length?i(n,c,r,s,a,o):o?r(n,a):i(n,zi["*"],r,s,a,!0)}(e,zi[e.type],i,t)},1)}function Gi(t,e,i,n){void 0===n&&(n=null);var r="call"+Dt(i),s=t.reduce(Qi(r),n),a=s===Wi,o=a?null:e[i](s);return function(t,e,i,n){for(var r=t.length-1;0<=r;r--){var s=t[r];s[e]&&s[e](n,i)}}(t,i,o,a),o}var Xi={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},Yi={setCurrentTime:1,setMuted:1,setVolume:1},Ki={play:1,pause:1};function Qi(i){return function(t,e){return t===Wi?Wi:e[i]?e[i](t):t}}function Zi(t,e){var i=qi[t.id()],n=null;if(null==i)return n=e(t),qi[t.id()]=[[e,n]],n;for(var r=0;r<i.length;r++){var s=i[r],a=s[0],o=s[1];a===e&&(n=o)}return null===n&&(n=e(t),i.push([e,n])),n}function Ji(t){void 0===t&&(t="");var e=Be(t);return tn[e.toLowerCase()]||""}var tn={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};function en(t){if(!t.type){var e=Ji(t.src);e&&(t.type=e)}return t}var nn=function(c){function t(t,e,i){var n,r=Rt({createEl:!1},e);if(n=c.call(this,t,r,i)||this,e.playerOptions.sources&&0!==e.playerOptions.sources.length)t.src(e.playerOptions.sources);else for(var s=0,a=e.playerOptions.techOrder;s<a.length;s++){var o=Dt(a[s]),l=Hi.getTech(o);if(o||(l=Mt.getComponent(o)),l&&l.isSupported()){t.loadTech_(o);break}}return n}return $t(t,c),t}(Mt);Mt.registerComponent("MediaLoader",nn);var rn=function(r){function t(t,e){var i;return(i=r.call(this,t,e)||this).emitTapEvents(),i.enable(),i}$t(t,r);var e=t.prototype;return e.createEl=function(t,e,i){void 0===t&&(t="div"),void 0===e&&(e={}),void 0===i&&(i={}),e=f({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},e),"button"===t&&h.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),i=f({role:"button"},i),this.tabIndex_=e.tabIndex;var n=r.prototype.createEl.call(this,t,e,i);return this.createControlTextEl(n),n},e.dispose=function(){this.controlTextEl_=null,r.prototype.dispose.call(this)},e.createControlTextEl=function(t){return this.controlTextEl_=T("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},e.controlText=function(t,e){if(void 0===e&&(e=this.el()),void 0===t)return this.controlText_||"Need Text";var i=this.localize(t);this.controlText_=t,w(this.controlTextEl_,i),this.nonIconControl||e.setAttribute("title",i)},e.buildCSSClass=function(){return"vjs-control vjs-button "+r.prototype.buildCSSClass.call(this)},e.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},e.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},e.handleClick=function(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},e.handleKeyDown=function(t){Ee.isEventKey(t,"Space")||Ee.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):r.prototype.handleKeyDown.call(this,t)},t}(Mt);Mt.registerComponent("ClickableComponent",rn);var sn=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).update(),t.on("posterchange",mt(Bt(i),i.update)),i}$t(t,n);var e=t.prototype;return e.dispose=function(){this.player().off("posterchange",this.update),n.prototype.dispose.call(this)},e.createEl=function(){return T("div",{className:"vjs-poster",tabIndex:-1})},e.update=function(){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},e.setSrc=function(t){var e="";t&&(e='url("'+t+'")'),this.el_.style.backgroundImage=e},e.handleClick=function(){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Se(this.player_.play()):this.player_.pause())},t}(rn);Mt.registerComponent("PosterImage",sn);var an="#222",on={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function ln(t,e){var i;if(4===t.length)i=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else{if(7!==t.length)throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");i=t.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+e+")"}function cn(t,e,i){try{t.style[e]=i}catch(t){return}}var un=function(s){function t(i,t,e){var n;n=s.call(this,i,t,e)||this;var r=mt(Bt(n),n.updateDisplay);return i.on("loadstart",mt(Bt(n),n.toggleDisplay)),i.on("texttrackchange",r),i.on("loadedmetadata",mt(Bt(n),n.preselectTrack)),i.ready(mt(Bt(n),function(){if(i.tech_&&i.tech_.featuresNativeTextTracks)this.hide();else{i.on("fullscreenchange",r),i.on("playerresize",r),y.addEventListener("orientationchange",r),i.on("dispose",function(){return y.removeEventListener("orientationchange",r)});for(var t=this.options_.playerOptions.tracks||[],e=0;e<t.length;e++)this.player_.addRemoteTextTrack(t[e],!0);this.preselectTrack()}})),n}$t(t,s);var e=t.prototype;return e.preselectTrack=function(){for(var t,e,i,n={captions:1,subtitles:1},r=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,a=0;a<r.length;a++){var o=r[a];s&&s.enabled&&s.language&&s.language===o.language&&o.kind in n?i=o.kind!==s.kind&&i||o:s&&!s.enabled?e=t=i=null:o.default&&("descriptions"!==o.kind||t?o.kind in n&&!e&&(e=o):t=o)}i?i.mode="showing":e?e.mode="showing":t&&(t.mode="showing")},e.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},e.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},e.clearDisplay=function(){"function"==typeof y.WebVTT&&y.WebVTT.processCues(y,[],this.el_)},e.updateDisplay=function(){var t=this.player_.textTracks(),e=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),e){for(var i=[],n=0;n<t.length;++n){var r=t[n];"showing"===r.mode&&i.push(r)}this.updateForTrack(i)}else{for(var s=null,a=null,o=t.length;o--;){var l=t[o];"showing"===l.mode&&("descriptions"===l.kind?s=l:a=l)}a?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(a)):s&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(s))}},e.updateDisplayState=function(t){for(var e=this.player_.textTrackSettings.getValues(),i=t.activeCues,n=i.length;n--;){var r=i[n];if(r){var s=r.displayState;if(e.color&&(s.firstChild.style.color=e.color),e.textOpacity&&cn(s.firstChild,"color",ln(e.color||"#fff",e.textOpacity)),e.backgroundColor&&(s.firstChild.style.backgroundColor=e.backgroundColor),e.backgroundOpacity&&cn(s.firstChild,"backgroundColor",ln(e.backgroundColor||"#000",e.backgroundOpacity)),e.windowColor&&(e.windowOpacity?cn(s,"backgroundColor",ln(e.windowColor,e.windowOpacity)):s.style.backgroundColor=e.windowColor),e.edgeStyle&&("dropshadow"===e.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+an:"raised"===e.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+an:"depressed"===e.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+an:"uniform"===e.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+an)),e.fontPercent&&1!==e.fontPercent){var a=y.parseFloat(s.style.fontSize);s.style.fontSize=a*e.fontPercent+"px",s.style.height="auto",s.style.top="auto",s.style.bottom="2px"}e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=on[e.fontFamily])}}},e.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),"function"==typeof y.WebVTT&&!t.every(function(t){return!t.activeCues})){for(var e=[],i=0;i<t.length;++i)for(var n=t[i],r=0;r<n.activeCues.length;++r)e.push(n.activeCues[r]);y.WebVTT.processCues(y,e,this.el_);for(var s=0;s<t.length;++s){for(var a=t[s],o=0;o<a.activeCues.length;++o){var l=a.activeCues[o].displayState;k(l,"vjs-text-track-cue"),k(l,"vjs-text-track-cue-"+(a.language?a.language:s))}this.player_.textTrackSettings&&this.updateDisplayState(a)}}},t}(Mt);Mt.registerComponent("TextTrackDisplay",un);var dn=function(r){function t(){return r.apply(this,arguments)||this}return $t(t,r),t.prototype.createEl=function(){var t=this.player_.isAudio(),e=this.localize(t?"Audio Player":"Video Player"),i=T("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[e])}),n=r.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return n.appendChild(i),n},t}(Mt);Mt.registerComponent("LoadingSpinner",dn);var hn=function(e){function t(){return e.apply(this,arguments)||this}$t(t,e);var i=t.prototype;return i.createEl=function(t,e,i){void 0===e&&(e={}),void 0===i&&(i={}),e=f({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},e),i=f({type:"button"},i);var n=Mt.prototype.createEl.call(this,"button",e,i);return this.createControlTextEl(n),n},i.addChild=function(t,e){void 0===e&&(e={});var i=this.constructor.name;return h.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),Mt.prototype.addChild.call(this,t,e)},i.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyDown=function(t){Ee.isEventKey(t,"Space")||Ee.isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(rn);Mt.registerComponent("Button",hn);var pn=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).mouseused_=!1,i.on("mousedown",i.handleMouseDown),i}$t(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-big-play-button"},e.handleClick=function(t){var e=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){var i=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length;return Se(e),void(!this.player_.tech(!0)||(te||Qt)&&i||this.player_.tech(!0).focus())}var n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(r){var s=function(){return r.focus()};we(e)?e.then(s,function(){}):this.setTimeout(s,1)}else this.player_.tech(!0).focus()},e.handleKeyDown=function(t){this.mouseused_=!1,n.prototype.handleKeyDown.call(this,t)},e.handleMouseDown=function(){this.mouseused_=!0},t}(hn);pn.prototype.controlText_="Play Video",Mt.registerComponent("BigPlayButton",pn);var fn=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).controlText(e&&e.controlText||i.localize("Close")),i}$t(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-close-button "+n.prototype.buildCSSClass.call(this)},e.handleClick=function(){this.trigger({type:"close",bubbles:!1})},e.handleKeyDown=function(t){Ee.isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):n.prototype.handleKeyDown.call(this,t)},t}(hn);Mt.registerComponent("CloseButton",fn);var mn=function(n){function t(t,e){var i;return void 0===e&&(e={}),i=n.call(this,t,e)||this,e.replay=void 0===e.replay||e.replay,i.on(t,"play",i.handlePlay),i.on(t,"pause",i.handlePause),e.replay&&i.on(t,"ended",i.handleEnded),i}$t(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-play-control "+n.prototype.buildCSSClass.call(this)},e.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},e.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},e.handlePlay=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},e.handlePause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},e.handleEnded=function(){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},t}(hn);mn.prototype.controlText_="Play",Mt.registerComponent("PlayToggle",mn);function gn(t,e){t=t<0?0:t;var i=Math.floor(t%60),n=Math.floor(t/60%60),r=Math.floor(t/3600),s=Math.floor(e/60%60),a=Math.floor(e/3600);return!isNaN(t)&&t!==1/0||(r=n=i="-"),(r=0<r||0<a?r+":":"")+(n=((r||10<=s)&&n<10?"0"+n:n)+":")+(i=i<10?"0"+i:i)}var vn=gn;function yn(t,e){return void 0===e&&(e=t),vn(t,e)}var bn=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).on(t,["timeupdate","ended"],i.updateContent),i.updateTextNode_(),i}$t(t,n);var e=t.prototype;return e.createEl=function(){var t=this.buildCSSClass(),e=n.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=T("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),e.appendChild(this.contentEl_),e},e.dispose=function(){this.contentEl_=null,this.textNode_=null,n.prototype.dispose.call(this)},e.updateTextNode_=function(t){var e=this;void 0===t&&(t=0),t=yn(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestAnimationFrame(function(){if(e.contentEl_){var t=e.textNode_;e.textNode_=d.createTextNode(e.formattedTime_),e.textNode_&&(t?e.contentEl_.replaceChild(e.textNode_,t):e.contentEl_.appendChild(e.textNode_))}}))},e.updateContent=function(){},t}(Mt);bn.prototype.labelText_="Time",bn.prototype.controlText_="Time",Mt.registerComponent("TimeDisplay",bn);var _n=function(t){function e(){return t.apply(this,arguments)||this}$t(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-current-time"},i.updateContent=function(){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},e}(bn);_n.prototype.labelText_="Current Time",_n.prototype.controlText_="Current Time",Mt.registerComponent("CurrentTimeDisplay",_n);var Tn=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).on(t,"durationchange",i.updateContent),i.on(t,"loadstart",i.updateContent),i.on(t,"loadedmetadata",i.updateContent),i}$t(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-duration"},e.updateContent=function(){var t=this.player_.duration();this.updateTextNode_(t)},t}(bn);Tn.prototype.labelText_="Duration",Tn.prototype.controlText_="Duration",Mt.registerComponent("DurationDisplay",Tn);var wn=function(t){function e(){return t.apply(this,arguments)||this}return $t(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},e}(Mt);Mt.registerComponent("TimeDivider",wn);var Sn=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).on(t,"durationchange",i.updateContent),i}$t(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-remaining-time"},e.createEl=function(){var t=n.prototype.createEl.call(this);return t.insertBefore(T("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},e.updateContent=function(){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},t}(bn);Sn.prototype.labelText_="Remaining Time",Sn.prototype.controlText_="Remaining Time",Mt.registerComponent("RemainingTimeDisplay",Sn);var Cn=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).updateShowing(),i.on(i.player(),"durationchange",i.updateShowing),i}$t(t,n);var e=t.prototype;return e.createEl=function(){var t=n.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=T("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},e.dispose=function(){this.contentEl_=null,n.prototype.dispose.call(this)},e.updateShowing=function(){this.player().duration()===1/0?this.show():this.hide()},t}(Mt);Mt.registerComponent("LiveDisplay",Cn);var kn=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).updateLiveEdgeStatus(),i.player_.liveTracker&&i.on(i.player_.liveTracker,"liveedgechange",i.updateLiveEdgeStatus),i}$t(t,n);var e=t.prototype;return e.createEl=function(){var t=n.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=T("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},e.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},e.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},e.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,n.prototype.dispose.call(this)},t}(hn);kn.prototype.controlText_="Seek to live, currently playing live",Mt.registerComponent("SeekToLive",kn);function xn(t,e,i){return t=Number(t),Math.min(i,Math.max(e,isNaN(t)?e:t))}var En=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}$t(t,n);var e=t.prototype;return e.enabled=function(){return this.enabled_},e.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},e.disable=function(){if(this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},e.createEl=function(t,e,i){return void 0===e&&(e={}),void 0===i&&(i={}),e.className=e.className+" vjs-slider",e=f({tabIndex:0},e),i=f({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),n.prototype.createEl.call(this,t,e,i)},e.handleMouseDown=function(t){var e=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"!==t.type||Zt||t.preventDefault(),D(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchmove",this.handleMouseMove),this.on(e,"touchend",this.handleMouseUp),this.handleMouseMove(t)},e.handleMouseMove=function(){},e.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;R(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.update()},e.update=function(){var e=this;if(this.el_&&this.bar){var i=this.getProgress();return i===this.progress_?i:(this.progress_=i,this.requestAnimationFrame(function(){var t=e.vertical()?"height":"width";e.bar.el().style[t]=(100*i).toFixed(2)+"%"}),i)}},e.getProgress=function(){return Number(xn(this.getPercent(),0,1).toFixed(4))},e.calculateDistance=function(t){var e=N(this.el_,t);return this.vertical()?e.y:e.x},e.handleKeyDown=function(t){Ee.isEventKey(t,"Left")||Ee.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):Ee.isEventKey(t,"Right")||Ee.isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):n.prototype.handleKeyDown.call(this,t)},e.handleClick=function(t){t.stopPropagation(),t.preventDefault()},e.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(Mt);Mt.registerComponent("Slider",En);function An(t,e){return xn(t/e*100,0,100).toFixed(2)+"%"}var Pn=function(r){function t(t,e){var i;return(i=r.call(this,t,e)||this).partEls_=[],i.on(t,"progress",i.update),i}$t(t,r);var e=t.prototype;return e.createEl=function(){var t=r.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),e=T("span",{className:"vjs-control-text"}),i=T("span",{textContent:this.localize("Loaded")}),n=d.createTextNode(": ");return this.percentageEl_=T("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(e),e.appendChild(i),e.appendChild(n),e.appendChild(this.percentageEl_),t},e.dispose=function(){this.partEls_=null,this.percentageEl_=null,r.prototype.dispose.call(this)},e.update=function(){var d=this;this.requestAnimationFrame(function(){var t=d.player_.liveTracker,e=d.player_.buffered(),i=t&&t.isLive()?t.seekableEnd():d.player_.duration(),n=d.player_.bufferedEnd(),r=d.partEls_,s=An(n,i);d.percent_!==s&&(d.el_.style.width=s,w(d.percentageEl_,s),d.percent_=s);for(var a=0;a<e.length;a++){var o=e.start(a),l=e.end(a),c=r[a];c||(c=d.el_.appendChild(T()),r[a]=c),c.dataset.start===o&&c.dataset.end===l||(c.dataset.start=o,c.dataset.end=l,c.style.left=An(o,n),c.style.width=An(l-o,n))}for(var u=r.length;u>e.length;u--)d.el_.removeChild(r[u-1]);r.length=e.length})},t}(Mt);Mt.registerComponent("LoadProgressBar",Pn);var In=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).update=gt(mt(Bt(i),i.update),30),i}$t(t,n);var e=t.prototype;return e.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},e.update=function(t,e,i){var n=M(this.el_),r=M(this.player_.el()),s=t.width*e;if(r&&n){var a=t.left-r.left+s,o=t.width-s+(r.right-t.right),l=n.width/2;a<l?l+=l-a:o<l&&(l=o),l<0?l=0:l>n.width&&(l=n.width),this.el_.style.right="-"+l+"px",this.write(i)}},e.write=function(t){w(this.el_,t)},e.updateTime=function(r,s,a,o){var l=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var t,e=l.player_.duration();if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){var i=l.player_.liveTracker.liveWindow(),n=i-s*i;t=(n<1?"":"-")+yn(n,i)}else t=yn(a,e);l.update(r,s,t),o&&o()})},t}(Mt);Mt.registerComponent("TimeTooltip",In);var On=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).update=gt(mt(Bt(i),i.update),30),i}$t(t,n);var e=t.prototype;return e.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},e.update=function(t,e){var i=this.getChild("timeTooltip");if(i){var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(t,e,n)}},t}(Mt);On.prototype.options_={children:[]},ae||Gt||On.prototype.options_.children.push("timeTooltip"),Mt.registerComponent("PlayProgressBar",On);var Ln=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).update=gt(mt(Bt(i),i.update),30),i}$t(t,n);var e=t.prototype;return e.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},e.update=function(t,e){var i=this,n=e*this.player_.duration();this.getChild("timeTooltip").updateTime(t,e,n,function(){i.el_.style.left=t.width*e+"px"})},t}(Mt);Ln.prototype.options_={children:["timeTooltip"]},Mt.registerComponent("MouseTimeDisplay",Ln);var Dn=function(s){function t(t,e){var i;return(i=s.call(this,t,e)||this).setEventHandlers_(),i}$t(t,s);var e=t.prototype;return e.setEventHandlers_=function(){this.update_=mt(this,this.update),this.update=gt(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in d&&"visibilityState"in d&&this.on(d,"visibilitychange",this.toggleVisibility_)},e.toggleVisibility_=function(t){d.hidden?this.disableInterval_(t):(this.enableInterval_(),this.update())},e.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},e.disableInterval_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&"ended"!==t.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},e.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},e.update=function(){var n=this,r=s.prototype.update.call(this);return this.requestAnimationFrame(function(){var t=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),e=n.player_.liveTracker,i=n.player_.duration();e&&e.isLive()&&(i=n.player_.liveTracker.liveCurrentTime()),n.percent_!==r&&(n.el_.setAttribute("aria-valuenow",(100*r).toFixed(2)),n.percent_=r),n.currentTime_===t&&n.duration_===i||(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[yn(t,i),yn(i,i)],"{1} of {2}")),n.currentTime_=t,n.duration_=i),n.bar&&n.bar.update(M(n.el()),n.getProgress())}),r},e.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},e.getPercent=function(){var t,e=this.getCurrentTime_(),i=this.player_.liveTracker;return i&&i.isLive()?(t=(e-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t},e.handleMouseDown=function(t){z(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),s.prototype.handleMouseDown.call(this,t))},e.handleMouseMove=function(t){if(z(t)){var e,i=this.calculateDistance(t),n=this.player_.liveTracker;if(n&&n.isLive()){var r=n.seekableStart(),s=n.liveCurrentTime();if(s<=(e=r+i*n.liveWindow())&&(e=s),e<=r&&(e=r+.1),e===1/0)return}else(e=i*this.player_.duration())===this.player_.duration()&&(e-=.1);this.player_.currentTime(e)}},e.enable=function(){s.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},e.disable=function(){s.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},e.handleMouseUp=function(t){s.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Se(this.player_.play()):this.update_()},e.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},e.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},e.handleAction=function(){this.player_.paused()?this.player_.play():this.player_.pause()},e.handleKeyDown=function(t){if(Ee.isEventKey(t,"Space")||Ee.isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(Ee.isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(0);else if(Ee.isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test(Ee(t))){t.preventDefault(),t.stopPropagation();var e=10*(Ee.codes[Ee(t)]-Ee.codes[0])/100;this.player_.currentTime(this.player_.duration()*e)}else Ee.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):Ee.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):s.prototype.handleKeyDown.call(this,t)},t}(En);Dn.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},ae||Gt||Dn.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Mt.registerComponent("SeekBar",Dn);var Rn=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).handleMouseMove=gt(mt(Bt(i),i.handleMouseMove),30),i.throttledHandleMouseSeek=gt(mt(Bt(i),i.handleMouseSeek),30),i.enable(),i}$t(t,n);var e=t.prototype;return e.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},e.handleMouseMove=function(t){var e=this.getChild("seekBar");if(e){var i=e.getChild("playProgressBar"),n=e.getChild("mouseTimeDisplay");if(i||n){var r=e.el(),s=M(r),a=N(r,t).x;a=xn(0,1,a),n&&n.update(s,a),i&&i.update(s,e.getProgress())}}},e.handleMouseSeek=function(t){var e=this.getChild("seekBar");e&&e.handleMouseMove(t)},e.enabled=function(){return this.enabled_},e.disable=function(){this.children().forEach(function(t){return t.disable&&t.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},e.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},e.handleMouseDown=function(t){var e=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(t),this.on(e,"mousemove",this.throttledHandleMouseSeek),this.on(e,"touchmove",this.throttledHandleMouseSeek),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},e.handleMouseUp=function(t){var e=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseUp(t),this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},t}(Mt);Rn.prototype.options_={children:["seekBar"]},Mt.registerComponent("ProgressControl",Rn);var Mn=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).on(t,["enterpictureinpicture","leavepictureinpicture"],i.handlePictureInPictureChange),d.pictureInPictureEnabled||i.disable(),i}$t(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-picture-in-picture-control "+n.prototype.buildCSSClass.call(this)},e.handlePictureInPictureChange=function(){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture")},e.handleClick=function(){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(hn);Mn.prototype.controlText_="Picture-in-Picture",Mt.registerComponent("PictureInPictureToggle",Mn);var Bn=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).on(t,"fullscreenchange",i.handleFullscreenChange),!1===d[t.fsApi_.fullscreenEnabled]&&i.disable(),i}$t(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-fullscreen-control "+n.prototype.buildCSSClass.call(this)},e.handleFullscreenChange=function(){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},e.handleClick=function(){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(hn);Bn.prototype.controlText_="Fullscreen",Mt.registerComponent("FullscreenToggle",Bn);var Nn=function(t){function e(){return t.apply(this,arguments)||this}return $t(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},e}(Mt);Mt.registerComponent("VolumeLevel",Nn);var Un=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).on("slideractive",i.updateLastVolume_),i.on(t,"volumechange",i.updateARIAAttributes),t.ready(function(){return i.updateARIAAttributes()}),i}$t(t,n);var e=t.prototype;return e.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},e.handleMouseDown=function(t){z(t)&&n.prototype.handleMouseDown.call(this,t)},e.handleMouseMove=function(t){z(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},e.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},e.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},e.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},e.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},e.updateARIAAttributes=function(){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},e.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},e.updateLastVolume_=function(){var t=this,e=this.player_.volume();this.one("sliderinactive",function(){0===t.player_.volume()&&t.player_.lastVolume_(e)})},t}(En);Un.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Un.prototype.playerEvent="volumechange",Mt.registerComponent("VolumeBar",Un);var jn=function(s){function t(t,e){var i,n,r;return void 0===e&&(e={}),e.vertical=e.vertical||!1,void 0!==e.volumeBar&&!l(e.volumeBar)||(e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical),i=s.call(this,t,e)||this,n=Bt(i),(r=t).tech_&&!r.tech_.featuresVolumeControl&&n.addClass("vjs-hidden"),n.on(r,"loadstart",function(){r.tech_.featuresVolumeControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")}),i.throttledHandleMouseMove=gt(mt(Bt(i),i.handleMouseMove),30),i.on("mousedown",i.handleMouseDown),i.on("touchstart",i.handleMouseDown),i.on(i.volumeBar,["focus","slideractive"],function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")}),i.on(i.volumeBar,["blur","sliderinactive"],function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")}),i}$t(t,s);var e=t.prototype;return e.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),s.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},e.handleMouseDown=function(){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},e.handleMouseUp=function(){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},e.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},t}(Mt);jn.prototype.options_={children:["volumeBar"]},Mt.registerComponent("VolumeControl",jn);var Fn=function(s){function t(t,e){var i,n,r;return i=s.call(this,t,e)||this,n=Bt(i),(r=t).tech_&&!r.tech_.featuresMuteControl&&n.addClass("vjs-hidden"),n.on(r,"loadstart",function(){r.tech_.featuresMuteControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")}),i.on(t,["loadstart","volumechange"],i.update),i}$t(t,s);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-mute-control "+s.prototype.buildCSSClass.call(this)},e.handleClick=function(){var t=this.player_.volume(),e=this.player_.lastVolume_();if(0===t){var i=e<.1?.1:e;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},e.update=function(){this.updateIcon_(),this.updateControlText_()},e.updateIcon_=function(){var t=this.player_.volume(),e=3;ae&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?e=0:t<.33?e=1:t<.67&&(e=2);for(var i=0;i<4;i++)x(this.el_,"vjs-vol-"+i);k(this.el_,"vjs-vol-"+e)},e.updateControlText_=function(){var t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},t}(hn);Fn.prototype.controlText_="Mute",Mt.registerComponent("MuteToggle",Fn);var $n=function(n){function t(t,e){var i;return void 0===e&&(e={}),void 0!==e.inline?e.inline=e.inline:e.inline=!0,void 0!==e.volumeControl&&!l(e.volumeControl)||(e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline),(i=n.call(this,t,e)||this).on(t,["loadstart"],i.volumePanelState_),i.on(i.muteToggle,"keyup",i.handleKeyPress),i.on(i.volumeControl,"keyup",i.handleVolumeControlKeyUp),i.on("keydown",i.handleKeyPress),i.on("mouseover",i.handleMouseOver),i.on("mouseout",i.handleMouseOut),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}$t(t,n);var e=t.prototype;return e.sliderActive_=function(){this.addClass("vjs-slider-active")},e.sliderInactive_=function(){this.removeClass("vjs-slider-active")},e.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},e.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),n.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},e.dispose=function(){this.handleMouseOut(),n.prototype.dispose.call(this)},e.handleVolumeControlKeyUp=function(t){Ee.isEventKey(t,"Esc")&&this.muteToggle.focus()},e.handleMouseOver=function(){this.addClass("vjs-hover"),ut(d,"keyup",mt(this,this.handleKeyPress))},e.handleMouseOut=function(){this.removeClass("vjs-hover"),dt(d,"keyup",mt(this,this.handleKeyPress))},e.handleKeyPress=function(t){Ee.isEventKey(t,"Esc")&&this.handleMouseOut()},t}(Mt);$n.prototype.options_={children:["muteToggle","volumeControl"]},Mt.registerComponent("VolumePanel",$n);var Hn=function(n){function t(t,e){var i;return i=n.call(this,t,e)||this,e&&(i.menuButton_=e.menuButton),i.focusedChild_=-1,i.on("keydown",i.handleKeyDown),i.boundHandleBlur_=mt(Bt(i),i.handleBlur),i.boundHandleTapClick_=mt(Bt(i),i.handleTapClick),i}$t(t,n);var e=t.prototype;return e.addEventListenerForItem=function(t){t instanceof Mt&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))},e.removeEventListenerForItem=function(t){t instanceof Mt&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))},e.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),n.prototype.removeChild.call(this,t)},e.addItem=function(t){var e=this.addChild(t);e&&this.addEventListenerForItem(e)},e.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=T(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var e=n.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return e.appendChild(this.contentEl_),ut(e,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),e},e.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,n.prototype.dispose.call(this)},e.handleBlur=function(t){var e=t.relatedTarget||d.activeElement;if(!this.children().some(function(t){return t.el()===e})){var i=this.menuButton_;i&&i.buttonPressed_&&e!==i.el().firstChild&&i.unpressButton()}},e.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var i=t.filter(function(t){return t.el()===e.target})[0];if(!i)return;"CaptionSettingsMenuItem"!==i.name()&&this.menuButton_.focus()}},e.handleKeyDown=function(t){Ee.isEventKey(t,"Left")||Ee.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(Ee.isEventKey(t,"Right")||Ee.isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())},e.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},e.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},e.focus=function(t){void 0===t&&(t=0);var e=this.children().slice();e.length&&e[0].className&&/vjs-menu-title/.test(e[0].className)&&e.shift(),0<e.length&&(t<0?t=0:t>=e.length&&(t=e.length-1),e[this.focusedChild_=t].el_.focus())},t}(Mt);Mt.registerComponent("Menu",Hn);var zn=function(r){function t(t,e){var i;void 0===e&&(e={}),(i=r.call(this,t,e)||this).menuButton_=new hn(t,e),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var n=hn.prototype.buildCSSClass();return i.menuButton_.el_.className=i.buildCSSClass()+" "+n,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0,i.on(i.menuButton_,"tap",i.handleClick),i.on(i.menuButton_,"click",i.handleClick),i.on(i.menuButton_,"keydown",i.handleKeyDown),i.on(i.menuButton_,"mouseenter",function(){i.addClass("vjs-hover"),i.menu.show(),ut(d,"keyup",mt(Bt(i),i.handleMenuKeyUp))}),i.on("mouseleave",i.handleMouseLeave),i.on("keydown",i.handleSubmenuKeyDown),i}$t(t,r);var e=t.prototype;return e.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},e.createMenu=function(){var t=new Hn(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var e=T("li",{className:"vjs-menu-title",innerHTML:Dt(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var i=new Mt(this.player_,{el:e});t.addItem(i)}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)t.addItem(this.items[n]);return t},e.createItems=function(){},e.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},e.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+hn.prototype.buildCSSClass()+" "+r.prototype.buildCSSClass.call(this)},e.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+r.prototype.buildCSSClass.call(this)},e.controlText=function(t,e){return void 0===e&&(e=this.menuButton_.el()),this.menuButton_.controlText(t,e)},e.dispose=function(){this.handleMouseLeave(),r.prototype.dispose.call(this)},e.handleClick=function(){this.buttonPressed_?this.unpressButton():this.pressButton()},e.handleMouseLeave=function(){this.removeClass("vjs-hover"),dt(d,"keyup",mt(this,this.handleMenuKeyUp))},e.focus=function(){this.menuButton_.focus()},e.blur=function(){this.menuButton_.blur()},e.handleKeyDown=function(t){Ee.isEventKey(t,"Esc")||Ee.isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),Ee.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(Ee.isEventKey(t,"Up")||Ee.isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))},e.handleMenuKeyUp=function(t){(Ee.isEventKey(t,"Esc")||Ee.isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")},e.handleSubmenuKeyPress=function(t){this.handleSubmenuKeyDown(t)},e.handleSubmenuKeyDown=function(t){(Ee.isEventKey(t,"Esc")||Ee.isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Ee.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))},e.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ae&&b())return;this.menu.focus()}},e.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},e.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},e.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(Mt);Mt.registerComponent("MenuButton",zn);var qn=function(s){function t(t,e){var i,n=e.tracks;if((i=s.call(this,t,e)||this).items.length<=1&&i.hide(),!n)return Bt(i);var r=mt(Bt(i),i.update);return n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),i.player_.on("ready",r),i.player_.on("dispose",function(){n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r)}),i}return $t(t,s),t}(zn);Mt.registerComponent("TrackButton",qn);var Wn=["Tab","Esc","Up","Down","Right","Left"],Vn=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).selectable=e.selectable,i.isSelected_=e.selected||!1,i.multiSelectable=e.multiSelectable,i.selected(i.isSelected_),i.selectable?i.multiSelectable?i.el_.setAttribute("role","menuitemcheckbox"):i.el_.setAttribute("role","menuitemradio"):i.el_.setAttribute("role","menuitem"),i}$t(t,n);var e=t.prototype;return e.createEl=function(t,e,i){return this.nonIconControl=!0,n.prototype.createEl.call(this,"li",f({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},e),i)},e.handleKeyDown=function(e){Wn.some(function(t){return Ee.isEventKey(e,t)})||n.prototype.handleKeyDown.call(this,e)},e.handleClick=function(){this.selected(!0)},e.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(rn);Mt.registerComponent("MenuItem",Vn);var Gn=function(l){function t(t,e){var n,i=e.track,r=t.textTracks();e.label=i.label||i.language||"Unknown",e.selected="showing"===i.mode,(n=l.call(this,t,e)||this).track=i,n.kinds=(e.kinds||[e.kind||n.track.kind]).filter(Boolean);function s(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];n.handleTracksChange.apply(Bt(n),e)}function a(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];n.handleSelectedLanguageChange.apply(Bt(n),e)}var o;t.on(["loadstart","texttrackchange"],s),r.addEventListener("change",s),r.addEventListener("selectedlanguagechange",a),n.on("dispose",function(){t.off(["loadstart","texttrackchange"],s),r.removeEventListener("change",s),r.removeEventListener("selectedlanguagechange",a)}),void 0===r.onchange&&n.on(["tap","click"],function(){if("object"!=typeof y.Event)try{o=new y.Event("change")}catch(t){}o||(o=d.createEvent("Event")).initEvent("change",!0,!0),r.dispatchEvent(o)});return n.handleTracksChange(),n}$t(t,l);var e=t.prototype;return e.handleClick=function(t){var e=this.track,i=this.player_.textTracks();if(l.prototype.handleClick.call(this,t),i)for(var n=0;n<i.length;n++){var r=i[n];-1!==this.kinds.indexOf(r.kind)&&(r===e?"showing"!==r.mode&&(r.mode="showing"):"disabled"!==r.mode&&(r.mode="disabled"))}},e.handleTracksChange=function(){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},e.handleSelectedLanguageChange=function(){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},e.dispose=function(){this.track=null,l.prototype.dispose.call(this)},t}(Vn);Mt.registerComponent("TextTrackMenuItem",Gn);var Xn=function(i){function t(t,e){return e.track={player:t,kind:e.kind,kinds:e.kinds,default:!1,mode:"disabled"},e.kinds||(e.kinds=[e.kind]),e.label?e.track.label=e.label:e.track.label=e.kinds.join(" and ")+" off",e.selectable=!0,e.multiSelectable=!1,i.call(this,t,e)||this}$t(t,i);var e=t.prototype;return e.handleTracksChange=function(){for(var t=this.player().textTracks(),e=!0,i=0,n=t.length;i<n;i++){var r=t[i];if(-1<this.options_.kinds.indexOf(r.kind)&&"showing"===r.mode){e=!1;break}}e!==this.isSelected_&&this.selected(e)},e.handleSelectedLanguageChange=function(){for(var t=this.player().textTracks(),e=!0,i=0,n=t.length;i<n;i++){var r=t[i];if(-1<["captions","descriptions","subtitles"].indexOf(r.kind)&&"showing"===r.mode){e=!1;break}}e&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(Gn);Mt.registerComponent("OffTextTrackMenuItem",Xn);var Yn=function(i){function t(t,e){return void 0===e&&(e={}),e.tracks=t.textTracks(),i.call(this,t,e)||this}return $t(t,i),t.prototype.createItems=function(t,e){var i;void 0===t&&(t=[]),void 0===e&&(e=Gn),this.label_&&(i=this.label_+" off"),t.push(new Xn(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<n.length;r++){var s=n[r];if(-1<this.kinds_.indexOf(s.kind)){var a=new e(this.player_,{track:s,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});a.addClass("vjs-"+s.kind+"-menu-item"),t.push(a)}}return t},t}(qn);Mt.registerComponent("TextTrackButton",Yn);var Kn=function(a){function t(t,e){var i,n=e.track,r=e.cue,s=t.currentTime();return e.selectable=!0,e.multiSelectable=!1,e.label=r.text,e.selected=r.startTime<=s&&s<r.endTime,(i=a.call(this,t,e)||this).track=n,i.cue=r,n.addEventListener("cuechange",mt(Bt(i),i.update)),i}$t(t,a);var e=t.prototype;return e.handleClick=function(){a.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},e.update=function(){var t=this.cue,e=this.player_.currentTime();this.selected(t.startTime<=e&&e<t.endTime)},t}(Vn);Mt.registerComponent("ChaptersTrackMenuItem",Kn);var Qn=function(n){function t(t,e,i){return n.call(this,t,e,i)||this}$t(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildCSSClass.call(this)},e.buildWrapperCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildWrapperCSSClass.call(this)},e.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),n.prototype.update.call(this)},e.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_)}}},e.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],e=t.length-1;0<=e;e--){var i=t[e];if(i.kind===this.kind_)return i}},e.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Dt(this.kind_))},e.createMenu=function(){return this.options_.title=this.getMenuCaption(),n.prototype.createMenu.call(this)},e.createItems=function(){var t=[];if(!this.track_)return t;var e=this.track_.cues;if(!e)return t;for(var i=0,n=e.length;i<n;i++){var r=e[i],s=new Kn(this.player_,{track:this.track_,cue:r});t.push(s)}return t},t}(Yn);Qn.prototype.kind_="chapters",Qn.prototype.controlText_="Chapters",Mt.registerComponent("ChaptersButton",Qn);var Zn=function(a){function t(t,e,i){var n;n=a.call(this,t,e,i)||this;var r=t.textTracks(),s=mt(Bt(n),n.handleTracksChange);return r.addEventListener("change",s),n.on("dispose",function(){r.removeEventListener("change",s)}),n}$t(t,a);var e=t.prototype;return e.handleTracksChange=function(){for(var t=this.player().textTracks(),e=!1,i=0,n=t.length;i<n;i++){var r=t[i];if(r.kind!==this.kind_&&"showing"===r.mode){e=!0;break}}e?this.disable():this.enable()},e.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)},e.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)},t}(Yn);Zn.prototype.kind_="descriptions",Zn.prototype.controlText_="Descriptions",Mt.registerComponent("DescriptionsButton",Zn);var Jn=function(n){function t(t,e,i){return n.call(this,t,e,i)||this}$t(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildCSSClass.call(this)},e.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildWrapperCSSClass.call(this)},t}(Yn);Jn.prototype.kind_="subtitles",Jn.prototype.controlText_="Subtitles",Mt.registerComponent("SubtitlesButton",Jn);var tr=function(n){function t(t,e){var i;return e.track={player:t,kind:e.kind,label:e.kind+" settings",selectable:!1,default:!1,mode:"disabled"},e.selectable=!1,e.name="CaptionSettingsMenuItem",(i=n.call(this,t,e)||this).addClass("vjs-texttrack-settings"),i.controlText(", opens "+e.kind+" settings dialog"),i}return $t(t,n),t.prototype.handleClick=function(){this.player().getChild("textTrackSettings").open()},t}(Gn);Mt.registerComponent("CaptionSettingsMenuItem",tr);var er=function(n){function t(t,e,i){return n.call(this,t,e,i)||this}$t(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-captions-button "+n.prototype.buildCSSClass.call(this)},e.buildWrapperCSSClass=function(){return"vjs-captions-button "+n.prototype.buildWrapperCSSClass.call(this)},e.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new tr(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),n.prototype.createItems.call(this,t)},t}(Yn);er.prototype.kind_="captions",er.prototype.controlText_="Captions",Mt.registerComponent("CaptionsButton",er);var ir=function(r){function t(){return r.apply(this,arguments)||this}return $t(t,r),t.prototype.createEl=function(t,e,i){var n='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(n+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),n+="</span>",r.prototype.createEl.call(this,t,f({innerHTML:n},e),i)},t}(Gn);Mt.registerComponent("SubsCapsMenuItem",ir);var nr=function(n){function t(t,e){var i;return void 0===e&&(e={}),(i=n.call(this,t,e)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)&&(i.label_="captions"),i.menuButton_.controlText(Dt(i.label_)),i}$t(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildCSSClass.call(this)},e.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildWrapperCSSClass.call(this)},e.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new tr(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=n.prototype.createItems.call(this,t,ir)},t}(Yn);nr.prototype.kinds_=["captions","subtitles"],nr.prototype.controlText_="Subtitles",Mt.registerComponent("SubsCapsButton",nr);var rr=function(a){function t(t,e){var n,i=e.track,r=t.audioTracks();e.label=i.label||i.language||"Unknown",e.selected=i.enabled,(n=a.call(this,t,e)||this).track=i,n.addClass("vjs-"+i.kind+"-menu-item");function s(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];n.handleTracksChange.apply(Bt(n),e)}return r.addEventListener("change",s),n.on("dispose",function(){r.removeEventListener("change",s)}),n}$t(t,a);var e=t.prototype;return e.createEl=function(t,e,i){var n='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(n+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),n+="</span>",a.prototype.createEl.call(this,t,f({innerHTML:n},e),i)},e.handleClick=function(t){var e=this.player_.audioTracks();a.prototype.handleClick.call(this,t);for(var i=0;i<e.length;i++){var n=e[i];n.enabled=n===this.track}},e.handleTracksChange=function(){this.selected(this.track.enabled)},t}(Vn);Mt.registerComponent("AudioTrackMenuItem",rr);var sr=function(i){function t(t,e){return void 0===e&&(e={}),e.tracks=t.audioTracks(),i.call(this,t,e)||this}$t(t,i);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-audio-button "+i.prototype.buildCSSClass.call(this)},e.buildWrapperCSSClass=function(){return"vjs-audio-button "+i.prototype.buildWrapperCSSClass.call(this)},e.createItems=function(t){void 0===t&&(t=[]),this.hideThreshold_=1;for(var e=this.player_.audioTracks(),i=0;i<e.length;i++){var n=e[i];t.push(new rr(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return t},t}(qn);sr.prototype.controlText_="Audio Track",Mt.registerComponent("AudioTrackButton",sr);var ar=function(s){function t(t,e){var i,n=e.rate,r=parseFloat(n,10);return e.label=n,e.selected=1===r,e.selectable=!0,e.multiSelectable=!1,(i=s.call(this,t,e)||this).label=n,i.rate=r,i.on(t,"ratechange",i.update),i}$t(t,s);var e=t.prototype;return e.handleClick=function(){s.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},e.update=function(){this.selected(this.player().playbackRate()===this.rate)},t}(Vn);ar.prototype.contentElType="button",Mt.registerComponent("PlaybackRateMenuItem",ar);var or=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).updateVisibility(),i.updateLabel(),i.on(t,"loadstart",i.updateVisibility),i.on(t,"ratechange",i.updateLabel),i}$t(t,n);var e=t.prototype;return e.createEl=function(){var t=n.prototype.createEl.call(this);return this.labelEl_=T("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},e.dispose=function(){this.labelEl_=null,n.prototype.dispose.call(this)},e.buildCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildCSSClass.call(this)},e.buildWrapperCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildWrapperCSSClass.call(this)},e.createMenu=function(){var t=new Hn(this.player()),e=this.playbackRates();if(e)for(var i=e.length-1;0<=i;i--)t.addChild(new ar(this.player(),{rate:e[i]+"x"}));return t},e.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},e.handleClick=function(){for(var t=this.player().playbackRate(),e=this.playbackRates(),i=e[0],n=0;n<e.length;n++)if(e[n]>t){i=e[n];break}this.player().playbackRate(i)},e.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},e.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},e.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},e.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(zn);or.prototype.controlText_="Playback Rate",Mt.registerComponent("PlaybackRateMenuButton",or);var lr=function(t){function e(){return t.apply(this,arguments)||this}$t(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e}(Mt);Mt.registerComponent("Spacer",lr);var cr=function(e){function t(){return e.apply(this,arguments)||this}$t(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},i.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML=" ",t},t}(lr);Mt.registerComponent("CustomControlSpacer",cr);var ur=function(t){function e(){return t.apply(this,arguments)||this}return $t(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(Mt);ur.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in d&&ur.prototype.options_.children.splice(ur.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Mt.registerComponent("ControlBar",ur);var dr=function(n){function t(t,e){var i;return(i=n.call(this,t,e)||this).on(t,"error",i.open),i}$t(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-error-display "+n.prototype.buildCSSClass.call(this)},e.content=function(){var t=this.player().error();return t?this.localize(t.message):""},t}(Pe);dr.prototype.options_=r({},Pe.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Mt.registerComponent("ErrorDisplay",dr);var hr="vjs-text-track-settings",pr=["#000","Black"],fr=["#00F","Blue"],mr=["#0FF","Cyan"],gr=["#0F0","Green"],vr=["#F0F","Magenta"],yr=["#F00","Red"],br=["#FFF","White"],_r=["#FF0","Yellow"],Tr=["1","Opaque"],wr=["0.5","Semi-Transparent"],Sr=["0","Transparent"],Cr={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[pr,br,yr,gr,fr,_r,vr,mr]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Tr,wr,Sr]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[br,pr,yr,gr,fr,_r,vr,mr]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return"1.00"===t?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Tr,wr]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Sr,wr,Tr]}};function kr(t,e){if(e&&(t=e(t)),t&&"none"!==t)return t}Cr.windowColor.options=Cr.backgroundColor.options;var xr=function(n){function t(t,e){var i;return e.temporary=!1,(i=n.call(this,t,e)||this).updateDisplay=mt(Bt(i),i.updateDisplay),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=T("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===e.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.close()}),i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults(),i.updateDisplay()}),a(Cr,function(t){i.on(i.$(t.selector),"change",i.updateDisplay)}),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}$t(t,n);var e=t.prototype;return e.dispose=function(){this.endDialog=null,n.prototype.dispose.call(this)},e.createElSelect_=function(t,e,i){var n=this;void 0===e&&(e=""),void 0===i&&(i="label");var r=Cr[t],s=r.id.replace("%s",this.id_),a=[e,s].join(" ").trim();return["<"+i+' id="'+s+'" class="'+("label"===i?"vjs-label":"")+'">',this.localize(r.label),"</"+i+">",'<select aria-labelledby="'+a+'">'].concat(r.options.map(function(t){var e=s+"-"+t[1].replace(/\W+/g,"");return['<option id="'+e+'" value="'+t[0]+'" ','aria-labelledby="'+a+" "+e+'">',n.localize(t[1]),"</option>"].join("")})).concat("</select>").join("")},e.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},e.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},e.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},e.createElColors_=function(){return T("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},e.createElFont_=function(){return T("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},e.createElControls_=function(){var t=this.localize("restore all settings to the default values");return T("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},e.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},e.label=function(){return this.localize("Caption Settings Dialog")},e.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},e.buildCSSClass=function(){return n.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},e.getValues=function(){var i,n,t,a=this;return n=function(t,e,i){var n,r,s=(n=a.$(e.selector),r=e.parser,kr(n.options[n.options.selectedIndex].value,r));return void 0!==s&&(t[i]=s),t},void 0===(t={})&&(t=0),s(i=Cr).reduce(function(t,e){return n(t,i[e],e)},t)},e.setValues=function(i){var n=this;a(Cr,function(t,e){!function(t,e,i){if(e)for(var n=0;n<t.options.length;n++)if(kr(t.options[n].value,i)===e){t.selectedIndex=n;break}}(n.$(t.selector),i[e],t.parser)})},e.setDefaults=function(){var i=this;a(Cr,function(t){var e=t.hasOwnProperty("default")?t.default:0;i.$(t.selector).selectedIndex=e})},e.restoreSettings=function(){var t;try{t=JSON.parse(y.localStorage.getItem(hr))}catch(t){h.warn(t)}t&&this.setValues(t)},e.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?y.localStorage.setItem(hr,JSON.stringify(t)):y.localStorage.removeItem(hr)}catch(t){h.warn(t)}}},e.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},e.conditionalBlur_=function(){this.previouslyActiveEl_=null;var t=this.player_.controlBar,e=t&&t.subsCapsButton,i=t&&t.captionsButton;e?e.focus():i&&i.focus()},t}(Pe);Mt.registerComponent("TextTrackSettings",xr);var Er=function(s){function t(t,e){var i,n=e.ResizeObserver||y.ResizeObserver;null===e.ResizeObserver&&(n=!1);var r=Rt({createEl:!n,reportTouchActivity:!1},e);return(i=s.call(this,t,r)||this).ResizeObserver=e.ResizeObserver||y.ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHandler_=vt(function(){i.resizeHandler()},100,!1,Bt(i)),n?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(t.el())):(i.loadListener_=function(){if(i.el_&&i.el_.contentWindow){var t=i.debouncedHandler_,e=i.unloadListener_=function(){dt(this,"resize",t),dt(this,"unload",e),e=null};ut(i.el_.contentWindow,"unload",e),ut(i.el_.contentWindow,"resize",t)}},i.one("load",i.loadListener_)),i}$t(t,s);var e=t.prototype;return e.createEl=function(){return s.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},e.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},e.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,s.prototype.dispose.call(this)},t}(Mt);Mt.registerComponent("ResizeManager",Er);var Ar=function(r){function t(t,e){var i,n=Rt({createEl:!1},e);return(i=r.call(this,t,n)||this).reset_(),i.on(i.player_,"durationchange",i.handleDurationchange),te&&"hidden"in d&&"visibilityState"in d&&i.on(d,"visibilitychange",i.handleVisibilityChange),i}$t(t,r);var e=t.prototype;return e.handleVisibilityChange=function(){this.player_.duration()===1/0&&(d.hidden?this.stopTracking():this.startTracking())},e.isBehind_=function(){if(!this.timeupdateSeen_)return!1;var t=this.liveCurrentTime(),e=this.player_.currentTime(),i=2*this.seekableIncrement_+.07;return t!==1/0&&e<=t-i},e.trackLive_=function(){this.pastSeekEnd_=this.pastSeekEnd_;var t=this.player_.seekable();if(t&&t.length){var e,i,n,r=this.seekableEnd();r!==this.lastSeekEnd_&&(this.lastSeekEnd_&&(this.seekableIncrementList_=this.seekableIncrementList_.slice(-11),this.seekableIncrementList_.push(Math.abs(r-this.lastSeekEnd_)),3<this.seekableIncrementList_.length&&(this.seekableIncrement_=(e=this.seekableIncrementList_,i=Math.floor(e.length/2),n=[].concat(e).sort(function(t,e){return t-e}),e.length%2!=0?n[i]:(n[i-1]+n[i])/2))),this.pastSeekEnd_=0,this.lastSeekEnd_=r,this.trigger("seekableendchange")),this.pastSeekEnd()>1.5*this.seekableIncrement_?this.pastSeekEnd_=0:this.pastSeekEnd_=this.pastSeekEnd()+.03,this.isBehind_()!==this.behindLiveEdge()&&(this.behindLiveEdge_=this.isBehind_(),this.trigger("liveedgechange"))}},e.handleDurationchange=function(){this.player_.duration()===1/0?this.startTracking():this.stopTracking()},e.startTracking=function(){var t=this;this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,"play",this.trackLive_),this.on(this.player_,"pause",this.trackLive_),this.timeupdateSeen_||(this.one(this.player_,"play",this.handlePlay),this.handleTimeupdate=function(){t.timeupdateSeen_=!0,t.handleTimeupdate=null},this.one(this.player_,"timeupdate",this.handleTimeupdate)))},e.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},e.reset_=function(){this.pastSeekEnd_=0,this.lastSeekEnd_=null,this.behindLiveEdge_=null,this.timeupdateSeen_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.seekableIncrement_=12,this.seekableIncrementList_=[],this.off(this.player_,"play",this.trackLive_),this.off(this.player_,"pause",this.trackLive_),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.seekToLiveEdge),this.handleTimeupdate&&(this.off(this.player_,"timeupdate",this.handleTimeupdate),this.handleTimeupdate=null)},e.stopTracking=function(){this.isTracking()&&this.reset_()},e.seekableEnd=function(){for(var t=this.player_.seekable(),e=[],i=t?t.length:0;i--;)e.push(t.end(i));return e.length?e.sort()[e.length-1]:1/0},e.seekableStart=function(){for(var t=this.player_.seekable(),e=[],i=t?t.length:0;i--;)e.push(t.start(i));return e.length?e.sort()[0]:0},e.liveWindow=function(){var t=this.liveCurrentTime();return t===1/0?1/0:t-this.seekableStart()},e.isLive=function(){return this.isTracking()},e.atLiveEdge=function(){return!this.behindLiveEdge()},e.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},e.pastSeekEnd=function(){return this.pastSeekEnd_},e.behindLiveEdge=function(){return this.behindLiveEdge_},e.isTracking=function(){return"number"==typeof this.trackingInterval_},e.seekToLiveEdge=function(){this.atLiveEdge()||(this.player_.currentTime(this.liveCurrentTime()),this.player_.paused()&&this.player_.play())},e.dispose=function(){this.stopTracking(),r.prototype.dispose.call(this)},t}(Mt);Mt.registerComponent("LiveTracker",Ar);function Pr(t){var e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),1;var i=t.$$("source"),n=[],r="";if(i.length){for(var s=0;s<i.length;s++){var a=i[s].src;a&&-1===n.indexOf(a)&&n.push(a)}return!!n.length&&(1===n.length&&(r=n[0]),t.triggerSourceset(r),!0)}}function Ir(t,e){for(var i={},n=0;n<t.length&&!((i=Object.getOwnPropertyDescriptor(t[n],e))&&i.set&&i.get);n++);return i.enumerable=!0,i.configurable=!0,i}function Or(s){var a=s.el();if(!a.resetSourceWatch_){var e={},t=Ir([s.el(),y.HTMLMediaElement.prototype,y.Element.prototype,Mr],"innerHTML"),i=function(r){return function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=r.apply(a,e);return Pr(s),n}};["append","appendChild","insertAdjacentHTML"].forEach(function(t){a[t]&&(e[t]=a[t],a[t]=i(e[t]))}),Object.defineProperty(a,"innerHTML",Rt(t,{set:i(t.set)})),a.resetSourceWatch_=function(){a.resetSourceWatch_=null,Object.keys(e).forEach(function(t){a[t]=e[t]}),Object.defineProperty(a,"innerHTML",t)},s.one("sourceset",a.resetSourceWatch_)}}function Lr(n){if(n.featuresSourceset){var r=n.el();if(!r.resetSourceset_){var i=Ir([n.el(),y.HTMLMediaElement.prototype,Br],"src"),s=r.setAttribute,e=r.load;Object.defineProperty(r,"src",Rt(i,{set:function(t){var e=i.set.call(r,t);return n.triggerSourceset(r.src),e}})),r.setAttribute=function(t,e){var i=s.call(r,t,e);return/src/i.test(t)&&n.triggerSourceset(r.src),i},r.load=function(){var t=e.call(r);return Pr(n)||(n.triggerSourceset(""),Or(n)),t},r.currentSrc?n.triggerSourceset(r.currentSrc):Pr(n)||Or(n),r.resetSourceset_=function(){r.resetSourceset_=null,r.load=e,r.setAttribute=s,Object.defineProperty(r,"src",i),r.resetSourceWatch_&&r.resetSourceWatch_()}}}}function Dr(e,i,n,t){function r(t){return Object.defineProperty(e,i,{value:t,enumerable:!0,writable:!0})}void 0===t&&(t=!0);var s={configurable:!0,enumerable:!0,get:function(){var t=n();return r(t),t}};return t&&(s.set=r),Object.defineProperty(e,i,s)}var Rr,Mr=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(t){var e=d.createElement(this.nodeName.toLowerCase());e.innerHTML=t;for(var i=d.createDocumentFragment();e.childNodes.length;)i.appendChild(e.childNodes[0]);return this.innerText="",y.Element.prototype.appendChild.call(this,i),this.innerHTML}}),Br=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Me(y.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return y.Element.prototype.setAttribute.call(this,"src",t),t}}),Nr=function(u){function o(t,e){var i;i=u.call(this,t,e)||this;var n=t.source,r=!1;if(n&&(i.el_.currentSrc!==n.src||t.tag&&3===t.tag.initNetworkState_)?i.setSource(n):i.handleLateInit_(i.el_),t.enableSourceset&&i.setupSourcesetHandling_(),i.el_.hasChildNodes()){for(var s=i.el_.childNodes,a=s.length,o=[];a--;){var l=s[a];"track"===l.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(l),i.remoteTextTracks().addTrack(l.track),i.textTracks().addTrack(l.track),r||i.el_.hasAttribute("crossorigin")||!Ne(l.src)||(r=!0)):o.push(l))}for(var c=0;c<o.length;c++)i.el_.removeChild(o[c])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&r&&h.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),i.restoreMetadataTracksInIOSNativePlayer_(),(ne||se||Yt)&&!0===t.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}$t(o,u);var t=o.prototype;return t.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),o.disposeMediaElement(this.el_),this.options_=null,u.prototype.dispose.call(this)},t.setupSourcesetHandling_=function(){Lr(this)},t.restoreMetadataTracksInIOSNativePlayer_=function(){function t(){i=[];for(var t=0;t<n.length;t++){var e=n[t];"metadata"===e.kind&&i.push({track:e,storedMode:e.mode})}}var i,n=this.textTracks();t(),n.addEventListener("change",t),this.on("dispose",function(){return n.removeEventListener("change",t)});function r(){for(var t=0;t<i.length;t++){var e=i[t];"disabled"===e.track.mode&&e.track.mode!==e.storedMode&&(e.track.mode=e.storedMode)}n.removeEventListener("change",r)}this.on("webkitbeginfullscreen",function(){n.removeEventListener("change",t),n.removeEventListener("change",r),n.addEventListener("change",r)}),this.on("webkitendfullscreen",function(){n.removeEventListener("change",t),n.addEventListener("change",t),n.removeEventListener("change",r)})},t.overrideNative_=function(t,e){var i=this;if(e===this["featuresNative"+t+"Tracks"]){var n=t.toLowerCase();this[n+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach(function(t){i.el()[n+"Tracks"].removeEventListener(t,i[n+"TracksListeners_"][t])}),this["featuresNative"+t+"Tracks"]=!e,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n)}},t.overrideNativeAudioTracks=function(t){this.overrideNative_("Audio",t)},t.overrideNativeVideoTracks=function(t){this.overrideNative_("Video",t)},t.proxyNativeTracksForType_=function(t){var n=this,e=ci[t],r=this.el()[e.getterName],s=this[e.getterName]();if(this["featuresNative"+e.capitalName+"Tracks"]&&r&&r.addEventListener){var a={change:function(){s.trigger({type:"change",target:s,currentTarget:s,srcElement:s})},addtrack:function(t){s.addTrack(t.track)},removetrack:function(t){s.removeTrack(t.track)}},i=function(){for(var t=[],e=0;e<s.length;e++){for(var i=!1,n=0;n<r.length;n++)if(r[n]===s[e]){i=!0;break}i||t.push(s[e])}for(;t.length;)s.removeTrack(t.shift())};this[e.getterName+"Listeners_"]=a,Object.keys(a).forEach(function(e){var i=a[e];r.addEventListener(e,i),n.on("dispose",function(t){return r.removeEventListener(e,i)})}),this.on("loadstart",i),this.on("dispose",function(t){return n.off("loadstart",i)})}},t.proxyNativeTracks_=function(){var e=this;ci.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},t.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var e=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(e,t),o.disposeMediaElement(t),t=e}else{t=d.createElement("video");var i=Rt({},this.options_.tag&&P(this.options_.tag));ne&&!0===this.options_.nativeControlsForTouch||delete i.controls,A(t,f(i,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}void 0!==this.options_.preload&&O(t,"preload",this.options_.preload);for(var n=["loop","muted","playsinline","autoplay"],r=0;r<n.length;r++){var s=n[r],a=this.options_[s];void 0!==a&&(a?O(t,s,s):L(t,s),t[s]=a)}return t},t.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var e=!1,i=function(){e=!0};this.on("loadstart",i);var n=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",n),e||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),2<=t.readyState&&r.push("loadeddata"),3<=t.readyState&&r.push("canplay"),4<=t.readyState&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(t){this.trigger(t)},this)})}},t.setCurrentTime=function(t){try{this.el_.currentTime=t}catch(t){h(t,"Video is not ready. (Video.js)")}},t.duration=function(){var e=this;if(this.el_.duration===1/0&&Gt&&Zt&&0===this.el_.currentTime){return this.on("timeupdate",function t(){0<e.el_.currentTime&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))}),NaN}return this.el_.duration||NaN},t.width=function(){return this.el_.offsetWidth},t.height=function(){return this.el_.offsetHeight},t.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var e=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},i=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",function(){t.off("webkitbeginfullscreen",i),t.off("webkitendfullscreen",e)})}},t.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=y.navigator&&y.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},t.enterFullScreen=function(){var t=this.el_;t.paused&&t.networkState<=t.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){t.pause(),t.webkitEnterFullScreen()},0)):t.webkitEnterFullScreen()},t.exitFullScreen=function(){this.el_.webkitExitFullScreen()},t.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},t.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},t.reset=function(){o.resetMediaElement(this.el_)},t.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.setControls=function(t){this.el_.controls=!!t},t.addTextTrack=function(t,e,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,e,i):u.prototype.addTextTrack.call(this,t,e,i)},t.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return u.prototype.createRemoteTextTrack.call(this,t);var e=d.createElement("track");return t.kind&&(e.kind=t.kind),t.label&&(e.label=t.label),(t.language||t.srclang)&&(e.srclang=t.language||t.srclang),t.default&&(e.default=t.default),t.id&&(e.id=t.id),t.src&&(e.src=t.src),e},t.addRemoteTextTrack=function(t,e){var i=u.prototype.addRemoteTextTrack.call(this,t,e);return this.featuresNativeTextTracks&&this.el().appendChild(i),i},t.removeRemoteTextTrack=function(t){if(u.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var e=this.$$("track"),i=e.length;i--;)t!==e[i]&&t!==e[i].track||this.el().removeChild(e[i])},t.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),y.performance&&"function"==typeof y.performance.now?t.creationTime=y.performance.now():y.performance&&y.performance.timing&&"number"==typeof y.performance.timing.navigationStart&&(t.creationTime=y.Date.now()-y.performance.timing.navigationStart),t},o}(Hi);Dr(Nr,"TEST_VID",function(){if(g()){var t=d.createElement("video"),e=d.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t}}),Nr.isSupported=function(){try{Nr.TEST_VID.volume=.5}catch(t){return!1}return!(!Nr.TEST_VID||!Nr.TEST_VID.canPlayType)},Nr.canPlayType=function(t){return Nr.TEST_VID.canPlayType(t)},Nr.canPlaySource=function(t,e){return Nr.canPlayType(t.type)},Nr.canControlVolume=function(){try{var t=Nr.TEST_VID.volume;return Nr.TEST_VID.volume=t/2+.1,t!==Nr.TEST_VID.volume}catch(t){return!1}},Nr.canMuteVolume=function(){try{var t=Nr.TEST_VID.muted;return Nr.TEST_VID.muted=!t,Nr.TEST_VID.muted?O(Nr.TEST_VID,"muted","muted"):L(Nr.TEST_VID,"muted"),t!==Nr.TEST_VID.muted}catch(t){return!1}},Nr.canControlPlaybackRate=function(){if(Gt&&Zt&&Jt<58)return!1;try{var t=Nr.TEST_VID.playbackRate;return Nr.TEST_VID.playbackRate=t/2+.1,t!==Nr.TEST_VID.playbackRate}catch(t){return!1}},Nr.canOverrideAttributes=function(){try{var t=function(){};Object.defineProperty(d.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(d.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(d.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(d.createElement("audio"),"innerHTML",{get:t,set:t})}catch(t){return!1}return!0},Nr.supportsNativeTextTracks=function(){return oe||ae&&Zt},Nr.supportsNativeVideoTracks=function(){return!(!Nr.TEST_VID||!Nr.TEST_VID.videoTracks)},Nr.supportsNativeAudioTracks=function(){return!(!Nr.TEST_VID||!Nr.TEST_VID.audioTracks)},Nr.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(t){var e=t[0],i=t[1];Dr(Nr.prototype,e,function(){return Nr[i]()},!0)}),Nr.prototype.movingMediaElementInDOM=!ae,Nr.prototype.featuresFullscreenResize=!0,Nr.prototype.featuresProgressEvents=!0,Nr.prototype.featuresTimeupdateEvents=!0,Nr.patchCanPlayType=function(){4<=Xt&&!Kt&&!Zt&&(Rr=Nr.TEST_VID&&Nr.TEST_VID.constructor.prototype.canPlayType,Nr.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(t)?"maybe":Rr.call(this,t)})},Nr.unpatchCanPlayType=function(){var t=Nr.TEST_VID.constructor.prototype.canPlayType;return Rr&&(Nr.TEST_VID.constructor.prototype.canPlayType=Rr),t},Nr.patchCanPlayType(),Nr.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},Nr.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),i=e.length;i--;)t.removeChild(e[i]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Nr.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){Nr.prototype["set"+Dt(e)]=function(t){(this.el_[e]=t)?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(t){Nr.prototype[t]=function(){return this.el_[t]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(e){Nr.prototype["set"+Dt(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(t){Nr.prototype[t]=function(){return this.el_[t]()}}),Hi.withSourceHandlers(Nr),Nr.nativeSourceHandler={},Nr.nativeSourceHandler.canPlayType=function(t){try{return Nr.TEST_VID.canPlayType(t)}catch(t){return""}},Nr.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Nr.nativeSourceHandler.canPlayType(t.type);if(t.src){var i=Be(t.src);return Nr.nativeSourceHandler.canPlayType("video/"+i)}return""},Nr.nativeSourceHandler.handleSource=function(t,e,i){e.setSrc(t.src)},Nr.nativeSourceHandler.dispose=function(){},Nr.registerSourceHandler(Nr.nativeSourceHandler),Hi.registerTech("Html5",Nr);var Ur=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],jr={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Fr=["tiny","xsmall","small","medium","large","xlarge","huge"],$r={};Fr.forEach(function(t){var e="x"===t.charAt(0)?"x-"+t.substring(1):t;$r[t]="vjs-layout-"+e});var Hr={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},zr=function(u){function c(t,e,i){var n;if(t.id=t.id||e.id||"vjs_video_"+it(),(e=f(c.getTagSettings(t),e)).initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language)if("function"==typeof t.closest){var r=t.closest("[lang]");r&&r.getAttribute&&(e.language=r.getAttribute("lang"))}else for(var s=t;s&&1===s.nodeType;){if(P(s).hasOwnProperty("lang")){e.language=s.getAttribute("lang");break}s=s.parentNode}if((n=u.call(this,null,e,i)||this).boundDocumentFullscreenChange_=mt(Bt(n),n.documentFullscreenChange_),n.boundFullWindowOnEscKey_=mt(Bt(n),n.fullWindowOnEscKey),n.isFullscreen_=!1,n.log=p(n.id_),n.fsApi_=fe,n.isPosterFromTech_=!1,n.queuedCallbacks_=[],n.isReady_=!1,n.hasStarted_=!1,n.userActive_=!1,!n.options_||!n.options_.techOrder||!n.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(n.tag=t,n.tagAttributes=t&&P(t),n.language(n.options_.language),e.languages){var a={};Object.getOwnPropertyNames(e.languages).forEach(function(t){a[t.toLowerCase()]=e.languages[t]}),n.languages_=a}else n.languages_=c.prototype.options_.languages;n.resetCache_(),n.poster_=e.poster||"",n.controls_=!!e.controls,t.controls=!1,t.removeAttribute("controls"),n.changingSrc_=!1,n.playCallbacks_=[],n.playTerminatedQueue_=[],t.hasAttribute("autoplay")?n.autoplay(!0):n.autoplay(n.options_.autoplay),e.plugins&&Object.keys(e.plugins).forEach(function(t){if("function"!=typeof n[t])throw new Error('plugin "'+t+'" does not exist')}),n.scrubbing_=!1,n.el_=n.createEl(),Pt(Bt(n),{eventBusKey:"el_"}),n.fsApi_.requestFullscreen&&(ut(d,n.fsApi_.fullscreenchange,n.boundDocumentFullscreenChange_),n.on(n.fsApi_.fullscreenchange,n.boundDocumentFullscreenChange_)),n.fluid_&&n.on("playerreset",n.updateStyleEl_);var o=Rt(n.options_);e.plugins&&Object.keys(e.plugins).forEach(function(t){n[t](e.plugins[t])}),n.options_.playerOptions=o,n.middleware_=[],n.initChildren(),n.isAudio("audio"===t.nodeName.toLowerCase()),n.controls()?n.addClass("vjs-controls-enabled"):n.addClass("vjs-controls-disabled"),n.el_.setAttribute("role","region"),n.isAudio()?n.el_.setAttribute("aria-label",n.localize("Audio Player")):n.el_.setAttribute("aria-label",n.localize("Video Player")),n.isAudio()&&n.addClass("vjs-audio"),n.flexNotSupported_()&&n.addClass("vjs-no-flex"),ne&&n.addClass("vjs-touch-enabled"),ae||n.addClass("vjs-workinghover"),c.players[n.id_]=Bt(n);var l="7.7.5".split(".")[0];return n.addClass("vjs-v"+l),n.userActive(!0),n.reportUserActivity(),n.one("play",n.listenForUserActivity_),n.on("stageclick",n.handleStageClick_),n.on("keydown",n.handleKeyDown),n.breakpoints(n.options_.breakpoints),n.responsive(n.options_.responsive),n}$t(c,u);var t=c.prototype;return t.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),dt(d,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),dt(d,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),c.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),qi[this.id()]=null,di.names.forEach(function(t){var e=di[t],i=n[e.getterName]();i&&i.off&&i.off()}),u.prototype.dispose.call(this)},t.createEl=function(){var e,i=this.tag,t=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),n="video-js"===this.tag.tagName.toLowerCase();t?e=this.el_=i.parentNode:n||(e=this.el_=u.prototype.createEl.call(this,"div"));var r=P(i);if(n){for(e=this.el_=i,i=this.tag=d.createElement("video");e.children.length;)i.appendChild(e.firstChild);C(e,"video-js")||k(e,"video-js"),e.appendChild(i),t=this.playerElIngest_=e,Object.keys(e).forEach(function(t){try{i[t]=e[t]}catch(t){}})}if(i.setAttribute("tabindex","-1"),r.tabindex="-1",(te||Zt&&ie)&&(i.setAttribute("role","application"),r.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach(function(t){n&&"class"===t||e.setAttribute(t,r[t]),n&&i.setAttribute(t,r[t])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=e.player=this,this.addClass("vjs-paused"),!0!==y.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Z("vjs-styles-dimensions");var s=W(".vjs-styles-defaults"),a=W("head");a.insertBefore(this.styleEl_,s?s.nextSibling:a.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var o=i.getElementsByTagName("a"),l=0;l<o.length;l++){var c=o.item(l);k(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!t&&i.parentNode.insertBefore(e,i),S(i,e),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_=e},t.width=function(t){return this.dimension("width",t)},t.height=function(t){return this.dimension("height",t)},t.dimension=function(t,e){var i=t+"_";if(void 0===e)return this[i]||0;if(""===e||"auto"===e)return this[i]=void 0,void this.updateStyleEl_();var n=parseFloat(e);isNaN(n)?h.error('Improper value "'+e+'" supplied for for '+t):(this[i]=n,this.updateStyleEl_())},t.fluid=function(t){if(void 0===t)return!!this.fluid_;var e,i;this.fluid_=!!t,Et(this)&&this.off("playerreset",this.updateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),Et(e=function(){this.on("playerreset",this.updateStyleEl_)})?i():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(i))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},t.fill=function(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},t.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},t.updateStyleEl_=function(){if(!0!==y.VIDEOJS_NO_DYNAMIC_STYLE){var t,e,i,n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=n[1]/n[0];t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,e=void 0!==this.height_?this.height_:t*r,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),J(this.styleEl_,"\n      ."+i+" {\n        width: "+t+"px;\n        height: "+e+"px;\n      }\n\n      ."+i+".vjs-fluid {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var s="number"==typeof this.width_?this.width_:this.options_.width,a="number"==typeof this.height_?this.height_:this.options_.height,o=this.tech_&&this.tech_.el();o&&(0<=s&&(o.width=s),0<=a&&(o.height=a))}},t.loadTech_=function(t,e){var i=this;this.tech_&&this.unloadTech_();var n=Dt(t),r=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==n&&this.tag&&(Hi.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;var s={source:e,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};di.names.forEach(function(t){var e=di[t];s[e.getterName]=i[e.privateName]}),f(s,this.options_[n]),f(s,this.options_[r]),f(s,this.options_[t.toLowerCase()]),this.tag&&(s.tag=this.tag),e&&e.src===this.cache_.src&&0<this.cache_.currentTime&&(s.startTime=this.cache_.currentTime);var a=Hi.getTech(t);if(!a)throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'");this.tech_=new a(s),this.tech_.ready(mt(this,this.handleTechReady_),!0),xe(this.textTracksJson_||[],this.tech_),Ur.forEach(function(t){i.on(i.tech_,t,i["handleTech"+Dt(t)+"_"])}),Object.keys(jr).forEach(function(e){i.on(i.tech_,e,function(t){0===i.tech_.playbackRate()&&i.tech_.seeking()?i.queuedCallbacks_.push({callback:i["handleTech"+jr[e]+"_"].bind(i),event:t}):i["handleTech"+jr[e]+"_"](t)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||S(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.unloadTech_=function(){var i=this;di.names.forEach(function(t){var e=di[t];i[e.privateName]=i[e.getterName]()}),this.textTracksJson_=ke(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},t.tech=function(t){return void 0===t&&h.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},t.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},t.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},t.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},t.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},t.manualAutoplay_=function(e){var n=this;if(this.tech_&&"string"==typeof e){var t,i=function(){var t=n.muted();n.muted(!0);function e(){n.muted(t)}n.playTerminatedQueue_.push(e);var i=n.play();if(we(i))return i.catch(e)};if("any"===e&&!0!==this.muted()?we(t=this.play())&&(t=t.catch(i)):t="muted"===e&&!0!==this.muted()?i():this.play(),we(t))return t.then(function(){n.trigger({type:"autoplay-success",autoplay:e})}).catch(function(t){n.trigger({type:"autoplay-failure",autoplay:e})})}},t.updateSourceCaches_=function(t){void 0===t&&(t="");var e=t,i="";"string"!=typeof e&&(e=t.src,i=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],e&&!i&&(i=function(t,e){if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;var i=t.cache_.sources.filter(function(t){return t.src===e});if(i.length)return i[0].type;for(var n=t.$$("source"),r=0;r<n.length;r++){var s=n[r];if(s.type&&s.src&&s.src===e)return s.type}return Ji(e)}(this,e)),this.cache_.source=Rt({},t,{src:e,type:i});for(var n=this.cache_.sources.filter(function(t){return t.src&&t.src===e}),r=[],s=this.$$("source"),a=[],o=0;o<s.length;o++){var l=P(s[o]);r.push(l),l.src&&l.src===e&&a.push(l.src)}a.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=e},t.handleTechSourceset_=function(t){var i=this;if(!this.changingSrc_){var e=function(t){return i.updateSourceCaches_(t)},n=this.currentSource().src,r=t.src;n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(this.lastSource_&&(this.lastSource_.tech===r||this.lastSource_.player===n)||(e=function(){})),e(r),t.src||this.tech_.any(["sourceset","loadstart"],function(t){if("sourceset"!==t.type){var e=i.techGet("currentSrc");i.lastSource_.tech=e,i.updateSourceCaches_(e)}})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},t.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},t.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},t.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var i=this.currentTime();this.on("timeupdate",function t(){i!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",t))})},t.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},t.handleTechFirstPlay_=function(){this.options_.starttime&&(h.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.handleTechClick_=function(t){z(t)&&this.controls_&&(this.paused()?Se(this.play()):this.pause())},t.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(t){return t.contains(e.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},t.handleTechTap_=function(){this.userActive(!this.userActive())},t.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.handleTechTouchEnd_=function(t){t.preventDefault()},t.handleStageClick_=function(){this.reportUserActivity()},t.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.documentFullscreenChange_=function(t){var e=t.target.player;if(!e||e===this){var i=this.el(),n=d[this.fsApi_.fullscreenElement]===i;!n&&i.matches?n=i.matches(":"+this.fsApi_.fullscreen):!n&&i.msMatchesSelector&&(n=i.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}},t.handleTechFullscreenChange_=function(t,e){e&&this.isFullscreen(e.isFullscreen)},t.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},t.handleTechEnterPictureInPicture_=function(){this.isInPictureInPicture(!0)},t.handleTechLeavePictureInPicture_=function(){this.isInPictureInPicture(!1)},t.handleTechError_=function(){var t=this.tech_.error();this.error(t)},t.handleTechTextData_=function(t,e){var i=null;1<arguments.length&&(i=e),this.trigger("textdata",i)},t.getCache=function(){return this.cache_},t.resetCache_=function(){this.cache_={currentTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},t.techCall_=function(r,s){this.ready(function(){if(r in Yi)return t=this.middleware_,e=this.tech_,n=s,e[i=r](t.reduce(Qi(i),n));if(r in Ki)return Gi(this.middleware_,this.tech_,r,s);var t,e,i,n;try{this.tech_&&this.tech_[r](s)}catch(t){throw h(t),t}},!0)},t.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Xi)return t=this.middleware_,i=this.tech_,n=e,t.reduceRight(Qi(n),i[n]());if(e in Ki)return Gi(this.middleware_,this.tech_,e);var t,i,n;try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw h("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw h("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw h(t),t}}},t.play=function(){var e=this,t=this.options_.Promise||y.Promise;return t?new t(function(t){e.play_(t)}):this.play_()},t.play_=function(t){var e=this;void 0===t&&(t=Se),this.playCallbacks_.push(t);var i=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i)return this.waitToPlay_=function(t){e.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(i||!oe&&!ae||this.load());var n=this.techGet_("play");null===n?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)},t.runPlayTerminatedQueue_=function(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(t){t()})},t.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(t){t(e)})},t.pause=function(){this.techCall_("pause")},t.paused=function(){return!1!==this.techGet_("paused")},t.played=function(){return this.techGet_("played")||de(0,0)},t.scrubbing=function(t){if(void 0===t)return this.scrubbing_;this.scrubbing_=!!t,t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},t.currentTime=function(t){return void 0!==t?(t<0&&(t=0),void this.techCall_("setCurrentTime",t)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},t.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&((this.cache_.duration=t)===1/0?(this.addClass("vjs-live"),this.options_.liveui&&this.player_.liveTracker&&this.addClass("vjs-liveui")):(this.removeClass("vjs-live"),this.removeClass("vjs-liveui")),isNaN(t)||this.trigger("durationchange"))},t.remainingTime=function(){return this.duration()-this.currentTime()},t.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},t.buffered=function(){var t=this.techGet_("buffered");return t&&t.length||(t=de(0,0)),t},t.bufferedPercent=function(){return he(this.buffered(),this.duration())},t.bufferedEnd=function(){var t=this.buffered(),e=this.duration(),i=t.end(t.length-1);return e<i&&(i=e),i},t.volume=function(t){var e;return void 0!==t?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall_("setVolume",e),void(0<e&&this.lastVolume_(e))):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)},t.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},t.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},t.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},t.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.isFullscreen=function(t){if(void 0===t)return this.isFullscreen_;var e=this.isFullscreen_;return this.isFullscreen_=Boolean(t),this.isFullscreen_!==e&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()},t.requestFullscreen=function(t){var e,i=this;if(this.fsApi_.prefixed||(e=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==t&&(e=t)),this.fsApi_.requestFullscreen){var n=this.el_[this.fsApi_.requestFullscreen](e);return n&&n.then(function(){return i.isFullscreen(!0)},function(){return i.isFullscreen(!1)}),n}this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()},t.exitFullscreen=function(){var t=this;if(this.fsApi_.requestFullscreen){var e=d[this.fsApi_.exitFullscreen]();return e&&e.then(function(){return t.isFullscreen(!1)}),e}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()},t.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=d.documentElement.style.overflow,ut(d,"keydown",this.boundFullWindowOnEscKey_),d.documentElement.style.overflow="hidden",k(d.body,"vjs-full-window"),this.trigger("enterFullWindow")},t.fullWindowOnEscKey=function(t){Ee.isEventKey(t,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},t.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,dt(d,"keydown",this.boundFullWindowOnEscKey_),d.documentElement.style.overflow=this.docOrigOverflow,x(d.body,"vjs-full-window"),this.trigger("exitFullWindow")},t.isInPictureInPicture=function(t){return void 0!==t?(this.isInPictureInPicture_=!!t,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},t.requestPictureInPicture=function(){if("pictureInPictureEnabled"in d)return this.techGet_("requestPictureInPicture")},t.exitPictureInPicture=function(){if("pictureInPictureEnabled"in d)return d.exitPictureInPicture()},t.handleKeyDown=function(t){var e=this.options_.userActions;if(e&&e.hotkeys){!function(t){var e=t.tagName.toLowerCase();if(t.isContentEditable)return!0;if("input"===e)return-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type);return-1!==["textarea"].indexOf(e)}(this.el_.ownerDocument.activeElement)&&("function"==typeof e.hotkeys?e.hotkeys.call(this,t):this.handleHotkeys(t))}},t.handleHotkeys=function(t){var e=this.options_.userActions?this.options_.userActions.hotkeys:{},i=e.fullscreenKey,n=void 0===i?function(t){return Ee.isEventKey(t,"f")}:i,r=e.muteKey,s=void 0===r?function(t){return Ee.isEventKey(t,"m")}:r,a=e.playPauseKey,o=void 0===a?function(t){return Ee.isEventKey(t,"k")||Ee.isEventKey(t,"Space")}:a;if(n.call(this,t)){t.preventDefault(),t.stopPropagation();var l=Mt.getComponent("FullscreenToggle");!1!==d[this.fsApi_.fullscreenEnabled]&&l.prototype.handleClick.call(this,t)}else if(s.call(this,t)){t.preventDefault(),t.stopPropagation(),Mt.getComponent("MuteToggle").prototype.handleClick.call(this,t)}else if(o.call(this,t)){t.preventDefault(),t.stopPropagation(),Mt.getComponent("PlayToggle").prototype.handleClick.call(this,t)}},t.canPlayType=function(t){for(var e,i=0,n=this.options_.techOrder;i<n.length;i++){var r=n[i],s=Hi.getTech(r);if(s=s||Mt.getComponent(r)){if(s.isSupported()&&(e=s.canPlayType(t)))return e}else h.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},t.selectSource=function(t){function e(t,i,n){var r;return t.some(function(e){return i.some(function(t){if(r=n(e,t))return!0})}),r}function i(t,e){var i=t[0];if(t[1].canPlaySource(e,r.options_[i.toLowerCase()]))return{source:e,tech:i}}var n,r=this,s=this.options_.techOrder.map(function(t){return[t,Hi.getTech(t)]}).filter(function(t){var e=t[0],i=t[1];return i?i.isSupported():(h.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.'),!1)});return(this.options_.sourceOrder?e(t,s,(n=i,function(t,e){return n(e,t)})):e(s,t,i))||!1},t.src=function(t){var r=this;if(void 0===t)return this.cache_.src||"";var s=function e(t){if(Array.isArray(t)){var i=[];t.forEach(function(t){t=e(t),Array.isArray(t)?i=i.concat(t):o(t)&&i.push(t)}),t=i}else t="string"==typeof t&&t.trim()?[en({src:t})]:o(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[en(t)]:[];return t}(t);s.length?(this.changingSrc_=!0,this.cache_.sources=s,this.updateSourceCaches_(s[0]),Vi(this,s[0],function(t,e){var i,n;if(r.middleware_=e,r.cache_.sources=s,r.updateSourceCaches_(t),r.src_(t))return 1<s.length?r.src(s.slice(1)):(r.changingSrc_=!1,r.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void r.triggerReady());i=e,n=r.tech_,i.forEach(function(t){return t.setTech&&t.setTech(n)})})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},t.src_=function(t){var e,i,n=this,r=this.selectSource([t]);return!r||(e=r.tech,i=this.techName_,Dt(e)!==Dt(i)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready(function(){n.changingSrc_=!1})):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1)},t.load=function(){this.techCall_("load")},t.reset=function(){var t=this,e=this.options_.Promise||y.Promise;this.paused()||!e?this.doReset_():Se(this.play().then(function(){return t.doReset_()}))},t.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Et(this)&&this.trigger("playerreset")},t.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},t.resetProgressBar_=function(){this.currentTime(0);var t=this.controlBar,e=t.durationDisplay,i=t.remainingTimeDisplay;e&&e.updateContent(),i&&i.updateContent()},t.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},t.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},t.currentSources=function(){var t=this.currentSource(),e=[];return 0!==Object.keys(t).length&&e.push(t),this.cache_.sources||e},t.currentSource=function(){return this.cache_.source||{}},t.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},t.currentType=function(){return this.currentSource()&&this.currentSource().type||""},t.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},t.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var e;"string"==typeof t&&/(any|play|muted)/.test(t)?(this.options_.autoplay=t,this.manualAutoplay_(t),e=!1):this.options_.autoplay=!!t,e=void 0===e?this.options_.autoplay:e,this.tech_&&this.techCall_("setAutoplay",e)},t.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},t.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},t.poster=function(t){if(void 0===t)return this.poster_;(t=t||"")!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},t.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},t.controls=function(t){if(void 0===t)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},t.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},t.error=function(t){if(void 0===t)return this.error_||null;if(this.options_.suppressNotSupportedError&&t&&4===t.code){var e=function(){this.error(t)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],e),void this.one("loadstart",function(){this.off(["click","touchstart"],e)})}if(null===t)return this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new be(t),this.addClass("vjs-error"),h.error("(CODE:"+this.error_.code+" "+be.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},t.reportUserActivity=function(){this.userActivity_=!0},t.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},t.listenForUserActivity_=function(){function t(){r(),this.clearInterval(e)}var e,i,n,r=mt(this,this.reportUserActivity);this.on("mousedown",function(){r(),this.clearInterval(e),e=this.setInterval(r,250)}),this.on("mousemove",function(t){t.screenX===i&&t.screenY===n||(i=t.screenX,n=t.screenY,r())}),this.on("mouseup",t),this.on("mouseleave",t);var s,a=this.getChild("controlBar");!a||ae||Gt||(a.on("mouseenter",function(t){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),a.on("mouseleave",function(t){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(s);var t=this.options_.inactivityTimeout;t<=0||(s=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},t))}},250)},t.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},t.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},t.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},t.addTextTrack=function(t,e,i){if(this.tech_)return this.tech_.addTextTrack(t,e,i)},t.addRemoteTextTrack=function(t,e){if(this.tech_)return this.tech_.addRemoteTextTrack(t,e)},t.removeRemoteTextTrack=function(t){void 0===t&&(t={});var e=t.track;if(e=e||t,this.tech_)return this.tech_.removeRemoteTextTrack(e)},t.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},t.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.language=function(t){if(void 0===t)return this.language_;this.language_=String(t).toLowerCase()},t.languages=function(){return Rt(c.prototype.options_.languages,this.languages_)},t.toJSON=function(){var t=Rt(this.options_),e=t.tracks;t.tracks=[];for(var i=0;i<e.length;i++){var n=e[i];(n=Rt(n)).player=void 0,t.tracks[i]=n}return t},t.createModal=function(t,e){var i=this;(e=e||{}).content=t||"";var n=new Pe(this,e);return this.addChild(n),n.on("dispose",function(){i.removeChild(n)}),n.open(),n},t.updateCurrentBreakpoint_=function(){if(this.responsive())for(var t=this.currentBreakpoint(),e=this.currentWidth(),i=0;i<Fr.length;i++){var n=Fr[i];if(e<=this.breakpoints_[n]){if(t===n)return;t&&this.removeClass($r[t]),this.addClass($r[n]),this.breakpoint_=n;break}}},t.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},t.breakpoints=function(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=f({},Hr,t),this.updateCurrentBreakpoint_()),f(this.breakpoints_)},t.responsive=function(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?((this.responsive_=t)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0},t.currentBreakpoint=function(){return this.breakpoint_},t.currentBreakpointClass=function(){return $r[this.breakpoint_]||""},t.loadMedia=function(t,e){var i=this;if(t&&"object"==typeof t){this.reset(),this.cache_.media=Rt(t);var n=this.cache_.media,r=n.artwork,s=n.poster,a=n.src,o=n.textTracks;!r&&s&&(this.cache_.media.artwork=[{src:s,type:Ji(s)}]),a&&this.src(a),s&&this.poster(s),Array.isArray(o)&&o.forEach(function(t){return i.addRemoteTextTrack(t,!1)}),this.ready(e)}},t.getMedia=function(){if(this.cache_.media)return Rt(this.cache_.media);var t=this.poster(),e={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(t){return{kind:t.kind,label:t.label,language:t.language,src:t.src}})};return t&&(e.poster=t,e.artwork=[{src:e.poster,type:Ji(e.poster)}]),e},c.getTagSettings=function(t){var e={sources:[],tracks:[]},i=P(t),n=i["data-setup"];if(C(t,"vjs-fill")&&(i.fill=!0),C(t,"vjs-fluid")&&(i.fluid=!0),null!==n){var r=Te(n||"{}"),s=r[0],a=r[1];s&&h.error(s),f(i,a)}if(f(e,i),t.hasChildNodes())for(var o=t.childNodes,l=0,c=o.length;l<c;l++){var u=o[l],d=u.nodeName.toLowerCase();"source"===d?e.sources.push(P(u)):"track"===d&&e.tracks.push(P(u))}return e},t.flexNotSupported_=function(){var t=d.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},c}(Mt);di.names.forEach(function(t){var e=di[t];zr.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),zr.players={};var qr=y.navigator;zr.prototype.options_={techOrder:Hi.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:qr&&(qr.languages&&qr.languages[0]||qr.userLanguage||qr.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(t){zr.prototype[t]=function(){return this.techGet_(t)}}),Ur.forEach(function(t){zr.prototype["handleTech"+Dt(t)+"_"]=function(){return this.trigger(t)}}),Mt.registerComponent("Player",zr);function Wr(t){return es.hasOwnProperty(t)}function Vr(t){return Wr(t)?es[t]:void 0}function Gr(t,e){t[ts]=t[ts]||{},t[ts][e]=!0}function Xr(t,e,i){var n=(i?"before":"")+"pluginsetup";t.trigger(n,e),t.trigger(n+":"+e.name,e)}function Yr(e,i){function n(){Xr(this,{name:e,plugin:i,instance:null},!0);var t=i.apply(this,arguments);return Gr(this,e),Xr(this,{name:e,plugin:i,instance:t}),t}return Object.keys(i).forEach(function(t){n[t]=i[t]}),n}function Kr(r,s){return s.prototype.name=r,function(){Xr(this,{name:r,plugin:s,instance:null},!0);for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=Zr(s,[this].concat(e));return this[r]=function(){return n},Xr(this,n.getEventHash()),n}}var Qr=e(function(i){function n(t,e){return i.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(t,e)}i.exports=n}),Zr=e(function(n){function r(t,e,i){return!function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()?n.exports=r=function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&Qr(r,i.prototype),r}:n.exports=r=Reflect.construct,r.apply(null,arguments)}n.exports=r}),Jr="plugin",ts="activePlugins_",es={},is=function(){function i(t){if(this.constructor===i)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,Pt(this),delete this.trigger,Ot(this,this.constructor.defaultState),Gr(t,this.name),this.dispose=mt(this,this.dispose),t.on("dispose",this.dispose)}var t=i.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(t){return void 0===t&&(t={}),t.name=this.name,t.plugin=this.constructor,t.instance=this,t},t.trigger=function(t,e){return void 0===e&&(e={}),ht(this.eventBusEl_,t,this.getEventHash(e))},t.handleStateChanged=function(){},t.dispose=function(){var t=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[ts][t]=!1,this.player=this.state=null,e[t]=Kr(t,es[t])},i.isBasic=function(t){var e="string"==typeof t?Vr(t):t;return"function"==typeof e&&!i.prototype.isPrototypeOf(e.prototype)},i.registerPlugin=function(t,e){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(Wr(t))h.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(zr.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof e)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof e+".");return es[t]=e,t!==Jr&&(i.isBasic(e)?zr.prototype[t]=Yr(t,e):zr.prototype[t]=Kr(t,e)),e},i.deregisterPlugin=function(t){if(t===Jr)throw new Error("Cannot de-register base plugin.");Wr(t)&&(delete es[t],delete zr.prototype[t])},i.getPlugins=function(t){var i;return void 0===t&&(t=Object.keys(es)),t.forEach(function(t){var e=Vr(t);e&&((i=i||{})[t]=e)}),i},i.getPluginVersion=function(t){var e=Vr(t);return e&&e.VERSION||""},i}();is.getPlugin=Vr,is.BASE_PLUGIN_NAME=Jr,is.registerPlugin(Jr,is),zr.prototype.usingPlugin=function(t){return!!this[ts]&&!0===this[ts][t]},zr.prototype.hasPlugin=function(t){return!!Wr(t)};var ns=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qr(t,e)},rs=function(t){return 0===t.indexOf("#")?t.slice(1):t};function ss(t,i,e){var n=ss.getPlayer(t);if(n)return i&&h.warn('Player "'+t+'" is already initialised. Options will not be applied.'),e&&n.ready(e),n;var r="string"==typeof t?W("#"+rs(t)):t;if(!v(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||h.warn("The element supplied is not included in the DOM"),i=i||{},ss.hooks("beforesetup").forEach(function(t){var e=t(r,Rt(i));o(e)&&!Array.isArray(e)?i=Rt(i,e):h.error("please return an object in beforesetup hooks")});var s=Mt.getComponent("Player");return n=new s(r,i,e),ss.hooks("setup").forEach(function(t){return t(n)}),n}if(ss.hooks_={},ss.hooks=function(t,e){return ss.hooks_[t]=ss.hooks_[t]||[],e&&(ss.hooks_[t]=ss.hooks_[t].concat(e)),ss.hooks_[t]},ss.hook=function(t,e){ss.hooks(t,e)},ss.hookOnce=function(i,t){ss.hooks(i,[].concat(t).map(function(e){return function t(){return ss.removeHook(i,t),e.apply(void 0,arguments)}}))},ss.removeHook=function(t,e){var i=ss.hooks(t).indexOf(e);return!(i<=-1)&&(ss.hooks_[t]=ss.hooks_[t].slice(),ss.hooks_[t].splice(i,1),!0)},!0!==y.VIDEOJS_NO_DYNAMIC_STYLE&&g()){var as=W(".vjs-styles-defaults");if(!as){as=Z("vjs-styles-defaults");var os=W("head");os&&os.insertBefore(as,os.firstChild),J(as,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}K(1,ss),ss.VERSION="7.7.5",ss.options=zr.prototype.options_,ss.getPlayers=function(){return zr.players},ss.getPlayer=function(t){var e,i=zr.players;if("string"==typeof t){var n=rs(t),r=i[n];if(r)return r;e=W("#"+n)}else e=t;if(v(e)){var s=e.player,a=e.playerId;if(s||i[a])return s||i[a]}},ss.getAllPlayers=function(){return Object.keys(zr.players).map(function(t){return zr.players[t]}).filter(Boolean)},ss.players=zr.players,ss.getComponent=Mt.getComponent,ss.registerComponent=function(t,e){Hi.isTech(e)&&h.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Mt.registerComponent.call(Mt,t,e)},ss.getTech=Hi.getTech,ss.registerTech=Hi.registerTech,ss.use=function(t,e){zi[t]=zi[t]||[],zi[t].push(e)},Object.defineProperty(ss,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(ss.middleware,"TERMINATOR",{value:Wi,writeable:!1,enumerable:!0}),ss.browser=le,ss.TOUCH_ENABLED=ne,ss.extend=function(t,e){void 0===e&&(e={});var i=function(){t.apply(this,arguments)},n={};for(var r in"object"==typeof e?(e.constructor!==Object.prototype.constructor&&(i=e.constructor),n=e):"function"==typeof e&&(i=e),ns(i,t),t&&(i.super_=t),n)n.hasOwnProperty(r)&&(i.prototype[r]=n[r]);return i},ss.mergeOptions=Rt,ss.bind=mt,ss.registerPlugin=is.registerPlugin,ss.deregisterPlugin=is.deregisterPlugin,ss.plugin=function(t,e){return h.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),is.registerPlugin(t,e)},ss.getPlugins=is.getPlugins,ss.getPlugin=is.getPlugin,ss.getPluginVersion=is.getPluginVersion,ss.addLanguage=function(t,e){var i;return t=(""+t).toLowerCase(),ss.options.languages=Rt(ss.options.languages,((i={})[t]=e,i)),ss.options.languages[t]},ss.log=h,ss.createLogger=p,ss.createTimeRange=ss.createTimeRanges=de,ss.formatTime=yn,ss.setFormatTime=function(t){vn=t},ss.resetFormatTime=function(){vn=gn},ss.parseUrl=Re,ss.isCrossOrigin=Ne,ss.EventTarget=yt,ss.on=ut,ss.one=pt,ss.off=dt,ss.trigger=ht,ss.xhr=Ze,ss.TextTrack=si,ss.AudioTrack=ai,ss.VideoTrack=oi,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){ss[t]=function(){return h.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),G[t].apply(null,arguments)}}),ss.computedStyle=n,ss.dom=G,ss.url=Xe,ss.defineLazyProperty=Dr;var ls=e(function(t,e){var i,u,n,r,d;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,u=/^([^\/?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,d={buildAbsoluteURL:function(t,e,i){if(i=i||{},t=t.trim(),!(e=e.trim())){if(!i.alwaysNormalize)return t;var n=d.parseURL(t);if(!n)throw new Error("Error trying to parse base URL.");return n.path=d.normalizePath(n.path),d.buildURLFromParts(n)}var r=d.parseURL(e);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return i.alwaysNormalize?(r.path=d.normalizePath(r.path),d.buildURLFromParts(r)):e;var s=d.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var a=u.exec(s.path);s.netLoc=a[1],s.path=a[2]}s.netLoc&&!s.path&&(s.path="/");var o={scheme:s.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(o.netLoc=s.netLoc,"/"!==r.path[0]))if(r.path){var l=s.path,c=l.substring(0,l.lastIndexOf("/")+1)+r.path;o.path=d.normalizePath(c)}else o.path=s.path,r.params||(o.params=s.params,r.query||(o.query=s.query));return null===o.path&&(o.path=i.alwaysNormalize?d.normalizePath(r.path):r.path),d.buildURLFromParts(o)},parseURL:function(t){var e=i.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(n,"");t.length!==(t=t.replace(r,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=d});function cs(){return(cs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function us(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function ds(t){for(var e,i=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},r=i.length;r--;)""!==i[r]&&((e=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),n[e[0]]=e[1]);return n}var hs=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(e);return this.listeners[t].splice(i,1),-1<i},e.trigger=function(t,e){var i,n,r,s=this.listeners[t];if(s)if(2===arguments.length)for(n=s.length,i=0;i<n;++i)s[i].call(this,e);else for(r=Array.prototype.slice.call(arguments,1),n=s.length,i=0;i<n;++i)s[i].apply(this,r)},e.dispose=function(){this.listeners={}},e.pipe=function(e){this.on("data",function(t){e.push(t)})},t}(),ps=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return us(t,e),t.prototype.push=function(t){var e;for(this.buffer+=t,e=this.buffer.indexOf("\n");-1<e;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},t}(hs),fs=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}us(t,e);var i=t.prototype;return i.push=function(n){var l,c,u=this;0!==(n=n.trim()).length&&("#"===n[0]?this.tagMappers.reduce(function(t,e){var i=e(n);return i===n?t:t.concat([i])},[n]).forEach(function(t){for(var e=0;e<u.customParsers.length;e++)if(u.customParsers[e].call(u,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),l=/^#EXTM3U/.exec(t))u.trigger("data",{type:"tag",tagType:"m3u"});else{if(l=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return c={type:"tag",tagType:"inf"},l[1]&&(c.duration=parseFloat(l[1])),l[2]&&(c.title=l[2]),void u.trigger("data",c);if(l=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return c={type:"tag",tagType:"targetduration"},l[1]&&(c.duration=parseInt(l[1],10)),void u.trigger("data",c);if(l=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return c={type:"tag",tagType:"totalduration"},l[1]&&(c.duration=parseInt(l[1],10)),void u.trigger("data",c);if(l=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return c={type:"tag",tagType:"version"},l[1]&&(c.version=parseInt(l[1],10)),void u.trigger("data",c);if(l=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return c={type:"tag",tagType:"media-sequence"},l[1]&&(c.number=parseInt(l[1],10)),void u.trigger("data",c);if(l=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return c={type:"tag",tagType:"discontinuity-sequence"},l[1]&&(c.number=parseInt(l[1],10)),void u.trigger("data",c);if(l=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return c={type:"tag",tagType:"playlist-type"},l[1]&&(c.playlistType=l[1]),void u.trigger("data",c);if(l=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return c={type:"tag",tagType:"byterange"},l[1]&&(c.length=parseInt(l[1],10)),l[2]&&(c.offset=parseInt(l[2],10)),void u.trigger("data",c);if(l=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return c={type:"tag",tagType:"allow-cache"},l[1]&&(c.allowed=!/NO/.test(l[1])),void u.trigger("data",c);if(l=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(c={type:"tag",tagType:"map"},l[1]){var i=ds(l[1]);if(i.URI&&(c.uri=i.URI),i.BYTERANGE){var n=i.BYTERANGE.split("@"),r=n[0],s=n[1];c.byterange={},r&&(c.byterange.length=parseInt(r,10)),s&&(c.byterange.offset=parseInt(s,10))}}u.trigger("data",c)}else if(l=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(c={type:"tag",tagType:"stream-inf"},l[1]){if(c.attributes=ds(l[1]),c.attributes.RESOLUTION){var a=c.attributes.RESOLUTION.split("x"),o={};a[0]&&(o.width=parseInt(a[0],10)),a[1]&&(o.height=parseInt(a[1],10)),c.attributes.RESOLUTION=o}c.attributes.BANDWIDTH&&(c.attributes.BANDWIDTH=parseInt(c.attributes.BANDWIDTH,10)),c.attributes["PROGRAM-ID"]&&(c.attributes["PROGRAM-ID"]=parseInt(c.attributes["PROGRAM-ID"],10))}u.trigger("data",c)}else{if(l=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return c={type:"tag",tagType:"media"},l[1]&&(c.attributes=ds(l[1])),void u.trigger("data",c);if(l=/^#EXT-X-ENDLIST/.exec(t))u.trigger("data",{type:"tag",tagType:"endlist"});else if(l=/^#EXT-X-DISCONTINUITY/.exec(t))u.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(l=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return c={type:"tag",tagType:"program-date-time"},l[1]&&(c.dateTimeString=l[1],c.dateTimeObject=new Date(l[1])),void u.trigger("data",c);if(l=/^#EXT-X-KEY:?(.*)$/.exec(t))return c={type:"tag",tagType:"key"},l[1]&&(c.attributes=ds(l[1]),c.attributes.IV&&("0x"===c.attributes.IV.substring(0,2).toLowerCase()&&(c.attributes.IV=c.attributes.IV.substring(2)),c.attributes.IV=c.attributes.IV.match(/.{8}/g),c.attributes.IV[0]=parseInt(c.attributes.IV[0],16),c.attributes.IV[1]=parseInt(c.attributes.IV[1],16),c.attributes.IV[2]=parseInt(c.attributes.IV[2],16),c.attributes.IV[3]=parseInt(c.attributes.IV[3],16),c.attributes.IV=new Uint32Array(c.attributes.IV))),void u.trigger("data",c);if(l=/^#EXT-X-START:?(.*)$/.exec(t))return c={type:"tag",tagType:"start"},l[1]&&(c.attributes=ds(l[1]),c.attributes["TIME-OFFSET"]=parseFloat(c.attributes["TIME-OFFSET"]),c.attributes.PRECISE=/YES/.test(c.attributes.PRECISE)),void u.trigger("data",c);if(l=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return c={type:"tag",tagType:"cue-out-cont"},l[1]?c.data=l[1]:c.data="",void u.trigger("data",c);if(l=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return c={type:"tag",tagType:"cue-out"},l[1]?c.data=l[1]:c.data="",void u.trigger("data",c);if(l=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return c={type:"tag",tagType:"cue-in"},l[1]?c.data=l[1]:c.data="",void u.trigger("data",c);u.trigger("data",{type:"tag",data:t.slice(4)})}}}else u.trigger("data",{type:"comment",text:t.slice(1)})}):this.trigger("data",{type:"uri",uri:n}))},i.addParser=function(t){var e=this,i=t.expression,n=t.customType,r=t.dataParser,s=t.segment;"function"!=typeof r&&(r=function(t){return t}),this.customParsers.push(function(t){if(i.exec(t))return e.trigger("data",{type:"custom",data:r(t),customType:n,segment:s}),!0})},i.addTagMapper=function(t){var e=t.expression,i=t.map;this.tagMappers.push(function(t){return e.test(t)?i(t):t})},t}(hs);function ms(t){return!!t&&"object"==typeof t}function gs(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.reduce(function(e,i){return Object.keys(i).forEach(function(t){Array.isArray(e[t])&&Array.isArray(i[t])?e[t]=e[t].concat(i[t]):ms(e[t])&&ms(i[t])?e[t]=gs(e[t],i[t]):e[t]=i[t]}),e},{})}function vs(t){return t.reduce(function(t,e){return t.concat(e)},[])}function ys(t){if(!t.length)return[];for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}var bs=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new ps,t.parseStream=new fs,t.lineStream.pipe(t.parseStream);var r,s,a=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t),o=[],l={},c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u=0;return t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},t.parseStream.on("data",function(e){var i,n;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&((l.byterange=t).length=e.length,"offset"in e||(this.trigger("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&((l.byterange=t).offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<e.duration&&(l.duration=e.duration),0===e.duration&&(l.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:function(t){for(var e=y.atob(t||""),i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}(e.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),s={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(s.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else s=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,u=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){r={},e.uri&&(r.uri=e.uri),e.byterange&&(r.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||c,e.attributes?(l.attributes||(l.attributes={}),cs(l.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||c,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var t=this.manifest.mediaGroups[e.attributes.TYPE];t[e.attributes["GROUP-ID"]]=t[e.attributes["GROUP-ID"]]||{},i=t[e.attributes["GROUP-ID"]],(n={default:/yes/i.test(e.attributes.DEFAULT)}).default?n.autoselect=!0:n.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(n.language=e.attributes.LANGUAGE),e.attributes.URI&&(n.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(n.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(n.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(n.forced=/yes/i.test(e.attributes.FORCED)),i[e.attributes.NAME]=n}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){u+=1,l.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),l.dateTimeString=e.dateTimeString,l.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){l.cueOut=e.data},"cue-out-cont":function(){l.cueOutCont=e.data},"cue-in":function(){l.cueIn=e.data}}[e.tagType]||function(){}).call(a)},uri:function(){l.uri=e.uri,o.push(l),!this.manifest.targetDuration||"duration"in l||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),l.duration=this.manifest.targetDuration),s&&(l.key=s),l.timeline=u,r&&(l.map=r),l={}},comment:function(){},custom:function(){e.segment?(l.custom=l.custom||{},l.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(a)}),t}us(t,e);var i=t.prototype;return i.push=function(t){this.lineStream.push(t)},i.end=function(){this.lineStream.push("\n")},i.addParser=function(t){this.parseStream.addParser(t)},i.addTagMapper=function(t){this.parseStream.addTagMapper(t)},t}(hs),_s="INVALID_NUMBER_OF_PERIOD",Ts="DASH_EMPTY_MANIFEST",ws="DASH_INVALID_XML",Ss="NO_BASE_URL",Cs="SEGMENT_TIME_UNSPECIFIED",ks="UNSUPPORTED_UTC_TIMING_SCHEME";function xs(t,e){return/^[a-z]+:/i.test(e)?e:(/\/\//i.test(t)||(t=Vs.buildAbsoluteURL(y.location.href,t)),Vs.buildAbsoluteURL(t,e))}function Es(t){var e=t.baseUrl,i=void 0===e?"":e,n=t.source,r=void 0===n?"":n,s=t.range,a=void 0===s?"":s,o=t.indexRange,l=void 0===o?"":o,c={uri:r,resolvedUri:xs(i||"",r)};if(a||l){var u=(a||l).split("-"),d=parseInt(u[0],10),h=parseInt(u[1],10);c.byterange={length:h-d+1,offset:d}}return c}function As(t){var o,e=t.type,i=void 0===e?"static":e,n=t.duration,r=t.timescale,s=void 0===r?1:r,a=t.sourceDuration,l=Gs[i](t),c=function(t,e){for(var i=[],n=t;n<e;n++)i.push(n);return i}(l.start,l.end).map((o=t,function(t,e){var i=o.duration,n=o.timescale,r=void 0===n?1:n,s=o.periodIndex,a=o.startNumber;return{number:(void 0===a?1:a)+t,duration:i/r,timeline:s,time:e*i}}));if("static"===i){var u=c.length-1;c[u].duration=a-n/s*u}return c}function Ps(t){var e=t.baseUrl,i=t.initialization,n=void 0===i?{}:i,r=t.sourceDuration,s=t.timescale,a=void 0===s?1:s,o=t.indexRange,l=void 0===o?"":o,c=t.duration;if(!e)throw new Error(Ss);var u=Es({baseUrl:e,source:n.sourceURL,range:n.range}),d=Es({baseUrl:e,source:e,indexRange:l});if(d.map=u,c){var h=As(t);h.length&&(d.duration=h[0].duration,d.timeline=h[0].timeline)}else r&&(d.duration=r/a,d.timeline=0);return d.number=0,[d]}function Is(t,e,i){for(var n=t.sidx.map?t.sidx.map:null,r=t.sidx.duration,s=t.timeline||0,a=t.sidx.byterange,o=a.offset+a.length,l=e.timescale,c=e.references.filter(function(t){return 1!==t.referenceType}),u=[],d=o+e.firstOffset,h=0;h<c.length;h++){var p=e.references[h],f=p.referencedSize,m=p.subsegmentDuration,g=Ps({baseUrl:i,timescale:l,timeline:s,periodIndex:s,duration:m,sourceDuration:r,indexRange:d+"-"+(d+f-1)})[0];n&&(g.map=n),u.push(g),d+=f}return t.segments=u,t}function Os(t){var e;return(e=t.reduce(function(t,e){var i,n=e.attributes.id+(e.attributes.lang||"");t[n]?(e.segments[0]&&(e.segments[0].discontinuity=!0),(i=t[n].segments).push.apply(i,e.segments),e.attributes.contentProtection&&(t[n].attributes.contentProtection=e.attributes.contentProtection)):t[n]=e;return t},{}),Object.keys(e).map(function(t){return e[t]})).map(function(t){var e,n;return t.discontinuityStarts=(e=t.segments,n="discontinuity",e.reduce(function(t,e,i){return e[n]&&t.push(i),t},[])),t})}function Ls(t,e){if(void 0===e&&(e={}),!Object.keys(e).length)return t;for(var i in t){var n=t[i];if(n.sidx){var r=n.sidx.uri+"-"+(a=n.sidx.byterange,o=a.offset+a.length-1,a.offset+"-"+o),s=e[r]&&e[r].sidx;n.sidx&&s&&Is(n,s,n.sidx.resolvedUri)}}var a,o;return t}function Ds(t,h){var p;void 0===h&&(h={});var e=t.reduce(function(t,e){var i,n,r,s,a,o,l=e.attributes.role&&e.attributes.role.value||"",c=e.attributes.lang||"",u="main";if(c){var d=l?" ("+l+")":"";u=e.attributes.lang+d}return t[u]&&t[u].playlists[0].attributes.BANDWIDTH>e.attributes.bandwidth||(t[u]={language:c,autoselect:!0,default:"main"===l,playlists:Ls([(r=(i=e).attributes,s=i.segments,a=i.sidx,o={attributes:((n={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs})["PROGRAM-ID"]=1,n),uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:s,mediaSequence:s.length?s[0].number:1},r.contentProtection&&(o.contentProtection=r.contentProtection),a&&(o.sidx=a),o)],h),uri:""},void 0===p&&"main"===l&&((p=e).default=!0)),t},{});return p||(e[Object.keys(e)[0]].default=!0),e}function Rs(t,o){return void 0===o&&(o={}),t.reduce(function(t,e){var i,n,r,s,a=e.attributes.lang||"text";return t[a]||(t[a]={language:a,default:!1,autoselect:!1,playlists:Ls([(r=(i=e).attributes,void 0===(s=i.segments)&&(s=[{uri:r.baseUrl,timeline:r.periodIndex,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration),{attributes:((n={NAME:r.id,BANDWIDTH:r.bandwidth})["PROGRAM-ID"]=1,n),uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:r.baseUrl||"",targetDuration:r.duration,segments:s,mediaSequence:s.length?s[0].number:1})],o),uri:""}),t},{})}function Ms(t){var e,i=t.attributes,n=t.segments,r=t.sidx,s={attributes:((e={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth})["PROGRAM-ID"]=1,e),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};return i.contentProtection&&(s.contentProtection=i.contentProtection),r&&(s.sidx=r),s}function Bs(t,e){for(var i,n,r,s,a,o,l,c,u,d,h,p,f=t.type,m=void 0===f?"static":f,g=t.minimumUpdatePeriod,v=void 0===g?0:g,y=t.media,b=void 0===y?"":y,_=t.sourceDuration,T=t.timescale,w=void 0===T?1:T,S=t.startNumber,C=void 0===S?1:S,k=t.periodIndex,x=[],E=-1,A=0;A<e.length;A++){var P=e[A],I=P.d,O=P.r||0,L=P.t||0;E<0&&(E=L),L&&E<L&&(E=L);var D=void 0;if(O<0){var R=A+1;D=R===e.length?"dynamic"===m&&0<v&&0<b.indexOf("$Number$")?(n=E,r=I,0,s=(i=t).NOW,a=i.clientOffset,o=i.availabilityStartTime,l=i.timescale,c=void 0===l?1:l,u=i.start,d=void 0===u?0:u,h=i.minimumUpdatePeriod,p=(s+a)/1e3+(void 0===h?0:h)-(o+d),Math.ceil((p*c-n)/r)):(_*w-E)/I:(e[R].t-E)/I}else D=O+1;for(var M=C+x.length+D,B=C+x.length;B<M;)x.push({number:B,duration:I/w,time:E,timeline:k}),E+=I,B++}return x}function Ns(t,e){return t.replace(Xs,(s=e,function(t,e,i,n){if("$$"===t)return"$";if(void 0===s[e])return t;var r=""+s[e];return"RepresentationID"===e||(n=i?parseInt(n,10):1)<=r.length?r:new Array(n-r.length+1).join("0")+r}));var s}function Us(i,t){var e,n,r={RepresentationID:i.id,Bandwidth:i.bandwidth||0},s=i.initialization,a=void 0===s?{sourceURL:"",range:""}:s,o=Es({baseUrl:i.baseUrl,source:Ns(a.sourceURL,r),range:a.range});return(n=t,(e=i).duration||n?e.duration?As(e):Bs(e,n):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]).map(function(t){r.Number=t.number,r.Time=t.time;var e=Ns(i.media||"",r);return{uri:e,timeline:t.timeline,duration:t.duration,resolvedUri:xs(i.baseUrl||"",e),map:o,number:t.number}})}function js(l,t){var e=l.duration,i=l.segmentUrls,n=void 0===i?[]:i;if(!e&&!t||e&&t)throw new Error(Cs);var r,s=n.map(function(t){return i=t,n=(e=l).baseUrl,r=e.initialization,a=Es({baseUrl:n,source:(s=void 0===r?{}:r).sourceURL,range:s.range}),(o=Es({baseUrl:n,source:i.media,range:i.mediaRange})).map=a,o;var e,i,n,r,s,a,o});return e&&(r=As(l)),t&&(r=Bs(l,t)),r.map(function(t,e){if(s[e]){var i=s[e];return i.timeline=t.timeline,i.duration=t.duration,i.number=t.number,i}}).filter(function(t){return t})}function Fs(t){var e,i,n=t.attributes,r=t.segmentInfo;r.template?(i=Us,e=gs(n,r.template)):r.base?(i=Ps,e=gs(n,r.base)):r.list&&(i=js,e=gs(n,r.list));var s={attributes:n};if(!i)return s;var a=i(e,r.timeline);if(e.duration){var o=e.duration,l=e.timescale,c=void 0===l?1:l;e.duration=o/c}else a.length?e.duration=a.reduce(function(t,e){return Math.max(t,Math.ceil(e.duration))},0):e.duration=0;return s.attributes=e,s.segments=a,r.base&&e.indexRange&&(s.sidx=a[0],s.segments=[]),s}function $s(t,e){return ys(t.childNodes).filter(function(t){return t.tagName===e})}function Hs(t){return t.textContent.trim()}function zs(t){var e=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!e)return 0;var i=e.slice(1),n=i[0],r=i[1],s=i[2],a=i[3],o=i[4],l=i[5];return 31536e3*parseFloat(n||0)+2592e3*parseFloat(r||0)+86400*parseFloat(s||0)+3600*parseFloat(a||0)+60*parseFloat(o||0)+parseFloat(l||0)}function qs(t){return t&&t.attributes?ys(t.attributes).reduce(function(t,e){var i=Ys[e.name]||Ys.DEFAULT;return t[e.name]=i(e.value),t},{}):{}}var Ws,Vs=(function(t){var i,u,e,n,d;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,u=/^([^\/?#]*)(.*)$/,e=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,d={buildAbsoluteURL:function(t,e,i){if(i=i||{},t=t.trim(),!(e=e.trim())){if(!i.alwaysNormalize)return t;var n=d.parseURL(t);if(!n)throw new Error("Error trying to parse base URL.");return n.path=d.normalizePath(n.path),d.buildURLFromParts(n)}var r=d.parseURL(e);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return i.alwaysNormalize?(r.path=d.normalizePath(r.path),d.buildURLFromParts(r)):e;var s=d.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var a=u.exec(s.path);s.netLoc=a[1],s.path=a[2]}s.netLoc&&!s.path&&(s.path="/");var o={scheme:s.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(o.netLoc=s.netLoc,"/"!==r.path[0]))if(r.path){var l=s.path,c=l.substring(0,l.lastIndexOf("/")+1)+r.path;o.path=d.normalizePath(c)}else o.path=s.path,r.params||(o.params=s.params,r.query||(o.query=s.query));return null===o.path&&(o.path=i.alwaysNormalize?d.normalizePath(r.path):r.path),d.buildURLFromParts(o)},parseURL:function(t){var e=i.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(e,"");t.length!==(t=t.replace(n,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=d}(Ws={exports:{}}),Ws.exports),Gs={static:function(t){var e=t.duration,i=t.timescale,n=void 0===i?1:i,r=t.sourceDuration;return{start:0,end:Math.ceil(r/(e/n))}},dynamic:function(t){var e=t.NOW,i=t.clientOffset,n=t.availabilityStartTime,r=t.timescale,s=void 0===r?1:r,a=t.duration,o=t.start,l=void 0===o?0:o,c=t.minimumUpdatePeriod,u=void 0===c?0:c,d=t.timeShiftBufferDepth,h=void 0===d?1/0:d,p=(e+i)/1e3,f=n+l,m=p+u-f,g=Math.ceil(m*s/a),v=Math.floor((p-f-h)*s/a),y=Math.floor((p-f)*s/a);return{start:Math.max(0,v),end:Math.min(g,y)}}},Xs=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Ys={mediaPresentationDuration:function(t){return zs(t)},availabilityStartTime:function(t){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e=t)&&(e+="Z"),Date.parse(e)/1e3;var e},minimumUpdatePeriod:function(t){return zs(t)},timeShiftBufferDepth:function(t){return zs(t)},start:function(t){return zs(t)},width:function(t){return parseInt(t,10)},height:function(t){return parseInt(t,10)},bandwidth:function(t){return parseInt(t,10)},startNumber:function(t){return parseInt(t,10)},timescale:function(t){return parseInt(t,10)},duration:function(t){var e=parseInt(t,10);return isNaN(e)?zs(t):e},d:function(t){return parseInt(t,10)},t:function(t){return parseInt(t,10)},r:function(t){return parseInt(t,10)},DEFAULT:function(t){return t}};function Ks(t,i){return i.length?vs(t.map(function(e){return i.map(function(t){return xs(e,Hs(t))})})):t}function Qs(t){var e=$s(t,"SegmentTemplate")[0],i=$s(t,"SegmentList")[0],n=i&&$s(i,"SegmentURL").map(function(t){return gs({tag:"SegmentURL"},qs(t))}),r=$s(t,"SegmentBase")[0],s=i||e,a=s&&$s(s,"SegmentTimeline")[0],o=i||r||e,l=o&&$s(o,"Initialization")[0],c=e&&qs(e);c&&l?c.initialization=l&&qs(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var u={template:c,timeline:a&&$s(a,"S").map(function(t){return qs(t)}),list:i&&gs(qs(i),{segmentUrls:n,initialization:qs(l)}),base:r&&gs(qs(r),{initialization:qs(l)})};return Object.keys(u).forEach(function(t){u[t]||delete u[t]}),u}function Zs(t){return t.reduce(function(t,e){var i=qs(e),n=fa[i.schemeIdUri];if(n){t[n]={attributes:i};var r=$s(e,"cenc:pssh")[0];if(r){var s=Hs(r),a=s&&function(t){for(var e=y.atob(t),i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}(s);t[n].pssh=a}}return t},{})}function Js(p,f,m){return function(t){var e=qs(t),i=Ks(f,$s(t,"BaseURL")),n=$s(t,"Role")[0],r={role:qs(n)},s=gs(p,e,r),a=Zs($s(t,"ContentProtection"));Object.keys(a).length&&(s=gs(s,{contentProtection:a}));var o,l,c,u=Qs(t),d=$s(t,"Representation"),h=gs(m,u);return vs(d.map((o=s,l=i,c=h,function(t){var e=$s(t,"BaseURL"),i=Ks(l,e),n=gs(o,qs(t)),r=Qs(t);return i.map(function(t){return{segmentInfo:gs(c,r),attributes:gs(n,{baseUrl:t})}})})))}}function ta(t,e){void 0===e&&(e={});var i=e,n=i.manifestUri,r=void 0===n?"":n,s=i.NOW,a=void 0===s?Date.now():s,o=i.clientOffset,l=void 0===o?0:o,c=$s(t,"Period");if(!c.length)throw new Error(_s);var u,d,h=qs(t),p=Ks([r],$s(t,"BaseURL"));return h.sourceDuration=h.mediaPresentationDuration||0,h.NOW=a,h.clientOffset=l,vs(c.map((u=h,d=p,function(t,e){var i=Ks(d,$s(t,"BaseURL")),n=qs(t),r=parseInt(n.id,10),s=y.isNaN(r)?e:r,a=gs(u,{periodIndex:s}),o=$s(t,"AdaptationSet"),l=Qs(t);return vs(o.map(Js(a,i,l)))})))}function ea(t){if(""===t)throw new Error(Ts);var e=(new y.DOMParser).parseFromString(t,"application/xml"),i=e&&"MPD"===e.documentElement.tagName?e.documentElement:null;if(!i||i&&0<i.getElementsByTagName("parsererror").length)throw new Error(ws);return i}function ia(t,e){return void 0===e&&(e={}),function(t,e){var i;if(void 0===e&&(e={}),!t.length)return{};var n=t[0].attributes,r=n.sourceDuration,s=n.minimumUpdatePeriod,a=void 0===s?0:s,o=Os(t.filter(function(t){var e=t.attributes;return"video/mp4"===e.mimeType||"video"===e.contentType})).map(Ms),l=Os(t.filter(function(t){var e=t.attributes;return"audio/mp4"===e.mimeType||"audio"===e.contentType})),c=t.filter(function(t){var e=t.attributes;return"text/vtt"===e.mimeType||"text"===e.contentType}),u={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:((i={AUDIO:{},VIDEO:{}})["CLOSED-CAPTIONS"]={},i.SUBTITLES={},i),uri:"",duration:r,playlists:Ls(o,e),minimumUpdatePeriod:1e3*a};return l.length&&(u.mediaGroups.AUDIO.audio=Ds(l,e)),c.length&&(u.mediaGroups.SUBTITLES.subs=Rs(c,e)),u}(ta(ea(t),e).map(Fs),e.sidxMapping)}function na(t){return function(t){var e=$s(t,"UTCTiming")[0];if(!e)return null;var i=qs(e);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(ks)}return i}(ea(t))}function ra(t){return new Date(1e3*t-20828448e5)}function sa(t){return{isLeading:(12&t[0])>>>2,dependsOn:3&t[0],isDependedOn:(192&t[1])>>>6,hasRedundancy:(48&t[1])>>>4,paddingValue:(14&t[1])>>>1,isNonSyncSample:1&t[1],degradationPriority:t[2]<<8|t[3]}}function aa(t){var e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),e+=String.fromCharCode(t[2]),e+=String.fromCharCode(t[3])}var oa,la,ca,ua,da,ha,pa,fa={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},ma=function(t){return t>>>0},ga=function(t){return("00"+t.toString(16)).slice(-2)},va=ma,ya={avc1:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{dataReferenceIndex:e.getUint16(6),width:e.getUint16(24),height:e.getUint16(26),horizresolution:e.getUint16(28)+e.getUint16(30)/16,vertresolution:e.getUint16(32)+e.getUint16(34)/16,frameCount:e.getUint16(40),depth:e.getUint16(74),config:oa(t.subarray(78,t.byteLength))}},avcC:function(t){var e,i,n,r,s=new DataView(t.buffer,t.byteOffset,t.byteLength),a={configurationVersion:t[0],avcProfileIndication:t[1],profileCompatibility:t[2],avcLevelIndication:t[3],lengthSizeMinusOne:3&t[4],sps:[],pps:[]},o=31&t[5];for(n=6,r=0;r<o;r++)i=s.getUint16(n),n+=2,a.sps.push(new Uint8Array(t.subarray(n,n+i))),n+=i;for(e=t[n],n++,r=0;r<e;r++)i=s.getUint16(n),n+=2,a.pps.push(new Uint8Array(t.subarray(n,n+i))),n+=i;return a},btrt:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{bufferSizeDB:e.getUint32(0),maxBitrate:e.getUint32(4),avgBitrate:e.getUint32(8)}},esds:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),esId:t[6]<<8|t[7],streamPriority:31&t[8],decoderConfig:{objectProfileIndication:t[11],streamType:t[12]>>>2&63,bufferSize:t[13]<<16|t[14]<<8|t[15],maxBitrate:t[16]<<24|t[17]<<16|t[18]<<8|t[19],avgBitrate:t[20]<<24|t[21]<<16|t[22]<<8|t[23],decoderConfigDescriptor:{tag:t[24],length:t[25],audioObjectType:t[26]>>>3&31,samplingFrequencyIndex:(7&t[26])<<1|t[27]>>>7&1,channelConfiguration:t[27]>>>3&15}}}},ftyp:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i={majorBrand:aa(t.subarray(0,4)),minorVersion:e.getUint32(4),compatibleBrands:[]},n=8;n<t.byteLength;)i.compatibleBrands.push(aa(t.subarray(n,n+4))),n+=4;return i},dinf:function(t){return{boxes:oa(t)}},dref:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),dataReferences:oa(t.subarray(8))}},hdlr:function(t){var e={version:new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0),flags:new Uint8Array(t.subarray(1,4)),handlerType:aa(t.subarray(8,12)),name:""},i=8;for(i=24;i<t.byteLength;i++){if(0===t[i]){i++;break}e.name+=String.fromCharCode(t[i])}return e.name=decodeURIComponent(escape(e.name)),e},mdat:function(t){return{byteLength:t.byteLength,nals:function(t){var e,i,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r=[];for(e=0;e+4<t.length;e+=i)if(i=n.getUint32(e),e+=4,i<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&t[e]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+t[e]&31)}return r}(t)}},mdhd:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,r={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),language:""};return 1===r.version?(n+=4,r.creationTime=ra(i.getUint32(n)),n+=8,r.modificationTime=ra(i.getUint32(n)),n+=4,r.timescale=i.getUint32(n),n+=8):(r.creationTime=ra(i.getUint32(n)),n+=4,r.modificationTime=ra(i.getUint32(n)),n+=4,r.timescale=i.getUint32(n),n+=4),r.duration=i.getUint32(n),n+=4,e=i.getUint16(n),r.language+=String.fromCharCode(96+(e>>10)),r.language+=String.fromCharCode(96+((992&e)>>5)),r.language+=String.fromCharCode(96+(31&e)),r},mdia:function(t){return{boxes:oa(t)}},mfhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sequenceNumber:t[4]<<24|t[5]<<16|t[6]<<8|t[7]}},minf:function(t){return{boxes:oa(t)}},mp4a:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i={dataReferenceIndex:e.getUint16(6),channelcount:e.getUint16(16),samplesize:e.getUint16(18),samplerate:e.getUint16(24)+e.getUint16(26)/65536};return 28<t.byteLength&&(i.streamDescriptor=oa(t.subarray(28))[0]),i},moof:function(t){return{boxes:oa(t)}},moov:function(t){return{boxes:oa(t)}},mvex:function(t){return{boxes:oa(t)}},mvhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i=4,n={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===n.version?(i+=4,n.creationTime=ra(e.getUint32(i)),i+=8,n.modificationTime=ra(e.getUint32(i)),i+=4,n.timescale=e.getUint32(i),i+=8):(n.creationTime=ra(e.getUint32(i)),i+=4,n.modificationTime=ra(e.getUint32(i)),i+=4,n.timescale=e.getUint32(i),i+=4),n.duration=e.getUint32(i),i+=4,n.rate=e.getUint16(i)+e.getUint16(i+2)/16,i+=4,n.volume=e.getUint8(i)+e.getUint8(i+1)/8,i+=2,i+=2,i+=8,n.matrix=new Uint32Array(t.subarray(i,i+36)),i+=36,i+=24,n.nextTrackId=e.getUint32(i),n},pdin:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),rate:e.getUint32(4),initialDelay:e.getUint32(8)}},sdtp:function(t){var e,i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]};for(e=4;e<t.byteLength;e++)i.samples.push({dependsOn:(48&t[e])>>4,isDependedOn:(12&t[e])>>2,hasRedundancy:3&t[e]});return i},sidx:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:i.getUint32(4),timescale:i.getUint32(8),earliestPresentationTime:i.getUint32(12),firstOffset:i.getUint32(16)},r=i.getUint16(22);for(e=24;r;e+=12,r--)n.references.push({referenceType:(128&t[e])>>>7,referencedSize:2147483647&i.getUint32(e),subsegmentDuration:i.getUint32(e+4),startsWithSap:!!(128&t[e+8]),sapType:(112&t[e+8])>>>4,sapDeltaTime:268435455&i.getUint32(e+8)});return n},smhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),balance:t[4]+t[5]/256}},stbl:function(t){return{boxes:oa(t)}},stco:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),chunkOffsets:[]},r=i.getUint32(4);for(e=8;r;e+=4,r--)n.chunkOffsets.push(i.getUint32(e));return n},stsc:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n=i.getUint32(4),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleToChunks:[]};for(e=8;n;e+=12,n--)r.sampleToChunks.push({firstChunk:i.getUint32(e),samplesPerChunk:i.getUint32(e+4),sampleDescriptionIndex:i.getUint32(e+8)});return r},stsd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleDescriptions:oa(t.subarray(8))}},stsz:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleSize:i.getUint32(4),entries:[]};for(e=12;e<t.byteLength;e+=4)n.entries.push(i.getUint32(e));return n},stts:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),timeToSamples:[]},r=i.getUint32(4);for(e=8;r;e+=8,r--)n.timeToSamples.push({sampleCount:i.getUint32(e),sampleDelta:i.getUint32(e+4)});return n},styp:function(t){return ya.ftyp(t)},tfdt:function(t){var e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:va(t[4]<<24|t[5]<<16|t[6]<<8|t[7])};return 1===e.version&&(e.baseMediaDecodeTime*=Math.pow(2,32),e.baseMediaDecodeTime+=va(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),e},tfhd:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:i.getUint32(4)},r=1&n.flags[2],s=2&n.flags[2],a=8&n.flags[2],o=16&n.flags[2],l=32&n.flags[2],c=65536&n.flags[0],u=131072&n.flags[0];return e=8,r&&(e+=4,n.baseDataOffset=i.getUint32(12),e+=4),s&&(n.sampleDescriptionIndex=i.getUint32(e),e+=4),a&&(n.defaultSampleDuration=i.getUint32(e),e+=4),o&&(n.defaultSampleSize=i.getUint32(e),e+=4),l&&(n.defaultSampleFlags=i.getUint32(e)),c&&(n.durationIsEmpty=!0),!r&&u&&(n.baseDataOffsetIsMoof=!0),n},tkhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i=4,n={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===n.version?(i+=4,n.creationTime=ra(e.getUint32(i)),i+=8,n.modificationTime=ra(e.getUint32(i)),i+=4,n.trackId=e.getUint32(i),i+=4,i+=8):(n.creationTime=ra(e.getUint32(i)),i+=4,n.modificationTime=ra(e.getUint32(i)),i+=4,n.trackId=e.getUint32(i),i+=4,i+=4),n.duration=e.getUint32(i),i+=4,i+=8,n.layer=e.getUint16(i),i+=2,n.alternateGroup=e.getUint16(i),i+=2,n.volume=e.getUint8(i)+e.getUint8(i+1)/8,i+=2,i+=2,n.matrix=new Uint32Array(t.subarray(i,i+36)),i+=36,n.width=e.getUint16(i)+e.getUint16(i+2)/16,i+=4,n.height=e.getUint16(i)+e.getUint16(i+2)/16,n},traf:function(t){return{boxes:oa(t)}},trak:function(t){return{boxes:oa(t)}},trex:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:e.getUint32(4),defaultSampleDescriptionIndex:e.getUint32(8),defaultSampleDuration:e.getUint32(12),defaultSampleSize:e.getUint32(16),sampleDependsOn:3&t[20],sampleIsDependedOn:(192&t[21])>>6,sampleHasRedundancy:(48&t[21])>>4,samplePaddingValue:(14&t[21])>>1,sampleIsDifferenceSample:!!(1&t[21]),sampleDegradationPriority:e.getUint16(22)}},trun:function(t){var e,i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},n=new DataView(t.buffer,t.byteOffset,t.byteLength),r=1&i.flags[2],s=4&i.flags[2],a=1&i.flags[1],o=2&i.flags[1],l=4&i.flags[1],c=8&i.flags[1],u=n.getUint32(4),d=8;for(r&&(i.dataOffset=n.getInt32(d),d+=4),s&&u&&(e={flags:sa(t.subarray(d,d+4))},d+=4,a&&(e.duration=n.getUint32(d),d+=4),o&&(e.size=n.getUint32(d),d+=4),c&&(e.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(e),u--);u--;)e={},a&&(e.duration=n.getUint32(d),d+=4),o&&(e.size=n.getUint32(d),d+=4),l&&(e.flags=sa(t.subarray(d,d+4)),d+=4),c&&(e.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(e);return i},"url ":function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4))}},vmhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),graphicsmode:e.getUint16(4),opcolor:new Uint16Array([e.getUint16(6),e.getUint16(8),e.getUint16(10)])}}},ba={inspect:oa=function(t){for(var e,i,n,r,s,a=0,o=[],l=new ArrayBuffer(t.length),c=new Uint8Array(l),u=0;u<t.length;++u)c[u]=t[u];for(e=new DataView(l);a<t.byteLength;)i=e.getUint32(a),n=aa(t.subarray(a+4,a+8)),r=1<i?a+i:t.byteLength,(s=(ya[n]||function(t){return{data:t}})(t.subarray(a+8,r))).size=i,s.type=n,o.push(s),a=r;return o},textify:la=function(t,e){var s;return e=e||0,s=new Array(2*e+1).join(" "),t.map(function(r,t){return s+r.type+"\n"+Object.keys(r).filter(function(t){return"type"!==t&&"boxes"!==t}).map(function(t){var e=s+"  "+t+": ",i=r[t];if(i instanceof Uint8Array||i instanceof Uint32Array){var n=Array.prototype.slice.call(new Uint8Array(i.buffer,i.byteOffset,i.byteLength)).map(function(t){return" "+("00"+t.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return n?1===n.length?e+"<"+n.join("").slice(1)+">":e+"<\n"+n.map(function(t){return s+"  "+t}).join("\n")+"\n"+s+"  >":e+"<>"}return e+JSON.stringify(i,null,2).split("\n").map(function(t,e){return 0===e?t:s+"  "+t}).join("\n")}).join("\n")+(r.boxes?"\n"+la(r.boxes,e+1):"")}).join("\n")},parseType:aa,findBox:function t(e,i){var n,r,s,a,o,l=[];if(!i.length)return null;for(n=0;n<e.byteLength;)r=va(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),s=aa(e.subarray(n+4,n+8)),a=1<r?n+r:e.byteLength,s===i[0]&&(1===i.length?l.push(e.subarray(n+8,a)):(o=t(e.subarray(n+8,a),i.slice(1))).length&&(l=l.concat(o))),n=a;return l},parseTraf:ya.traf,parseTfdt:ya.tfdt,parseHdlr:ya.hdlr,parseTfhd:ya.tfhd,parseTrun:ya.trun,parseSidx:ya.sidx},_a=ma,Ta=ga;ca=function(t){return ba.findBox(t,["moov","trak"]).reduce(function(t,e){var i,n,r,s,a;return(i=ba.findBox(e,["tkhd"])[0])?(n=i[0],s=_a(i[r=0===n?12:20]<<24|i[r+1]<<16|i[r+2]<<8|i[r+3]),(a=ba.findBox(e,["mdia","mdhd"])[0])?(r=0===(n=a[0])?12:20,t[s]=_a(a[r]<<24|a[r+1]<<16|a[r+2]<<8|a[r+3]),t):null):null},{})},ua=function(r,t){var e,i,n;return e=ba.findBox(t,["moof","traf"]),i=[].concat.apply([],e.map(function(n){return ba.findBox(n,["tfhd"]).map(function(t){var e,i;return e=_a(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),i=r[e]||9e4,(ba.findBox(n,["tfdt"]).map(function(t){var e,i;return e=t[0],i=_a(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),1===e&&(i*=Math.pow(2,32),i+=_a(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),i})[0]||1/0)/i})})),n=Math.min.apply(null,i),isFinite(n)?n:0},da=function(t,e){var i,n=ba.findBox(e,["moof","traf"]),r=0,s=0;if(n&&n.length)for(var a=ba.parseTraf(n[0]),o=0;o<a.boxes.length;o++)"tfhd"===a.boxes[o].type?i=a.boxes[o].trackId:"tfdt"===a.boxes[o].type?r=a.boxes[o].baseMediaDecodeTime:"trun"===a.boxes[o].type&&a.boxes[o].samples.length&&(s=a.boxes[o].samples[0].compositionTimeOffset||0);return(r+s)/(t[i]||9e4)},ha=function(t){var e=ba.findBox(t,["moov","trak"]),o=[];return e.forEach(function(t){var e=ba.findBox(t,["mdia","hdlr"]),a=ba.findBox(t,["tkhd"]);e.forEach(function(t,e){var i,n,r=ba.parseType(t.subarray(8,12)),s=a[e];"vide"===r&&(n=0===(i=new DataView(s.buffer,s.byteOffset,s.byteLength)).getUint8(0)?i.getUint32(12):i.getUint32(20),o.push(n))})}),o},pa=function(t){var e=ba.findBox(t,["moov","trak"]),p=[];return e.forEach(function(t){var e,i,n={},r=ba.findBox(t,["tkhd"])[0];r&&(i=(e=new DataView(r.buffer,r.byteOffset,r.byteLength)).getUint8(0),n.id=0===i?e.getUint32(12):e.getUint32(20));var s=ba.findBox(t,["mdia","hdlr"])[0];if(s){var a=ba.parseType(s.subarray(8,12));n.type="vide"===a?"video":"soun"===a?"audio":a}var o=ba.findBox(t,["mdia","minf","stbl","stsd"])[0];if(o){var l=o.subarray(8);n.codec=ba.parseType(l.subarray(4,8));var c,u=ba.findBox(l,[n.codec])[0];u&&(/^[a-z]vc[1-9]$/i.test(n.codec)?(c=u.subarray(78),"avcC"===ba.parseType(c.subarray(4,8))&&11<c.length?(n.codec+=".",n.codec+=Ta(c[9]),n.codec+=Ta(c[10]),n.codec+=Ta(c[11])):n.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(n.codec)&&(c=u.subarray(28),"esds"===ba.parseType(c.subarray(4,8))&&20<c.length&&0!==c[19]?(n.codec+="."+Ta(c[19]),n.codec+="."+Ta(c[20]>>>2&63).replace(/^0/,"")):n.codec="mp4a.40.2"))}var d=ba.findBox(t,["mdia","mdhd"])[0];if(d&&r){var h=0===i?12:20;n.timescale=_a(d[h]<<24|d[1+h]<<16|d[2+h]<<8|d[3+h])}p.push(n)}),p};function wa(){this.init=function(){var s={};this.on=function(t,e){s[t]||(s[t]=[]),s[t]=s[t].concat(e)},this.off=function(t,e){var i;return!!s[t]&&(i=s[t].indexOf(e),s[t]=s[t].slice(),s[t].splice(i,1),-1<i)},this.trigger=function(t){var e,i,n,r;if(e=s[t])if(2===arguments.length)for(n=e.length,i=0;i<n;++i)e[i].call(this,arguments[1]);else{for(r=[],i=arguments.length,i=1;i<arguments.length;++i)r.push(arguments[i]);for(n=e.length,i=0;i<n;++i)e[i].apply(this,r)}},this.dispose=function(){s={}}}}var Sa={findBox:ba.findBox,parseType:ba.parseType,timescale:ca,startTime:ua,compositionStartTime:da,videoTrackIds:ha,tracks:pa},Ca=function(t){for(var e=0,i={payloadType:-1,payloadSize:0},n=0,r=0;e<t.byteLength&&128!==t[e];){for(;255===t[e];)n+=255,e++;for(n+=t[e++];255===t[e];)r+=255,e++;if(r+=t[e++],!i.payload&&4===n){i.payloadType=n,i.payloadSize=r,i.payload=t.subarray(e,e+r);break}e+=r,r=n=0}return i},ka=function(t){return 181!==t.payload[0]||49!=(t.payload[1]<<8|t.payload[2])||"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])||3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)},xa=function(t,e){var i,n,r,s,a=[];if(!(64&e[0]))return a;for(n=31&e[0],i=0;i<n;i++)s={type:3&e[2+(r=3*i)],pts:t},4&e[2+r]&&(s.ccData=e[3+r]<<8|e[4+r],a.push(s));return a},Ea=function(t){for(var e,i,n=t.byteLength,r=[],s=1;s<n-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return t;e=n-r.length,i=new Uint8Array(e);var a=0;for(s=0;s<e;a++,s++)a===r[0]&&(a++,r.shift()),i[s]=t[a];return i},Aa=4;wa.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),this.on("partialdone",function(t){e.partialFlush(t)}),this.on("endedtimeline",function(t){e.endTimeline(t)}),this.on("reset",function(t){e.reset(t)}),e},wa.prototype.push=function(t){this.trigger("data",t)},wa.prototype.flush=function(t){this.trigger("done",t)},wa.prototype.partialFlush=function(t){this.trigger("partialdone",t)},wa.prototype.endTimeline=function(t){this.trigger("endedtimeline",t)},wa.prototype.reset=function(t){this.trigger("reset",t)};function Pa(){Pa.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Ma(0,0),new Ma(0,1),new Ma(1,0),new Ma(1,1)],this.reset(),this.ccStreams_.forEach(function(t){t.on("data",this.trigger.bind(this,"data")),t.on("partialdone",this.trigger.bind(this,"partialdone")),t.on("done",this.trigger.bind(this,"done"))},this)}var Ia=wa;(Pa.prototype=new Ia).push=function(t){var e,i,n;if("sei_rbsp"===t.nalUnitType&&(e=Ca(t.escapedRBSP)).payloadType===Aa&&(i=ka(e)))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=xa(t.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},Pa.prototype.flushCCStreams=function(e){this.ccStreams_.forEach(function(t){return"flush"===e?t.flush():t.partialFlush()},this)},Pa.prototype.flushStream=function(t){this.captionPackets_.length&&(this.captionPackets_.forEach(function(t,e){t.presortIndex=e}),this.captionPackets_.sort(function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts}),this.captionPackets_.forEach(function(t){t.type<2&&this.dispatchCea608Packet(t)},this),this.captionPackets_.length=0),this.flushCCStreams(t)},Pa.prototype.flush=function(){return this.flushStream("flush")},Pa.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Pa.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(t){t.reset()})},Pa.prototype.dispatchCea608Packet=function(t){this.setsTextOrXDSActive(t)?this.activeCea608Channel_[t.type]=null:this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},Pa.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},Pa.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)},Pa.prototype.setsTextOrXDSActive=function(t){return 256==(28928&t.ccData)||4138==(30974&t.ccData)||6186==(30974&t.ccData)};function Oa(t){return null===t?"":(t=Da[t]||t,String.fromCharCode(t))}function La(){for(var t=[],e=15;e--;)t.push("");return t}var Da={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ra=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ma=function t(e,i){t.prototype.init.call(this),this.field_=e||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,i,n,r,s;if((e=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&e)?this.lastControlCode_=e:e!==this.PADDING_&&(this.lastControlCode_=null),n=e>>>8,r=255&e,e!==this.PADDING_)if(e===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(e===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=t.pts;else if(e===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(e===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(e===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(e===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(e===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(e===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=La();else if(e===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=La();else if(e===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=La()),this.mode_="paintOn",this.startPts_=t.pts;else if(this.isSpecialCharacter(n,r))s=Oa((n=(3&n)<<8)|r),this[this.mode_](t.pts,s),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),s=Oa((n=(3&n)<<8)|r),this[this.mode_](t.pts,s),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&r)&&this.addFormatting(t.pts,["i"]),1==(1&r)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var a=Ra.indexOf(7968&e);"rollUp"===this.mode_&&(a-this.rollUpRows_+1<0&&(a=this.rollUpRows_-1),this.setRollUp(t.pts,a)),a!==this.row_&&(this.clearFormatting(t.pts),this.row_=a),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&e)&&(this.column_=4*((14&e)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),s=Oa(n),s+=Oa(r),this[this.mode_](t.pts,s),this.column_+=s.length)}else this.lastControlCode_=null}};Ma.prototype=new Ia,Ma.prototype.flushDisplayed=function(t){var e=this.displayed_.map(function(t){try{return t.trim()}catch(t){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},Ma.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=La(),this.nonDisplayed_=La(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ma.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ma.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&48<=e&&e<=63},Ma.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&32<=e&&e<=63},Ma.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&32<=e&&e<=47},Ma.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&33<=e&&e<=35},Ma.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&64<=e&&e<=127},Ma.prototype.isColorPAC=function(t){return 64<=t&&t<=79||96<=t&&t<=127},Ma.prototype.isNormalChar=function(t){return 32<=t&&t<=127},Ma.prototype.setRollUp=function(t,e){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=La(),this.displayed_=La()),void 0!==e&&e!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[e-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===e&&(e=this.row_),this.topRow_=e-this.rollUpRows_+1},Ma.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);var i=e.reduce(function(t,e){return t+"<"+e+">"},"");this[this.mode_](t,i)},Ma.prototype.clearFormatting=function(t){if(this.formatting_.length){var e=this.formatting_.reverse().reduce(function(t,e){return t+"</"+e+">"},"");this.formatting_=[],this[this.mode_](t,e)}},Ma.prototype.popOn=function(t,e){var i=this.nonDisplayed_[this.row_];i+=e,this.nonDisplayed_[this.row_]=i},Ma.prototype.rollUp=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i},Ma.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},Ma.prototype.paintOn=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i};function Ba(t,e){for(var i=t,n=0;n<e.length;n++){var r=e[n];if(i<r.size)return r;i-=r.size}return null}function Na(t,v){var n=Sa.findBox(t,["moof","traf"]),e=Sa.findBox(t,["mdat"]),y={},r=[];return e.forEach(function(t,e){var i=n[e];r.push({mdat:t,traf:i})}),r.forEach(function(t){var e,i,n,r,s,a,o,l,c=t.mdat,u=t.traf,d=Sa.findBox(u,["tfhd"]),h=ba.parseTfhd(d[0]),p=h.trackId,f=Sa.findBox(u,["tfdt"]),m=0<f.length?ba.parseTfdt(f[0]).baseMediaDecodeTime:0,g=Sa.findBox(u,["trun"]);v===p&&0<g.length&&(i=g,r=m,s=(n=h).defaultSampleDuration||0,a=n.defaultSampleSize||0,o=n.trackId,l=[],i.forEach(function(t){var e=ba.parseTrun(t).samples;e.forEach(function(t){void 0===t.duration&&(t.duration=s),void 0===t.size&&(t.size=a),t.trackId=o,t.dts=r,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),t.pts=r+t.compositionTimeOffset,r+=t.duration}),l=l.concat(e)}),e=function(t,e,i){var n,r,s,a,o=new DataView(t.buffer,t.byteOffset,t.byteLength),l=[];for(r=0;r+4<t.length;r+=s)if(s=o.getUint32(r),r+=4,!(s<=0))switch(31&t[r]){case 6:var c=t.subarray(r+1,r+1+s),u=Ba(r,e);n={nalUnitType:"sei_rbsp",size:s,data:c,escapedRBSP:ja(c),trackId:i},u?(n.pts=u.pts,n.dts=u.dts,a=u):(n.pts=a.pts,n.dts=a.dts),l.push(n)}return l}(c,l,p),y[p]||(y[p]=[]),y[p]=y[p].concat(e))}),y}function Ua(t,e){var i=1;for(e<t&&(i=-1);4294967296<Math.abs(e-t);)t+=8589934592*i;return t}var ja=Ea,Fa=Pa,$a=function(){var e,l,c,u,d,i,n=!1;this.isInitialized=function(){return n},this.init=function(t){e=new Fa,n=!0,i=!!t&&t.isPartial,e.on("data",function(t){t.startTime=t.startPts/u,t.endTime=t.endPts/u,d.captions.push(t),d.captionStreams[t.stream]=!0})},this.isNewInit=function(t,e){return!(t&&0===t.length||e&&"object"==typeof e&&0===Object.keys(e).length)&&(c!==t[0]||u!==e[c])},this.parse=function(t,e,i){var n,r,s,a;if(!this.isInitialized())return null;if(!e||!i)return null;if(this.isNewInit(e,i))c=e[0],u=i[c];else if(null===c||!u)return l.push(t),null;for(;0<l.length;){var o=l.shift();this.parse(o,e,i)}return r=t,a=u,null!==(n=null===(s=c)?null:{seiNals:Na(r,s)[s],timescale:a})&&n.seiNals?(this.pushNals(n.seiNals),this.flushStream(),d):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){e.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;i?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){d.captions=[],d.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){l=[],u=c=null,d?this.clearParsedCaptions():d={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},Ha=27,za=15,qa=21;new Ia;function Wa(t){var e=31&t[1];return e<<=8,e|=t[2]}function Va(t){return!!(64&t[1])}function Ga(t){var e=0;return 1<(48&t[3])>>>4&&(e+=t[4]+1),e}function Xa(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}function Ya(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]}var Ka,Qa,Za,Ja,to={parseType:function(t,e){var i=Wa(t);return 0===i?"pat":i===e?"pmt":e?"pes":null},parsePat:function(t){var e=Va(t),i=4+Ga(t);return e&&(i+=t[i]+1),(31&t[i+10])<<8|t[i+11]},parsePmt:function(t){var e={},i=Va(t),n=4+Ga(t);if(i&&(n+=t[n]+1),1&t[n+5]){var r;r=3+((15&t[n+1])<<8|t[n+2])-4;for(var s=12+((15&t[n+10])<<8|t[n+11]);s<r;){var a=n+s;e[(31&t[a+1])<<8|t[a+2]]=t[a],s+=5+((15&t[a+3])<<8|t[a+4])}return e}},parsePayloadUnitStartIndicator:Va,parsePesType:function(t,e){switch(e[Wa(t)]){case Ha:return"video";case za:return"audio";case qa:return"timed-metadata";default:return null}},parsePesTime:function(t){if(!Va(t))return null;var e=4+Ga(t);if(e>=t.byteLength)return null;var i,n=null;return 192&(i=t[e+7])&&((n={}).pts=(14&t[e+9])<<27|(255&t[e+10])<<20|(254&t[e+11])<<12|(255&t[e+12])<<5|(254&t[e+13])>>>3,n.pts*=4,n.pts+=(6&t[e+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&t[e+14])<<27|(255&t[e+15])<<20|(254&t[e+16])<<12|(255&t[e+17])<<5|(254&t[e+18])>>>3,n.dts*=4,n.dts+=(6&t[e+18])>>>1)),n},videoPacketContainsKeyFrame:function(t){for(var e=4+Ga(t),i=t.subarray(e),n=0,r=0,s=!1;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}for(r+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===Xa(31&i[r+3])&&(s=!0);1!==i[++n]&&n<i.length;);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Xa(31&i[r+3])&&(s=!0),r=n-2,n+=3;break;default:n+=3}return i=i.subarray(r),n-=r,r=0,i&&3<i.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===Xa(31&i[r+3])&&(s=!0),s}},eo=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],io={isLikelyAacData:function(t){return t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)},parseId3TagSize:function(t,e){var i=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&t[e+5])>>4?20+i:10+i},parseAdtsSize:function(t,e){var i=(224&t[e+5])>>5,n=t[e+4]<<3;return 6144&t[e+3]|n|i},parseType:function(t,e){return t[e]==="I".charCodeAt(0)&&t[e+1]==="D".charCodeAt(0)&&t[e+2]==="3".charCodeAt(0)?"timed-metadata":!0&t[e]&&240==(240&t[e+1])?"audio":null},parseSampleRate:function(t){for(var e=0;e+5<t.length;){if(255===t[e]&&240==(246&t[e+1]))return eo[(60&t[e+2])>>>2];e++}return null},parseAacTimestamp:function(t){var e,i,n;e=10,64&t[5]&&(e+=4,e+=Ya(t.subarray(10,14)));do{if((i=Ya(t.subarray(e+4,e+8)))<1)return null;if("PRIV"===String.fromCharCode(t[e],t[e+1],t[e+2],t[e+3])){n=t.subarray(e+10,e+i+10);for(var r=0;r<n.byteLength;r++)if(0===n[r]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(t,e,i){var n,r="";for(n=e;n<i;n++)r+="%"+("00"+t[n].toString(16)).slice(-2);return r}(n,0,r)))break;var s=n.subarray(r+1),a=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return a*=4,a+=3&s[7]}}e+=10,e+=i}while(e<t.byteLength);return null}},no=9e4,ro=(Ka=function(t){return 9e4*t},Qa=function(t,e){return t*e},Za=function(t){return t/9e4},Ja=function(t,e){return t/e},Ua),so={};so.ts=to,so.aac=io;function ao(t,e,i){for(var n,r,s,a,o=0,l=uo,c=!1;l<=t.byteLength;)if(71!==t[o]||71!==t[l]&&l!==t.byteLength)o++,l++;else{switch(n=t.subarray(o,l),so.ts.parseType(n,e.pid)){case"pes":r=so.ts.parsePesType(n,e.table),s=so.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&s&&(a=so.ts.parsePesTime(n))&&(a.type="audio",i.audio.push(a),c=!0)}if(c)break;o+=uo,l+=uo}for(o=(l=t.byteLength)-uo,c=!1;0<=o;)if(71!==t[o]||71!==t[l]&&l!==t.byteLength)o--,l--;else{switch(n=t.subarray(o,l),so.ts.parseType(n,e.pid)){case"pes":r=so.ts.parsePesType(n,e.table),s=so.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&s&&(a=so.ts.parsePesTime(n))&&(a.type="audio",i.audio.push(a),c=!0)}if(c)break;o-=uo,l-=uo}}function oo(t,e,i){for(var n,r,s,a,o,l,c,u=0,d=uo,h=!1,p={data:[],size:0};d<t.byteLength;)if(71!==t[u]||71!==t[d])u++,d++;else{switch(n=t.subarray(u,d),so.ts.parseType(n,e.pid)){case"pes":if(r=so.ts.parsePesType(n,e.table),s=so.ts.parsePayloadUnitStartIndicator(n),"video"===r&&(s&&!h&&(a=so.ts.parsePesTime(n))&&(a.type="video",i.video.push(a),h=!0),!i.firstKeyFrame)){if(s&&0!==p.size){for(o=new Uint8Array(p.size),l=0;p.data.length;)c=p.data.shift(),o.set(c,l),l+=c.byteLength;if(so.ts.videoPacketContainsKeyFrame(o)){var f=so.ts.parsePesTime(o);f?(i.firstKeyFrame=f,i.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}p.size=0}p.data.push(n),p.size+=n.byteLength}}if(h&&i.firstKeyFrame)break;u+=uo,d+=uo}for(u=(d=t.byteLength)-uo,h=!1;0<=u;)if(71!==t[u]||71!==t[d])u--,d--;else{switch(n=t.subarray(u,d),so.ts.parseType(n,e.pid)){case"pes":r=so.ts.parsePesType(n,e.table),s=so.ts.parsePayloadUnitStartIndicator(n),"video"===r&&s&&(a=so.ts.parsePesTime(n))&&(a.type="video",i.video.push(a),h=!0)}if(h)break;u-=uo,d-=uo}}function lo(t){var e={pid:null,table:null},i={};for(var n in!function(t,e){for(var i,n=0,r=uo;r<t.byteLength;)if(71!==t[n]||71!==t[r])n++,r++;else{switch(i=t.subarray(n,r),so.ts.parseType(i,e.pid)){case"pat":e.pid||(e.pid=so.ts.parsePat(i));break;case"pmt":e.table||(e.table=so.ts.parsePmt(i))}if(e.pid&&e.table)return;n+=uo,r+=uo}}(t,e),e.table){if(e.table.hasOwnProperty(n))switch(e.table[n]){case Ha:i.video=[],oo(t,e,i),0===i.video.length&&delete i.video;break;case za:i.audio=[],ao(t,e,i),0===i.audio.length&&delete i.audio}}return i}var co=no,uo=188,ho=function(t,e){var i;return(i=(so.aac.isLikelyAacData(t)?function(t){for(var e,i=!1,n=0,r=null,s=null,a=0,o=0;3<=t.length-o;){switch(so.aac.parseType(t,o)){case"timed-metadata":if(t.length-o<10){i=!0;break}if((a=so.aac.parseId3TagSize(t,o))>t.length){i=!0;break}null===s&&(e=t.subarray(o,o+a),s=so.aac.parseAacTimestamp(e)),o+=a;break;case"audio":if(t.length-o<7){i=!0;break}if((a=so.aac.parseAdtsSize(t,o))>t.length){i=!0;break}null===r&&(e=t.subarray(o,o+a),r=so.aac.parseSampleRate(e)),n++,o+=a;break;default:o++}if(i)return null}if(null===r||null===s)return null;var l=co/r;return{audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*n*l,pts:s+1024*n*l}]}}:lo)(t))&&(i.audio||i.video)?(function(t,e){if(t.audio&&t.audio.length){var i=e;void 0===i&&(i=t.audio[0].dts),t.audio.forEach(function(t){t.dts=ro(t.dts,i),t.pts=ro(t.pts,i),t.dtsTime=t.dts/co,t.ptsTime=t.pts/co})}if(t.video&&t.video.length){var n=e;if(void 0===n&&(n=t.video[0].dts),t.video.forEach(function(t){t.dts=ro(t.dts,n),t.pts=ro(t.pts,n),t.dtsTime=t.dts/co,t.ptsTime=t.pts/co}),t.firstKeyFrame){var r=t.firstKeyFrame;r.dts=ro(r.dts,n),r.pts=ro(r.pts,n),r.dtsTime=r.dts/co,r.ptsTime=r.dts/co}}}(i,e),i):null};function po(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var fo=function(t,e,i){return e&&mo(t.prototype,e),i&&mo(t,i),t};function mo(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var go=null,vo=(yo.prototype.decrypt=function(t,e,i,n,r,s){var a=this._key[1],o=t^a[0],l=n^a[1],c=i^a[2],u=e^a[3],d=void 0,h=void 0,p=void 0,f=a.length/4-2,m=void 0,g=4,v=this._tables[1],y=v[0],b=v[1],_=v[2],T=v[3],w=v[4];for(m=0;m<f;m++)d=y[o>>>24]^b[l>>16&255]^_[c>>8&255]^T[255&u]^a[g],h=y[l>>>24]^b[c>>16&255]^_[u>>8&255]^T[255&o]^a[g+1],p=y[c>>>24]^b[u>>16&255]^_[o>>8&255]^T[255&l]^a[g+2],u=y[u>>>24]^b[o>>16&255]^_[l>>8&255]^T[255&c]^a[g+3],g+=4,o=d,l=h,c=p;for(m=0;m<4;m++)r[(3&-m)+s]=w[o>>>24]<<24^w[l>>16&255]<<16^w[c>>8&255]<<8^w[255&u]^a[g++],d=o,o=l,l=c,c=u,u=d},yo);function yo(t){po(this,yo),go=go||function(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]],e=t[0],i=t[1],n=e[4],r=i[4],s=void 0,a=void 0,o=void 0,l=[],c=[],u=void 0,d=void 0,h=void 0,p=void 0,f=void 0;for(s=0;s<256;s++)c[(l[s]=s<<1^283*(s>>7))^s]=s;for(a=o=0;!n[a];a^=u||1,o=c[o]||1)for(h=(h=o^o<<1^o<<2^o<<3^o<<4)>>8^255&h^99,f=16843009*l[d=l[u=l[r[n[a]=h]=a]]]^65537*d^257*u^16843008*a,p=257*l[h]^16843008*h,s=0;s<4;s++)e[s][a]=p=p<<24^p>>>8,i[s][h]=f=f<<24^f>>>8;for(s=0;s<5;s++)e[s]=e[s].slice(0),i[s]=i[s].slice(0);return t}(),this._tables=[[go[0][0].slice(),go[0][1].slice(),go[0][2].slice(),go[0][3].slice(),go[0][4].slice()],[go[1][0].slice(),go[1][1].slice(),go[1][2].slice(),go[1][3].slice(),go[1][4].slice()]];var e=void 0,i=void 0,n=void 0,r=void 0,s=void 0,a=this._tables[0][4],o=this._tables[1],l=t.length,c=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(r=t.slice(0),s=[],this._key=[r,s],e=l;e<4*l+28;e++)n=r[e-1],(e%l==0||8===l&&e%l==4)&&(n=a[n>>>24]<<24^a[n>>16&255]<<16^a[n>>8&255]<<8^a[255&n],e%l==0&&(n=n<<8^n>>>24^c<<24,c=c<<1^283*(c>>7))),r[e]=r[e-l]^n;for(i=0;e;i++,e--)n=r[3&i?e:e-4],s[i]=e<=4||i<4?n:o[0][a[n>>>24]]^o[1][a[n>>16&255]]^o[2][a[n>>8&255]]^o[3][a[255&n]]}var bo=(_o.prototype.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},_o.prototype.off=function(t,e){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(e);return this.listeners[t].splice(i,1),-1<i},_o.prototype.trigger=function(t,e){var i=this.listeners[t];if(i)if(2===arguments.length)for(var n=i.length,r=0;r<n;++r)i[r].call(this,e);else for(var s=Array.prototype.slice.call(arguments,1),a=i.length,o=0;o<a;++o)i[o].apply(this,s)},_o.prototype.dispose=function(){this.listeners={}},_o.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},_o);function _o(){po(this,_o),this.listeners={}}var To,wo=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(So,To=bo),So.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},So.prototype.push=function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},So);function So(){po(this,So);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,To.call(this,bo));return t.jobs=[],t.delay=1,t.timeout_=null,t}function Co(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24}function ko(t,e,i){var n=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),r=new vo(Array.prototype.slice.call(e)),s=new Uint8Array(t.byteLength),a=new Int32Array(s.buffer),o=void 0,l=void 0,c=void 0,u=void 0,d=void 0,h=void 0,p=void 0,f=void 0,m=void 0;for(o=i[0],l=i[1],c=i[2],u=i[3],m=0;m<n.length;m+=4)d=Co(n[m]),h=Co(n[m+1]),p=Co(n[m+2]),f=Co(n[m+3]),r.decrypt(d,h,p,f,a,m),a[m]=Co(a[m]^o),a[m+1]=Co(a[m+1]^l),a[m+2]=Co(a[m+2]^c),a[m+3]=Co(a[m+3]^u),o=d,l=h,c=p,u=f;return s}var xo=(Eo.prototype.decryptChunk_=function(e,i,n,r){return function(){var t=ko(e,i,n);r.set(t,e.byteOffset)}},fo(Eo,null,[{key:"STEP",get:function(){return 32e3}}]),Eo);function Eo(t,e,i,n){po(this,Eo);var r=Eo.STEP,s=new Int32Array(t.buffer),a=new Uint8Array(t.byteLength),o=0;for(this.asyncStream_=new wo,this.asyncStream_.push(this.decryptChunk_(s.subarray(o,o+r),e,i,a)),o=r;o<s.length;o+=r)i=new Uint32Array([Co(s[o-4]),Co(s[o-3]),Co(s[o-2]),Co(s[o-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(o,o+r),e,i,a));this.asyncStream_.push(function(){var t;n(null,(t=a).subarray(0,t.byteLength-t[t.byteLength-1]))})}function Ao(t,e){return/^[a-z]+:/i.test(e)?e:(/\/\//i.test(t)||(t=ls.buildAbsoluteURL(y.location.href,t)),ls.buildAbsoluteURL(t,e))}function Po(t,e,i){return t&&i.responseURL&&e!==i.responseURL?i.responseURL:e}function Io(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Oo=function(t,e,i){return e&&Lo(t.prototype,e),i&&Lo(t,i),t};function Lo(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Do(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Ro(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Mo(r,s){["AUDIO","SUBTITLES"].forEach(function(t){for(var e in r.mediaGroups[t])for(var i in r.mediaGroups[t][e]){var n=r.mediaGroups[t][e][i];s(n,t,e,i)}})}function Bo(t,e){var i=$o(t,{}),n=i.playlists[e.uri];if(!n)return null;if(n.segments&&e.segments&&n.segments.length===e.segments.length&&n.endList===e.endList&&n.mediaSequence===e.mediaSequence)return null;var r=$o(n,e);n.segments&&(r.segments=function(t,e,i){var n=e.slice();i=i||0;for(var r=Math.min(t.length,e.length+i),s=i;s<r;s++)n[s-i]=$o(t[s],n[s-i]);return n}(n.segments,e.segments,e.mediaSequence-n.mediaSequence)),r.segments.forEach(function(t){var e,i;e=t,i=r.resolvedUri,e.resolvedUri||(e.resolvedUri=Ao(i,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Ao(i,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Ao(i,e.map.uri))});for(var s=0;s<i.playlists.length;s++)i.playlists[s].uri===e.uri&&(i.playlists[s]=r);return i.playlists[e.uri]=r,i}function No(t){for(var e=t.playlists.length;e--;){var i=t.playlists[e];(t.playlists[i.uri]=i).resolvedUri=Ao(t.uri,i.uri),i.id=e,i.attributes||(i.attributes={},Ho.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}}function Uo(e){Mo(e,function(t){t.uri&&(t.resolvedUri=Ao(e.uri,t.uri))})}function jo(t,e){var i=t.segments[t.segments.length-1];return e&&i&&i.duration?1e3*i.duration:500*(t.targetDuration||10)}var Fo=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},$o=ss.mergeOptions,Ho=ss.log,zo=(Do(qo,ss.EventTarget),Oo(qo,[{key:"playlistRequestError",value:function(t,e,i){this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[e],status:t.status,message:"HLS playlist request error at URL: "+e+".",responseText:t.responseText,code:500<=t.status?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(t,e){var i=this;this.request=null,this.state="HAVE_METADATA";var n=new bs;this.customTagParsers.forEach(function(t){return n.addParser(t)}),this.customTagMappers.forEach(function(t){return n.addTagMapper(t)}),n.push(t.responseText),n.end(),n.manifest.uri=e,n.manifest.attributes=n.manifest.attributes||{};var r=Bo(this.master,n.manifest);this.targetDuration=n.manifest.targetDuration,r?(this.master=r,this.media_=this.master.playlists[n.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(y.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=y.setTimeout(function(){i.trigger("mediaupdatetimeout")},jo(this.media(),!!r))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),y.clearTimeout(this.mediaUpdateTimeout),y.clearTimeout(this.finalRenditionTimeout)}},{key:"stopRequest",value:function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}},{key:"media",value:function(i,t){var n=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof i){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}if(y.clearTimeout(this.finalRenditionTimeout),t){var e=i.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=y.setTimeout(this.media.bind(this,i,!1),e)}else{var r=this.state,s=!this.media_||i.uri!==this.media_.uri;if(this.master.playlists[i.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,void(s&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(s){if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},function(t,e){if(n.request){if(i.resolvedUri=Po(n.handleManifestRedirects,i.resolvedUri,e),t)return n.playlistRequestError(n.request,i.uri,r);n.haveMetadata(e,i.uri),"HAVE_MASTER"===r?n.trigger("loadedmetadata"):n.trigger("mediachange")}})}}}},{key:"pause",value:function(){this.stopRequest(),y.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(t){var e=this;y.clearTimeout(this.mediaUpdateTimeout);var i=this.media();if(t){var n=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=y.setTimeout(function(){return e.load()},n)}else this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var n=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,e){if(n.request){if(n.request=null,t)return n.error={status:e.status,message:"HLS playlist request error at URL: "+n.srcUrl+".",responseText:e.responseText,code:2},"HAVE_NOTHING"===n.state&&(n.started=!1),n.trigger("error");var i=new bs;return n.customTagParsers.forEach(function(t){return i.addParser(t)}),n.customTagMappers.forEach(function(t){return i.addTagMapper(t)}),i.push(e.responseText),i.end(),n.state="HAVE_MASTER",n.srcUrl=Po(n.handleManifestRedirects,n.srcUrl,e),i.manifest.uri=n.srcUrl,i.manifest.playlists?(n.master=i.manifest,No(n.master),Uo(n.master),n.trigger("loadedplaylist"),void(n.request||n.media(i.manifest.playlists[0]))):(n.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:y.location.href,playlists:[{uri:n.srcUrl,id:0,resolvedUri:n.srcUrl,attributes:{}}]},n.master.playlists[n.srcUrl]=n.master.playlists[0],n.haveMetadata(e,n.srcUrl),n.trigger("loadedmetadata"))}})}}]),qo);function qo(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};Io(this,qo);var n=Ro(this,(qo.__proto__||Object.getPrototypeOf(qo)).call(this)),r=i.withCredentials,s=void 0!==r&&r,a=i.handleManifestRedirects,o=void 0!==a&&a;n.srcUrl=t,n.hls_=e,n.withCredentials=s,n.handleManifestRedirects=o;var l=e.options_;if(n.customTagParsers=l&&l.customTagParsers||[],n.customTagMappers=l&&l.customTagMappers||[],!n.srcUrl)throw new Error("A non-empty playlist URL is required");return n.state="HAVE_NOTHING",n.on("mediaupdatetimeout",function(){"HAVE_METADATA"===n.state&&(n.state="HAVE_CURRENT_METADATA",n.request=n.hls_.xhr({uri:Ao(n.master.uri,n.media().uri),withCredentials:n.withCredentials},function(t,e){if(n.request)return t?n.playlistRequestError(n.request,n.media().uri,"HAVE_METADATA"):void n.haveMetadata(n.request,n.media().uri)}))}),n}function Wo(t,e,i){var n,r;return void 0===e&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence?0:(n=function(t,e){var i=0,n=e-t.mediaSequence,r=t.segments[n];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;n--;){if(void 0!==(r=t.segments[n]).end)return{result:i+r.end,precise:!0};if(i+=r.duration,void 0!==r.start)return{result:i+r.start,precise:!0}}return{result:i,precise:!1}}(t,e)).precise?n.result:(r=function(t,e){for(var i=0,n=void 0,r=e-t.mediaSequence;r<t.segments.length;r++){if(void 0!==(n=t.segments[r]).start)return{result:n.start-i,precise:!0};if(i+=n.duration,void 0!==n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}}(t,e)).precise?r.result:n.result+i}function Vo(t,e,i){if(!t)return 0;if("number"!=typeof i&&(i=0),void 0===e){if(t.totalDuration)return t.totalDuration;if(!t.endList)return y.Infinity}return Wo(t,e,i)}function Go(t,e,i){var n=0;if(i<e){var r=[i,e];e=r[0],i=r[1]}if(e<0){for(var s=e;s<Math.min(0,i);s++)n+=t.targetDuration;e=0}for(var a=e;a<i;a++)n+=t.segments[a].duration;return n}function Xo(t){if(!t.segments.length)return 0;for(var e=t.segments.length-1,i=t.segments[e].duration||t.targetDuration,n=i+2*t.targetDuration;e--&&!(n<=(i+=t.segments[e].duration)););return Math.max(0,e)}function Yo(t,e,i){if(!t||!t.segments)return null;if(t.endList)return Vo(t);if(null===e)return null;e=e||0;var n=i?Xo(t):t.segments.length;return Wo(t,t.mediaSequence+n,e)}function Ko(t){return t-Math.floor(t)==0}function Qo(t,e){if(Ko(e))return e+.1*t;for(var i=e.toString().split(".")[1].length,n=1;n<=i;n++){var r=Math.pow(10,n),s=e*r;if(Ko(s)||n===i)return(s+t)/r}}function Zo(t){return t.excludeUntil&&t.excludeUntil>Date.now()}function Jo(t){return t.excludeUntil&&t.excludeUntil===1/0}function tl(t){var e=Zo(t);return!t.disabled&&!e}function el(t,e){return e.attributes&&e.attributes[t]}function il(t,e){if(1===t.playlists.length)return!0;var i=e.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===t.playlists.filter(function(t){return!!tl(t)&&(t.attributes.BANDWIDTH||0)<i}).length}function nl(){return function t(e,n){e=xl({timeout:45e3},e);var i=t.beforeRequest||ss.Hls.xhr.beforeRequest;if(i&&"function"==typeof i){var r=i(e);r&&(e=r)}var s=kl(e,function(t,e){var i=s.response;!t&&i&&(s.responseTime=Date.now(),s.roundTripTime=s.responseTime-s.requestTime,s.bytesReceived=i.byteLength||i.length,s.bandwidth||(s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3))),e.headers&&(s.responseHeaders=e.headers),t&&"ETIMEDOUT"===t.code&&(s.timedout=!0),t||s.aborted||200===e.statusCode||206===e.statusCode||0===e.statusCode||(t=new Error("XHR Failed with a response of: "+(s&&(i||s.responseText)))),n(t,s)}),a=s.abort;return s.abort=function(){return s.aborted=!0,a.apply(s,arguments)},s.uri=e.uri,s.requestTime=Date.now(),s}}function rl(t){var e,i,n={};return t.byterange&&(n.Range=(e=t.byterange,i=e.offset+e.length-1,"bytes="+e.offset+"-"+i)),n}function sl(t,e){var i=t.toString(16);return"00".substring(0,2-i.length)+i+(e%2?" ":"")}function al(t){return 32<=t&&t<126?String.fromCharCode(t):"."}function ol(i){var n={};return Object.keys(i).forEach(function(t){var e=i[t];ArrayBuffer.isView(e)?n[t]={bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:n[t]=e}),n}function ll(t){var e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")}function cl(t){return t.resolvedUri}function ul(t){for(var e=Array.prototype.slice.call(t),i="",n=0;n<e.length/16;n++)i+=e.slice(16*n,16*n+16).map(sl).join("")+" "+e.slice(16*n,16*n+16).map(al).join("")+"\n";return i}function dl(t){var e=t.playlist,i=t.time,n=void 0===i?void 0:i,r=t.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!e||void 0===n)return r({message:"getProgramTime: playlist and time must be provided"});var s=function(t,e){if(!e||!e.segments||0===e.segments.length)return null;for(var i=0,n=void 0,r=0;r<e.segments.length&&!(t<=(i=(n=e.segments[r]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration));r++);var s=e.segments[e.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(i<t){if(t>i+.25*s.duration)return null;n=s}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(n,e);if(!s)return r({message:"valid programTime was not found"});if("estimate"===s.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var a={mediaSeconds:n},o=function(t,e){if(!e.dateTimeObject)return null;var i=e.videoTimingInfo.transmuxerPrependedSeconds,n=t-(e.videoTimingInfo.transmuxedPresentationStart+i);return new Date(e.dateTimeObject.getTime()+1e3*n)}(n,s.segment);return o&&(a.programDateTime=o.toISOString()),r(null,a)}function hl(t){var e=t.programTime,i=t.playlist,n=t.retryCount,r=void 0===n?2:n,s=t.seekTo,a=t.pauseAfterSeek,o=void 0===a||a,l=t.tech,c=t.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(void 0===e||!i||!s)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!i.endList&&!l.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!function(t){if(!t.segments||0===t.segments.length)return!1;for(var e=0;e<t.segments.length;e++){if(!t.segments[e].dateTimeObject)return!1}return!0}(i))return c({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri});var u=function(t,e){var i=void 0;try{i=new Date(t)}catch(t){return null}if(!e||!e.segments||0===e.segments.length)return null;var n=e.segments[0];if(i<n.dateTimeObject)return null;for(var r=0;r<e.segments.length-1;r++){if(n=e.segments[r],i<e.segments[r+1].dateTimeObject)break}var s,a=e.segments[e.segments.length-1],o=a.dateTimeObject,l=a.videoTimingInfo?(s=a.videoTimingInfo).transmuxedPresentationEnd-s.transmuxedPresentationStart-s.transmuxerPrependedSeconds:a.duration+.25*a.duration;return new Date(o.getTime()+1e3*l)<i?null:(o<i&&(n=a),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Cl.duration(e,e.mediaSequence+e.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})}(e,i);if(!u)return c({message:e+" was not found in the stream"});var d=u.segment,h=function(t,e){var i=void 0,n=void 0;try{i=new Date(t),n=new Date(e)}catch(t){}var r=i.getTime();return(n.getTime()-r)/1e3}(d.dateTimeObject,e);if("estimate"===u.type)return 0===r?c({message:e+" is not buffered yet. Try again"}):(s(u.estimatedStart+h),void l.one("seeked",function(){hl({programTime:e,playlist:i,retryCount:r-1,seekTo:s,pauseAfterSeek:o,tech:l,callback:c})}));var p=d.start+h;l.one("seeked",function(){return c(null,l.currentTime())}),o&&l.pause(),s(p)}function pl(t,e){var i=[],n=void 0;if(t&&t.length)for(n=0;n<t.length;n++)e(t.start(n),t.end(n))&&i.push([t.start(n),t.end(n)]);return ss.createTimeRanges(i)}function fl(t,i){return pl(t,function(t,e){return t-.1<=i&&i<=e+.1})}function ml(t,e){return pl(t,function(t){return e<=t-1/30})}function gl(t){var e=[];if(!t||!t.length)return"";for(var i=0;i<t.length;i++)e.push(t.start(i)+" => "+t.end(i));return e.join(", ")}function vl(t){for(var e=[],i=0;i<t.length;i++)e.push({start:t.start(i),end:t.end(i)});return e}function yl(t,e,i){var n=void 0,r=void 0;if(i&&i.cues)for(n=i.cues.length;n--;)(r=i.cues[n]).startTime<=e&&r.endTime>=t&&i.removeCue(r)}function bl(t){return isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}function _l(t,e,i){var r=y.WebKitDataCue||y.VTTCue;if(e&&e.forEach(function(t){var e=t.stream;this.inbandTextTracks_[e].addCue(new r(t.startTime+this.timestampOffset,t.endTime+this.timestampOffset,t.text))},t),i){var s=bl(t.mediaSource_.duration);if(i.forEach(function(t){var n=t.cueTime+this.timestampOffset;!("number"!=typeof n||y.isNaN(n)||n<0)&&n<1/0&&t.frames.forEach(function(t){var e,i=new r(n,n,t.value||t.url||t.data||"");i.frame=t,i.value=t,e=i,Object.defineProperties(e.frame,{id:{get:function(){return ss.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return ss.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return ss.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}}),this.metadataTrack_.addCue(i)},this)},t),t.metadataTrack_&&t.metadataTrack_.cues&&t.metadataTrack_.cues.length){for(var n=t.metadataTrack_.cues,a=[],o=0;o<n.length;o++)n[o]&&a.push(n[o]);var l=a.reduce(function(t,e){var i=t[e.startTime]||[];return i.push(e),t[e.startTime]=i,t},{}),c=Object.keys(l).sort(function(t,e){return Number(t)-Number(e)});c.forEach(function(t,e){var i=l[t],n=Number(c[e+1])||s;i.forEach(function(t){t.endTime=n})})}}}var Tl=ss.createTimeRange,wl=Qo.bind(null,1),Sl=Qo.bind(null,-1),Cl={duration:Vo,seekable:function(t,e){var i=e||0,n=Yo(t,e,!0);return null===n?Tl():Tl(i,n)},safeLiveIndex:Xo,getMediaInfoForTime:function(t,e,i,n){var r=void 0,s=void 0,a=t.segments.length,o=e-n;if(o<0){if(0<i)for(r=i-1;0<=r;r--)if(s=t.segments[r],0<(o+=Sl(s.duration)))return{mediaIndex:r,startTime:n-Go(t,i,r)};return{mediaIndex:0,startTime:e}}if(i<0){for(r=i;r<0;r++)if((o-=t.targetDuration)<0)return{mediaIndex:0,startTime:e};i=0}for(r=i;r<a;r++)if(s=t.segments[r],(o-=wl(s.duration))<0)return{mediaIndex:r,startTime:n+Go(t,i,r)};return{mediaIndex:a-1,startTime:e}},isEnabled:tl,isDisabled:function(t){return t.disabled},isBlacklisted:Zo,isIncompatible:Jo,playlistEnd:Yo,isAes:function(t){for(var e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},isFmp4:function(t){for(var e=0;e<t.segments.length;e++)if(t.segments[e].map)return!0;return!1},hasAttribute:el,estimateSegmentRequestTime:function(t,e,i,n){var r=3<arguments.length&&void 0!==n?n:0;return el("BANDWIDTH",i)?(t*i.attributes.BANDWIDTH-8*r)/e:NaN},isLowestEnabledRendition:il},kl=ss.xhr,xl=ss.mergeOptions,El=Object.freeze({createTransferableMessage:ol,initSegmentId:ll,segmentKeyId:cl,hexDump:ul,tagDump:function(t){var e=t.bytes;return ul(e)},textRanges:function(t){var e,i,n="",r=void 0;for(r=0;r<t.length;r++)n+=(i=r,(e=t).start(i)+"-"+e.end(i)+" ");return n}}),Al="undefined"!=typeof window?window:{},Pl="undefined"==typeof Symbol?"__target":Symbol(),Il="application/javascript",Ol=Al.BlobBuilder||Al.WebKitBlobBuilder||Al.MozBlobBuilder||Al.MSBlobBuilder,Ll=Al.URL||Al.webkitURL||Ll&&Ll.msURL,Dl=Al.Worker;function Rl(r,s){return function(t){var e=this;if(!s)return new Dl(r);if(Dl&&!t){var i=Ul(s.toString().replace(/^function.+?{/,"").slice(0,-1));return this[Pl]=new Dl(i),function(t,e){if(!t||!e)return;var i=t.terminate;t.objURL=e,t.terminate=function(){t.objURL&&Ll.revokeObjectURL(t.objURL),i.call(t)}}(this[Pl],i),this[Pl]}var n={postMessage:function(t){e.onmessage&&setTimeout(function(){e.onmessage({data:t,target:n})})}};s.call(n),this.postMessage=function(t){setTimeout(function(){n.onmessage({data:t,target:e})})},this.isThisThread=!0}}if(Dl){var Ml,Bl=Ul("self.onmessage = function () {}"),Nl=new Uint8Array(1);try{(Ml=new Dl(Bl)).postMessage(Nl,[Nl.buffer])}catch(t){Dl=null}finally{Ll.revokeObjectURL(Bl),Ml&&Ml.terminate()}}function Ul(e){try{return Ll.createObjectURL(new Blob([e],{type:Il}))}catch(t){var i=new Ol;return i.append(e),Ll.createObjectURL(i.getBlob(type))}}function jl(t){return t.map(function(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(t,e,i){return"avc1."+("00"+Number(e).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})})}function Fl(t){var e,i=0<arguments.length&&void 0!==t?t:"",n={codecCount:0};return n.codecCount=i.split(",").length,n.codecCount=n.codecCount||2,(e=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(i))&&(n.videoCodec=e[2],n.videoObjectTypeIndicator=e[3]),n.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(i),n.audioProfile=n.audioProfile&&n.audioProfile[2],n}function $l(t,e,i){return t+"/"+e+'; codecs="'+i.filter(function(t){return!!t}).join(", ")+'"'}function Hl(t,e){var i,n,r=(i=e).segments&&i.segments.length&&i.segments[0].map?"mp4":"mp2t",s=(n=e.attributes||{}).CODECS?Fl(n.CODECS):Xl,a=e.attributes||{},o=!0,l=!1;if(!e)return[];if(t.mediaGroups.AUDIO&&a.AUDIO){var c=t.mediaGroups.AUDIO[a.AUDIO];if(c)for(var u in o=!(l=!0),c)if(!c[u].uri&&!c[u].playlists){o=!0;break}}l&&!s.audioProfile&&(o||(s.audioProfile=function(t,e){if(!t.mediaGroups.AUDIO||!e)return null;var i=t.mediaGroups.AUDIO[e];if(!i)return null;for(var n in i){var r=i[n];if(r.default&&r.playlists)return Fl(r.playlists[0].attributes.CODECS).audioProfile}return null}(t,a.AUDIO)),s.audioProfile||(ss.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),s.audioProfile=Xl.audioProfile));var d={};s.videoCodec&&(d.video=""+s.videoCodec+s.videoObjectTypeIndicator),s.audioProfile&&(d.audio="mp4a.40."+s.audioProfile);var h=$l("audio",r,[d.audio]),p=$l("video",r,[d.video]),f=$l("video",r,[d.video,d.audio]);return l?!o&&d.video?[p,h]:o||d.video?[f,h]:[h,h]:d.video?[f]:[h]}function zl(t){var r={type:"",parameters:{}},e=t.trim().split(";");return r.type=e.shift().trim(),e.forEach(function(t){var e=t.trim().split("=");if(1<e.length){var i=e[0].replace(/"/g,"").trim(),n=e[1].replace(/"/g,"").trim();r.parameters[i]=n}}),r}function ql(t){return/mp4a\.\d+.\d+/i.test(t)}function Wl(t){return/avc1\.[\da-f]+/i.test(t)}function Vl(t,e){var i=t.addSourceBuffer(e),n=Object.create(null);function r(e){"function"==typeof i[e]?n[e]=function(){return i[e].apply(i,arguments)}:void 0===n[e]&&Object.defineProperty(n,e,{get:function(){return i[e]},set:function(t){return i[e]=t}})}for(var s in n.updating=!1,n.realBuffer_=i)r(s);return n}var Gl=new Rl("./transmuxer-worker.worker.js",function(t,e){var Se=this;!function(){function t(){this.init=function(){var s={};this.on=function(t,e){s[t]||(s[t]=[]),s[t]=s[t].concat(e)},this.off=function(t,e){var i;return!!s[t]&&(i=s[t].indexOf(e),s[t]=s[t].slice(),s[t].splice(i,1),-1<i)},this.trigger=function(t){var e,i,n,r;if(e=s[t])if(2===arguments.length)for(n=e.length,i=0;i<n;++i)e[i].call(this,arguments[1]);else{for(r=[],i=arguments.length,i=1;i<arguments.length;++i)r.push(arguments[i]);for(n=e.length,i=0;i<n;++i)e[i].apply(this,r)}},this.dispose=function(){s={}}}}t.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),this.on("partialdone",function(t){e.partialFlush(t)}),this.on("endedtimeline",function(t){e.endTimeline(t)}),this.on("reset",function(t){e.reset(t)}),e},t.prototype.push=function(t){this.trigger("data",t)},t.prototype.flush=function(t){this.trigger("done",t)},t.prototype.partialFlush=function(t){this.trigger("partialdone",t)},t.prototype.endTimeline=function(t){this.trigger("endedtimeline",t)},t.prototype.reset=function(t){this.trigger("reset",t)};var c,e,i,r,s,n,a,o,l,u,d,h,p,f,m,g,v,y,b,_,T,w,S,C,k,x,E,A,P,I,O,L,D,R,M,B,N,U,j,F,$=t,H=Math.pow(2,32)-1;!function(){var t;if(w={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in w)w.hasOwnProperty(t)&&(w[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),k=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),C=new Uint8Array([0,0,0,1]),x=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),E=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:x,audio:E},O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),I=new Uint8Array([0,0,0,0,0,0,0,0]),L=new Uint8Array([0,0,0,0,0,0,0,0]),D=L,R=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),M=L,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),c=function(t){var e,i,n=[],r=0;for(e=1;e<arguments.length;e++)n.push(arguments[e]);for(e=n.length;e--;)r+=n[e].byteLength;for(i=new Uint8Array(r+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(t,4),e=0,r=8;e<n.length;e++)i.set(n[e],r),r+=n[e].byteLength;return i},e=function(){return c(w.dinf,c(w.dref,O))},i=function(t){return c(w.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},m=function(t){return c(w.hdlr,A[t])},f=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(e[12]=t.samplerate>>>24&255,e[13]=t.samplerate>>>16&255,e[14]=t.samplerate>>>8&255,e[15]=255&t.samplerate),c(w.mdhd,e)},p=function(t){return c(w.mdia,f(t),m(t.type),n(t))},s=function(t){return c(w.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},n=function(t){return c(w.minf,"video"===t.type?c(w.vmhd,P):c(w.smhd,I),e(),v(t))},a=function(t,e){for(var i=[],n=e.length;n--;)i[n]=b(e[n]);return c.apply(null,[w.moof,s(t)].concat(i))},o=function(t){for(var e=t.length,i=[];e--;)i[e]=d(t[e]);return c.apply(null,[w.moov,u(4294967295)].concat(i).concat(l(t)))},l=function(t){for(var e=t.length,i=[];e--;)i[e]=_(t[e]);return c.apply(null,[w.mvex].concat(i))},u=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return c(w.mvhd,e)},g=function(t){var e,i,n=t.samples||[],r=new Uint8Array(4+n.length);for(i=0;i<n.length;i++)e=n[i].flags,r[i+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return c(w.sdtp,r)},v=function(t){return c(w.stbl,y(t),c(w.stts,M),c(w.stsc,D),c(w.stsz,R),c(w.stco,L))},y=function(t){return c(w.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),("video"===t.type?B:N)(t))},B=function(t){var e,i,n=t.sps||[],r=t.pps||[],s=[],a=[];for(e=0;e<n.length;e++)s.push((65280&n[e].byteLength)>>>8),s.push(255&n[e].byteLength),s=s.concat(Array.prototype.slice.call(n[e]));for(e=0;e<r.length;e++)a.push((65280&r[e].byteLength)>>>8),a.push(255&r[e].byteLength),a=a.concat(Array.prototype.slice.call(r[e]));if(i=[w.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c(w.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([n.length],s,[r.length],a))),c(w.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],t.sarRatio){var o=t.sarRatio[0],l=t.sarRatio[1];i.push(c(w.pasp,new Uint8Array([(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o,(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])))}return c.apply(null,i)},N=function(t){return c(w.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),i(t))},h=function(t){var e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return c(w.tkhd,e)},b=function(t){var e,i,n,r,s,a;return e=c(w.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(t.baseMediaDecodeTime/(1+H)),a=Math.floor(t.baseMediaDecodeTime%(1+H)),i=c(w.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,a>>>24&255,a>>>16&255,a>>>8&255,255&a])),"audio"===t.type?(n=T(t,92),c(w.traf,e,i,n)):(r=g(t),n=T(t,r.length+92),c(w.traf,e,i,n,r))},d=function(t){return t.duration=t.duration||4294967295,c(w.trak,h(t),p(t))},_=function(t){var e=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(e[e.length-1]=0),c(w.trex,e)},F=function(t,e){var i=0,n=0,r=0,s=0;return t.length&&(void 0!==t[0].duration&&(i=1),void 0!==t[0].size&&(n=2),void 0!==t[0].flags&&(r=4),void 0!==t[0].compositionTimeOffset&&(s=8)),[0,0,i|n|r|s,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},j=function(t,e){var i,n,r,s;for(n=t.samples||[],i=F(n,e+=20+16*n.length),s=0;s<n.length;s++)r=n[s],i=i.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size,r.flags.isLeading<<2|r.flags.dependsOn,r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,61440&r.flags.degradationPriority,15&r.flags.degradationPriority,(4278190080&r.compositionTimeOffset)>>>24,(16711680&r.compositionTimeOffset)>>>16,(65280&r.compositionTimeOffset)>>>8,255&r.compositionTimeOffset]);return c(w.trun,new Uint8Array(i))},U=function(t,e){var i,n,r,s;for(n=t.samples||[],i=F(n,e+=20+8*n.length),s=0;s<n.length;s++)r=n[s],i=i.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size]);return c(w.trun,new Uint8Array(i))},T=function(t,e){return("audio"===t.type?U:j)(t,e)};r=function(){return c(w.ftyp,S,C,S,k)};function z(t,e){var i={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return i.dataOffset=e,i.compositionTimeOffset=t.pts-t.dts,i.duration=t.duration,i.size=4*t.length,i.size+=t.byteLength,t.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i}function q(t){for(var e=[];t--;)e.push(0);return e}function W(){W.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Pt(0,0),new Pt(0,1),new Pt(1,0),new Pt(1,1)],this.reset(),this.ccStreams_.forEach(function(t){t.on("data",this.trigger.bind(this,"data")),t.on("partialdone",this.trigger.bind(this,"partialdone")),t.on("done",this.trigger.bind(this,"done"))},this)}var V,G,X,Y,K,Q=function(t){return c(w.mdat,t)},Z=a,J=function(t){var e,i=r(),n=o(t);return(e=new Uint8Array(i.byteLength+n.byteLength)).set(i),e.set(n,i.byteLength),e},tt=function(t){var e,i,n=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,e=n.byteLength=0;e<t.length;e++)"access_unit_delimiter_rbsp"===(i=t[e]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return r.length&&(!n.duration||n.duration<=0)&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r},et=function(t){var e,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=t[0].pts,n.dts=t[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,e=0;e<t.length;e++)(i=t[e]).keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},it=function(t){var e;return!t[0][0].keyFrame&&1<t.length&&(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t},nt=function(t,e){var i,n,r,s,a,o=e||0,l=[];for(i=0;i<t.length;i++)for(s=t[i],n=0;n<s.length;n++)a=s[n],o+=(r=z(a,o)).size,l.push(r);return l},rt=function(t){var e,i,n,r,s,a,o=0,l=t.byteLength,c=t.nalCount,u=new Uint8Array(l+4*c),d=new DataView(u.buffer);for(e=0;e<t.length;e++)for(r=t[e],i=0;i<r.length;i++)for(s=r[i],n=0;n<s.length;n++)a=s[n],d.setUint32(o,a.data.byteLength),o+=4,u.set(a.data,o),o+=a.data.byteLength;return u},st=[33,16,5,32,164,27],at=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ot={96e3:[st,[227,64],q(154),[56]],88200:[st,[231],q(170),[56]],64e3:[st,[248,192],q(240),[56]],48e3:[st,[255,192],q(268),[55,148,128],q(54),[112]],44100:[st,[255,192],q(268),[55,163,128],q(84),[112]],32e3:[st,[255,192],q(268),[55,234],q(226),[112]],24e3:[st,[255,192],q(268),[55,255,128],q(268),[111,112],q(126),[224]],16e3:[st,[255,192],q(268),[55,255,128],q(268),[111,255],q(269),[223,108],q(195),[1,192]],12e3:[at,q(268),[3,127,248],q(268),[6,255,240],q(268),[13,255,224],q(268),[27,253,128],q(259),[56]],11025:[at,q(268),[3,127,248],q(268),[6,255,240],q(268),[13,255,224],q(268),[27,255,192],q(268),[55,175,128],q(108),[112]],8e3:[at,q(268),[3,121,16],q(47),[7]]},lt=(V=ot,Object.keys(V).reduce(function(t,e){return t[e]=new Uint8Array(V[e].reduce(function(t,e){return t.concat(e)},[])),t},{})),ct=9e4,ut=(G=function(t){return 9e4*t},X=function(t,e){return t*e},Y=function(t){return t/9e4},K=function(t,e){return t/e},function(t,e){return G(K(t,e))}),dt=function(t,e){return X(Y(t),e)},ht=function(t,e,i){return Y(i?t:t-e)},pt=function(t,e,i,n){var r,s,a,o,l,c=0,u=0,d=0;if(e.length&&(r=ut(t.baseMediaDecodeTime,t.samplerate),s=Math.ceil(ct/(t.samplerate/1024)),i&&n&&(c=r-Math.max(i,n),d=(u=Math.floor(c/s))*s),!(u<1||ct/2<d))){for(a=(a=lt[t.samplerate])||e[0].data,o=0;o<u;o++)l=e[0],e.splice(0,0,{data:a,dts:l.dts-s,pts:l.pts-s});t.baseMediaDecodeTime-=Math.floor(dt(d,t.samplerate))}},ft=function(t,e,i){return e.minSegmentDts>=i?t:(e.minSegmentDts=1/0,t.filter(function(t){return t.dts>=i&&(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0)}))},mt=function(t){var e,i,n=[];for(e=0;e<t.length;e++)i=t[e],n.push({size:i.data.byteLength,duration:1024});return n},gt=function(t){var e,i,n=0,r=new Uint8Array(function(t){var e,i=0;for(e=0;e<t.length;e++)i+=t[e].data.byteLength;return i}(t));for(e=0;e<t.length;e++)i=t[e],r.set(i.data,n),n+=i.data.byteLength;return r},vt=ct,yt=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},bt=function(t,e){var i,n=t.minSegmentDts;return e||(n-=t.timelineStartInfo.dts),i=t.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===t.type&&(i*=t.samplerate/vt,i=Math.floor(i)),i},_t=function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),void 0===t.minSegmentPts?t.minSegmentPts=e.pts:t.minSegmentPts=Math.min(t.minSegmentPts,e.pts),void 0===t.maxSegmentPts?t.maxSegmentPts=e.pts:t.maxSegmentPts=Math.max(t.maxSegmentPts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),void 0===t.minSegmentDts?t.minSegmentDts=e.dts:t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),void 0===t.maxSegmentDts?t.maxSegmentDts=e.dts:t.maxSegmentDts=Math.max(t.maxSegmentDts,e.dts))},Tt=function(t){for(var e=0,i={payloadType:-1,payloadSize:0},n=0,r=0;e<t.byteLength&&128!==t[e];){for(;255===t[e];)n+=255,e++;for(n+=t[e++];255===t[e];)r+=255,e++;if(r+=t[e++],!i.payload&&4===n){i.payloadType=n,i.payloadSize=r,i.payload=t.subarray(e,e+r);break}e+=r,r=n=0}return i},wt=function(t){return 181!==t.payload[0]||49!=(t.payload[1]<<8|t.payload[2])||"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])||3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)},St=function(t,e){var i,n,r,s,a=[];if(!(64&e[0]))return a;for(n=31&e[0],i=0;i<n;i++)s={type:3&e[2+(r=3*i)],pts:t},4&e[2+r]&&(s.ccData=e[3+r]<<8|e[4+r],a.push(s));return a},Ct=4;(W.prototype=new $).push=function(t){var e,i,n;if("sei_rbsp"===t.nalUnitType&&(e=Tt(t.escapedRBSP)).payloadType===Ct&&(i=wt(e)))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=St(t.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},W.prototype.flushCCStreams=function(e){this.ccStreams_.forEach(function(t){return"flush"===e?t.flush():t.partialFlush()},this)},W.prototype.flushStream=function(t){this.captionPackets_.length&&(this.captionPackets_.forEach(function(t,e){t.presortIndex=e}),this.captionPackets_.sort(function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts}),this.captionPackets_.forEach(function(t){t.type<2&&this.dispatchCea608Packet(t)},this),this.captionPackets_.length=0),this.flushCCStreams(t)},W.prototype.flush=function(){return this.flushStream("flush")},W.prototype.partialFlush=function(){return this.flushStream("partialFlush")},W.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(t){t.reset()})},W.prototype.dispatchCea608Packet=function(t){this.setsTextOrXDSActive(t)?this.activeCea608Channel_[t.type]=null:this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},W.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},W.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)},W.prototype.setsTextOrXDSActive=function(t){return 256==(28928&t.ccData)||4138==(30974&t.ccData)||6186==(30974&t.ccData)};function kt(t){return null===t?"":(t=Et[t]||t,String.fromCharCode(t))}function xt(){for(var t=[],e=15;e--;)t.push("");return t}var Et={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},At=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Pt=function t(e,i){t.prototype.init.call(this),this.field_=e||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,i,n,r,s;if((e=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&e)?this.lastControlCode_=e:e!==this.PADDING_&&(this.lastControlCode_=null),n=e>>>8,r=255&e,e!==this.PADDING_)if(e===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(e===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=t.pts;else if(e===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(e===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(e===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(e===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(e===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(e===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=xt();else if(e===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=xt();else if(e===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=xt()),this.mode_="paintOn",this.startPts_=t.pts;else if(this.isSpecialCharacter(n,r))s=kt((n=(3&n)<<8)|r),this[this.mode_](t.pts,s),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),s=kt((n=(3&n)<<8)|r),this[this.mode_](t.pts,s),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&r)&&this.addFormatting(t.pts,["i"]),1==(1&r)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var a=At.indexOf(7968&e);"rollUp"===this.mode_&&(a-this.rollUpRows_+1<0&&(a=this.rollUpRows_-1),this.setRollUp(t.pts,a)),a!==this.row_&&(this.clearFormatting(t.pts),this.row_=a),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&e)&&(this.column_=4*((14&e)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),s=kt(n),s+=kt(r),this[this.mode_](t.pts,s),this.column_+=s.length)}else this.lastControlCode_=null}};Pt.prototype=new $,Pt.prototype.flushDisplayed=function(t){var e=this.displayed_.map(function(t){try{return t.trim()}catch(t){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},Pt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=xt(),this.nonDisplayed_=xt(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Pt.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Pt.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&48<=e&&e<=63},Pt.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&32<=e&&e<=63},Pt.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&32<=e&&e<=47},Pt.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&33<=e&&e<=35},Pt.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&64<=e&&e<=127},Pt.prototype.isColorPAC=function(t){return 64<=t&&t<=79||96<=t&&t<=127},Pt.prototype.isNormalChar=function(t){return 32<=t&&t<=127},Pt.prototype.setRollUp=function(t,e){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=xt(),this.displayed_=xt()),void 0!==e&&e!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[e-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===e&&(e=this.row_),this.topRow_=e-this.rollUpRows_+1},Pt.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);var i=e.reduce(function(t,e){return t+"<"+e+">"},"");this[this.mode_](t,i)},Pt.prototype.clearFormatting=function(t){if(this.formatting_.length){var e=this.formatting_.reverse().reduce(function(t,e){return t+"</"+e+">"},"");this.formatting_=[],this[this.mode_](t,e)}},Pt.prototype.popOn=function(t,e){var i=this.nonDisplayed_[this.row_];i+=e,this.nonDisplayed_[this.row_]=i},Pt.prototype.rollUp=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i},Pt.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},Pt.prototype.paintOn=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i};function It(t,e){var i=1;for(e<t&&(i=-1);4294967296<Math.abs(e-t);)t+=8589934592*i;return t}function Ot(t){var e,i;Ot.prototype.init.call(this),this.type_=t||"shared",this.push=function(t){"shared"!==this.type_&&t.type!==this.type_||(void 0===i&&(i=t.dts),t.dts=It(t.dts,i),t.pts=It(t.pts,i),e=t.dts,this.trigger("data",t))},this.flush=function(){i=e,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){e=i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}}var Lt={CaptionStream:W,Cea608Stream:Pt},Dt={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};Ot.prototype=new $;function Rt(t,e,i){var n,r="";for(n=e;n<i;n++)r+="%"+("00"+t[n].toString(16)).slice(-2);return r}function Mt(t,e,i){return decodeURIComponent(Rt(t,e,i))}function Bt(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]}var Nt,Ut=Ot,jt={TXXX:function(t){var e;if(3===t.data[0]){for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=Mt(t.data,1,e),t.value=Mt(t.data,e+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=Mt(t.data,1,e),t.url=Mt(t.data,e+1,t.data.length);break}},PRIV:function(t){var e,i;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=(i=t.data,unescape(Rt(i,0,e)));break}t.privateData=t.data.subarray(e+1),t.data=t.privateData}};(Nt=function(t){var e,l={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},c=0,u=[],d=0;if(Nt.prototype.init.call(this),this.dispatchType=Dt.METADATA_STREAM_TYPE.toString(16),l.descriptor)for(e=0;e<l.descriptor.length;e++)this.dispatchType+=("00"+l.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,i,n,r,s;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(d=0,u.length=0),0===u.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))l.debug&&console.log("Skipping unrecognized metadata packet");else if(u.push(t),d+=t.data.byteLength,1===u.length&&(c=Bt(t.data.subarray(6,10)),c+=10),!(d<c)){for(e={data:new Uint8Array(c),frames:[],pts:u[0].pts,dts:u[0].dts},s=0;s<c;)e.data.set(u[0].data.subarray(0,c-s),s),s+=u[0].data.byteLength,d-=u[0].data.byteLength,u.shift();i=10,64&e.data[5]&&(i+=4,i+=Bt(e.data.subarray(10,14)),c-=Bt(e.data.subarray(16,20)));do{if((n=Bt(e.data.subarray(i+4,i+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((r={id:String.fromCharCode(e.data[i],e.data[i+1],e.data[i+2],e.data[i+3]),data:e.data.subarray(i+10,i+n+10)}).key=r.id,jt[r.id]&&(jt[r.id](r),"com.apple.streaming.transportStreamTimestamp"===r.owner)){var a=r.data,o=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;o*=4,o+=3&a[7],r.timeStamp=o,void 0===e.pts&&void 0===e.dts&&(e.pts=r.timeStamp,e.dts=r.timeStamp),this.trigger("timestamp",r)}e.frames.push(r),i+=10,i+=n}while(i<c);this.trigger("data",e)}}}).prototype=new $;var Ft,$t,Ht,zt=Nt,qt=Ut;(Ft=function(){var r=new Uint8Array(188),s=0;Ft.prototype.init.call(this),this.push=function(t){var e,i=0,n=188;for(s?((e=new Uint8Array(t.byteLength+s)).set(r.subarray(0,s)),e.set(t,s),s=0):e=t;n<e.byteLength;)71!==e[i]||71!==e[n]?(i++,n++):(this.trigger("data",e.subarray(i,n)),i+=188,n+=188);i<e.byteLength&&(r.set(e.subarray(i),0),s=e.byteLength-i)},this.flush=function(){188===s&&71===r[0]&&(this.trigger("data",r),s=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){s=0,this.trigger("reset")}}).prototype=new $,($t=function(){var n,r,s,a;$t.prototype.init.call(this),(a=this).packetsWaitingForPmt=[],this.programMapTable=void 0,n=function(t,e){var i=0;e.payloadUnitStartIndicator&&(i+=t[i]+1),("pat"===e.type?r:s)(t.subarray(i),e)},r=function(t,e){e.section_number=t[7],e.last_section_number=t[8],a.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=a.pmtPid},s=function(t,e){var i,n;if(1&t[5]){for(a.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&t[1])<<8|t[2])-4,n=12+((15&t[10])<<8|t[11]);n<i;){var r=t[n],s=(31&t[n+1])<<8|t[n+2];r===Dt.H264_STREAM_TYPE&&null===a.programMapTable.video?a.programMapTable.video=s:r===Dt.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?a.programMapTable.audio=s:r===Dt.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][s]=r),n+=5+((15&t[n+3])<<8|t[n+4])}e.programMapTable=a.programMapTable}},this.push=function(t){var e={},i=4;if(e.payloadUnitStartIndicator=!!(64&t[1]),e.pid=31&t[1],e.pid<<=8,e.pid|=t[2],1<(48&t[3])>>>4&&(i+=t[i]+1),0===e.pid)e.type="pat",n(t.subarray(i),e),this.trigger("data",e);else if(e.pid===this.pmtPid)for(e.type="pmt",n(t.subarray(i),e),this.trigger("data",e);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,e]):this.processPes_(t,i,e)},this.processPes_=function(t,e,i){i.pid===this.programMapTable.video?i.streamType=Dt.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=Dt.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=t.subarray(e),this.trigger("data",i)}}).prototype=new $,$t.STREAM_TYPES={h264:27,adts:15},(Ht=function(){function n(t,e,i){var n,r,s=new Uint8Array(t.size),a={type:e},o=0,l=0;if(t.data.length&&!(t.size<9)){for(a.trackId=t.data[0].pid,o=0;o<t.data.length;o++)r=t.data[o],s.set(r.data,l),l+=r.data.byteLength;var c,u,d;c=s,(u=a).packetLength=6+(c[4]<<8|c[5]),u.dataAlignmentIndicator=0!=(4&c[6]),192&(d=c[7])&&(u.pts=(14&c[9])<<27|(255&c[10])<<20|(254&c[11])<<12|(255&c[12])<<5|(254&c[13])>>>3,u.pts*=4,u.pts+=(6&c[13])>>>1,u.dts=u.pts,64&d&&(u.dts=(14&c[14])<<27|(255&c[15])<<20|(254&c[16])<<12|(255&c[17])<<5|(254&c[18])>>>3,u.dts*=4,u.dts+=(6&c[18])>>>1)),u.data=c.subarray(9+c[8]),n="video"===e||a.packetLength<=t.size,(i||n)&&(t.size=0,t.data.length=0),n&&h.trigger("data",a)}}var e,h=this,r={data:[],size:0},s={data:[],size:0},a={data:[],size:0};Ht.prototype.init.call(this),this.push=function(i){({pat:function(){},pes:function(){var t,e;switch(i.streamType){case Dt.H264_STREAM_TYPE:case Dt.H264_STREAM_TYPE:t=r,e="video";break;case Dt.ADTS_STREAM_TYPE:t=s,e="audio";break;case Dt.METADATA_STREAM_TYPE:t=a,e="timed-metadata";break;default:return}i.payloadUnitStartIndicator&&n(t,e,!0),t.data.push(i),t.size+=i.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]};null!==(e=i.programMapTable).video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),h.trigger("data",t)}})[i.type]()},this.reset=function(){r.size=0,r.data.length=0,s.size=0,s.data.length=0,this.trigger("reset")},this.flushStreams_=function(){n(r,"video"),n(s,"audio"),n(a,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new $;var Wt={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Ft,TransportParseStream:$t,ElementaryStream:Ht,TimestampRolloverStream:qt,CaptionStream:Lt.CaptionStream,Cea608Stream:Lt.Cea608Stream,MetadataStream:zt};for(var Vt in Dt)Dt.hasOwnProperty(Vt)&&(Wt[Vt]=Dt[Vt]);var Gt,Xt=Wt,Yt=ct,Kt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Gt=function(l){var c,u=0;Gt.prototype.init.call(this),this.push=function(t){var e,i,n,r,s,a,o=0;if(l||(u=0),"audio"===t.type)for(c?(r=c,(c=new Uint8Array(r.byteLength+t.data.byteLength)).set(r),c.set(t.data,r.byteLength)):c=t.data;o+5<c.length;)if(255===c[o]&&240==(246&c[o+1])){if(i=2*(1&~c[o+1]),e=(3&c[o+3])<<11|c[o+4]<<3|(224&c[o+5])>>5,a=(s=1024*(1+(3&c[o+6])))*Yt/Kt[(60&c[o+2])>>>2],n=o+e,c.byteLength<n)return;if(this.trigger("data",{pts:t.pts+u*a,dts:t.dts+u*a,sampleCount:s,audioobjecttype:1+(c[o+2]>>>6&3),channelcount:(1&c[o+2])<<2|(192&c[o+3])>>>6,samplerate:Kt[(60&c[o+2])>>>2],samplingfrequencyindex:(60&c[o+2])>>>2,samplesize:16,data:c.subarray(o+7+i,n)}),u++,c.byteLength===n)return void(c=void 0);c=c.subarray(n)}else o++},this.flush=function(){u=0,this.trigger("done")},this.reset=function(){c=void 0,this.trigger("reset")},this.endTimeline=function(){c=void 0,this.trigger("endedtimeline")}}).prototype=new $;var Qt,Zt,Jt,te=Gt,ee=function(n){var r=n.byteLength,s=0,a=0;this.length=function(){return 8*r},this.bitsAvailable=function(){return 8*r+a},this.loadWord=function(){var t=n.byteLength-r,e=new Uint8Array(4),i=Math.min(4,r);if(0===i)throw new Error("no bytes available");e.set(n.subarray(t,t+i)),s=new DataView(e.buffer).getUint32(0),a=8*i,r-=i},this.skipBits=function(t){var e;t<a||(t-=a,t-=8*(e=Math.floor(t/8)),r-=e,this.loadWord()),s<<=t,a-=t},this.readBits=function(t){var e=Math.min(a,t),i=s>>>32-e;return 0<(a-=e)?s<<=e:0<r&&this.loadWord(),0<(e=t-e)?i<<e|this.readBits(e):i},this.skipLeadingZeros=function(){var t;for(t=0;t<a;++t)if(0!=(s&2147483648>>>t))return s<<=t,a-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(Zt=function(){var n,r,s=0;Zt.prototype.init.call(this),this.push=function(t){for(var e,i=(r=r?((e=new Uint8Array(r.byteLength+t.data.byteLength)).set(r),e.set(t.data,r.byteLength),e):t.data).byteLength;s<i-3;s++)if(1===r[s+2]){n=s+5;break}for(;n<i;)switch(r[n]){case 0:if(0!==r[n-1]){n+=2;break}if(0!==r[n-2]){n++;break}for(s+3!==n-2&&this.trigger("data",r.subarray(s+3,n-2));1!==r[++n]&&n<i;);s=n-2,n+=3;break;case 1:if(0!==r[n-1]||0!==r[n-2]){n+=3;break}this.trigger("data",r.subarray(s+3,n-2)),s=n-2,n+=3;break;default:n+=3}r=r.subarray(s),n-=s,s=0},this.reset=function(){r=null,s=0,this.trigger("reset")},this.flush=function(){r&&3<r.byteLength&&this.trigger("data",r.subarray(s+3)),r=null,s=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new $,Jt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(Qt=function(){var i,n,r,s,a,o,b,e=new Zt;Qt.prototype.init.call(this),(i=this).push=function(t){"video"===t.type&&(n=t.trackId,r=t.pts,s=t.dts,e.push(t))},e.on("data",function(t){var e={trackId:n,pts:r,dts:s,data:t};switch(31&t[0]){case 5:e.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:e.nalUnitType="sei_rbsp",e.escapedRBSP=a(t.subarray(1));break;case 7:e.nalUnitType="seq_parameter_set_rbsp",e.escapedRBSP=a(t.subarray(1)),e.config=o(e.escapedRBSP);break;case 8:e.nalUnitType="pic_parameter_set_rbsp";break;case 9:e.nalUnitType="access_unit_delimiter_rbsp"}i.trigger("data",e)}),e.on("done",function(){i.trigger("done")}),e.on("partialdone",function(){i.trigger("partialdone")}),e.on("reset",function(){i.trigger("reset")}),e.on("endedtimeline",function(){i.trigger("endedtimeline")}),this.flush=function(){e.flush()},this.partialFlush=function(){e.partialFlush()},this.reset=function(){e.reset()},this.endTimeline=function(){e.endTimeline()},b=function(t,e){var i,n=8,r=8;for(i=0;i<t;i++)0!==r&&(r=(n+e.readExpGolomb()+256)%256),n=0===r?n:r},a=function(t){for(var e,i,n=t.byteLength,r=[],s=1;s<n-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return t;e=n-r.length,i=new Uint8Array(e);var a=0;for(s=0;s<e;a++,s++)a===r[0]&&(a++,r.shift()),i[s]=t[a];return i},o=function(t){var e,i,n,r,s,a,o,l,c,u,d,h,p,f=0,m=0,g=0,v=0,y=1;if(i=(e=new ee(t)).readUnsignedByte(),r=e.readUnsignedByte(),n=e.readUnsignedByte(),e.skipUnsignedExpGolomb(),Jt[i]&&(3===(s=e.readUnsignedExpGolomb())&&e.skipBits(1),e.skipUnsignedExpGolomb(),e.skipUnsignedExpGolomb(),e.skipBits(1),e.readBoolean()))for(d=3!==s?8:12,p=0;p<d;p++)e.readBoolean()&&b(p<6?16:64,e);if(e.skipUnsignedExpGolomb(),0===(a=e.readUnsignedExpGolomb()))e.readUnsignedExpGolomb();else if(1===a)for(e.skipBits(1),e.skipExpGolomb(),e.skipExpGolomb(),o=e.readUnsignedExpGolomb(),p=0;p<o;p++)e.skipExpGolomb();if(e.skipUnsignedExpGolomb(),e.skipBits(1),l=e.readUnsignedExpGolomb(),c=e.readUnsignedExpGolomb(),0===(u=e.readBits(1))&&e.skipBits(1),e.skipBits(1),e.readBoolean()&&(f=e.readUnsignedExpGolomb(),m=e.readUnsignedExpGolomb(),g=e.readUnsignedExpGolomb(),v=e.readUnsignedExpGolomb()),e.readBoolean()&&e.readBoolean()){switch(e.readUnsignedByte()){case 1:h=[1,1];break;case 2:h=[12,11];break;case 3:h=[10,11];break;case 4:h=[16,11];break;case 5:h=[40,33];break;case 6:h=[24,11];break;case 7:h=[20,11];break;case 8:h=[32,11];break;case 9:h=[80,33];break;case 10:h=[18,11];break;case 11:h=[15,11];break;case 12:h=[64,33];break;case 13:h=[160,99];break;case 14:h=[4,3];break;case 15:h=[3,2];break;case 16:h=[2,1];break;case 255:h=[e.readUnsignedByte()<<8|e.readUnsignedByte(),e.readUnsignedByte()<<8|e.readUnsignedByte()]}h&&(y=h[0]/h[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:r,width:Math.ceil((16*(l+1)-2*f-2*m)*y),height:(2-u)*(c+1)*16-2*g-2*v,sarRatio:h}}}).prototype=new $;var ie,ne={H264Stream:Qt,NalByteStream:Zt},re=function(t){return t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)},se=function(t,e){var i=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&t[e+5])>>4?20+i:10+i},ae=function(t,e){var i=(224&t[e+5])>>5,n=t[e+4]<<3;return 6144&t[e+3]|n|i};(ie=function(){var o=new Uint8Array,l=0;ie.prototype.init.call(this),this.setTimestamp=function(t){l=t},this.push=function(t){var e,i,n,r,s=0,a=0;for(o.length?(r=o.length,(o=new Uint8Array(t.byteLength+r)).set(o.subarray(0,r)),o.set(t,r)):o=t;3<=o.length-a;)if(o[a]!=="I".charCodeAt(0)||o[a+1]!=="D".charCodeAt(0)||o[a+2]!=="3".charCodeAt(0))if(255!=(255&o[a])||240!=(240&o[a+1]))a++;else{if(o.length-a<7)break;if(a+(s=ae(o,a))>o.length)break;n={type:"audio",data:o.subarray(a,a+s),pts:l,dts:l},this.trigger("data",n),a+=s}else{if(o.length-a<10)break;if(a+(s=se(o,a))>o.length)break;i={type:"timed-metadata",data:o.subarray(a,a+s)},this.trigger("data",i),a+=s}e=o.length-a,o=0<e?o.subarray(a):new Uint8Array},this.reset=function(){o=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){o=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new $;function oe(t,e){var i;if(t.length===e.length){for(i=0;i<t.length;i++)if(t[i]!==e[i])return;return 1}}function le(t,e,i,n,r,s){return{start:{dts:t,pts:t+(i-e)},end:{dts:t+(n-e),pts:t+(r-i)},prependedContentDuration:s,baseMediaDecodeTime:t}}var ce,ue,de,he,pe=ie,fe=ne.H264Stream,me=re,ge=ct,ve=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],ye=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"];(ue=function(s,a){var o=[],l=0,c=0,u=0,d=1/0;a=a||{},ue.prototype.init.call(this),this.push=function(e){_t(s,e),s&&ve.forEach(function(t){s[t]=e[t]}),o.push(e)},this.setEarliestDts=function(t){c=t-s.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(t){d=t},this.setAudioAppendStart=function(t){u=t},this.flush=function(){var t,e,i,n,r;0!==o.length&&(t=ft(o,s,c),s.baseMediaDecodeTime=bt(s,a.keepOriginalTimestamps),pt(s,t,u,d),s.samples=mt(t),i=Q(gt(t)),o=[],e=Z(l,[s]),n=new Uint8Array(e.byteLength+i.byteLength),l++,n.set(e),n.set(i,e.byteLength),yt(s),r=Math.ceil(1024*ge/s.samplerate),t.length&&this.trigger("timingInfo",{start:t[0].dts,end:t[0].dts+t.length*r}),this.trigger("data",{track:s,boxes:n})),this.trigger("done","AudioSegmentStream")},this.reset=function(){yt(s),o=[],this.trigger("reset")}}).prototype=new $,(ce=function(u,d){var e,i,h=0,p=[],f=[];d=d||{},ce.prototype.init.call(this),delete u.minPTS,this.gopCache_=[],this.push=function(t){_t(u,t),"seq_parameter_set_rbsp"!==t.nalUnitType||e||(e=t.config,u.sps=[t.data],ye.forEach(function(t){u[t]=e[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.data,u.pps=[t.data]),p.push(t)},this.flush=function(){for(var t,e,i,n,r,s,a,o,l=0;p.length&&"access_unit_delimiter_rbsp"!==p[0].nalUnitType;)p.shift();if(0===p.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(t=tt(p),(i=et(t))[0][0].keyFrame||((e=this.getGopForFusion_(p[0],u))?(l=e.duration,i.unshift(e),i.byteLength+=e.byteLength,i.nalCount+=e.nalCount,i.pts=e.pts,i.dts=e.dts,i.duration+=e.duration):i=it(i)),f.length){var c;if(!(c=d.alignGopsAtEnd?this.alignGopsAtEnd_(i):this.alignGopsAtStart_(i)))return this.gopCache_.unshift({gop:i.pop(),pps:u.pps,sps:u.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),p=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");yt(u),i=c}_t(u,i),u.samples=nt(i),r=Q(rt(i)),u.baseMediaDecodeTime=bt(u,d.keepOriginalTimestamps),this.trigger("processedGopsInfo",i.map(function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}})),a=i[0],o=i[i.length-1],this.trigger("segmentTimingInfo",le(u.baseMediaDecodeTime,a.dts,a.pts,o.dts+o.duration,o.pts+o.duration,l)),this.trigger("timingInfo",{start:i[0].dts,end:i[i.length-1].dts+i[i.length-1].duration}),this.gopCache_.unshift({gop:i.pop(),pps:u.pps,sps:u.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),p=[],this.trigger("baseMediaDecodeTime",u.baseMediaDecodeTime),this.trigger("timelineStartInfo",u.timelineStartInfo),n=Z(h,[u]),s=new Uint8Array(n.byteLength+r.byteLength),h++,s.set(n),s.set(r,n.byteLength),this.trigger("data",{track:u,boxes:s}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),p=[],this.gopCache_.length=0,f.length=0,this.trigger("reset")},this.resetStream_=function(){yt(u),i=e=void 0},this.getGopForFusion_=function(t){var e,i,n,r,s,a=1/0;for(s=0;s<this.gopCache_.length;s++)n=(r=this.gopCache_[s]).gop,u.pps&&oe(u.pps[0],r.pps[0])&&u.sps&&oe(u.sps[0],r.sps[0])&&(n.dts<u.timelineStartInfo.dts||-1e4<=(e=t.dts-n.dts-n.duration)&&e<=45e3&&(!i||e<a)&&(i=r,a=e));return i?i.gop:null},this.alignGopsAtStart_=function(t){var e,i,n,r,s,a,o,l;for(s=t.byteLength,a=t.nalCount,o=t.duration,e=i=0;e<f.length&&i<t.length&&(n=f[e],r=t[i],n.pts!==r.pts);)r.pts>n.pts?e++:(i++,s-=r.byteLength,a-=r.nalCount,o-=r.duration);return 0===i?t:i===t.length?null:((l=t.slice(i)).byteLength=s,l.duration=o,l.nalCount=a,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(t){var e,i,n,r,s,a,o;for(e=f.length-1,i=t.length-1,s=null,a=!1;0<=e&&0<=i;){if(n=f[e],r=t[i],n.pts===r.pts){a=!0;break}n.pts>r.pts?e--:(e===f.length-1&&(s=i),i--)}if(!a&&null===s)return null;if(0===(o=a?i:s))return t;var l=t.slice(o),c=l.reduce(function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t},{byteLength:0,duration:0,nalCount:0});return l.byteLength=c.byteLength,l.duration=c.duration,l.nalCount=c.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(t){f=t}}).prototype=new $,(he=function(t,e){this.numberOfTracks=0,this.metadataStream=e,void 0!==(t=t||{}).remux?this.remuxTracks=!!t.remux:this.remuxTracks=!0,"boolean"==typeof t.keepOriginalTimestamps?this.keepOriginalTimestamps=t.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,he.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track,this.pendingBoxes.push(t.boxes)),void("audio"===t.track.type&&(this.audioTrack=t.track,this.pendingBoxes.unshift(t.boxes))))}}).prototype=new $,he.prototype.flush=function(t){var e,i,n,r,s=0,a={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,ye.forEach(function(t){a.info[t]=this.videoTrack[t]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,ve.forEach(function(t){a.info[t]=this.audioTrack[t]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,n=J(this.pendingTracks),a.initSegment=new Uint8Array(n.byteLength),a.initSegment.set(n),a.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)a.data.set(this.pendingBoxes[r],s),s+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(e=this.pendingCaptions[r]).startTime=ht(e.startPts,o,this.keepOriginalTimestamps),e.endTime=ht(e.endPts,o,this.keepOriginalTimestamps),a.captionStreams[e.stream]=!0,a.captions.push(e);for(r=0;r<this.pendingMetadata.length;r++)(i=this.pendingMetadata[r]).cueTime=ht(i.pts,o,this.keepOriginalTimestamps),a.metadata.push(i);for(a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),r=0;r<a.captions.length;r++)e=a.captions[r],this.trigger("caption",e);for(r=0;r<a.metadata.length;r++)i=a.metadata[r],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},he.prototype.setRemux=function(t){this.remuxTracks=t},(de=function(n){var r,s,a=this,i=!0;de.prototype.init.call(this),n=n||{},this.baseMediaDecodeTime=n.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};(this.transmuxPipeline_=e).type="aac",e.metadataStream=new Xt.MetadataStream,e.aacStream=new pe,e.audioTimestampRolloverStream=new Xt.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new Xt.TimestampRolloverStream("timed-metadata"),e.adtsStream=new te,e.coalesceStream=new he(n,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(t){e.aacStream.setTimestamp(t.timeStamp)}),e.aacStream.on("data",function(t){"timed-metadata"!==t.type||e.audioSegmentStream||(s=s||{timelineStartInfo:{baseMediaDecodeTime:a.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new ue(s,n),e.audioSegmentStream.on("timingInfo",a.trigger.bind(a,"audioTimingInfo")),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream)),a.trigger("trackinfo",{hasAudio:!!s,hasVideo:!!r})}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var i={};(this.transmuxPipeline_=i).type="ts",i.metadataStream=new Xt.MetadataStream,i.packetStream=new Xt.TransportPacketStream,i.parseStream=new Xt.TransportParseStream,i.elementaryStream=new Xt.ElementaryStream,i.timestampRolloverStream=new Xt.TimestampRolloverStream,i.adtsStream=new te,i.h264Stream=new fe,i.captionStream=new Xt.CaptionStream,i.coalesceStream=new he(n,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream).pipe(i.timestampRolloverStream),i.timestampRolloverStream.pipe(i.h264Stream),i.timestampRolloverStream.pipe(i.adtsStream),i.timestampRolloverStream.pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",function(t){var e;if("metadata"===t.type){for(e=t.tracks.length;e--;)r||"video"!==t.tracks[e].type?s||"audio"!==t.tracks[e].type||((s=t.tracks[e]).timelineStartInfo.baseMediaDecodeTime=a.baseMediaDecodeTime):(r=t.tracks[e]).timelineStartInfo.baseMediaDecodeTime=a.baseMediaDecodeTime;r&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new ce(r,n),i.videoSegmentStream.on("timelineStartInfo",function(t){s&&(s.timelineStartInfo=t,i.audioSegmentStream.setEarliestDts(t.dts))}),i.videoSegmentStream.on("processedGopsInfo",a.trigger.bind(a,"gopInfo")),i.videoSegmentStream.on("segmentTimingInfo",a.trigger.bind(a,"videoSegmentTimingInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",function(t){s&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(t)}),i.videoSegmentStream.on("timingInfo",a.trigger.bind(a,"videoTimingInfo")),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),s&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new ue(s,n),i.audioSegmentStream.on("timingInfo",a.trigger.bind(a,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)),a.trigger("trackinfo",{hasAudio:!!s,hasVideo:!!r})}}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("id3Frame",function(t){t.dispatchType=i.metadataStream.dispatchType,a.trigger("id3Frame",t)}),i.coalesceStream.on("caption",this.trigger.bind(this,"caption")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(t){var e=this.transmuxPipeline_;n.keepOriginalTimestamps||(this.baseMediaDecodeTime=t),s&&(s.timelineStartInfo.dts=void 0,s.timelineStartInfo.pts=void 0,yt(s),n.keepOriginalTimestamps||(s.timelineStartInfo.baseMediaDecodeTime=t),e.audioTimestampRolloverStream&&e.audioTimestampRolloverStream.discontinuity()),r&&(e.videoSegmentStream&&(e.videoSegmentStream.gopCache_=[]),r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,yt(r),e.captionStream.reset(),n.keepOriginalTimestamps||(r.timelineStartInfo.baseMediaDecodeTime=t)),e.timestampRolloverStream&&e.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){s&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.setRemux=function(t){var e=this.transmuxPipeline_;n.remux=t,e&&e.coalesceStream&&e.coalesceStream.setRemux(t)},this.alignGopsWith=function(t){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.push=function(t){if(i){var e=me(t);e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new $;var be={Transmuxer:de,VideoSegmentStream:ce,AudioSegmentStream:ue,AUDIO_PROPERTIES:ve,VIDEO_PROPERTIES:ye,generateVideoSegmentTimingInfo:le};function _e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Te=(function(t,e,i){return e&&_e(t.prototype,e),i&&_e(t,i),t}(we,[{key:"init",value:function(){var n,t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new be.Transmuxer(this.options),n=this.self,(t=this.transmuxer).on("data",function(t){var e=t.initSegment;t.initSegment={data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength};var i=t.data;t.data=i.buffer,n.postMessage({action:"data",segment:t,byteOffset:i.byteOffset,byteLength:i.byteLength},[t.data])}),t.captionStream&&t.captionStream.on("data",function(t){n.postMessage({action:"caption",data:t})}),t.on("done",function(t){n.postMessage({action:"done"})}),t.on("gopInfo",function(t){n.postMessage({action:"gopInfo",gopInfo:t})}),t.on("videoSegmentTimingInfo",function(t){n.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})})}},{key:"push",value:function(t){var e=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(e)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(t){var e=t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*e))}},{key:"setAudioAppendStart",value:function(t){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*t.appendStart))}},{key:"flush",value:function(){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(t){this.transmuxer.alignGopsWith(t.gopsToAlignWith.slice())}}]),we);function we(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,we),this.options=e||{},this.self=t,this.init()}new function(e){e.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new Te(e,t.data.options):(this.messageHandlers||(this.messageHandlers=new Te(e)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(Se)}()}),Xl={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},Yl=(Do(Kl,ss.EventTarget),Oo(Kl,[{key:"data_",value:function(t){var e=t.data.segment;e.data=new Uint8Array(e.data,t.data.byteOffset,t.data.byteLength),e.initSegment=new Uint8Array(e.initSegment.data,e.initSegment.byteOffset,e.initSegment.byteLength),function(t,e,i){var n=e.player_;if(i.captions&&i.captions.length)for(var r in t.inbandTextTracks_||(t.inbandTextTracks_={}),i.captionStreams)if(!t.inbandTextTracks_[r]){n.tech_.trigger({type:"usage",name:"hls-608"});var s=n.textTracks().getTrackById(r);t.inbandTextTracks_[r]=s||n.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}i.metadata&&i.metadata.length&&!t.metadataTrack_&&(t.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=i.metadata.dispatchType)}(this,this.mediaSource_,e),this.pendingBuffers_.push(e)}},{key:"done_",value:function(){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"videoSegmentTimingInfo_",value:function(t){var e={start:{decode:t.start.dts/9e4,presentation:t.start.pts/9e4},end:{decode:t.end.dts/9e4,presentation:t.end.pts/9e4},baseMediaDecodeTime:t.baseMediaDecodeTime/9e4};t.prependedContentDuration&&(e.prependedContentDuration=t.prependedContentDuration/9e4),this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:e})}},{key:"createRealSourceBuffers_",value:function(){var n=this,r=["audio","video"];r.forEach(function(e){if(n[e+"Codec_"]&&!n[e+"Buffer_"]){var i=null;if(n.mediaSource_[e+"Buffer_"])(i=n.mediaSource_[e+"Buffer_"]).updating=!1;else{var t=e+'/mp4;codecs="'+n[e+"Codec_"]+'"';i=Vl(n.mediaSource_.nativeMediaSource_,t),n.mediaSource_[e+"Buffer_"]=i}n[e+"Buffer_"]=i,["update","updatestart","updateend"].forEach(function(t){i.addEventListener(t,function(){if("audio"!==e||!n.audioDisabled_)return"updateend"===t&&(n[e+"Buffer_"].updating=!1),r.every(function(t){return!("audio"!==t||!n.audioDisabled_)||e===t||!n[t+"Buffer_"]||!n[t+"Buffer_"].updating})?n.trigger(t):void 0})})}})}},{key:"appendBuffer",value:function(t){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var e=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:e.end(e.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:function(t,e,i){if(null==e||!t.length)return[];var n=Math.ceil(9e4*(e-i+3)),r=void 0;for(r=0;r<t.length&&!(t[r].pts>n);r++);return t.slice(r)}(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(t){this.gopBuffer_=function(t,e,i){if(!e.length)return t;if(i)return e.slice();for(var n=e[0].pts,r=0;r<t.length&&!(t[r].pts>=n);r++);return t.slice(0,r).concat(e)}(this.gopBuffer_,t.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(t,e){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(t,e),this.gopBuffer_=function(t,e,i,n){for(var r=Math.ceil(9e4*(e-n)),s=Math.ceil(9e4*(i-n)),a=t.slice(),o=t.length;o--&&!(t[o].pts<=s););if(-1===o)return a;for(var l=o+1;l--&&!(t[l].pts<=r););return l=Math.max(l,0),a.splice(l,o-l+1),a}(this.gopBuffer_,t,e,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(t,e)),yl(t,e,this.metadataTrack_),this.inbandTextTracks_)for(var i in this.inbandTextTracks_)yl(t,e,this.inbandTextTracks_[i])}},{key:"processPendingSegments_",value:function(){var t={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};if(!this.pendingBuffers_.length)return this.trigger("updateend"),void(this.bufferUpdating_=!1);t=this.pendingBuffers_.reduce(function(t,e){var i=e.type,n=e.data,r=e.initSegment;return t[i].segments.push(n),t[i].bytes+=n.byteLength,t[i].initSegment=r,e.captions&&(t.captions=t.captions.concat(e.captions)),e.info&&(t[i].info=e.info),e.metadata&&(t.metadata=t.metadata.concat(e.metadata)),t},t),this.videoBuffer_||this.audioBuffer_||(0===t.video.bytes&&(this.videoCodec_=null),0===t.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),t.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:t.audio.info}),t.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:t.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(t.audio.segments.unshift(t.audio.initSegment),t.audio.bytes+=t.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var e=!1;this.videoBuffer_&&t.video.bytes?(t.video.segments.unshift(t.video.initSegment),t.video.bytes+=t.video.initSegment.byteLength,this.concatAndAppendSegments_(t.video,this.videoBuffer_)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(e=!0),_l(this,t.captions,t.metadata),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(t.audio,this.audioBuffer_),this.pendingBuffers_.length=0,e&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(t,e){var i=0,n=void 0;if(t.bytes){n=new Uint8Array(t.bytes),t.segments.forEach(function(t){n.set(t,i),i+=t.byteLength});try{e.updating=!0,e.appendBuffer(n)}catch(t){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:t.message,originalError:t})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),Kl);function Kl(t,e){Io(this,Kl);var i=Ro(this,(Kl.__proto__||Object.getPrototypeOf(Kl)).call(this,ss.EventTarget));i.timestampOffset_=0,i.pendingBuffers_=[],i.bufferUpdating_=!1,i.mediaSource_=t,i.codecs_=e,i.audioCodec_=null,i.videoCodec_=null,i.audioDisabled_=!1,i.appendAudioInitSegment_=!0,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=11<=ss.browser.IE_VERSION;var n={remux:!1,alignGopsAtEnd:i.safeAppend_};return i.codecs_.forEach(function(t){ql(t)?i.audioCodec_=t:Wl(t)&&(i.videoCodec_=t)}),i.transmuxer_=new Gl,i.transmuxer_.postMessage({action:"init",options:n}),i.transmuxer_.onmessage=function(t){return"data"===t.data.action?i.data_(t):"done"===t.data.action?i.done_(t):"gopInfo"===t.data.action?i.appendGopInfo_(t):"videoSegmentTimingInfo"===t.data.action?i.videoSegmentTimingInfo_(t.data.videoSegmentTimingInfo):void 0},Object.defineProperty(i,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(t){"number"==typeof t&&0<=t&&(this.timestampOffset_=t,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t}))}}),Object.defineProperty(i,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(t){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=t),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=t)}}),Object.defineProperty(i,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(i,"buffered",{get:function(){return function(t,e,i){var n=null,r=null,s=0,a=[],o=[];if(!t&&!e)return ss.createTimeRange();if(!t)return e.buffered;if(!e)return t.buffered;if(i)return t.buffered;if(0===t.buffered.length&&0===e.buffered.length)return ss.createTimeRange();for(var l=t.buffered,c=e.buffered,u=l.length;u--;)a.push({time:l.start(u),type:"start"}),a.push({time:l.end(u),type:"end"});for(u=c.length;u--;)a.push({time:c.start(u),type:"start"}),a.push({time:c.end(u),type:"end"});for(a.sort(function(t,e){return t.time-e.time}),u=0;u<a.length;u++)"start"===a[u].type?2===++s&&(n=a[u].time):"end"===a[u].type&&1===--s&&(r=a[u].time),null!==n&&null!==r&&(o.push([n,r]),r=n=null);return ss.createTimeRanges(o)}(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),i}var Ql=(Do(Zl,ss.EventTarget),Oo(Zl,[{key:"addSeekableRange_",value:function(t,e){var i=void 0;if(this.duration!==1/0)throw(i=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",i.code=11,i;(e>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=e)}},{key:"addSourceBuffer",value:function(t){var e=void 0,i=zl(t);if(/^(video|audio)\/mp2t$/i.test(i.type)){var n=[];i.parameters&&i.parameters.codecs&&(n=i.parameters.codecs.split(","),n=(n=jl(n)).filter(function(t){return ql(t)||Wl(t)})),0===n.length&&(n=["avc1.4d400d","mp4a.40.2"]),e=new Yl(this,n),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),e.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else e=this.nativeMediaSource_.addSourceBuffer(t);return this.sourceBuffers.push(e),e}}]),Zl);function Zl(){Io(this,Zl);var s=Ro(this,(Zl.__proto__||Object.getPrototypeOf(Zl)).call(this)),t=void 0;for(t in s.nativeMediaSource_=new y.MediaSource,s.nativeMediaSource_)t in Zl.prototype||"function"!=typeof s.nativeMediaSource_[t]||(s[t]=s.nativeMediaSource_[t].bind(s.nativeMediaSource_));return s.duration_=NaN,Object.defineProperty(s,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(t){(this.duration_=t)===1/0||(this.nativeMediaSource_.duration=t)}}),Object.defineProperty(s,"seekable",{get:function(){return this.duration_===1/0?ss.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(s,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(s,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),s.sourceBuffers=[],s.activeSourceBuffers_=[],s.updateActiveSourceBuffers_=function(){if(s.activeSourceBuffers_.length=0,1===s.sourceBuffers.length){var t=s.sourceBuffers[0];return t.appendAudioInitSegment_=!0,t.audioDisabled_=!t.audioCodec_,void s.activeSourceBuffers_.push(t)}for(var i=!1,n=!0,e=0;e<s.player_.audioTracks().length;e++){var r=s.player_.audioTracks()[e];if(r.enabled&&"main"!==r.kind){n=!(i=!0);break}}s.sourceBuffers.forEach(function(t,e){if(t.appendAudioInitSegment_=!0,t.videoCodec_&&t.audioCodec_)t.audioDisabled_=i;else if(t.videoCodec_&&!t.audioCodec_)t.audioDisabled_=!0,n=!1;else if(!t.videoCodec_&&t.audioCodec_&&(t.audioDisabled_=e?n:!n,t.audioDisabled_))return;s.activeSourceBuffers_.push(t)})},s.onPlayerMediachange_=function(){s.sourceBuffers.forEach(function(t){t.appendAudioInitSegment_=!0})},s.onHlsReset_=function(){s.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.postMessage({action:"resetCaptions"})})},s.onHlsSegmentTimeMapping_=function(e){s.sourceBuffers.forEach(function(t){return t.timeMapping_=e.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(t){this.nativeMediaSource_.addEventListener(t,this.trigger.bind(this))},s),s.on("sourceopen",function(t){var e=d.querySelector('[src="'+s.url_+'"]');e&&(s.player_=ss(e.parentNode),s.player_&&(s.player_.tech_.on("hls-reset",s.onHlsReset_),s.player_.tech_.on("hls-segment-time-mapping",s.onHlsSegmentTimeMapping_),s.player_.audioTracks&&s.player_.audioTracks()&&(s.player_.audioTracks().on("change",s.updateActiveSourceBuffers_),s.player_.audioTracks().on("addtrack",s.updateActiveSourceBuffers_),s.player_.audioTracks().on("removetrack",s.updateActiveSourceBuffers_)),s.player_.on("mediachange",s.onPlayerMediachange_)))}),s.on("sourceended",function(t){for(var e=bl(s.duration),i=0;i<s.sourceBuffers.length;i++){var n=s.sourceBuffers[i],r=n.metadataTrack_&&n.metadataTrack_.cues;r&&r.length&&(r[r.length-1].endTime=e)}}),s.on("sourceclose",function(t){this.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),s}var Jl=0;ss.mediaSources={};function tc(t,e){var i=ss.mediaSources[t];if(!i)throw new Error("Media Source not found (Video.js)");i.trigger({type:"sourceopen",swfId:e})}function ec(){return!!y.MediaSource&&!!y.MediaSource.isTypeSupported&&y.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')}function ic(){if(this.MediaSource={open:tc,supportsNativeMediaSources:ec},ec())return new Ql;throw new Error("Cannot use create a virtual MediaSource for this video")}ic.open=tc,ic.supportsNativeMediaSources=ec;var nc={createObjectURL:function(t){var e=void 0;return t instanceof Ql?(e=y.URL.createObjectURL(t.nativeMediaSource_),t.url_=e):t instanceof Ql?(e="blob:vjs-media-source/"+Jl,Jl++,ss.mediaSources[e]=t,e):(e=y.URL.createObjectURL(t),t.url_=e)}};ss.MediaSource=ic,ss.URL=nc;function rc(t,e){for(var a=void 0,o=lc(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod}),i=0;i<e.playlists.length;i++){var n=Bo(o,e.playlists[i]);n?o=n:a=!0}return Mo(e,function(t,e,i,n){if(t.playlists&&t.playlists.length){var r=t.playlists[0].uri,s=Bo(o,t.playlists[0]);s&&((o=s).mediaGroups[e][i][n].playlists[0]=o.playlists[r],a=!1)}}),a?null:o}function sc(t){var e=t.byterange.offset+t.byterange.length-1;return t.uri+"-"+t.byterange.offset+"-"+e}function ac(t,e){var i,n,r={};for(var s in t){var a=t[s].sidx;if(a){var o=sc(a);if(!e[o])break;var l=e[o].sidxInfo;i=l,n=a,(Boolean(!i.map&&!n.map)||Boolean(i.map&&n.map&&i.map.byterange.offset===n.map.byterange.offset&&i.map.byterange.length===n.map.byterange.length))&&i.uri===n.uri&&i.byterange.offset===n.byterange.offset&&i.byterange.length===n.byterange.length&&(r[o]=e[o])}}return r}function oc(t,e,i,n,r){var s={uri:Po(n.handleManifestRedirects,t.resolvedUri),byterange:t.byterange,playlist:e};return i(ss.mergeOptions(s,{responseType:"arraybuffer",headers:rl(s)}),r)}var lc=ss.mergeOptions,cc=(Do(uc,ss.EventTarget),Oo(uc,[{key:"setupChildLoader",value:function(t,e){this.masterPlaylistLoader_=t,this.childPlaylist_=e}},{key:"dispose",value:function(){this.stopRequest(),this.loadedPlaylists_={},y.clearTimeout(this.minimumUpdatePeriodTimeout_),y.clearTimeout(this.mediaRequest_),y.clearTimeout(this.mediaUpdateTimeout)}},{key:"hasPendingRequest",value:function(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}},{key:"sidxRequestFinished_",value:function(r,s,a,o){var l=this;return function(t,e){if(l.request){if(l.request=null,t)return l.error={status:e.status,message:"DASH playlist request error at URL: "+r.uri,response:e.response,code:2},a&&(l.state=a),l.trigger("error"),o(s,null);var i=new Uint8Array(e.response),n=ba.parseSidx(i.subarray(8));return o(s,n)}}}},{key:"media",value:function(i){var n=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var r=this.state;if("string"==typeof i){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}var t=!this.media_||i.uri!==this.media_.uri;if(t&&this.loadedPlaylists_[i.uri]&&this.loadedPlaylists_[i.uri].endList)return this.state="HAVE_METADATA",this.media_=i,void(t&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(t)if(this.media_&&this.trigger("mediachanging"),i.sidx){var e=void 0,s=void 0;s=this.masterPlaylistLoader_?(e=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.sidxMapping_):(e=this.master,this.sidxMapping_);var a=sc(i.sidx);s[a]={sidxInfo:i.sidx},this.request=oc(i.sidx,i,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(i,e,r,function(t,e){if(!t||!e)throw new Error("failed to request sidx");s[a].sidx=e,n.haveMetadata({startingState:r,playlist:t.playlists[i.uri]})}))}else this.mediaRequest_=y.setTimeout(this.haveMetadata.bind(this,{startingState:r,playlist:i}),0)}},{key:"haveMetadata",value:function(t){var e=t.startingState,i=t.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[i.uri]=i,this.mediaRequest_=null,this.refreshMedia_(i.uri),"HAVE_MASTER"===e?this.trigger("loadedmetadata"):this.trigger("mediachange")}},{key:"pause",value:function(){this.stopRequest(),y.clearTimeout(this.mediaUpdateTimeout),y.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(t){var e=this;y.clearTimeout(this.mediaUpdateTimeout),y.clearTimeout(this.minimumUpdatePeriodTimeout_);var i=this.media();if(t){var n=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=y.setTimeout(function(){return e.load()},n)}else this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var s=ia(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});s.uri=this.srcUrl;for(var t=0;t<s.playlists.length;t++){var e="placeholder-uri-"+t;s.playlists[t].uri=e,s.playlists[e]=s.playlists[t]}return Mo(s,function(t,e,i,n){if(t.playlists&&t.playlists.length){var r="placeholder-uri-"+e+"-"+i+"-"+n;t.playlists[0].uri=r,s.playlists[r]=t.playlists[0]}}),No(s),Uo(s),s}},{key:"start",value:function(){var i=this;this.started=!0,this.masterPlaylistLoader_?this.mediaRequest_=y.setTimeout(this.haveMaster_.bind(this),0):this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,e){if(i.request){if(i.request=null,t)return i.error={status:e.status,message:"DASH playlist request error at URL: "+i.srcUrl,responseText:e.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");i.masterXml_=e.responseText,e.responseHeaders&&e.responseHeaders.date?i.masterLoaded_=Date.parse(e.responseHeaders.date):i.masterLoaded_=Date.now(),i.srcUrl=Po(i.handleManifestRedirects,i.srcUrl,e),i.syncClientServerClock_(i.onClientServerClockSync_.bind(i))}})}},{key:"syncClientServerClock_",value:function(n){var r=this,s=na(this.masterXml_);return null===s?(this.clientOffset_=this.masterLoaded_-Date.now(),n()):"DIRECT"===s.method?(this.clientOffset_=s.value-Date.now(),n()):void(this.request=this.hls_.xhr({uri:Ao(this.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(t,e){if(r.request){if(t)return r.clientOffset_=r.masterLoaded_-Date.now(),n();var i=void 0;i="HEAD"===s.method?e.responseHeaders&&e.responseHeaders.date?Date.parse(e.responseHeaders.date):r.masterLoaded_:Date.parse(e.responseText),r.clientOffset_=i-Date.now(),n()}}))}},{key:"haveMaster_",value:function(){this.state="HAVE_MASTER",this.mediaRequest_=null,this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger("loadedplaylist"))}},{key:"onClientServerClockSync_",value:function(){var t=this;this.haveMaster_(),this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]),this.master&&this.master.minimumUpdatePeriod&&(this.minimumUpdatePeriodTimeout_=y.setTimeout(function(){t.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod))}},{key:"refreshXml_",value:function(){var p=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,e){if(p.request){if(p.request=null,t)return p.error={status:e.status,message:"DASH playlist request error at URL: "+p.srcUrl,responseText:e.responseText,code:2},"HAVE_NOTHING"===p.state&&(p.started=!1),p.trigger("error");var i,n,r,s,a,o;p.masterXml_=e.responseText,p.sidxMapping_=(i=p.masterXml_,n=p.srcUrl,r=p.clientOffset_,s=p.sidxMapping_,a=ia(i,{manifestUri:n,clientOffset:r}),o=ac(a.playlists,s),Mo(a,function(t,e,i,n){if(t.playlists&&t.playlists.length){var r=t.playlists;o=lc(o,ac(r,s))}}),o);var l=p.parseMasterXml(),c=rc(p.master,l),u=p.media().sidx;if(c)if(u){var d=sc(u);if(!p.sidxMapping_[d]){var h=p.media();p.request=oc(h.sidx,h,p.hls_.xhr,{handleManifestRedirects:p.handleManifestRedirects},p.sidxRequestFinished_(h,l,p.state,function(t,e){if(!t||!e)throw new Error("failed to request sidx on minimumUpdatePeriod");p.sidxMapping_[d].sidx=e,p.minimumUpdatePeriodTimeout_=y.setTimeout(function(){p.trigger("minimumUpdatePeriod")},p.master.minimumUpdatePeriod),p.refreshMedia_(p.media().uri)}))}}else p.master=c;p.minimumUpdatePeriodTimeout_=y.setTimeout(function(){p.trigger("minimumUpdatePeriod")},p.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(t){var e=this;if(!t)throw new Error("refreshMedia_ must take a media uri");var i=void 0,n=void 0;n=this.masterPlaylistLoader_?(i=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.parseMasterXml()):(i=this.master,this.parseMasterXml());var r=rc(i,n);r?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=r:this.master=r,this.media_=r.playlists[t]):(this.media_=n.playlists[t],this.trigger("playlistunchanged")),this.media().endList||(this.mediaUpdateTimeout=y.setTimeout(function(){e.trigger("mediaupdatetimeout")},jo(this.media(),!!r))),this.trigger("loadedplaylist")}}]),uc);function uc(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];Io(this,uc);var r=Ro(this,(uc.__proto__||Object.getPrototypeOf(uc)).call(this)),s=i.withCredentials,a=void 0!==s&&s,o=i.handleManifestRedirects,l=void 0!==o&&o;if(r.hls_=e,r.withCredentials=a,r.handleManifestRedirects=l,!t)throw new Error("A non-empty playlist URL or playlist is required");return r.on("minimumUpdatePeriod",function(){r.refreshXml_()}),r.on("mediaupdatetimeout",function(){r.refreshMedia_(r.media().uri)}),r.state="HAVE_NOTHING",r.loadedPlaylists_={},"string"==typeof t?(r.srcUrl=t,r.sidxMapping_={},Ro(r)):(r.setupChildLoader(n,t),r)}function dc(t){return ss.log.debug?ss.log.debug.bind(ss,"VHS:",t+" >"):function(){}}function hc(){}var pc=(Oo(fc,[{key:"createSourceBuffer_",value:function(t,e){var i=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(t),this.logger_("created SourceBuffer"),e&&(e.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?e.on("sourcebufferadded",function(){i.start_()}):this.start_()}},{key:"start_",value:function(){var e=this;this.started_=!0,this.onUpdateendCallback_=function(){var t=e.pendingCallback_;e.pendingCallback_=null,e.sourceBuffer_.removing=!1,e.logger_("buffered ["+gl(e.buffered())+"]"),t&&t(),e.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(t){var e=this;this.processedAppend_&&this.queueCallback_(function(){e.sourceBuffer_.abort()},t)}},{key:"appendBuffer",value:function(t,e){var i=this;this.processedAppend_=!0,this.queueCallback_(function(){t.videoSegmentTimingInfoCallback&&i.sourceBuffer_.addEventListener("videoSegmentTimingInfo",t.videoSegmentTimingInfoCallback),i.sourceBuffer_.appendBuffer(t.bytes)},function(){t.videoSegmentTimingInfoCallback&&i.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",t.videoSegmentTimingInfoCallback),e()})}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:ss.createTimeRanges()}},{key:"remove",value:function(t,e,i){var n=this,r=2<arguments.length&&void 0!==i?i:hc;this.processedAppend_&&this.queueCallback_(function(){n.logger_("remove ["+t+" => "+e+"]"),n.sourceBuffer_.removing=!0,n.sourceBuffer_.remove(t,e)},r)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==hc}},{key:"timestampOffset",value:function(t){var e=this;return void 0!==t&&(this.queueCallback_(function(){e.sourceBuffer_.timestampOffset=t,e.runCallback_()}),this.timestampOffset_=t),this.timestampOffset_}},{key:"queueCallback_",value:function(t,e){this.callbacks_.push([t.bind(this),e]),this.runCallback_()}},{key:"runCallback_",value:function(){var t=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(t=this.callbacks_.shift(),this.pendingCallback_=t[1],t[0]())}},{key:"dispose",value:function(){function t(){e.sourceBuffer_&&"open"===e.mediaSource.readyState&&e.sourceBuffer_.abort(),e.sourceBuffer_.removeEventListener("updateend",t)}var e=this;this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener("updateend",t):t()}}]),fc);function fc(t,e,i,n){Io(this,fc),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,this.processedAppend_=!1,this.type_=i,this.mimeType_=e,this.logger_=dc("SourceUpdater["+i+"]["+e+"]"),"closed"===t.readyState?t.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,e,n)):this.createSourceBuffer_(e,n)}function mc(t){t.forEach(function(t){t.abort()})}function gc(t,e){return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:Ec,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:Ac,xhr:e}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:xc,xhr:e}:null}function vc(a,o,l){return function(t,e){var i,n=e.response,r=gc(t,e),s=void 0;return r?l(r,a):0===n.byteLength?l({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:xc,xhr:e},a):(a.stats={bandwidth:(i=e).bandwidth,bytesReceived:i.bytesReceived||0,roundTripTime:i.roundTripTime||0},a.key?a.encryptedBytes=new Uint8Array(e.response):a.bytes=new Uint8Array(e.response),o&&a.map&&a.map.bytes&&(o.isInitialized()||o.init(),(s=o.parse(a.bytes,a.map.videoTrackIds,a.map.timescales))&&s.captions&&(a.captionStreams=s.captionStreams,a.fmp4Captions=s.captions)),l(null,a))}}function yc(i,n,r){var s=0,a=!1;return function(t,e){if(!a)return t?(a=!0,mc(i),r(t,e)):(s+=1)===i.length?(e.endOfAllRequests=Date.now(),e.encryptedBytes?function(n,r,s){n.addEventListener("message",function t(e){if(e.data.source===r.requestId){n.removeEventListener("message",t);var i=e.data.decrypted;return r.bytes=new Uint8Array(i.bytes,i.byteOffset,i.byteLength),s(null,r)}});var t=void 0;t=r.key.bytes.slice?r.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(r.key.bytes)),n.postMessage(ol({source:r.requestId,encrypted:r.encryptedBytes,key:t,iv:r.key.iv}),[r.encryptedBytes.buffer,t.buffer])}(n,e,r):r(null,e)):void 0}}function bc(r,s){return function(t){var e,i,n;return r.stats=ss.mergeOptions(r.stats,(i=(e=t).target,(n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-i.requestTime||0}).bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n)),!r.stats.firstBytesReceivedAt&&r.stats.bytesReceived&&(r.stats.firstBytesReceivedAt=Date.now()),s(t,r)}}function _c(t,e,i,n,r,s,a){var o,l,c,u,d,h=[],p=yc(h,i,a);if(r.key&&!r.key.bytes){var f=t(ss.mergeOptions(e,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),(o=r,l=p,function(t,e){var i=e.response,n=gc(t,e);if(n)return l(n,o);if(16!==i.byteLength)return l({status:e.status,message:"Invalid HLS key at URL: "+e.uri,code:xc,xhr:e},o);var r=new DataView(i);return o.key.bytes=new Uint32Array([r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12)]),l(null,o)}));h.push(f)}if(r.map&&!r.map.bytes){var m=t(ss.mergeOptions(e,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:rl(r.map)}),(c=r,u=n,d=p,function(t,e){var i=e.response,n=gc(t,e);return n?d(n,c):0===i.byteLength?d({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:xc,xhr:e},c):(c.map.bytes=new Uint8Array(e.response),u&&!u.isInitialized()&&u.init(),c.map.timescales=Sa.timescale(c.map.bytes),c.map.videoTrackIds=Sa.videoTrackIds(c.map.bytes),d(null,c))}));h.push(m)}var g=t(ss.mergeOptions(e,{uri:r.resolvedUri,responseType:"arraybuffer",headers:rl(r)}),vc(r,n,p));return g.addEventListener("progress",bc(r,s)),h.push(g),function(){return mc(h)}}function Tc(t,e){var i;return t&&(i=y.getComputedStyle(t))?i[e]:""}function wc(t,n){var r=t.slice();t.sort(function(t,e){var i=n(t,e);return 0===i?r.indexOf(t)-r.indexOf(e):i})}function Sc(t,e){var i=void 0,n=void 0;return t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||y.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),i-(n=n||y.Number.MAX_VALUE)}function Cc(t){return"number"==typeof t&&isFinite(t)}var kc={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},xc=2,Ec=-101,Ac=-102,Pc=(Do(Ic,ss.EventTarget),Oo(Ic,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_&&this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(t){return void 0!==t&&(this.error_=t),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():ss.createTimeRanges()}},{key:"initSegment",value:function(t,e){var i=1<arguments.length&&void 0!==e&&e;if(!t)return null;var n=ll(t),r=this.initSegments_[n];return i&&!r&&t.bytes&&(this.initSegments_[n]=r={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,timescales:t.timescales,videoTrackIds:t.videoTrackIds}),r||t}},{key:"segmentKey",value:function(t,e){var i=1<arguments.length&&void 0!==e&&e;if(!t)return null;var n=cl(t),r=this.keyCache_[n];this.cacheEncryptionKeys_&&i&&!r&&t.bytes&&(this.keyCache_[n]=r={resolvedUri:t.resolvedUri,bytes:t.bytes});var s={resolvedUri:(r||t).resolvedUri};return r&&(s.bytes=r.bytes),s}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new pc(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:{};if(t){var n=this.playlist_,r=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=i,this.hasPlayed_()||(t.syncInfo={mediaSequence:t.mediaSequence,time:0});var s=null;if(n&&(n.id?s=n.id:n.uri&&(s=n.uri)),this.logger_("playlist update ["+s+" => "+(t.id||t.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(n&&n.uri===t.uri){var a=t.mediaSequence-n.mediaSequence;this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex&&(this.mediaIndex-=a),r&&(r.mediaIndex-=a,0<=r.mediaIndex&&(r.segment=t.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(n,t)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(y.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(t,e){this.mimeType_||(this.mimeType_=t,this.sourceBufferEmitter_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(t){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_(),t),this.captionParser_&&this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(t,e,i){if(this.sourceUpdater_&&this.sourceUpdater_.remove(t,e,i),yl(t,e,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)yl(t,e,this.inbandTextTracks_[n])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&y.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=y.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&y.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=y.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);t&&(this.isEndOfStream_(t.mediaIndex)?this.endOfStream():t.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()||(t.timeline!==this.currentTimeline_&&(this.syncController_.reset(),t.timestampOffset=t.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(t)))}}},{key:"isEndOfStream_",value:function(t,e){return function(t,e,i){if(!t||!e)return!1;var n=i===t.segments.length;return t.endList&&"open"===e.readyState&&n}(1<arguments.length&&void 0!==e?e:this.playlist_,this.mediaSource_,t)&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function(t,e,i,n,r,s){var a=0,o=void 0;t.length&&(a=t.end(t.length-1));var l=Math.max(0,a-r);if(!e.segments.length)return null;if(l>=this.goalBufferLength_())return null;if(!n&&1<=l)return null;if(null===s)return i=this.getSyncSegmentCandidate_(e),this.generateSegmentInfo_(e,i,null,!0);if(null!==i)return e.segments[i],o=a,this.generateSegmentInfo_(e,i+1,o,!1);if(this.fetchAtBuffer_){var c=Cl.getMediaInfoForTime(e,a,s.segmentIndex,s.time);i=c.mediaIndex,o=c.startTime}else{var u=Cl.getMediaInfoForTime(e,r,s.segmentIndex,s.time);i=u.mediaIndex,o=u.startTime}return this.generateSegmentInfo_(e,i,o,!1)}},{key:"getSyncSegmentCandidate_",value:function(t){var e=this;if(-1===this.currentTimeline_)return 0;var i=t.segments.map(function(t,e){return{timeline:t.timeline,segmentIndex:e}}).filter(function(t){return t.timeline===e.currentTimeline_});return i.length?i[Math.min(i.length-1,1)].segmentIndex:Math.max(t.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(t,e,i,n){if(e<0||e>=t.segments.length)return null;var r=t.segments[e];return{requestId:"segment-loader-"+Math.random(),uri:r.resolvedUri,mediaIndex:e,isSyncRequest:n,startOfSegment:i,playlist:t,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:r.timeline,duration:r.duration,segment:r}}},{key:"abortRequestEarly_",value:function(t){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)return!1;var e=this.currentTime_(),i=t.bandwidth,n=this.pendingSegment_.duration,r=Cl.estimateSegmentRequestTime(n,i,this.playlist_,t.bytesReceived),s=function(t,e,i){var n=2<arguments.length&&void 0!==i?i:1;return((t.length?t.end(t.length-1):0)-e)/n}(this.buffered_(),e,this.hls_.tech_.playbackRate())-1;if(r<=s)return!1;var a=function(t){var e=t.master,i=t.currentTime,n=t.bandwidth,r=t.duration,s=t.segmentDuration,a=t.timeUntilRebuffer,o=t.currentTimeline,l=t.syncController,c=e.playlists.filter(function(t){return!Cl.isIncompatible(t)}),u=c.filter(Cl.isEnabled);u.length||(u=c.filter(function(t){return!Cl.isDisabled(t)}));var d=u.filter(Cl.hasAttribute.bind(null,"BANDWIDTH")).map(function(t){var e=l.getSyncPoint(t,r,o,i)?1:2;return{playlist:t,rebufferingImpact:Cl.estimateSegmentRequestTime(s,n,t)*e-a}}),h=d.filter(function(t){return t.rebufferingImpact<=0});return wc(h,function(t,e){return Sc(e.playlist,t.playlist)}),h.length?h[0]:(wc(d,function(t,e){return t.rebufferingImpact-e.rebufferingImpact}),d[0]||null)}({master:this.hls_.playlists.master,currentTime:e,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(a){var o=r-s-a.rebufferingImpact,l=.5;return s<=1/30&&(l=1),!(!a.playlist||a.playlist.uri===this.playlist_.uri||o<l)&&(this.bandwidth=a.playlist.attributes.BANDWIDTH*kc.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function(t,e){this.pendingSegment_&&e.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(e.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(t){this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),t.abortRequests=_c(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(t),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(){var t,e,i,n,r=(t=this.seekable_(),e=this.currentTime_(),i=this.playlist_.targetDuration||10,n=void 0,n=t.length&&0<t.start(0)&&t.start(0)<e?t.start(0):e-30,Math.min(n,e-i));0<r&&this.remove(0,r)}},{key:"createSimplifiedSegmentObj_",value:function(t){var e=t.segment,i={resolvedUri:e.resolvedUri,byterange:e.byterange,requestId:t.requestId};if(e.key){var n=e.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);i.key=this.segmentKey(e.key),i.key.iv=n}return e.map&&(i.map=this.initSegment(e.map)),i}},{key:"segmentRequestFinished_",value:function(t,e){if(this.mediaRequests+=1,e.stats&&(this.mediaBytesTransferred+=e.stats.bytesReceived,this.mediaTransferDuration+=e.stats.roundTripTime),this.pendingSegment_){if(e.requestId===this.pendingSegment_.requestId){if(t)return this.pendingSegment_=null,this.state="READY",t.code===Ac?void(this.mediaRequestsAborted+=1):(this.pause(),t.code===Ec?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error")));this.bandwidth=e.stats.bandwidth,this.roundTrip=e.stats.roundTripTime,e.map&&(e.map=this.initSegment(e.map,!0)),e.key&&this.segmentKey(e.key,!0),this.processSegmentResponse_(e)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(t){var e=this.pendingSegment_;e.bytes=t.bytes,t.map&&(e.segment.map.bytes=t.map.bytes),e.endOfAllRequests=t.endOfAllRequests,t.fmp4Captions&&(function(t,e,i){for(var n in i)if(!t[n]){e.trigger({type:"usage",name:"hls-608"});var r=e.textTracks().getTrackById(n);t[n]=r||e.addRemoteTextTrack({kind:"captions",id:n,label:n},!1).track}}(this.inbandTextTracks_,this.hls_.tech_,t.captionStreams),function(t){var r=t.inbandTextTracks,e=t.captionArray,s=t.timestampOffset;if(e){var a=window.WebKitDataCue||window.VTTCue;e.forEach(function(t){var e=t.stream,i=t.startTime,n=t.endTime;r[e]&&(i+=s,n+=s,r[e].addCue(new a(i,n,t.text)))})}}({inbandTextTracks:this.inbandTextTracks_,captionArray:t.fmp4Captions,timestampOffset:0}),this.captionParser_&&this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_){var e=this.pendingSegment_,i=e.segment,n=this.syncController_.probeSegmentInfo(e);void 0===this.startingMedia_&&n&&(n.containsAudio||n.containsVideo)&&(this.startingMedia_={containsAudio:n.containsAudio,containsVideo:n.containsVideo});var r,s,a,o=(r=this.loaderType_,s=this.startingMedia_,a=n,"main"===r&&s&&a?a.containsAudio||a.containsVideo?s.containsVideo&&!a.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!s.containsVideo&&a.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);if(o)return this.error({message:o,blacklistDuration:1/0}),void this.trigger("error");if(e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");if(null!==e.timestampOffset&&e.timestampOffset!==this.sourceUpdater_.timestampOffset()){if(n&&n.segmentTimestampInfo){var l=n.segmentTimestampInfo[0].ptsTime,c=n.segmentTimestampInfo[0].dtsTime;e.timestampOffset-=l-c}this.sourceUpdater_.timestampOffset(e.timestampOffset),this.trigger("timestampoffset")}var u,d,h,p,f,m,g,v,y,b,_,T=this.syncController_.mappingForTimeline(e.timeline);if(null!==T&&this.trigger({type:"segmenttimemapping",mapping:T}),this.state="APPENDING",i.map){var w=ll(i.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==w){var S=this.initSegment(i.map);this.sourceUpdater_.appendBuffer({bytes:S.bytes},function(){t.activeInitSegmentId_=w})}}e.byteLength=e.bytes.byteLength,"number"==typeof i.start&&"number"==typeof i.end?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration,this.logger_((d=(u=e).segment,h=d.start,p=d.end,f=u.playlist,m=f.mediaSequence,g=f.id,v=f.segments,y=void 0===v?[]:v,b=u.mediaIndex,_=u.timeline,["appending ["+b+"] of ["+m+", "+(m+y.length)+"] from playlist ["+g+"]","["+h+" => "+p+"] in timeline ["+_+"]"].join(" "))),this.sourceUpdater_.appendBuffer({bytes:e.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,e.requestId)},this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleVideoSegmentTimingInfo_",value:function(t,e){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var i=this.pendingSegment_.segment;i.videoTimingInfo||(i.videoTimingInfo={}),i.videoTimingInfo.transmuxerPrependedSeconds=e.videoSegmentTimingInfo.prependedContentDuration||0,i.videoTimingInfo.transmuxedPresentationStart=e.videoSegmentTimingInfo.start.presentation,i.videoTimingInfo.transmuxedPresentationEnd=e.videoSegmentTimingInfo.end.presentation,i.videoTimingInfo.baseMediaDecodeTime=e.videoSegmentTimingInfo.baseMediaDecodeTime}}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var t=this.pendingSegment_,e=t.segment,i=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(t),this.addSegmentMetadataCue_(t),this.state="READY",this.mediaIndex=t.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate"),e.end&&this.currentTime_()-e.end>3*t.playlist.targetDuration?this.resetEverything():(i&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.isEndOfStream_(t.mediaIndex+1,t.playlist)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(t){var e=this.throughput.rate,i=Date.now()-t.endOfAllRequests+1,n=Math.floor(t.byteLength/i*8*1e3);this.throughput.rate+=(n-e)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(t){if(this.segmentMetadataTrack_){var e=t.segment,i=e.start,n=e.end;if(Cc(i)&&Cc(n)){yl(i,n,this.segmentMetadataTrack_);var r=y.WebKitDataCue||y.VTTCue,s={custom:e.custom,dateTimeObject:e.dateTimeObject,dateTimeString:e.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.uri,start:i,end:n},a=new r(i,n,JSON.stringify(s));a.value=s,this.segmentMetadataTrack_.addCue(a)}}}}]),Ic);function Ic(t){Io(this,Ic);var e=Ro(this,(Ic.__proto__||Object.getPrototypeOf(Ic)).call(this));if(!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return e.bandwidth=t.bandwidth,e.throughput={rate:0,count:0},e.roundTrip=NaN,e.resetStats_(),e.mediaIndex=null,e.hasPlayed_=t.hasPlayed,e.currentTime_=t.currentTime,e.seekable_=t.seekable,e.seeking_=t.seeking,e.duration_=t.duration,e.mediaSource_=t.mediaSource,e.hls_=t.hls,e.loaderType_=t.loaderType,e.startingMedia_=void 0,e.segmentMetadataTrack_=t.segmentMetadataTrack,e.goalBufferLength_=t.goalBufferLength,e.sourceType_=t.sourceType,e.inbandTextTracks_=t.inbandTextTracks,e.state_="INIT",e.checkBufferTimeout_=null,e.error_=void 0,e.currentTimeline_=-1,e.pendingSegment_=null,e.mimeType_=null,e.sourceUpdater_=null,e.xhrOptions_=null,e.activeInitSegmentId_=null,e.initSegments_={},e.cacheEncryptionKeys_=t.cacheEncryptionKeys,e.keyCache_={},"main"===e.loaderType_?e.captionParser_=new $a:e.captionParser_=null,e.decrypter_=t.decrypter,e.syncController_=t.syncController,e.syncPoint_={segmentIndex:0,time:0},e.syncController_.on("syncinfoupdate",function(){return e.trigger("syncinfoupdate")}),e.mediaSource_.addEventListener("sourceopen",function(){return e.ended_=!1}),e.fetchAtBuffer_=!1,e.logger_=dc("SegmentLoader["+e.loaderType_+"]"),Object.defineProperty(e,"state",{get:function(){return this.state_},set:function(t){t!==this.state_&&(this.logger_(this.state_+" -> "+t),this.state_=t)}}),e}function Oc(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))}var Lc=new Uint8Array("\n\n".split("").map(function(t){return t.charCodeAt(0)})),Dc=(Do(Rc,Pc),Oo(Rc,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return ss.createTimeRanges();var t=this.subtitlesTrack_.cues,e=t[0].startTime,i=t[t.length-1].startTime;return ss.createTimeRanges([[e,i]])}},{key:"initSegment",value:function(t,e){var i=1<arguments.length&&void 0!==e&&e;if(!t)return null;var n=ll(t),r=this.initSegments_[n];if(i&&!r&&t.bytes){var s=Lc.byteLength+t.bytes.byteLength,a=new Uint8Array(s);a.set(t.bytes),a.set(Lc,t.bytes.byteLength),this.initSegments_[n]=r={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:a}}return r||t}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(t){return void 0===t||(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(t,e){yl(t,e,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var t=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(e=this.skipEmptySegments_(e)){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline))return this.syncController_.one("timestampoffset",function(){t.state="READY",t.paused()||t.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(e)}}},{key:"skipEmptySegments_",value:function(t){for(;t&&t.segment.empty;)t=this.generateSegmentInfo_(t.playlist,t.mediaIndex+1,t.startOfSegment+t.duration,t.isSyncRequest);return t}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var t=this.pendingSegment_,i=t.segment;if("function"!=typeof y.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var n=void 0,r=function(){e.subtitlesTrack_.tech_.off("vttjsloaded",n),e.error({message:"Error loading vtt.js"}),e.state="READY",e.pause(),e.trigger("error")};return n=function(){e.subtitlesTrack_.tech_.off("vttjserror",r),e.handleSegment_()},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",n),void this.subtitlesTrack_.tech_.one("vttjserror",r)}i.requested=!0;try{this.parseVTTCues_(t)}catch(t){return this.error({message:t.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(t,this.syncController_.timelines[t.timeline],this.playlist_),t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");t.byteLength=t.bytes.byteLength,this.mediaSecondsLoaded+=i.duration,t.cues.length&&this.remove(t.cues[0].endTime,t.cues[t.cues.length-1].endTime),t.cues.forEach(function(t){e.subtitlesTrack_.addCue(t)}),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(e){var t=void 0,i=!1;"function"==typeof y.TextDecoder?t=new y.TextDecoder("utf8"):(t=y.WebVTT.StringDecoder(),i=!0);var n=new y.WebVTT.Parser(y,y.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=function(t){return e.timestampmap=t},n.onparsingerror=function(t){ss.log.warn("Error encountered when parsing cues: "+t.message)},e.segment.map){var r=e.segment.map.bytes;i&&(r=Oc(r)),n.parse(r)}var s=e.bytes;i&&(s=Oc(s)),n.parse(s),n.flush()}},{key:"updateTimeMapping_",value:function(t,e,i){var n=t.segment;if(e)if(t.cues.length){var r=t.timestampmap,s=r.MPEGTS/9e4-r.LOCAL+e.mapping;if(t.cues.forEach(function(t){t.startTime+=s,t.endTime+=s}),!i.syncInfo){var a=t.cues[0].startTime,o=t.cues[t.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+t.mediaIndex,time:Math.min(a,o-n.duration)}}}else n.empty=!0}}]),Rc);function Rc(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Io(this,Rc);var i=Ro(this,(Rc.__proto__||Object.getPrototypeOf(Rc)).call(this,t,e));return i.mediaSource_=null,i.subtitlesTrack_=null,i}function Mc(t,e){for(var i=t.cues,n=0;n<i.length;n++){var r=i[n];if(e>=r.adStartTime&&e<=r.adEndTime)return r}return null}var Bc=ho,Nc=[{name:"VOD",run:function(t,e,i){if(i===1/0)return null;return{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function(t,e,i,n,r){if(!t.datetimeToDisplayTime)return null;var s=e.segments||[],a=null,o=null;r=r||0;for(var l=0;l<s.length;l++){var c=s[l];if(c.dateTimeObject){var u=c.dateTimeObject.getTime()/1e3+t.datetimeToDisplayTime,d=Math.abs(r-u);if(null!==o&&(0===d||o<d))break;o=d,a={time:u,segmentIndex:l}}}return a}},{name:"Segment",run:function(t,e,i,n,r){var s=e.segments||[],a=null,o=null;r=r||0;for(var l=0;l<s.length;l++){var c=s[l];if(c.timeline===n&&void 0!==c.start){var u=Math.abs(r-c.start);if(null!==o&&o<u)break;(!a||null===o||u<=o)&&(o=u,a={time:c.start,segmentIndex:l})}}return a}},{name:"Discontinuity",run:function(t,e,i,n,r){var s=null;if(r=r||0,e.discontinuityStarts&&e.discontinuityStarts.length)for(var a=null,o=0;o<e.discontinuityStarts.length;o++){var l=e.discontinuityStarts[o],c=e.discontinuitySequence+o+1,u=t.discontinuities[c];if(u){var d=Math.abs(r-u.time);if(null!==a&&a<d)break;(!s||null===a||d<=a)&&(a=d,s={time:u.time,segmentIndex:l})}}return s}},{name:"Playlist",run:function(t,e){return e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence}:null}}],Uc=(Do(jc,ss.EventTarget),Oo(jc,[{key:"getSyncPoint",value:function(t,e,i,n){var r=this.runStrategies_(t,e,i,n);return r.length?this.selectSyncPoint_(r,{key:"time",value:n}):null}},{key:"getExpiredTime",value:function(t,e){if(!t||!t.segments)return null;var i=this.runStrategies_(t,e,t.discontinuitySequence,0);if(!i.length)return null;var n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return 0<n.segmentIndex&&(n.time*=-1),Math.abs(n.time+Go(t,n.segmentIndex,0))}},{key:"runStrategies_",value:function(t,e,i,n){for(var r=[],s=0;s<Nc.length;s++){var a=Nc[s],o=a.run(this,t,e,i,n);o&&(o.strategy=a.name,r.push({strategy:a.name,syncPoint:o}))}return r}},{key:"selectSyncPoint_",value:function(t,e){for(var i=t[0].syncPoint,n=Math.abs(t[0].syncPoint[e.key]-e.value),r=t[0].strategy,s=1;s<t.length;s++){var a=Math.abs(t[s].syncPoint[e.key]-e.value);a<n&&(n=a,i=t[s].syncPoint,r=t[s].strategy)}return this.logger_("syncPoint for ["+e.key+": "+e.value+"] chosen with strategy ["+r+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+"]"),i}},{key:"saveExpiredSegmentInfo",value:function(t,e){for(var i=e.mediaSequence-t.mediaSequence-1;0<=i;i--){var n=t.segments[i];if(n&&void 0!==n.start){e.syncInfo={mediaSequence:t.mediaSequence+i,time:n.start},this.logger_("playlist refresh sync: [time:"+e.syncInfo.time+", mediaSequence: "+e.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(t){if(!this.datetimeToDisplayTime&&t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var e=t.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-e}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(t){var e=t.segment,i=t.playlist,n=void 0;return(n=e.map?this.probeMp4Segment_(t):this.probeTsSegment_(t))&&this.calculateSegmentTimeMapping_(t,n)&&(this.saveDiscontinuitySyncInfo_(t),i.syncInfo||(i.syncInfo={mediaSequence:i.mediaSequence+t.mediaIndex,time:e.start})),n}},{key:"probeMp4Segment_",value:function(t){var e=t.segment,i=Sa.timescale(e.map.bytes),n=Sa.compositionStartTime(i,t.bytes);return null!==t.timestampOffset&&(t.timestampOffset-=n),{start:n,end:n+e.duration}}},{key:"probeTsSegment_",value:function(t){var e=Bc(t.bytes,this.inspectCache_),i=void 0,n=void 0,r=void 0;return e?(e.video&&2===e.video.length?(this.inspectCache_=e.video[1].dts,i=e.video[0].dtsTime,n=e.video[1].dtsTime,r=e.video):e.audio&&2===e.audio.length&&(this.inspectCache_=e.audio[1].dts,i=e.audio[0].dtsTime,n=e.audio[1].dtsTime,r=e.audio),{segmentTimestampInfo:r,start:i,end:n,containsVideo:e.video&&2===e.video.length,containsAudio:e.audio&&2===e.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(t){return void 0===this.timelines[t]?null:this.timelines[t].time}},{key:"mappingForTimeline",value:function(t){return void 0===this.timelines[t]?null:this.timelines[t].mapping}},{key:"calculateSegmentTimeMapping_",value:function(t,e){var i=t.segment,n=this.timelines[t.timeline];if(null!==t.timestampOffset)n={time:t.startOfSegment,mapping:t.startOfSegment-e.start},this.timelines[t.timeline]=n,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+t.timeline+": [time: "+n.time+"] [mapping: "+n.mapping+"]"),i.start=t.startOfSegment,i.end=e.end+n.mapping;else{if(!n)return!1;i.start=e.start+n.mapping,i.end=e.end+n.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(t){var e=t.playlist,i=t.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(e.discontinuityStarts&&e.discontinuityStarts.length)for(var n=0;n<e.discontinuityStarts.length;n++){var r=e.discontinuityStarts[n],s=e.discontinuitySequence+n+1,a=r-t.mediaIndex,o=Math.abs(a);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>o){var l=void 0;l=a<0?i.start-Go(e,t.mediaIndex,r):i.end+Go(e,t.mediaIndex+1,r),this.discontinuities[s]={time:l,accuracy:o}}}}}]),jc);function jc(){Io(this,jc);var t=Ro(this,(jc.__proto__||Object.getPrototypeOf(jc)).call(this));return t.inspectCache_=void 0,t.timelines=[],t.discontinuities=[],t.datetimeToDisplayTime=null,t.logger_=dc("SyncController"),t}function Fc(t,e){t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)}function $c(t,e){(e.activePlaylistLoader=t).load()}function Hc(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){Vc[t](t,e)});var i=e.mediaTypes,t=e.masterPlaylistLoader,n=e.tech,r=e.hls;["AUDIO","SUBTITLES"].forEach(function(t){var s,a,o,l,c,u;i[t].activeGroup=(s=t,a=e,function(e){var t=a.masterPlaylistLoader,i=a.mediaTypes[s].groups,n=t.media();if(!n)return null;var r=null;return n.attributes[s]&&(r=i[n.attributes[s]]),r=r||i.main,void 0===e?r:null!==e&&r.filter(function(t){return t.id===e.id})[0]||null}),i[t].activeTrack=Gc[t](t,e),i[t].onGroupChanged=(o=t,l=e,function(){var t=l.segmentLoaders,e=t[o],i=t.main,n=l.mediaTypes[o],r=n.activeTrack(),s=n.activeGroup(r),a=n.activePlaylistLoader;Fc(e,n),s&&(s.playlistLoader?(e.resyncLoader(),$c(s.playlistLoader,n)):a&&i.resetEverything())}),i[t].onTrackChanged=(c=t,u=e,function(){var t=u.segmentLoaders,e=t[c],i=t.main,n=u.mediaTypes[c],r=n.activeTrack(),s=n.activeGroup(r),a=n.activePlaylistLoader;Fc(e,n),s&&(s.playlistLoader?(a!==s.playlistLoader&&(e.track&&e.track(r),e.resetEverything()),$c(s.playlistLoader,n)):i.resetEverything())})});var s=i.AUDIO.activeGroup(),a=(s.filter(function(t){return t.default})[0]||s[0]).id;function o(){i.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"hls-audio-change"})}for(var l in i.AUDIO.tracks[a].enabled=!0,i.AUDIO.onTrackChanged(),t.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(t){return i[t].onGroupChanged()})}),n.audioTracks().addEventListener("change",o),n.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged),r.on("dispose",function(){n.audioTracks().removeEventListener("change",o),n.remoteTextTracks().removeEventListener("change",i.SUBTITLES.onTrackChanged)}),n.clearTracks("audio"),i.AUDIO.tracks)n.audioTracks().addTrack(i.AUDIO.tracks[l])}var zc=new Rl("./decrypter-worker.worker.js",function(t,e){var i,u,g,n,r,l,a,s=this;i=function(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t},u=null,h.prototype.decrypt=function(t,e,i,n,r,s){var a=this._key[1],o=t^a[0],l=n^a[1],c=i^a[2],u=e^a[3],d=void 0,h=void 0,p=void 0,f=a.length/4-2,m=void 0,g=4,v=this._tables[1],y=v[0],b=v[1],_=v[2],T=v[3],w=v[4];for(m=0;m<f;m++)d=y[o>>>24]^b[l>>16&255]^_[c>>8&255]^T[255&u]^a[g],h=y[l>>>24]^b[c>>16&255]^_[u>>8&255]^T[255&o]^a[g+1],p=y[c>>>24]^b[u>>16&255]^_[o>>8&255]^T[255&l]^a[g+2],u=y[u>>>24]^b[o>>16&255]^_[l>>8&255]^T[255&c]^a[g+3],g+=4,o=d,l=h,c=p;for(m=0;m<4;m++)r[(3&-m)+s]=w[o>>>24]<<24^w[l>>16&255]<<16^w[c>>8&255]<<8^w[255&u]^a[g++],d=o,o=l,l=c,c=u,u=d},g=h,c.prototype.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},c.prototype.off=function(t,e){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(e);return this.listeners[t].splice(i,1),-1<i},c.prototype.trigger=function(t,e){var i=this.listeners[t];if(i)if(2===arguments.length)for(var n=i.length,r=0;r<n;++r)i[r].call(this,e);else for(var s=Array.prototype.slice.call(arguments,1),a=i.length,o=0;o<a;++o)i[o].apply(this,s)},c.prototype.dispose=function(){this.listeners={}},c.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(p,r=n=c),p.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},p.prototype.push=function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},l=p,f.prototype.decryptChunk_=function(e,i,n,r){return function(){var t=function(t,e,i){var n=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),r=new g(Array.prototype.slice.call(e)),s=new Uint8Array(t.byteLength),a=new Int32Array(s.buffer),o=void 0,l=void 0,c=void 0,u=void 0,d=void 0,h=void 0,p=void 0,f=void 0,m=void 0;for(o=i[0],l=i[1],c=i[2],u=i[3],m=0;m<n.length;m+=4)d=v(n[m]),h=v(n[m+1]),p=v(n[m+2]),f=v(n[m+3]),r.decrypt(d,h,p,f,a,m),a[m]=v(a[m]^o),a[m+1]=v(a[m+1]^l),a[m+2]=v(a[m+2]^c),a[m+3]=v(a[m+3]^u),o=d,l=h,c=p,u=f;return s}(e,i,n);r.set(t,e.byteOffset)}},i(f,null,[{key:"STEP",get:function(){return 32e3}}]),a=f,new function(s){s.onmessage=function(t){var r=t.data,e=new Uint8Array(r.encrypted.bytes,r.encrypted.byteOffset,r.encrypted.byteLength),i=new Uint32Array(r.key.bytes,r.key.byteOffset,r.key.byteLength/4),n=new Uint32Array(r.iv.bytes,r.iv.byteOffset,r.iv.byteLength/4);new a(e,i,n,function(t,e){var i,n;s.postMessage((i={source:r.source,decrypted:e},n={},Object.keys(i).forEach(function(t){var e=i[t];ArrayBuffer.isView(e)?n[t]={bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:n[t]=e}),n),[e.buffer])})}}(s);function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t){d(this,h),u=u||function(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]],e=t[0],i=t[1],n=e[4],r=i[4],s=void 0,a=void 0,o=void 0,l=[],c=[],u=void 0,d=void 0,h=void 0,p=void 0,f=void 0;for(s=0;s<256;s++)c[(l[s]=s<<1^283*(s>>7))^s]=s;for(a=o=0;!n[a];a^=u||1,o=c[o]||1)for(h=(h=o^o<<1^o<<2^o<<3^o<<4)>>8^255&h^99,f=16843009*l[d=l[u=l[r[n[a]=h]=a]]]^65537*d^257*u^16843008*a,p=257*l[h]^16843008*h,s=0;s<4;s++)e[s][a]=p=p<<24^p>>>8,i[s][h]=f=f<<24^f>>>8;for(s=0;s<5;s++)e[s]=e[s].slice(0),i[s]=i[s].slice(0);return t}(),this._tables=[[u[0][0].slice(),u[0][1].slice(),u[0][2].slice(),u[0][3].slice(),u[0][4].slice()],[u[1][0].slice(),u[1][1].slice(),u[1][2].slice(),u[1][3].slice(),u[1][4].slice()]];var e=void 0,i=void 0,n=void 0,r=void 0,s=void 0,a=this._tables[0][4],o=this._tables[1],l=t.length,c=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(r=t.slice(0),s=[],this._key=[r,s],e=l;e<4*l+28;e++)n=r[e-1],(e%l==0||8===l&&e%l==4)&&(n=a[n>>>24]<<24^a[n>>16&255]<<16^a[n>>8&255]<<8^a[255&n],e%l==0&&(n=n<<8^n>>>24^c<<24,c=c<<1^283*(c>>7))),r[e]=r[e-l]^n;for(i=0;e;i++,e--)n=r[3&i?e:e-4],s[i]=e<=4||i<4?n:o[0][a[n>>>24]]^o[1][a[n>>16&255]]^o[2][a[n>>8&255]]^o[3][a[255&n]]}function c(){d(this,c),this.listeners={}}function p(){d(this,p);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,r.call(this,n));return t.jobs=[],t.delay=1,t.timeout_=null,t}function v(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24}function f(t,e,i,n){d(this,f);var r=f.STEP,s=new Int32Array(t.buffer),a=new Uint8Array(t.byteLength),o=0;for(this.asyncStream_=new l,this.asyncStream_.push(this.decryptChunk_(s.subarray(o,o+r),e,i,a)),o=r;o<s.length;o+=r)i=new Uint32Array([v(s[o-4]),v(s[o-3]),v(s[o-2]),v(s[o-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(o,o+r),e,i,a));this.asyncStream_.push(function(){var t;n(null,(t=a).subarray(0,t.byteLength-t[t.byteLength-1]))})}}),qc={AUDIO:function(l,c){return function(){var t=c.segmentLoaders[l],e=c.mediaTypes[l],i=c.blacklistCurrentPlaylist;Fc(t,e);var n=e.activeTrack(),r=e.activeGroup(),s=(r.filter(function(t){return t.default})[0]||r[0]).id,a=e.tracks[s];if(n!==a){for(var o in ss.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),e.tracks)e.tracks[o].enabled=e.tracks[o]===a;e.onTrackChanged()}else i({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(n,r){return function(){var t=r.segmentLoaders[n],e=r.mediaTypes[n];ss.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Fc(t,e);var i=e.activeTrack();i&&(i.mode="disabled"),e.onTrackChanged()}}},Wc={AUDIO:function(t,e,i){if(e){var n=i.tech,r=i.requestOptions,s=i.segmentLoaders[t];e.on("loadedmetadata",function(){var t=e.media();s.playlist(t,r),(!n.paused()||t.endList&&"none"!==n.preload())&&s.load()}),e.on("loadedplaylist",function(){s.playlist(e.media(),r),n.paused()||s.load()}),e.on("error",qc[t](t,i))}},SUBTITLES:function(t,e,i){var n=i.tech,r=i.requestOptions,s=i.segmentLoaders[t],a=i.mediaTypes[t];e.on("loadedmetadata",function(){var t=e.media();s.playlist(t,r),s.track(a.activeTrack()),(!n.paused()||t.endList&&"none"!==n.preload())&&s.load()}),e.on("loadedplaylist",function(){s.playlist(e.media(),r),n.paused()||s.load()}),e.on("error",qc[t](t,i))}},Vc={AUDIO:function(t,e){var i,n,r=e.hls,s=e.sourceType,a=e.segmentLoaders[t],o=e.requestOptions,l=e.master.mediaGroups,c=e.mediaTypes[t],u=c.groups,d=c.tracks,h=e.masterPlaylistLoader;for(var p in l[t]&&0!==Object.keys(l[t]).length||(l[t]={main:{default:{default:!0}}}),l[t])for(var f in u[p]||(u[p]=[]),l[t][p]){var m=l[t][p][f],g=void 0;if(g=m.resolvedUri?new zo(m.resolvedUri,r,o):m.playlists&&"dash"===s?new cc(m.playlists[0],r,o,h):null,m=ss.mergeOptions({id:f,playlistLoader:g},m),Wc[t](t,m.playlistLoader,e),u[p].push(m),void 0===d[f]){var v=new ss.AudioTrack({id:f,kind:(n=void 0,n=(i=m).default?"main":"alternative",i.characteristics&&0<=i.characteristics.indexOf("public.accessibility.describes-video")&&(n="main-desc"),n),enabled:!1,language:m.language,default:m.default,label:f});d[f]=v}}a.on("error",qc[t](t,e))},SUBTITLES:function(t,e){var i=e.tech,n=e.hls,r=e.sourceType,s=e.segmentLoaders[t],a=e.requestOptions,o=e.master.mediaGroups,l=e.mediaTypes[t],c=l.groups,u=l.tracks,d=e.masterPlaylistLoader;for(var h in o[t])for(var p in c[h]||(c[h]=[]),o[t][h])if(!o[t][h][p].forced){var f=o[t][h][p],m=void 0;if("hls"===r?m=new zo(f.resolvedUri,n,a):"dash"===r&&(m=new cc(f.playlists[0],n,a,d)),f=ss.mergeOptions({id:p,playlistLoader:m},f),Wc[t](t,f.playlistLoader,e),c[h].push(f),void 0===u[p]){var g=i.addRemoteTextTrack({id:p,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:p},!1).track;u[p]=g}}s.on("error",qc[t](t,e))},"CLOSED-CAPTIONS":function(t,e){var i=e.tech,n=e.master.mediaGroups,r=e.mediaTypes[t],s=r.groups,a=r.tracks;for(var o in n[t])for(var l in s[o]||(s[o]=[]),n[t][o]){var c=n[t][o][l];if(c.instreamId.match(/CC\d/)&&(s[o].push(ss.mergeOptions({id:l},c)),void 0===a[l])){var u=i.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default&&c.autoselect,language:c.language,label:l},!1).track;a[l]=u}}}},Gc={AUDIO:function(i,n){return function(){var t=n.mediaTypes[i].tracks;for(var e in t)if(t[e].enabled)return t[e];return null}},SUBTITLES:function(i,n){return function(){var t=n.mediaTypes[i].tracks;for(var e in t)if("showing"===t[e].mode)return t[e];return null}}},Xc=void 0,Yc=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],Kc=(Do(Qc,ss.EventTarget),Oo(Qc,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var n=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=n.masterPlaylistLoader_.media(),e=1.5*t.targetDuration*1e3;il(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.media())?n.requestOptions_.timeout=0:n.requestOptions_.timeout=e,t.endList&&"none"!==n.tech_.preload()&&(n.mainSegmentLoader_.playlist(t,n.requestOptions_),n.mainSegmentLoader_.load()),Hc({sourceType:n.sourceType_,segmentLoaders:{AUDIO:n.audioSegmentLoader_,SUBTITLES:n.subtitleSegmentLoader_,main:n.mainSegmentLoader_},tech:n.tech_,requestOptions:n.requestOptions_,masterPlaylistLoader:n.masterPlaylistLoader_,hls:n.hls_,master:n.master(),mediaTypes:n.mediaTypes_,blacklistCurrentPlaylist:n.blacklistCurrentPlaylist.bind(n)}),n.triggerPresenceUsage_(n.master(),t);try{n.setupSourceBuffers_()}catch(t){return ss.log.warn("Failed to create SourceBuffers",t),n.mediaSource.endOfStream("decode")}n.setupFirstPlay(),!n.mediaTypes_.AUDIO.activePlaylistLoader||n.mediaTypes_.AUDIO.activePlaylistLoader.media()?n.trigger("selectedinitialmedia"):n.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){n.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var t=n.masterPlaylistLoader_.media();if(!t){n.excludeUnsupportedVariants_();var e=void 0;return n.enableLowInitialPlaylist&&(e=n.selectInitialPlaylist()),e=e||n.selectPlaylist(),n.initialMedia_=e,void n.masterPlaylistLoader_.media(n.initialMedia_)}if(n.useCueTags_&&n.updateAdCues_(t),n.mainSegmentLoader_.playlist(t,n.requestOptions_),n.updateDuration(),n.tech_.paused()||(n.mainSegmentLoader_.load(),n.audioSegmentLoader_&&n.audioSegmentLoader_.load()),!t.endList){var i=function(){var t=n.seekable();0!==t.length&&n.mediaSource.addSeekableRange_(t.start(0),t.end(0))};n.duration()!==1/0?n.tech_.one("durationchange",function t(){n.duration()===1/0?i():n.tech_.one("durationchange",t)}):i()}}),this.masterPlaylistLoader_.on("error",function(){n.blacklistCurrentPlaylist(n.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){n.mainSegmentLoader_.abort(),n.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=n.masterPlaylistLoader_.media(),e=1.5*t.targetDuration*1e3;il(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.media())?n.requestOptions_.timeout=0:n.requestOptions_.timeout=e,n.mainSegmentLoader_.playlist(t,n.requestOptions_),n.mainSegmentLoader_.load(),n.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var t=n.masterPlaylistLoader_.media();n.stuckAtPlaylistEnd_(t)&&(n.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),n.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){n.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){n.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(t,e){var i=t.mediaGroups||{},n=!0,r=Object.keys(i.AUDIO);for(var s in i.AUDIO)for(var a in i.AUDIO[s])i.AUDIO[s][a].uri||(n=!1);n&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),Xc.Playlist.isAes(e)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),Xc.Playlist.isFmp4(e)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.length&&1<Object.keys(i.AUDIO[r[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var s=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var t=s.selectPlaylist(),e=s.masterPlaylistLoader_.media(),i=s.tech_.buffered(),n=i.length?i.end(i.length-1)-s.tech_.currentTime():0,r=s.bufferLowWaterLine();(!e.endList||s.duration()<kc.MAX_BUFFER_LOW_WATER_LINE||t.attributes.BANDWIDTH<e.attributes.BANDWIDTH||r<=n)&&s.masterPlaylistLoader_.media(t),s.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){s.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){s.blacklistCurrentPlaylist(s.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){s.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){s.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){s.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){s.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){s.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}),this.mainSegmentLoader_.on("reseteverything",function(){s.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(t){s.tech_.trigger({type:"hls-segment-time-mapping",mapping:t.mapping})}),this.audioSegmentLoader_.on("ended",function(){s.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var t=this,e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetEverything(function(){ss.browser.IE_VERSION||ss.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0),this.hasPlayed_()&&this.load();var t=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0)?this.seekTo_(t.end(t.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var t=this,e=this.masterPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_())return!1;if(!e.endList){var i=this.seekable();if(!i.length)return!1;if(ss.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){t.trigger("firstplay"),t.seekTo_(i.end(0)),t.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.seekTo_(i.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(t){return ss.log.warn("Failed to create Source Buffers",t),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var t=this.tech_.play();void 0!==t&&"function"==typeof t.then&&t.then(null,function(t){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=(this.mainSegmentLoader_.startingMedia_&&!this.mainSegmentLoader_.startingMedia_.containsVideo||t)&&this.audioSegmentLoader_.ended_),t){this.logger_("calling mediaSource.endOfStream()");try{this.mediaSource.endOfStream()}catch(t){ss.log.warn("Failed to call media source endOfStream",t)}}}},{key:"stuckAtPlaylistEnd_",value:function(t){if(!this.seekable().length)return!1;var e=this.syncController_.getExpiredTime(t,this.mediaSource.duration);if(null===e)return!1;var i=Xc.Playlist.playlistEnd(t,e),n=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return i-n<=.1;var s=r.end(r.length-1);return s-n<=.1&&i-s<=.1}},{key:"blacklistCurrentPlaylist",value:function(t,e){var i,n=0<arguments.length&&void 0!==t?t:{},r=e,s=void 0;if(s=n.playlist||this.masterPlaylistLoader_.media(),r=r||n.blacklistDuration||this.blacklistDuration,!s){this.error=n;try{return this.mediaSource.endOfStream("network")}catch(t){return this.trigger("error")}}var a=1===this.masterPlaylistLoader_.master.playlists.filter(tl).length,o=this.masterPlaylistLoader_.master.playlists;return 1===o.length?(ss.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(a)):(a&&(ss.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."),o.forEach(function(t){t.excludeUntil!==1/0&&delete t.excludeUntil}),this.tech_.trigger("retryplaylist")),s.excludeUntil=Date.now()+1e3*r,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),i=this.selectPlaylist(),ss.log.warn("Problem encountered with the current HLS playlist."+(n.message?" "+n.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(i,a))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(t){var e=fl(this.tech_.buffered(),t);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?e&&e.length?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:Xc.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var t=void 0,e=void 0;if(this.masterPlaylistLoader_){var i=this.masterPlaylistLoader_.media();if(i){var n=this.syncController_.getExpiredTime(i,this.mediaSource.duration);if(null!==n&&0!==(t=Xc.Playlist.seekable(i,n)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(i=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(i,this.mediaSource.duration)))return;if(0===(e=Xc.Playlist.seekable(i,n)).length)return}var r=void 0,s=void 0;this.seekable_&&this.seekable_.length&&(r=this.seekable_.end(0),s=this.seekable_.start(0)),!e||e.start(0)>t.end(0)||t.start(0)>e.end(0)?this.seekable_=t:this.seekable_=ss.createTimeRanges([[e.start(0)>t.start(0)?e.start(0):t.start(0),e.end(0)<t.end(0)?e.end(0):t.end(0)]]),this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===r&&this.seekable_.start(0)===s||(this.logger_("seekable updated ["+gl(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},{key:"updateDuration",value:function(){function t(){e.logger_("Setting duration from "+e.mediaSource.duration+" => "+n);try{e.mediaSource.duration=n}catch(t){ss.log.warn("Failed to set media source duration",t)}e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",t)}var e=this,i=this.mediaSource.duration,n=Xc.Playlist.duration(this.masterPlaylistLoader_.media()),r=this.tech_.buffered();0<r.length&&(n=Math.max(n,r.end(r.length-1))),i!==n&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",t):t())}},{key:"dispose",value:function(){var n=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(t){var e=n.mediaTypes_[t].groups;for(var i in e)e[i].forEach(function(t){t.playlistLoader&&t.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var t,e=this.masterPlaylistLoader_.media();if(e&&"open"===this.mediaSource.readyState){if((t=Hl(this.masterPlaylistLoader_.master,e)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+e.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(t),this.excludeIncompatibleVariants_(e)}}},{key:"configureLoaderMimeTypes_",value:function(t){var e=1<t.length&&-1===t[0].indexOf(",")&&t[0]!==t[1]?new ss.EventTarget:null;this.mainSegmentLoader_.mimeType(t[0],e),t[1]&&this.audioSegmentLoader_.mimeType(t[1],e)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(t){t.attributes.CODECS&&y.MediaSource&&y.MediaSource.isTypeSupported&&!y.MediaSource.isTypeSupported('video/mp4; codecs="'+t.attributes.CODECS.replace(/avc1\.(\d+)\.(\d+)/i,function(t){return jl([t])[0]})+'"')&&(t.excludeUntil=1/0)})}},{key:"excludeIncompatibleVariants_",value:function(t){var i=2,n=null,e=void 0;t.attributes.CODECS&&(e=Fl(t.attributes.CODECS),n=e.videoCodec,i=e.codecCount),this.master().playlists.forEach(function(t){var e={codecCount:2,videoCodec:null};t.attributes.CODECS&&(e=Fl(t.attributes.CODECS)),e.codecCount!==i&&(t.excludeUntil=1/0),e.videoCodec!==n&&(t.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(t){var e=0,i=this.seekable();i.length&&(e=i.start(0)),function(t,e,i){var n=2<arguments.length&&void 0!==i?i:0;if(t.segments)for(var r=n,s=void 0,a=0;a<t.segments.length;a++){var o=t.segments[a];if(s=s||Mc(e,r+o.duration/2)){if("cueIn"in o){s.endTime=r,s.adEndTime=r,r+=o.duration,s=null;continue}if(r<s.endTime){r+=o.duration;continue}s.endTime+=o.duration}else if("cueOut"in o&&((s=new y.VTTCue(r,r+o.duration,o.cueOut)).adStartTime=r,s.adEndTime=r+parseFloat(o.cueOut),e.addCue(s)),"cueOutCont"in o){var l,c,u=o.cueOutCont.split("/").map(parseFloat),d=Fo(u,2);l=d[0],c=d[1],(s=new y.VTTCue(r,r+o.duration,"")).adStartTime=r-l,s.adEndTime=s.adStartTime+c,e.addCue(s)}r+=o.duration}}(t,this.cueTagsTrack_,e)}},{key:"goalBufferLength",value:function(){var t=this.tech_.currentTime(),e=kc.GOAL_BUFFER_LENGTH,i=kc.GOAL_BUFFER_LENGTH_RATE,n=Math.max(e,kc.MAX_GOAL_BUFFER_LENGTH);return Math.min(e+t*i,n)}},{key:"bufferLowWaterLine",value:function(){var t=this.tech_.currentTime(),e=kc.BUFFER_LOW_WATER_LINE,i=kc.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(e,kc.MAX_BUFFER_LOW_WATER_LINE);return Math.min(e+t*i,n)}}]),Qc);function Qc(t){Io(this,Qc);var e,i=Ro(this,(Qc.__proto__||Object.getPrototypeOf(Qc)).call(this)),n=t.url,r=t.handleManifestRedirects,s=t.withCredentials,a=t.tech,o=t.bandwidth,l=t.externHls,c=t.useCueTags,u=t.blacklistDuration,d=t.enableLowInitialPlaylist,h=t.sourceType,p=t.seekTo,f=t.cacheEncryptionKeys;if(!n)throw new Error("A non-empty playlist URL is required");Xc=l,i.withCredentials=s,i.tech_=a,i.hls_=a.hls,i.seekTo_=p,i.sourceType_=h,i.useCueTags_=c,i.blacklistDuration=u,i.enableLowInitialPlaylist=d,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:s,handleManifestRedirects:r,timeout:null},i.mediaTypes_=(e={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:hc,activeTrack:hc,onGroupChanged:hc,onTrackChanged:hc}}),e),i.mediaSource=new ss.MediaSource,i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_.bind(i)),i.seekable_=ss.createTimeRanges(),i.hasPlayed_=function(){return!1},i.syncController_=new Uc(t),i.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new zc,i.inbandTextTracks_={};var m={hls:i.hls_,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.mediaSource.duration},hasPlayed:function(){return i.hasPlayed_()},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:o,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:f};return i.masterPlaylistLoader_=new("dash"===i.sourceType_?cc:zo)(n,i.hls_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new Pc(ss.mergeOptions(m,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),t),i.audioSegmentLoader_=new Pc(ss.mergeOptions(m,{loaderType:"audio"}),t),i.subtitleSegmentLoader_=new Dc(ss.mergeOptions(m,{loaderType:"vtt"}),t),i.setupSegmentLoaderListeners_(),Yc.forEach(function(t){i[t+"_"]=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]}.bind(i,t)}),i.logger_=dc("MPC"),i.masterPlaylistLoader_.load(),i}function Zc(t,e,i){Io(this,Zc);var r,s,a,n=t.masterPlaylistController_,o=n[(t.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(n);if(e.attributes.RESOLUTION){var l=e.attributes.RESOLUTION;this.width=l.width,this.height=l.height}this.bandwidth=e.attributes.BANDWIDTH,this.id=i,this.enabled=(r=t.playlists,s=e.uri,a=o,function(t){var e=r.master.playlists[s],i=Jo(e),n=tl(e);return void 0===t?n:(t?delete e.disabled:e.disabled=!0,t===n||i||(a(),t?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),t)})}var Jc=["seeking","seeked","pause","playing","error"],tu=(Oo(eu,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&y.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=y.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var t=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===t&&(!e.length||t+.1>=e.end(e.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&t===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):t===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=t)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;var t=this.seekable(),e=this.tech_.currentTime(),i=void 0;return this.afterSeekableWindow_(t,e,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(i=t.end(t.length-1)),this.beforeSeekableWindow_(t,e)&&(i=t.start(0)+.1),void 0!==i&&(this.logger_("Trying to seek outside of seekable at time "+e+" with seekable range "+gl(t)+". Seeking to "+i+"."),this.seekTo(i),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var t=this.tech_.currentTime(),e=this.tech_.buffered(),i=fl(e,t);return i.length&&t+3<=i.end(0)?(this.cancelTimer_(),this.seekTo(t),this.logger_("Stopped at "+t+" while inside a buffered region ["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var t=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(t,e)){var i=t.end(t.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.seekTo(i),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var n=this.tech_.buffered(),r=ml(n,e);if(this.videoUnderflow_(r,n,e))return this.cancelTimer_(),this.seekTo(e),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(0<r.length){var s=r.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+s+", seeking to "+r.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*s,e),!0}return!1}},{key:"afterSeekableWindow_",value:function(t,e,i,n){var r=3<arguments.length&&void 0!==n&&n;if(!t.length)return!1;var s=t.end(t.length-1)+.1;return!i.endList&&r&&(s=t.end(t.length-1)+3*i.targetDuration),s<e}},{key:"beforeSeekableWindow_",value:function(t,e){return!!(t.length&&0<t.start(0)&&e<t.start(0)-.1)}},{key:"videoUnderflow_",value:function(t,e,i){if(0===t.length){var n=this.gapFromVideoUnderflow_(e,i);if(n)return this.logger_("Encountered a gap in video from "+n.start+" to "+n.end+". Seeking to current time "+i),!0}return!1}},{key:"skipTheGap_",value:function(t){var e=this.tech_.buffered(),i=this.tech_.currentTime(),n=ml(e,i);this.cancelTimer_(),0!==n.length&&i===t&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",t,"nextRange start:",n.start(0)),this.seekTo(n.start(0)+1/30),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(t,e){for(var i=function(t){if(t.length<2)return ss.createTimeRanges();for(var e=[],i=1;i<t.length;i++){var n=t.end(i-1),r=t.start(i);e.push([n,r])}return ss.createTimeRanges(e)}(t),n=0;n<i.length;n++){var r=i.start(n),s=i.end(n);if(e-r<4&&2<e-r)return{start:r,end:s}}return null}}]),eu);function eu(t){var e=this;Io(this,eu),this.tech_=t.tech,this.seekable=t.seekable,this.seekTo=t.seekTo,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=dc("PlaybackWatcher"),this.logger_("initialize");function i(){return e.monitorCurrentTime_()}function n(){return e.techWaiting_()}function r(){return e.cancelTimer_()}function s(){return e.fixesBadSeeks_()}this.tech_.on("seekablechanged",s),this.tech_.on("waiting",n),this.tech_.on(Jc,r),this.tech_.on("canplay",i),this.dispose=function(){e.logger_("dispose"),e.tech_.off("seekablechanged",s),e.tech_.off("waiting",n),e.tech_.off(Jc,r),e.tech_.off("canplay",i),e.checkCurrentTimeTimeout_&&y.clearTimeout(e.checkCurrentTimeTimeout_),e.cancelTimer_()}}function iu(e,t){var i=0,n=0,r=ss.mergeOptions(ru,t);function s(){n&&e.currentTime(n)}function a(t){null!=t&&(n=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",s),e.src(t),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())}function o(){if(Date.now()-i<1e3*r.errorInterval)e.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(r.getSource&&"function"==typeof r.getSource)return i=Date.now(),r.getSource.call(e,a);ss.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}}function l(){e.off("loadedmetadata",s),e.off("error",o),e.off("dispose",l)}e.ready(function(){e.trigger({type:"usage",name:"hls-error-reload-initialized"})}),e.on("error",o),e.on("dispose",l),e.reloadSourceOnError=function(t){l(),iu(e,t)}}function nu(t){iu(this,t)}var ru={errorInterval:30,getSource:function(t){return t(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}};ss.use("*",function(e){return{setSource:function(t,e){e(null,t)},setCurrentTime:function(t){return e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(t),t},play:function(){e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(e.tech_.currentTime())}}});var su={PlaylistLoader:zo,Playlist:Cl,Decrypter:xo,AsyncStream:wo,decrypt:ko,utils:El,STANDARD_PLAYLIST_SELECTOR:function(){return function(t,e,i,n,r){var s=t.playlists.map(function(t){var e,i;return e=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width,i=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height,{bandwidth:t.attributes.BANDWIDTH||y.Number.MAX_VALUE,width:e,height:i,playlist:t}});wc(s,function(t,e){return t.bandwidth-e.bandwidth});var a=(s=s.filter(function(t){return!Cl.isIncompatible(t.playlist)})).filter(function(t){return Cl.isEnabled(t.playlist)});a.length||(a=s.filter(function(t){return!Cl.isDisabled(t.playlist)}));var o=a.filter(function(t){return t.bandwidth*kc.BANDWIDTH_VARIANCE<e}),l=o[o.length-1],c=o.filter(function(t){return t.bandwidth===l.bandwidth})[0];if(!1===r){var u=c||a[0]||s[0];return u?u.playlist:null}var d=o.filter(function(t){return t.width&&t.height});wc(d,function(t,e){return t.width-e.width});var h=d.filter(function(t){return t.width===i&&t.height===n});l=h[h.length-1];var p=h.filter(function(t){return t.bandwidth===l.bandwidth})[0],f=void 0,m=void 0,g=void 0;p||(m=(f=d.filter(function(t){return t.width>i||t.height>n})).filter(function(t){return t.width===f[0].width&&t.height===f[0].height}),l=m[m.length-1],g=m.filter(function(t){return t.bandwidth===l.bandwidth})[0]);var v=g||p||c||a[0]||s[0];return v?v.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt(Tc(this.tech_.el(),"width"),10),parseInt(Tc(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var t=this.playlists.master.playlists.filter(Cl.isEnabled);return wc(t,function(t,e){return Sc(t,e)}),t.filter(function(t){return Fl(t.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:Sc,comparePlaylistResolution:function(t,e){var i=void 0,n=void 0;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||y.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),i===(n=n||y.Number.MAX_VALUE)&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:i-n},xhr:nl()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(e){Object.defineProperty(su,e,{get:function(){return ss.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),kc[e]},set:function(t){ss.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?ss.log.warn("value of Hls."+e+" must be greater than or equal to 0"):kc[e]=t}})});function au(t){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(t)?"hls":/^application\/dash\+xml/i.test(t)?"dash":null}function ou(t,e){for(var i=e.media(),n=-1,r=0;r<t.length;r++)if(t[r].id===i.uri){n=r;break}t.selectedIndex_=n,t.trigger({selectedIndex:n,type:"change"})}var lu="videojs-vhs";su.canPlaySource=function(){return ss.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};function cu(t){var e=t.masterPlaylistController_.mainSegmentLoader_,i=t.masterPlaylistController_.audioSegmentLoader_,n=ss.players[t.tech_.options_.playerId];if(n.eme){var r=function(t,e,i){if(!t)return t;var n=void 0,r=void 0;if(i.mimeType_)n=e.mimeType_,r=i.mimeType_;else{var s=zl(e.mimeType_),a=s.parameters.codecs.split(","),o=void 0,l=void 0;a.forEach(function(t){t=t.trim(),ql(t)?o=t:Wl(t)&&(l=t)}),n=s.type+'; codecs="'+l+'"',r=s.type.replace("video","audio")+'; codecs="'+o+'"'}var c={},u=e.playlist_;for(var d in t)c[d]={audioContentType:r,videoContentType:n},u.contentProtection&&u.contentProtection[d]&&u.contentProtection[d].pssh&&(c[d].pssh=u.contentProtection[d].pssh),"string"==typeof t[d]&&(c[d].url=t[d]);return ss.mergeOptions(t,c)}(t.source_.keySystems,e,i);r&&(n.currentSource().keySystems=r,11!==ss.browser.IE_VERSION&&n.eme.initializeMediaKeys&&n.eme.initializeMediaKeys())}}function uu(){if(!window.localStorage)return null;var t=window.localStorage.getItem(lu);if(!t)return null;try{return JSON.parse(t)}catch(t){return null}}su.supportsNativeHls=function(){var e=d.createElement("video");if(!ss.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}(),su.supportsNativeDash=!!ss.getTech("Html5").isSupported()&&/maybe|probably/i.test(d.createElement("video").canPlayType("application/dash+xml")),su.supportsTypeNatively=function(t){return"hls"===t?su.supportsNativeHls:"dash"===t&&su.supportsNativeDash},su.isSupported=function(){return ss.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var du=ss.getComponent("Component"),hu=(Do(pu,du),Oo(pu,[{key:"setOptions_",value:function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=uu();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=kc.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===kc.INITIAL_BANDWIDTH,["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys"].forEach(function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function(t,e){var n=this;t&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=su,this.options_.sourceType=au(e),this.options_.seekTo=function(t){n.tech_.setCurrentTime(t),n.setCurrentTime(t)},this.masterPlaylistController_=new Kc(this.options_),this.playbackWatcher_=new tu(ss.mergeOptions(this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",function(){ss.players[n.tech_.options_.playerId].error(n.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):su.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=su.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var t=1/(this.bandwidth||1),e=void 0;return e=0<this.throughput?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){ss.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return vl(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return vl(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){n.options_.useBandwidthFromLocalStorage&&function(t){if(window.localStorage){var e=uu();e=e?ss.mergeOptions(e,t):t;try{window.localStorage.setItem(lu,JSON.stringify(e))}catch(t){return}}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){var i,t;t=(i=n).playlists,i.representations=function(){return t.master.playlists.filter(function(t){return!Jo(t)}).map(function(t,e){return new Zc(i,t,t.uri)})},cu(n)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return n.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(ss.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var i=this,t=ss.players[this.tech_.options_.playerId];t&&t.qualityLevels&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var e,t;e=i.qualityLevels_,(t=i).representations().forEach(function(t){e.addQualityLevel(t)}),ou(e,t.playlists)}),this.playlists.on("mediachange",function(){ou(i.qualityLevels_,i.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(t){this.masterPlaylistController_.setCurrentTime(t)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.hls&&delete this.tech_.hls,function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0}(pu.prototype.__proto__||Object.getPrototypeOf(pu.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function(t,e){return dl({playlist:this.masterPlaylistController_.media(),time:t,callback:e})}},{key:"seekToProgramTime",value:function(t,e,i,n){var r=!(2<arguments.length&&void 0!==i)||i,s=3<arguments.length&&void 0!==n?n:2;return hl({programTime:t,playlist:this.masterPlaylistController_.media(),retryCount:s,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:e})}}]),pu);function pu(t,e,i){Io(this,pu);var n=Ro(this,(pu.__proto__||Object.getPrototypeOf(pu)).call(this,e,i.hls));if(e.options_&&e.options_.playerId){var r=ss(e.options_.playerId);r.hasOwnProperty("hls")||Object.defineProperty(r,"hls",{get:function(){return ss.log.warn("player.hls is deprecated. Use player.tech().hls instead."),e.trigger({type:"usage",name:"hls-player-access"}),n},configurable:!0}),r.vhs=n,(r.dash=n).player_=r}if(n.tech_=e,n.source_=t,n.stats={},n.setOptions_(),n.options_.overrideNative&&e.overrideNativeAudioTracks&&e.overrideNativeVideoTracks)e.overrideNativeAudioTracks(!0),e.overrideNativeVideoTracks(!0);else if(n.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return n.on(d,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(t){var e=d.fullscreenElement||d.webkitFullscreenElement||d.mozFullScreenElement||d.msFullscreenElement;e&&e.contains(n.tech_.el())&&n.masterPlaylistController_.smoothQualityChange_()}),n.on(n.tech_,"seeking",function(){0===this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)}),n.on(n.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),n.on(n.tech_,"play",n.play),n}var fu={name:"videojs-http-streaming",VERSION:"1.11.2",canHandleSource:function(t,e){var i=ss.mergeOptions(ss.options,1<arguments.length&&void 0!==e?e:{});return fu.canPlayType(t.type,i)},handleSource:function(t,e,i){var n=ss.mergeOptions(ss.options,2<arguments.length&&void 0!==i?i:{});return e.hls=new hu(t,e,n),e.hls.xhr=nl(),e.hls.src(t.src,t.type),e.hls},canPlayType:function(t,e){var i=ss.mergeOptions(ss.options,1<arguments.length&&void 0!==e?e:{}).hls.overrideNative,n=au(t);return n&&(!su.supportsTypeNatively(n)||i)?"maybe":""}};return void 0!==ss.MediaSource&&void 0!==ss.URL||(ss.MediaSource=ic,ss.URL=nc),ic.supportsNativeMediaSources()&&ss.getTech("Html5").registerSourceHandler(fu,0),ss.HlsHandler=hu,ss.HlsSourceHandler=fu,ss.Hls=su,ss.use||ss.registerComponent("Hls",su),ss.options.hls=ss.options.hls||{},ss.registerPlugin?ss.registerPlugin("reloadSourceOnError",nu):ss.plugin("reloadSourceOnError",nu),ss}),function(H){"use strict";var z='<?xml version="1.0" encoding="utf-8"?><svg version="1.1"xmlns="http://www.w3.org/2000/svg"viewBox="0 12.705 512 486.59"x="0px" y="0px"xml:space="preserve"><polygon points="256.814,12.705 317.205,198.566 512.631,198.566 354.529,313.435 414.918,499.295 256.814,384.427 98.713,499.295 159.102,313.435 1,198.566 196.426,198.566 "/></svg>',n={starWidth:"32px",normalFill:"gray",ratedFill:"#f39c12",numStars:5,maxValue:5,precision:1,rating:0,fullStar:!1,halfStar:!1,readOnly:!1,spacing:"0px",rtl:!1,multiColor:null,onInit:null,onChange:null,onSet:null,starSvg:null},q={startColor:"#c0392b",endColor:"#f1c40f"};function W(t,e,i){return t===e?t=e:t===i&&(t=i),t}function V(t){return void 0!==t}var i=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i,G=function(t){if(!i.test(t))return null;var e=i.exec(t);return{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}};function X(t,e,i){var n=i/100*(e-t);return 1===(n=Math.round(t+n).toString(16)).length&&(n="0"+n),n}function Y(s,p){this.node=s.get(0);var i=this;s.empty().addClass("jq-ry-container");var f,n,m,g,v,t,e=H("<div/>").addClass("jq-ry-group-wrapper").appendTo(s),y=H("<div/>").addClass("jq-ry-normal-group").addClass("jq-ry-group").appendTo(e),r=H("<div/>").addClass("jq-ry-rated-group").addClass("jq-ry-group").appendTo(e),b=0,a=p.rating,o=!1;function l(t){V(t)||(t=p.rating);var e=(a=t)/f,i=e*m;1<e&&(i+=(Math.ceil(e)-1)*v),T(p.ratedFill),(i=p.rtl?100-i:i)<0?i=0:100<i&&(i=100),r.css("width",i+"%")}function c(){t=n*p.numStars+g*(p.numStars-1),m=n/t*100,v=g/t*100,s.width(t),l()}function u(t){var e=p.starWidth=t;return n=window.parseFloat(p.starWidth.replace("px","")),y.find("svg").attr({width:p.starWidth,height:e}),r.find("svg").attr({width:p.starWidth,height:e}),c(),s}function d(t){return p.spacing=t,g=parseFloat(p.spacing.replace("px","")),y.find("svg:not(:first-child)").css({"margin-left":t}),r.find("svg:not(:first-child)").css({"margin-left":t}),c(),s}function h(t){return p.normalFill=t,(p.rtl?r:y).find("svg").attr({fill:p.normalFill}),s}var _=p.ratedFill;function T(t){if(p.multiColor){var e=(a-b)/p.maxValue*100,i=p.multiColor||{};t=function(t,e,i){if(!t||!e)return null;i=V(i)?i:0,t=G(t),e=G(e);var n=X(t.r,e.r,i),r=X(t.b,e.b,i);return"#"+n+X(t.g,e.g,i)+r}(i.startColor||q.startColor,i.endColor||q.endColor,e)}else _=t;return p.ratedFill=t,(p.rtl?y:r).find("svg").attr({fill:p.ratedFill}),s}function w(t){t=!!t,p.rtl=t,h(p.normalFill),l()}function S(t){T((p.multiColor=t)||_)}function C(t){p.numStars=t,f=p.maxValue/p.numStars,y.empty(),r.empty();for(var e=0;e<p.numStars;e++)y.append(H(p.starSvg||z)),r.append(H(p.starSvg||z));return u(p.starWidth),h(p.normalFill),d(p.spacing),l(),s}function k(t){return p.maxValue=t,f=p.maxValue/p.numStars,p.rating>t&&O(t),l(),s}function x(t){return p.precision=t,O(p.rating),s}function E(t){return p.halfStar=t,s}function A(t){return p.fullStar=t,s}function P(t){var e,i,n,r,s,a=y.offset().left,o=a+y.width(),l=p.maxValue,c=t.pageX,u=0;if(c<a)u=b;else if(o<c)u=l;else{var d=(c-a)/(o-a);if(0<g)for(var h=d*=100;0<h;)m<h?(u+=f,h-=m+v):(u+=h/m*f,h=0);else u=d*p.maxValue;i=(e=u)%f,n=f/2,r=p.halfStar,((s=p.fullStar)||r)&&(s||r&&n<i?e+=f-i:(e-=i,0<i&&(e+=n))),u=e}return p.rtl&&(u=l-u),parseFloat(u)}function I(t){return p.readOnly=t,s.attr("readonly",!0),$(),t||(s.removeAttr("readonly"),s.on("mousemove",M).on("mouseenter",M).on("mouseleave",B).on("click",N).on("rateyo.init",U).on("rateyo.change",j).on("rateyo.set",F)),s}function O(t){var e=t,i=p.maxValue;return"string"==typeof e&&("%"===e[e.length-1]&&(e=e.substr(0,e.length-1),k(i=100)),e=parseFloat(e)),function(t,e,i){if(!(e<=t&&t<=i))throw Error("Invalid Rating, expected value between "+e+" and "+i)}(e,b,i),e=parseFloat(e.toFixed(p.precision)),W(parseFloat(e),b,i),p.rating=e,l(),o&&s.trigger("rateyo.set",{rating:e}),s}function L(t){return p.onInit=t,s}function D(t){return p.onSet=t,s}function R(t){return p.onChange=t,s}function M(t){var e=P(t).toFixed(p.precision),i=p.maxValue;l(e=W(parseFloat(e),b,i)),s.trigger("rateyo.change",{rating:e})}function B(){var t,e;e=!1,t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e||(l(),s.trigger("rateyo.change",{rating:p.rating}))}function N(t){var e=P(t).toFixed(p.precision);e=parseFloat(e),i.rating(e)}function U(t,e){p.onInit&&"function"==typeof p.onInit&&p.onInit.apply(this,[e.rating,i])}function j(t,e){p.onChange&&"function"==typeof p.onChange&&p.onChange.apply(this,[e.rating,i])}function F(t,e){p.onSet&&"function"==typeof p.onSet&&p.onSet.apply(this,[e.rating,i])}function $(){s.off("mousemove",M).off("mouseenter",M).off("mouseleave",B).off("click",N).off("rateyo.init",U).off("rateyo.change",j).off("rateyo.set",F)}this.rating=function(t){return V(t)?(O(t),s):p.rating},this.destroy=function(){var n,r;return p.readOnly||$(),Y.prototype.collection=(n=s.get(0),r=this.collection,H.each(r,function(t){if(n===this.node){var e=r.slice(0,t),i=r.slice(t+1,r.length);return r=e.concat(i),!1}}),r),s.removeClass("jq-ry-container").children().remove(),s},this.method=function(t){if(!t)throw Error("Method name not specified!");if(!V(this[t]))throw Error("Method "+t+" doesn't exist!");var e=Array.prototype.slice.apply(arguments,[]).slice(1);return this[t].apply(this,e)},this.option=function(t,e){if(!V(t))return p;var i;switch(t){case"starWidth":i=u;break;case"numStars":i=C;break;case"normalFill":i=h;break;case"ratedFill":i=T;break;case"multiColor":i=S;break;case"maxValue":i=k;break;case"precision":i=x;break;case"rating":i=O;break;case"halfStar":i=E;break;case"fullStar":i=A;break;case"readOnly":i=I;break;case"spacing":i=d;break;case"rtl":i=w;break;case"onInit":i=L;break;case"onSet":i=D;break;case"onChange":i=R;break;default:throw Error("No such option as "+t)}return V(e)?i(e):p[t]},C(p.numStars),I(p.readOnly),p.rtl&&w(p.rtl),this.collection.push(this),this.rating(p.rating,!0),o=!0,s.trigger("rateyo.init",{rating:p.rating})}function c(t,e){var i;return H.each(e,function(){if(t===this.node)return i=this,!1}),i}Y.prototype.collection=[],window.RateYo=Y,H.fn.rateYo=function(){return function(i){var s=Y.prototype.collection,t=H(this);if(0===t.length)return t;var e=Array.prototype.slice.apply(arguments,[]);if(0===e.length)i=e[0]={};else{if(1!==e.length||"object"!=typeof e[0]){if(1<=e.length&&"string"==typeof e[0]){var a=e[0],o=e.slice(1),l=[];return H.each(t,function(t,e){var i=c(e,s);if(!i)throw Error("Trying to set options before even initialization");var n=i[a];if(!n)throw Error("Method "+a+" does not exist!");var r=n.apply(i,o);l.push(r)}),l=1===l.length?l[0]:l}throw Error("Invalid Arguments")}i=e[0]}return i=H.extend({},n,i),H.each(t,function(){var t=c(this,s);if(t)return t;var e=H(this),n={},r=H.extend({},i);return H.each(e.data(),function(t,e){if(0===t.indexOf("rateyo")){var i=t.replace(/^rateyo/,"");i=i[0].toLowerCase()+i.slice(1),n[i]=e,delete r[i]}}),new Y(H(this),H.extend({},n,r))})}.apply(this,Array.prototype.slice.apply(arguments,[]))}}(window.jQuery),function(e,i){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("jquery")):e.jQueryBridget=i(e,e.jQuery)}(window,function(t,e){"use strict";var d=Array.prototype.slice,i=t.console,h=void 0===i?function(){}:function(t){i.error(t)};function n(c,r,u){(u=u||e||t.jQuery)&&(r.prototype.option||(r.prototype.option=function(t){u.isPlainObject(t)&&(this.options=u.extend(!0,this.options,t))}),u.fn[c]=function(t){if("string"!=typeof t)return n=t,this.each(function(t,e){var i=u.data(e,c);i?(i.option(n),i._init()):(i=new r(e,n),u.data(e,c,i))}),this;var e,s,a,o,l,n,i=d.call(arguments,1);return a=i,l="$()."+c+'("'+(s=t)+'")',(e=this).each(function(t,e){var i=u.data(e,c);if(i){var n=i[s];if(n&&"_"!=s.charAt(0)){var r=n.apply(i,a);o=void 0===o?r:o}else h(l+" is not a valid method")}else h(c+" not initialized. Cannot call methods, i.e. "+l)}),void 0!==o?o:e},s(u))}function s(t){!t||t&&t.bridget||(t.bridget=n)}return s(e||t.jQuery),n}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],r=0;r<i.length;r++){var s=i[r];n&&n[s]&&(this.off(t,s),delete n[s]),s.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function v(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}var i="undefined"==typeof console?function(){}:function(t){console.error(t)},y=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],b=y.length;function _(t){var e=getComputedStyle(t);return e||i("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}var T,w=!1;function S(t){if(!function(){if(!w){w=!0;var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style.boxSizing="border-box";var e=document.body||document.documentElement;e.appendChild(t);var i=_(t);T=200==Math.round(v(i.width)),S.isBoxSizeOuter=T,e.removeChild(t)}}(),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var e=_(t);if("none"==e.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<b;e++){t[y[e]]=0}return t}();var i={};i.width=t.offsetWidth,i.height=t.offsetHeight;for(var n=i.isBorderBox="border-box"==e.boxSizing,r=0;r<b;r++){var s=y[r],a=e[s],o=parseFloat(a);i[s]=isNaN(o)?0:o}var l=i.paddingLeft+i.paddingRight,c=i.paddingTop+i.paddingBottom,u=i.marginLeft+i.marginRight,d=i.marginTop+i.marginBottom,h=i.borderLeftWidth+i.borderRightWidth,p=i.borderTopWidth+i.borderBottomWidth,f=n&&T,m=v(e.width);!1!==m&&(i.width=m+(f?0:l+h));var g=v(e.height);return!1!==g&&(i.height=g+(f?0:c+p)),i.innerWidth=i.width-(l+h),i.innerHeight=i.height-(c+p),i.outerWidth=i.width+u,i.outerHeight=i.height+d,i}}return S}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var i=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(t,e){return t[i](e)}}),function(e,i){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("desandro-matches-selector")):e.fizzyUIUtils=i(e,e.matchesSelector)}(window,function(c,s){var u={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},e=Array.prototype.slice;u.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?e.call(t):[t]},u.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},u.getParent=function(t,e){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,s(t,e))return t},u.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},u.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},u.filterFindElements=function(t,n){t=u.makeArray(t);var r=[];return t.forEach(function(t){if(t instanceof HTMLElement)if(n){s(t,n)&&r.push(t);for(var e=t.querySelectorAll(n),i=0;i<e.length;i++)r.push(e[i])}else r.push(t)}),r},u.debounceMethod=function(t,e,n){n=n||100;var r=t.prototype[e],s=e+"Timeout";t.prototype[e]=function(){var t=this[s];clearTimeout(t);var e=arguments,i=this;this[s]=setTimeout(function(){r.apply(i,e),delete i[s]},n)}},u.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},u.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var d=c.console;return u.htmlInit=function(o,l){u.docReady(function(){var t=u.toDashed(l),r="data-"+t,e=document.querySelectorAll("["+r+"]"),i=document.querySelectorAll(".js-"+t),n=u.makeArray(e).concat(u.makeArray(i)),s=r+"-options",a=c.jQuery;n.forEach(function(e){var t,i=e.getAttribute(r)||e.getAttribute(s);try{t=i&&JSON.parse(i)}catch(t){return void(d&&d.error("Error parsing "+r+" on "+e.className+": "+t))}var n=new o(e,t);a&&a.data(e,l,n)})})},u}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){"use strict";var i=document.documentElement.style,n="string"==typeof i.transition?"transition":"WebkitTransition",r="string"==typeof i.transform?"transform":"WebkitTransform",s={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[n],a={transform:r,transition:n,transitionDuration:n+"Duration",transitionProperty:n+"Property",transitionDelay:n+"Delay"};function o(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var l=o.prototype=Object.create(t.prototype);l.constructor=o,l._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},l.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.getSize=function(){this.size=e(this.element)},l.css=function(t){var e=this.element.style;for(var i in t){e[a[i]||i]=t[i]}},l.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=t[e?"left":"right"],r=t[i?"top":"bottom"],s=parseFloat(n),a=parseFloat(r),o=this.layout.size;-1!=n.indexOf("%")&&(s=s/100*o.width),-1!=r.indexOf("%")&&(a=a/100*o.height),s=isNaN(s)?0:s,a=isNaN(a)?0:a,s-=e?o.paddingLeft:o.paddingRight,a-=i?o.paddingTop:o.paddingBottom,this.position.x=s,this.position.y=a},l.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),r=i?"paddingLeft":"paddingRight",s=i?"left":"right",a=i?"right":"left",o=this.position.x+t[r];e[s]=this.getXValue(o),e[a]="";var l=n?"paddingTop":"paddingBottom",c=n?"top":"bottom",u=n?"bottom":"top",d=this.position.y+t[l];e[c]=this.getYValue(d),e[u]="",this.css(e),this.emitEvent("layout",[this])},l.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},l.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},l._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,r=t==this.position.x&&e==this.position.y;if(this.setPosition(t,e),!r||this.isTransitioning){var s=t-i,a=e-n,o={};o.transform=this.getTranslate(s,a),this.transition({to:o,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},l.getTranslate=function(t,e){return"translate3d("+(t=this.layout._getOption("originLeft")?t:-t)+"px, "+(e=this.layout._getOption("originTop")?e:-e)+"px, 0)"},l.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},l.moveTo=l._transitionTo,l.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},l._nonTransition=function(t){for(var e in this.css(t.to),t.isCleaning&&this._removeStyles(t.to),t.onTransitionEnd)t.onTransitionEnd[e].call(this)},l.transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);this.element.offsetHeight;0}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var c="opacity,"+r.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()});l.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;t="number"==typeof t?t+"ms":t,this.css({transitionProperty:c,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(s,this,!1)}},l.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},l.onotransitionend=function(t){this.ontransitionend(t)};var u={"-webkit-transform":"transform"};l.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,i=u[t.propertyName]||t.propertyName;if(delete e.ingProperties[i],function(t){for(var e in t)return;return 1}(e.ingProperties)&&this.disableTransition(),i in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[i]),i in e.onEnd)e.onEnd[i].call(this),delete e.onEnd[i];this.emitEvent("transitionEnd",[this])}},l.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(s,this,!1),this.isTransitioning=!1},l._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var d={transitionProperty:"",transitionDuration:"",transitionDelay:""};return l.removeTransitionStyles=function(){this.css(d)},l.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},l.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},l.remove=function(){n&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),this.hide()):this.removeElem()},l.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},l.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},l.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var i in e)return i},l.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},l.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},l.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},o}),function(r,s){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(t,e,i,n){return s(r,t,e,i,n)}):"object"==typeof module&&module.exports?module.exports=s(r,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):r.Outlayer=s(r,r.EvEmitter,r.getSize,r.fizzyUIUtils,r.Outlayer.Item)}(window,function(t,e,r,s,n){"use strict";function i(){}var a=t.console,o=t.jQuery,l=0,c={};function u(t,e){var i=s.getQueryElement(t);if(i){this.element=i,o&&(this.$element=o(this.element)),this.options=s.extend({},this.constructor.defaults),this.option(e);var n=++l;this.element.outlayerGUID=n,(c[n]=this)._create(),this._getOption("initLayout")&&this.layout()}else a&&a.error("Bad element for "+this.constructor.namespace+": "+(i||t))}u.namespace="outlayer",u.Item=n,u.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var d=u.prototype;function h(t){function e(){t.apply(this,arguments)}return(e.prototype=Object.create(t.prototype)).constructor=e}s.extend(d,e.prototype),d.option=function(t){s.extend(this.options,t)},d._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},u.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},d._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),s.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},d.reloadItems=function(){this.items=this._itemize(this.element.children)},d._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],r=0;r<e.length;r++){var s=new i(e[r],this);n.push(s)}return n},d._filterFindItemElements=function(t){return s.filterFindElements(t,this.options.itemSelector)},d.getItemElements=function(){return this.items.map(function(t){return t.element})},d.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},d._init=d.layout,d._resetLayout=function(){this.getSize()},d.getSize=function(){this.size=r(this.element)},d._getMeasurement=function(t,e){var i,n=this.options[t];n?("string"==typeof n?i=this.element.querySelector(n):n instanceof HTMLElement&&(i=n),this[t]=i?r(i)[e]:n):this[t]=0},d.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},d._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},d._layoutItems=function(t,i){if(this._emitCompleteOnItems("layout",t),t&&t.length){var n=[];t.forEach(function(t){var e=this._getItemLayoutPosition(t);e.item=t,e.isInstant=i||t.isLayoutInstant,n.push(e)},this),this._processLayoutQueue(n)}},d._getItemLayoutPosition=function(){return{x:0,y:0}},d._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},d.updateStagger=function(){var t=this.options.stagger;if(null!=t)return this.stagger=function(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),i=e&&e[1],n=e&&e[2];if(!i.length)return 0;i=parseFloat(i);var r=p[n]||1;return i*r}(t),this.stagger;this.stagger=0},d._positionItem=function(t,e,i,n,r){n?t.goTo(e,i):(t.stagger(r*this.stagger),t.moveTo(e,i))},d._postLayout=function(){this.resizeContainer()},d.resizeContainer=function(){if(this._getOption("resizeContainer")){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},d._getContainerSize=i,d._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},d._emitCompleteOnItems=function(e,t){var i=this;function n(){i.dispatchEvent(e+"Complete",null,[t])}var r=t.length;if(t&&r){var s=0;t.forEach(function(t){t.once(e,a)})}else n();function a(){++s==r&&n()}},d.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),o)if(this.$element=this.$element||o(this.element),e){var r=o.Event(e);r.type=t,this.$element.trigger(r,i)}else this.$element.trigger(t,i)},d.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},d.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},d.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},d.unstamp=function(t){(t=this._find(t))&&t.forEach(function(t){s.removeFrom(this.stamps,t),this.unignore(t)},this)},d._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),t=s.makeArray(t)},d._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},d._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},d._manageStamp=i,d._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,n=r(t);return{left:e.left-i.left-n.marginLeft,top:e.top-i.top-n.marginTop,right:i.right-e.right-n.marginRight,bottom:i.bottom-e.bottom-n.marginBottom}},d.handleEvent=s.handleEvent,d.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},d.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},d.onresize=function(){this.resize()},s.debounceMethod(u,"onresize",100),d.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},d.needsResizeLayout=function(){var t=r(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},d.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},d.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},d.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},d.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var i=this.updateStagger();t.forEach(function(t,e){t.stagger(e*i),t.reveal()})}},d.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var i=this.updateStagger();t.forEach(function(t,e){t.stagger(e*i),t.hide()})}},d.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},d.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},d.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},d.getItems=function(t){t=s.makeArray(t);var i=[];return t.forEach(function(t){var e=this.getItem(t);e&&i.push(e)},this),i},d.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(t){t.remove(),s.removeFrom(this.items,t)},this)},d.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();var e=this.element.outlayerGUID;delete c[e],delete this.element.outlayerGUID,o&&o.removeData(this.element,this.constructor.namespace)},u.data=function(t){var e=(t=s.getQueryElement(t))&&t.outlayerGUID;return e&&c[e]},u.create=function(t,e){var i=h(u);return i.defaults=s.extend({},u.defaults),s.extend(i.defaults,e),i.compatOptions=s.extend({},u.compatOptions),i.namespace=t,i.data=u.data,i.Item=h(n),s.htmlInit(i,t),o&&o.bridget&&o.bridget(t,i),i};var p={ms:1,s:1e3};return u.Item=n,u}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,c){var e=t.create("masonry");e.compatOptions.fitWidth="isFitWidth";var i=e.prototype;return i._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},i.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],e=t&&t.element;this.columnWidth=e&&c(e).outerWidth||this.containerWidth}var i=this.columnWidth+=this.gutter,n=this.containerWidth+this.gutter,r=n/i,s=i-n%i;r=Math[s&&s<1?"round":"floor"](r),this.cols=Math.max(r,1)},i.getContainerWidth=function(){var t=this._getOption("fitWidth")?this.element.parentNode:this.element,e=c(t);this.containerWidth=e&&e.innerWidth},i._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,i=Math[e&&e<1?"round":"ceil"](t.size.outerWidth/this.columnWidth);i=Math.min(i,this.cols);for(var n=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](i,t),r={x:this.columnWidth*n.col,y:n.y},s=n.y+t.size.outerHeight,a=i+n.col,o=n.col;o<a;o++)this.colYs[o]=s;return r},i._getTopColPosition=function(t){var e=this._getTopColGroup(t),i=Math.min.apply(Math,e);return{col:e.indexOf(i),y:i}},i._getTopColGroup=function(t){if(t<2)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;n<i;n++)e[n]=this._getColGroupY(n,t);return e},i._getColGroupY=function(t,e){if(e<2)return this.colYs[t];var i=this.colYs.slice(t,t+e);return Math.max.apply(Math,i)},i._getHorizontalColPosition=function(t,e){var i=this.horizontalColIndex%this.cols;i=1<t&&i+t>this.cols?0:i;var n=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=n?i+t:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,t)}},i._manageStamp=function(t){var e=c(t),i=this._getElementOffset(t),n=this._getOption("originLeft")?i.left:i.right,r=n+e.outerWidth,s=Math.floor(n/this.columnWidth);s=Math.max(0,s);var a=Math.floor(r/this.columnWidth);a-=r%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var o=(this._getOption("originTop")?i.top:i.bottom)+e.outerHeight,l=s;l<=a;l++)this.colYs[l]=Math.max(o,this.colYs[l])},i._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},i._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},i.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},e});